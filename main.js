"ui";
ui.layout(
    <drawer id="drawer">
        <frame id="body" h="*" w="*">
        </frame>
    </drawer>
)

function setContainer(v) {
    ui.body.removeAllViews();
    ui.body.addView(v, new android.widget.FrameLayout.LayoutParams(-1, -1));
}

var page_1 = {
    ui: ui.inflate(
        <frame>
            <vertical >
                <horizontal >
                    <text id="versions" text="24.12.31.1" textColor="red" />
                    <text id="更新脚本" marginLeft="10" text="更新脚本" h="30" textSize="12" />
                    <text id="进度" text="" h="30" textSize="12" />
                    <checkbox id="log" h="35" w="66" textSize="12" marginLeft="150" text="LOG" />
                </horizontal>
                <horizontal >
                    <text text="收益:" textColor="red" />
                    <text id="收益记录1" text="" marginLeft="5" w="87" textColor="red" />
                    <text id="收益记录2" text="" marginLeft="5" w="87" textColor="red" />
                    <text id="收益记录3" text="" marginLeft="5" w="87" textColor="red" />
                </horizontal>
                <horizontal h="25" >
                    <text text="账号:" layout_gravity="center" />
                    <input id="userName" hint="请输入游戏账号" h="32" paddingTop="3" textSize="12" w="190" singleLine="true" />
                    <text text="密码:" layout_gravity="center" />
                    <input id="password" hint="请输入密码" h="32" paddingTop="3" textSize="12" w="110" singleLine="true" />
                </horizontal>
                <horizontal h="25"  >
                    <text text="辅助邮箱:" layout_gravity="center" />
                    <input id="email" hint="请输入辅助邮箱" h="32" paddingTop="3" textSize="12" w="245" singleLine="true" />
                    <button id="qingkong" w="55" h="35" textSize="14" paddingTop="8" style="Widget.AppCompat.Button.Colored" gravity="center_vertical" text="清空" layout_gravity="center" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="主线" id="主线任务" textSize="14" />
                    <checkbox text="二阶主线" id="三五后主线" textSize="14" />
                    {/* <checkbox text="学习制造" id="学习制造" textSize="14" /> */}
                    <checkbox text="绿装提升" id="主线提升" textSize="14" />
                    <checkbox text="清药" id="清空药水" textSize="14" />
                    <checkbox text="识区" id="识别游戏大区" textSize="14" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="蓝装提升" id="三十五级提升" textSize="14" />
                    <checkbox text="买技能书" id="购买技能书" textSize="14" />
                    <checkbox text="药水设定" id="药水设定" textSize="14" />
                    <checkbox text="钱包地址" id="钱包地址" textSize="14" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="强化" id="单强化" textSize="14" />
                    <checkbox text="灌注" id="单灌注" textSize="14" />
                    <checkbox text="洗练" id="单洗练" textSize="14" />
                    <checkbox text="二转" id="二转" textSize="14" />
                    <checkbox text="24h币价" id="二十四小时币价" textSize="14" />
                </horizontal>
                {/* 副本已变更为整数 */}
                <radiogroup orientation="horizontal" h="25">
                    <radio text="30级" id="三十五" textSize="14" checked="true" />
                    <radio text="40级" id="四十" textSize="14" />
                    <radio text="50级" id="四十五" textSize="14" />
                    <radio text="60级" id="五十" textSize="14" />
                </radiogroup>
                <radiogroup orientation="horizontal" h="25">
                    <radio text="小药" id="小药水" checked="true" textSize="14" />
                    <radio text="中药" id="中药水" textSize="14" />
                </radiogroup>
                <horizontal h="25">
                    {/* <checkbox text="50级野外" id="巴斯锂野外"  textSize="14" /> */}
                    <checkbox text="交易" id="交易" checked="true" textSize="14" />
                    {/* <text text="时间(时):" marginLeft="7" textColor="#000000" /> */}
                    {/* <input id="交易时间" textSize="12" w="35" singleLine="true" digit="1234567890" /> */}
                    <radiogroup orientation="horizontal">
                        <text text="→交易类型:" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                        <radio text="最低" id="最低价" checked="true" textSize="14" />
                        <radio text="平均" id="平均价" textSize="14" />
                        <radio text="上浮" id="上浮价" textSize="14" />
                    </radiogroup>
                </horizontal>
                <horizontal orientation="horizontal" h="25">
                    <checkbox text="野外" id="野外挂机选项" textSize="14" />
                    <checkbox text="委托" id="委托" textSize="14" />
                    <checkbox text="日副本" id="日副本" textSize="14" />
                    <checkbox text="经验本" id="经验本" textSize="14" />
                    <checkbox text="auto" id="自动选择挂机点" textSize="14" checked="true" />
                    {/* <text text="时间(时):" marginLeft="7" textColor="#000000" />
                    <input id="日副本时间" textSize="12" w="35" singleLine="true" digit="1234567890" /> */}
                </horizontal>
                <horizontal h="25">
                    <checkbox text="周本" id="周副本" textSize="14" layout_gravity="center" />
                    <text text="时间(星期):" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                    <input id="周本时间" textSize="12" w="35" h="32" singleLine="true" digit="0123456" paddingTop="3" />
                    <checkbox text="区本" id="区本" marginLeft="10" textSize="14" layout_gravity="center" />
                    <text text="时间(星期):" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                    <input id="区本时间" textSize="12" w="35" h="32" singleLine="true" digit="0123456" paddingTop="3" />
                </horizontal>
                <horizontal orientation="horizontal" h="25">
                    <checkbox text="激战地" id="激战地选项" textSize="14" />
                    <spinner id="激战地选择项" popupBackground="#d0d0d0" textSize="14" entries="40级|45级|50级|55级" h="20" w="100" />
                    <text marginLeft="10" text="野外(防):" textColor="#000000" />
                    <spinner id="spinner" popupBackground="#d0d0d0" textSize="14" entries="120|140|150|160|180|200|220|240|250|270|280|300|310" h="20" w="100" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="每日制造" id="每日制造" textSize="14" />
                    <checkbox text="白嫖属性" id="白嫖属性" textSize="14" />
                    <checkbox text="查看物价" id="查看物价" textSize="14" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="自动提升→" id="自动提升" textSize="14" checked="true" />
                    <text text="随机间隔(天):" textSize="14" textColor="#000000" layout_gravity="center" />
                    <input id="自动提升属性时间" text="3" textSize="12" w="35" h="32" singleLine="true" digit="0123456789." paddingTop="3" />
                    <checkbox text="技能书" id="自动购买技能书" textSize="14" checked="true" />
                </horizontal>
                <horizontal h="25">
                    <checkbox text="工会任务" id="工会任务" textSize="14" />
                    <checkbox text="商城活动" id="商城活动物质" textSize="14" />
                    <checkbox text="仓库" id="放入仓库" textSize="14" />
                    <checkbox text="环境优化" id="环境优化" textSize="14" />
                </horizontal>
                <horizontal h="25">
                    {/* <checkbox text="自动使用药水" id="自动使用药水" textSize="14" /> */}
                    {/* <checkbox text="三倍经验" id="三倍经验" textSize="14" /> */}
                    <text text="激战地NPC:" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                    <checkbox text="买材料" id="每日换购材料箱" textSize="14" checked="true" />
                    <checkbox text="启动延时" id="启动延时" textSize="14" />
                    <checkbox text="自动铸币" id="自动铸币" textSize="14" />
                    {/* <checkbox text="买铜钱" id="每日换购铜钱箱" textSize="14" checked="true" />
                    <checkbox text="买经验药" id="每日换购经验药" textSize="14" checked="true" /> */}
                </horizontal>

                <horizontal h="25">
                    <checkbox text="谷歌登录" id="Google登录" textSize="14" />
                    <radiogroup orientation="horizontal">
                        <text text="随机时间:" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                        <radio text="2小时" id="RandomTimeMAX" checked="true" textSize="14" />
                        <radio text="5分钟" id="RandomTimeMIN" textSize="14" />
                    </radiogroup>
                </horizontal>

                <horizontal h="25">
                    {/* <text marginLeft="10" text="买材料箱:" textColor="#000000" /> */}
                    <text text="分解材料:" marginLeft="7" textSize="14" textColor="#000000" layout_gravity="center" />
                    {/* <checkbox text="激战地" id="图鉴材料分解" textSize="14" />
                    <checkbox text="野外" id="野外图鉴材料分解" textSize="14" /> */}
                    <checkbox text="自动" id="自动分解" textSize="14" />
                    <checkbox text="清除脚本缓存" id="清除脚本缓存" textSize="14" />
                    {/* <checkbox text="绿级" id="每日购买绿级材料箱" textSize="14" /> */}
                </horizontal>
                <radiogroup orientation="horizontal" >
                    {/* <input text = "0.75" id = "输入币价"></input> */}
                    {/* <button id="发送币价" marginTop="10" w="50" style="Widget.AppCompat.Button.Colored" text="发" /> */}
                    <button id="start" marginLeft="100" marginTop="10" w="150" style="Widget.AppCompat.Button.Colored" text="启动" />
                    <button id="清空所有选项" marginTop="10" w="60" marginLeft="30" style="Widget.AppCompat.Button.Colored" text="重置" />
                </radiogroup>
            </vertical>
        </frame>
    ),
    initList: function () {
        ui.收益记录1.on("click", () => {
            page_2.activate()
            var 当月 = new Date().getMonth() + 1
            if (当月 == "1") {
                var 前俩月 = "11"
            } else if (当月 == "2") {
                var 前俩月 = "12"
            } else {
                var 前俩月 = (parseInt(当月) - 2).toString()
            }
            ui.toolbar.setTitle(前俩月 + "月详细收益")
            if (storage.get(前俩月 + "月详细") != null) {
                ui.月详情.setText(storage.get(前俩月 + "月详细"))
            } else {
                ui.月详情.setText("无记录")
            }
        })
        ui.收益记录2.on("click", () => {
            page_2.activate()
            var 当月 = new Date().getMonth() + 1
            if (当月 == "1") {
                var 前一月 = "12"
            } else {
                var 前一月 = (parseInt(当月) - 1).toString()
            }
            ui.toolbar.setTitle(前一月 + "月详细收益")
            if (storage.get(前一月 + "月详细") != null) {
                ui.月详情.setText(storage.get(前一月 + "月详细"))
            } else {
                ui.月详情.setText("无记录")
            }
        })
        ui.收益记录3.on("click", () => {
            page_2.activate()
            var 当月 = new Date().getMonth() + 1
            ui.toolbar.setTitle(当月 + "月详细收益")
            if (storage.get(当月 + "月详细") != null) {
                ui.月详情.setText(storage.get(当月 + "月详细"))
            } else {
                ui.月详情.setText("无记录")
            }
        })
    },
    activate: function () {
        setContainer(this.ui);
        if (!this.inited) this.initList();
        this.inited = true;
    }
}

//MohammadAnzi133@gmail.com---fgwvxxgku7---beckerjubeumd@outlook.com
var page_2 = {
    ui: ui.inflate(
        <frame>
            <vertical w="*" h="*" bg="#FFFFFF">
                <vertical>
                    <appbar>
                        <horizontal>
                            <toolbar id="toolbar" title="" />
                            <button id="change_to_page_1" marginLeft="160" marginTop="10" h="35" w="73" textSize="12" style="Widget.AppCompat.Button.Colored" text="回主页" />
                        </horizontal>
                    </appbar>
                    <input id="月详情"></input>
                </vertical>
            </vertical>
        </frame>
    ),
    initList: function () {
        ui.change_to_page_1.on("click", () => {
            page_1.activate()
        })
    },
    activate: function () {
        setContainer(this.ui);
        if (!this.inited) this.initList();
        this.inited = true;
    }
}

//packageName = fun.kitsunebi.kitsunebi4android
page_1.activate()
console.setGlobalLogConfig({
    "file": "/sdcard/YEYA-log.txt",
    "maxFileSize": 1024 * 1024,
    "maxBackupSize": 10,
    "filePattern": "%d{dd日}%m%n"
});

importPackage(Packages["okhttp3"]);



var 任务状态 = "挂机"


var 屏蔽模块 = false
var 开始铸币 = false
var 正在铸币 = false
var 公会捐献随机时间 = random(0, 82800)
var 使用背包物品随机时间 = random(0, 82800)
var 自动制作材料随机时间 = random(0, 82800)
var 设备id = device.getAndroidId()
var 区副本状态 = false
var 激战地逃跑次数限制 = 5
var 二十四小时币价 = false
var 区本逃跑次数限制 = 5
var 操作钱包中 = false
var 自动提升属性时间 = 0
var 还未制造蓝装 = true
var 还未制造绿装 = true
var 线程控制 = false
var 无可用材料箱 = false
var 总提示 = ""
var 登录点击计次 = 0
var RandomTimeMAX = false
var 节电模式判断掉线时间戳 = new Date().getTime()
var 节电拍卖行随机小时 = random(1, 23)
var 节电拍卖行随机分钟 = random(1, 40)
var 不选区 = true
var 领取邮件时间偏移 = random(1, 40)
var 清空药水 = false
var userName = ""
var password = ""
var email = ""
var Google登录 = false
// var 自动使用药水 = false
var 药水上次检测 = 0
var 判定背包满检测时间 = 0
var 野外跳转时间 = 0
var 激战地跳转时间 = 0
var 啥也没找到 = 0
var 等待游戏启动 = 0
var 重复点击坐标次数 = 0
var 点击位置判定X = 0
var 点击位置判定Y = 0
var 邮件领取 = true
//C:\fan\项目\夜鸦国际服\main.js
var 交易线程 = false
// var 今日可交易 = true
var 激战地选项 = false
var 邮件领取时间 = "25"
var 交易时间 = "32"
var 活动物资购买时间 = "32"
var 查看物价时间 = "32"
var 使用背包物品日期 = "32"
var 设置扫描时间 = "32"
var 接取工会任务时间 = "32"
var 记录重复点击次数 = []

var 购买决心技能 = true
// var 白嫖属性时间 = "32"
var 看人数随机时间 = random(1800, 3600)
// var 看人数随机时间 = random(30, 60)
var 日副本线程 = false
var 周副本线程 = false
var 激战地线程 = false
var 区副本线程 = false
var 委托线程 = false
var 挂机线程 = false
var 经验本线程 = false
var 判定卡死 = 0
// var 日副本今日记录 = "8"
var storage = storages.create("fyl");
var 执行 = true
var 参数 = []
var 截图权限请求 = true
var 购买三倍经验 = "32"
var 重连中控记录时间 = 0
var 重连随机时间 = random(0, 1200)
// var 重连随机时间 = random(20 , 60)
var 强制委托 = false
var 委托时间记录 = new Date().getTime()
var 卷轴判定时间 = "25"
var window = null
var 钱包地址 = false
if (storage.get("日副本记录") == null) {
    storage.put("日副本记录", "8")
}
if (storage.get("区副本修复装备次数") == null) {
    storage.put("区副本修复装备次数", "0")
}
if (storage.get("活动本今日记录") == null) {
    storage.put("活动本今日记录", "32")
}

if (storage.get("记录铸币时间") == null) {
    storage.put("记录铸币时间", "0")
}
if (storage.get("跳转时间记录") == null) {
    storage.put("跳转时间记录", "0")
}
if (storage.get("随机跳转时间") == null) {
    storage.put("随机跳转时间", random(30, 60).toString())
}

if (storage.get("防御") == null) {
    if (storage.get("自动挂机点测试") != null) {
        storage.put("防御", storage.get("自动挂机点测试"))
    }
}
if (storage.get("重新设置买药") == null) {
    storage.put("重新设置买药", false)
}

// if (storage.get("自动灌注随机时间测试") == null) {
//     storage.put("自动灌注随机时间测试", random(24, 48).toString())
// }
// if (storage.get("自动灌注记录时间") == null) {
//     storage.put("自动灌注记录时间", (new Date().getTime() / (1000 * 60*60)).toString())
// }
if (storage.get("拿出可交易时间") == null) {
    storage.put("拿出可交易时间", new Date().getTime() / (1000 * 60))
}

if (storage.get("拿出可交易随机时间2") == null) {
    storage.put("拿出可交易随机时间2", random((1 * 60 * 24), (2 * 60 * 24)).toString())
}

if (storage.get("世界boss随机分钟") == null) {
    storage.put("世界boss随机分钟", random(50, 55).toString())

}
log("世界boss随机分钟为:" + storage.get("世界boss随机分钟"))

if (storage.get("经验本今日记录") == null) {
    storage.put("经验本今日记录", "32")
}
if (storage.get("区副本时间记录") == null) {
    storage.put("区副本时间记录", "0")
}

if (storage.get("查看物价时间记录") == null) {
    storage.put("查看物价时间记录", "0")
}

if (storage.get("购买技能书随机时间") == null || storage.get("购买技能书随机时间") > 72) {
    storage.put("购买技能书随机时间", random(24, 72).toString())
}

if (storage.get("购买技能书记录时间") == null) {
    storage.put("购买技能书记录时间", new Date().getTime() / (1000 * 60 * 60))
}

if (storage.get("随机前往队伍副本") == null) {
    storage.put("随机前往队伍副本", random(4, 20).toString())
}
if (storage.get("记录队伍副本次数日期") == null) {
    storage.put("记录队伍副本次数日期", new Date().getDate().toString())
}


// log("购买技能书记录小时:" + storage.get("购买技能书记录时间") + ",重新随机小时:" + storage.get("购买技能书随机时间"))

if (storage.get("周副本时间记录") == null) {
    storage.put("周副本时间记录", "0")
}

if (storage.get("刷金币计时") == null) {
    storage.put("刷金币计时", new Date().getTime() / (1000 * 60 * 60).toString())
}

if (storage.get("飞行器固定穿戴时间") == null) {
    storage.put("飞行器固定穿戴时间", new Date().getTime() / (1000 * 60).toString())
}

if (storage.get("飞行器随机穿戴时间") == null) {
    storage.put("飞行器随机穿戴时间", random(4320, 5760).toString())
}

if (storage.get("看pvp退节电设置随机时间") == null) {
    storage.put("看pvp退节电设置随机时间", "0")
}

if (storage.get("看pvp退节电上次记录时间") == null) {
    storage.put("看pvp退节电上次记录时间", "0")
}


if (storage.get("自动识别属性随机时间") == null) {
    storage.put("自动识别属性随机时间", random(1440, 2880).toString())
}

if (storage.get("上次识别属性时间测试12") == null) {
    storage.put("上次识别属性时间测试12", "0")//初始化识别属性时间
}


if (storage.get("每周放入仓库时间记录7") == null) {
    storage.put("每周放入仓库时间记录7", new Date().getTime() / (1000 * 60).toString())//初始化识别属性时间
}

if (storage.get("每周放入仓库随机时间") == null) {
    storage.put("每周放入仓库随机时间", random(10080, 11520).toString())//初始化识别属性时间
}

if (storage.get("上次仓库时间2") == null) {
    storage.put("上次仓库时间2", "0")//初始化识别属性时间
}

storage.put("收藏图鉴版本号", "3")
if (storage.get("收藏图鉴记录") == null) {
    storage.put("收藏图鉴记录", "0")
}

if (storage.get("记录今日次数") == null) {
    storage.put("记录今日次数", "32")
}

if (storage.get("激战地今日逃跑次数") == null) {
    storage.put("激战地今日逃跑次数", "0")
}

if (storage.get("区本今日逃跑次数") == null) {
    storage.put("区本今日逃跑次数", "0")
}


if (storage.get("自动制作材料时间") == null) {
    log("赋予自动制作材料时间")
    storage.put("自动制作材料时间", "32")
}

if (storage.get("仓库存放时间") == null) {
    log("赋予仓库存放时间")
    storage.put("仓库存放时间", "31")
}

if (storage.get("购买技能时间") == null) {
    log("赋予仓库存放时间")
    storage.put("购买技能时间", "31")
}


if (storage.get("自动提升上次提升时间") == null) {
    storage.put("自动提升上次提升时间", (new Date().getTime() / (1000 * 60)).toString())
}

if (storage.get("今日购买商城属性药水记录") == null) {
    log("赋予购买商城属性药水时间")
    storage.put("今日购买商城属性药水记录", "32")
}

// if (storage.get("白嫖属性时间") == null) {
//     log("白嫖属性时间")
//     storage.put("白嫖属性时间", "32")
// }

if (storage.get("白嫖属性时间戳") == null) {
    log("白嫖属性时间")
    storage.put("白嫖属性时间戳", "1712620800000")
}


if (storage.get("购买材料箱") == null) {
    log("赋予购买材料箱日期")
    storage.put("购买材料箱", "32")
}

if (storage.get("今日委托") == null) {
    log("赋予委托日期")
    storage.put("今日委托", "32")
}

if (storage.get("工会每日捐献日期") == null) {
    log("赋予工会每日捐献日期")
    storage.put("工会每日捐献日期", "32")
}

// if (storage.get("自动使用药水时间") == null) {
//     log("赋予自动使用药水时间")
//     storage.put("自动使用药水时间", "32")
// }

if (storage.get("自动使用药水时间戳") == null) {
    log("赋予自动使用药水时间")
    storage.put("自动使用药水时间戳", "1712620800000")
}

if (storage.get("拍卖行记录时间") == null) {
    log("拍卖行记录时间")
    storage.put("拍卖行记录时间", "0")
}

if (storage.get("拍卖行随机时间") == null) {
    log("拍卖行随机时间")
    storage.put("拍卖行随机时间", random(720, 1440).toString())
}


if (storage.get("一键存放时间") == null) {
    log("赋予一键存放时间")
    storage.put("一键存放时间", "32")
}
//副本拥挤
if (storage.get("日副本拥挤时间戳") == null) {
    storage.put("日副本拥挤时间戳", "1712620800000")
}

if (storage.get("区副本拥挤时间戳") == null) {
    storage.put("区副本拥挤时间戳", "1712620800000")
}

if (storage.get("周副本拥挤时间戳") == null) {
    storage.put("周副本拥挤时间戳", "1712620800000")
}

if (storage.get("经验本拥挤时间戳") == null) {
    storage.put("经验本拥挤时间戳", "1712620800000")
}

// if (storage.get("清理过期物品日期") == null) {
//     log("赋予清理过期物品日期")
//     storage.put("清理过期物品日期", "32")
// }

if (storage.get("清理过期物品时间点") == null) {
    log("赋予清理过期物品日期")
    storage.put("清理过期物品时间点", "1712620800000")
}

if (storage.get("现有钻石") == null) {
    storage.put("现有钻石", "0")
}

if (storage.get("激战地锁") == null) {
    storage.put("激战地锁", true)
}

if (storage.get("区副本锁") == null) {
    storage.put("区副本锁", true)
}

log("激战地锁" + storage.get("激战地锁"))
log("区副本锁" + storage.get("区副本锁"))

threads.start(function () {
    if (storage.get("激战地锁")) {
        var json = {
            "设备id": 设备id,
            "type": "激战地锁",
            "状态": "未锁"
        }
    } else {
        var json = {
            "设备id": 设备id,
            "type": "激战地锁",
            "状态": "锁死"
        }
    }
    发送数据至中控("fragmentaryState", json)
});


var 委托时间 = random(0, 23).toString()
// var 委托时间 = "15"
// var 巴斯锂线程 = false
// var 巴斯锂野外 = false
// var 巴斯锂野外时间 = "32"
var 死亡次数 = 0
var 上上月收益 = 0
var 当月 = new Date().getMonth() + 1

if (当月 == "1") {
    var 上个月 = "12"
    var 上上个月 = "11"
} else if (当月 == "2") {
    var 上上个月 = "12"
    var 上个月 = "1"
} else {
    var 上个月 = 当月 - 1
    var 上上个月 = 当月 - 2
}

if (storage.get(上上个月 + "月记录") != null) {
    上上月收益 = parseInt(storage.get(上上个月 + "月记录"))
    ui.收益记录1.setText(上上个月 + ":" + storage.get(上上个月 + "月记录"))
} else {
    ui.收益记录1.setText(上上个月 + ":无记录")
}


if (storage.get(上个月 + "月记录") != null) {
    var 上个月收益 = parseInt(storage.get(上个月 + "月记录"))
    ui.收益记录2.setText(上个月 + ":" + storage.get(上个月 + "月记录"))
} else {
    ui.收益记录2.setText(上个月 + ":无记录")
}

if (storage.get(当月 + "月记录") != null) {
    var 本月 = parseInt(storage.get(当月 + "月记录"))
    ui.收益记录3.setText(当月 + ":" + storage.get(当月 + "月记录"))
} else {
    ui.收益记录3.setText(当月 + ":无记录")
}

配置读取()

versions = ui.versions.getText()


读入配置数据并写入()
userName = ui.userName.getText();//账号


var 中控 = connectWebSocket()
setInterval(function () {
    var data = {
        "type": "心跳",
        "androidID": 设备id
    };
    var jsonData = JSON.stringify(data);
    if (中控数据发送(jsonData) == false) {//websocket连接失败 这个是判定连接失败不再重连的

    }
}, 20000);

闪烁()
function 闪烁() {
    var 闪烁逗号 = 0
    setInterval(function () {
        if (window != null) {
            闪烁逗号++
            if (闪烁逗号 >= 1) {
                闪烁逗号 = 0
                var 逗号 = "."
            } else {
                var 逗号 = ""
            }
            ui.run(function () {
                window.动态闪烁.setText(逗号)
            });
        }
    }, 200);
}


let maxReconnectAttempts = 5; // 最大重连次数  
let currentReconnectAttempts = 0; // 当前重连尝试次数  
function connmecrt(callback, attempts) {
    var 本月 = 0
    var 上个月收益 = 0
    var 上上月收益 = 0
    var 当月 = new Date().getMonth() + 1

    if (当月 == "1") {
        var 上个月 = "12"
        var 上上个月 = "11"
    } else if (当月 == "2") {
        var 上上个月 = "12"
        var 上个月 = "1"
    } else {
        var 上个月 = 当月 - 1
        var 上上个月 = 当月 - 2
    }

    if (storage.get(上上个月 + "月记录") != null) {
        上上月收益 = parseInt(storage.get(上上个月 + "月记录"))
    }

    if (storage.get(上个月 + "月记录") != null) {
        上个月收益 = parseInt(storage.get(上个月 + "月记录"))
    }

    if (storage.get(当月 + "月记录") != null) {
        本月 = parseInt(storage.get(当月 + "月记录"))
    }
    log("设备id" + 设备id)
    var data = {
        "type": "上线时",
        "androidID": 设备id.toString(),
        "thisMonth": 本月,
        "lastMonth": 上个月收益,
        "beforeLastMonth": 上上月收益,
        "versions": versions.toString(),
        "google": userName.toString()
    };
    var jsonData = JSON.stringify(data);

    if (attempts === undefined) {
        attempts = 0;
    }
    let mClient = new OkHttpClient();
    let request = new Request.Builder().get().url("ws://14.22.112.230:8233/snhc/nightRavenNightraven?loginName=" + 设备id).build();
    let globalWebsocket = null;

    mClient.newWebSocket(request, new JavaAdapter(WebSocketListener, {
        onOpen: function (webSocket, response) {
            log("连接成功");
            webSocket.send(jsonData)
            globalWebsocket = webSocket;
            if (callback) callback(globalWebsocket); // 调用回调函数  
            currentReconnectAttempts = 0; // 重置重连尝试次数  
        },
        onMessage: function (webSocket, text) {
            log("收到消息…" + text);
            if (text.includes("开始铸币")) {
                if (new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间") >= 2) {
                    开始铸币 = true
                } else {
                    log("收到铸币消息但离上次铸币成功时间间隔小于2小时，不进行铸币,已过时间:")
                    log(new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间"))
                }
            } else if (开始铸币 && text.includes("结束铸币")) {
                log("结束铸币")
                开始铸币 = false
            }
        },
        onClosed: function (webSocket, code, reason) {
            log("服务错误…尝试重连");
            webSocket.close()
        },
        onFailure: function (webSocket, throwable, response) {
            log("服务链接中断…");
            webSocket.close()
        }
    }));
}

function 转移钱包() {
    log("启动新钱包")
    app.launch("com.wemade.wemixplay")
    while (true) {
        if (text("接收广告信息和通知消息").exists()) {
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else {
            if (text("Continue with Google").exists()) {
                var google_login = text("Continue with Google").findOne(2000)
                if (google_login != null) {
                    click(google_login.bounds().centerX(), google_login.bounds().centerY())
                }
            } else {
                if (id("main_title").text("选择账号").exists()) {
                    log("选择第一个账号")
                    随机点击(294, 687)
                    sleep(5000)
                } else {
                    if (text("全部同意").exists()) {
                        var 全部同意 = text("全部同意").findOne(2000)
                        if (全部同意 != null) {
                            click(全部同意.bounds().centerX(), 全部同意.bounds().centerY())
                        }
                        sleep(1000)
                        if (text("下一步").exists()) {
                            var 下一步 = text("下一步").findOne(2000)
                            if (下一步 != null) {
                                click(下一步.bounds().centerX(), 下一步.bounds().centerY())
                            }
                            sleep(1000)
                        } else {

                        }
                    } else {
                        if (text("创建的昵称无法更改。").exists()) {
                            var randomAscii;
                            var 随机数 = random(3, 11)
                            var 名字 = ""
                            randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
                            randomAscii = String.fromCharCode(randomAscii)
                            名字 = 名字 + "" + randomAscii
                            for (let index = 0; index < 随机数; index++) {
                                var randomCase = Math.floor(Math.random() * 2);
                                if (randomCase === 0) {
                                    randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
                                    randomAscii = String.fromCharCode(randomAscii);
                                } else {
                                    randomAscii = random(0, 9).toString()
                                }
                                名字 = 名字 + "" + randomAscii
                            }
                            setText(名字)
                            sleep(1000)
                            if (text("下一步").exists()) {
                                var 下一步 = text("下一步").findOne(2000)
                                if (下一步 != null) {
                                    click(下一步.bounds().centerX(), 下一步.bounds().centerY())
                                }
                                sleep(1000)
                            } else {

                            }
                        } else {
                            if (textMatches(/(.*请输入出生日期.*)/).exists()) {
                                log("请输入出生日期")
                                click(163, 503)
                                sleep(2000)
                            } else {
                                if (text("出生日期").exists()) {
                                    var 随机拉次数 = random(1, 5)
                                    for (let index = 0; index < 随机拉次数; index++) {
                                        swipe(355, 835, 355, 1079, 500)
                                    }
                                    sleep(1000)
                                    var 随机拉次数 = random(1, 10)
                                    for (let index = 0; index < 随机拉次数; index++) {
                                        swipe(460, 835, 460, 1079, 500)
                                    }
                                    sleep(1000)
                                    var 随机拉次数 = random(1, 3)
                                    for (let index = 0; index < 随机拉次数; index++) {
                                        swipe(230, 835, 230, 1079, 500)
                                    }
                                    sleep(1000)
                                    if (text("完成").exists()) {
                                        var 完成 = text("完成").findOne(2000)
                                        if (完成 != null) {
                                            click(完成.bounds().centerX(), 完成.bounds().centerY())
                                        }
                                        sleep(2000)
                                    } else {

                                    }

                                    if (text("下一步").exists()) {
                                        var 下一步 = text("下一步").findOne(2000)
                                        if (下一步 != null) {
                                            click(下一步.bounds().centerX(), 下一步.bounds().centerY())
                                        }
                                        sleep(1000)
                                    } else {

                                    }
                                } else {
                                    if (text("完成").exists()) {
                                        var 完成 = text("完成").findOne(2000)
                                        if (完成 != null) {
                                            click(完成.bounds().centerX(), 完成.bounds().centerY())
                                        }
                                        sleep(2000)
                                    } else {
                                        if (text("添加现有钱包").exists()) {
                                            var 添加现有钱包 = text("添加现有钱包").findOne(2000)
                                            if (添加现有钱包 != null) {
                                                click(添加现有钱包.bounds().centerX(), 添加现有钱包.bounds().centerY())
                                            }
                                            sleep(2000)
                                        } else {
                                            if (text("连接钱包").exists()) {
                                                var 连接钱包 = text("连接钱包").findOne(2000)
                                                if (连接钱包 != null) {
                                                    click(连接钱包.bounds().centerX(), 连接钱包.bounds().centerY())
                                                }
                                                sleep(2000)
                                            } else {
                                                if (text("PLAY Wallet").exists()) {
                                                    var Wallet = text("PLAY Wallet").findOne(2000)
                                                    if (Wallet != null) {
                                                        click(Wallet.bounds().centerX(), Wallet.bounds().centerY())
                                                    }
                                                    sleep(2000)
                                                } else {
                                                    if (text("追加PLAY Wallet").exists()) {
                                                        var randomAscii;
                                                        var 随机数 = random(3, 11)
                                                        var 名字 = ""
                                                        randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
                                                        randomAscii = String.fromCharCode(randomAscii)
                                                        名字 = 名字 + "" + randomAscii
                                                        for (let index = 0; index < 随机数; index++) {
                                                            randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
                                                            randomAscii = String.fromCharCode(randomAscii);
                                                            名字 = 名字 + "" + randomAscii
                                                        }
                                                        setText(0, 名字)
                                                        var path = "/storage/emulated/0/WalletInformation.txt"
                                                        if (storage.get("已有钱包地址") != null) {
                                                            log("脚本记录地址")
                                                            setText(1, storage.get("已有钱包地址").toString())
                                                        } else if (files.exists(path)) {
                                                            log("配置文件地址")
                                                            var 配置 = files.read(path).split("---");
                                                            if (配置.length == 2) {
                                                                setText(1, 配置[0].toString())
                                                                storage.put("已有钱包地址", 配置[0].toString())
                                                            } else {
                                                                log("钱包信息录入不正确")
                                                                alert("钱包信息录入不正确")
                                                            }
                                                        } else {
                                                            log("没有钱包信息")
                                                            alert("没有钱包信息")
                                                        }
                                                        if (text("导入").exists()) {
                                                            var 导入 = text("导入").findOne(2000)
                                                            if (导入 != null) {
                                                                click(导入.bounds().centerX(), 导入.bounds().centerY())
                                                            }
                                                            sleep(1000)
                                                        } else {

                                                        }
                                                        sleep(2000)
                                                    } else {
                                                        if (textMatches(/(.*同意密码丢失责任*)/).exists()) {
                                                            钱包啥也没识别到 = 0
                                                            log("同意密码丢失责任")
                                                            sleep(1000)
                                                            click(55, 1064)
                                                            sleep(1000)
                                                            var 同意 = text("同意").findOne(2000)
                                                            if (同意 != null) {
                                                                log(同意.bounds().centerX() + "," + 同意.bounds().centerY())
                                                                click(同意.bounds().centerX(), 同意.bounds().centerY())
                                                                alert("完成")
                                                                exit()
                                                            }
                                                            // click(53, 1058)
                                                            sleep(1000)
                                                        } else {
                                                            if (text("用于签名的密码如果丢失将无法恢复。").exists()) {
                                                                setText("Kjfb0596#")
                                                                if (text("下一步").exists()) {
                                                                    var 下一步 = text("下一步").findOne(2000)
                                                                    if (下一步 != null) {
                                                                        click(下一步.bounds().centerX(), 下一步.bounds().centerY())
                                                                    }
                                                                    sleep(1000)
                                                                } else {

                                                                }
                                                                sleep(2000)
                                                            } else {


                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}



function connectWebSocket() {
    var 本月 = 0
    var 上个月收益 = 0
    var 上上月收益 = 0
    var 当月 = new Date().getMonth() + 1

    if (当月 == "1") {
        var 上个月 = "12"
        var 上上个月 = "11"
    } else if (当月 == "2") {
        var 上上个月 = "12"
        var 上个月 = "1"
    } else {
        var 上个月 = 当月 - 1
        var 上上个月 = 当月 - 2
    }

    if (storage.get(上上个月 + "月记录") != null) {
        上上月收益 = parseInt(storage.get(上上个月 + "月记录"))
    }

    if (storage.get(上个月 + "月记录") != null) {
        上个月收益 = parseInt(storage.get(上个月 + "月记录"))
    }

    if (storage.get(当月 + "月记录") != null) {
        本月 = parseInt(storage.get(当月 + "月记录"))
    }
    log("设备id" + 设备id)
    var data = {
        "type": "上线时",
        "androidID": 设备id.toString(),
        "thisMonth": 本月,
        "lastMonth": 上个月收益,
        "beforeLastMonth": 上上月收益,
        "versions": versions.toString(),
        "google": userName.toString()
    };
    var jsonData = JSON.stringify(data);
    ws = web.newWebSocket("ws://14.22.112.230:8233/snhc/nightRavenNightraven?loginName=" + 设备id);
    // ws = web.newWebSocket("ws://192.168.3.56:1572/SocketTest/nightRavenNightraven?loginName=" + 设备id);
    // 监听他的各种事件
    ws.on("open", (res, ws) => {
        log("WebSocket已连接");
        ws.send(jsonData)
    }).on("failure", (err, res, ws) => {
        log("WebSocket连接失败");
        websocket连接失败 = true
        console.error(err);
    }).on("closing", (code, reason, ws) => {
        log("WebSocket关闭，code=" + code + ",reason=" + reason + ",ws=" + ws);
        if (reason.includes("Interrupt redundant connection")) {
            log("websocket断开多余连接")
        } else if (reason.includes("web应用程序正在停止")) {
            log("中控停止")
        } else if (reason.includes("正常关闭")) {
            log("webSocket正常中断")
        }
    }).on("text", (text, ws) => {
        if (text.includes("心跳")) {
            // console.info("收到心跳")
        } else if (text.includes("弹窗")) {
            alert(text)
        } else if (text.includes("更新脚本")) {
            threads.start(function () {
                for (let index = 0; index < 3; index++) {
                    home()
                    sleep(1000)
                }
                threads.start(function () {
                    alert("更新脚本中...")
                })
                更新()
            });
        } else if (text.includes("更新游戏补丁")) {
            threads.start(function () {
                for (let index = 0; index < 3; index++) {
                    home()
                    sleep(1000)
                }
                threads.start(function () {
                    alert("更新游戏补丁中...")
                })
                开始更新()
            });
        } else if (text.includes("拉起")) {
            中控开始()
        } else if (text.includes("开始铸币")) {
            log("收到消息：" + text)
            if (new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间") >= 2 && 参数[50] && storage.get("识别的等级") >= 45) {
                触发铸币流程("开始铸币")
                storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
            } else {
                log("收到消息，但条件不足,距上次铸币时间:" + (new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间")) + "小时")
                log("铸币选项:" + 参数[50] + ",等级:" + storage.get("识别的等级"))
                // log("收到铸币消息但离上次铸币成功时间间隔小于2小时，不进行铸币,已过时间:" + (new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间")) + "小时")
            }
        } else if (开始铸币 && text.includes("结束铸币")) {
            log("收到结束铸币指令")
            if (开始铸币) {
                触发铸币流程("结束铸币")
            }
            storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
        } else {
            console.info("收到文本消息: ", text);
        }
        // log("收到文本消息: "+ text)
    }).on("binary", (bytes, ws) => {
        console.info("收到二进制消息:");
        console.info("hex: ", bytes.hex());
        console.info("base64: ", bytes.base64());
        console.info("md5: ", bytes.md5());
        console.info("size: ", bytes.size());
        console.info("bytes: ", bytes.toByteArray());
    }).on("closed", (code, reason, ws) => {
        log("WebSocket已关闭: code = %d, reason = %s", code, reason);
        // 清除心跳包定时器
    });
    events.on("exit", function () {
        ws.close(1000, "正常关闭")
    });
    return ws
}

function 触发铸币流程(mode) {
    if (mode == "开始铸币") {
        threads.start(function () {
            var 延迟时间 = 1000 * 60 * 59 + 5000
            sleep(延迟时间)
            开始铸币 = true
            线程控制 = false
        })
    } else {
        threads.start(function () {
            var 延迟时间 = 1000 * 60 * 10
            sleep(延迟时间)
            log("强制结束铸币")
            线程控制 = false
            开始铸币 = false
        })
    }
}

function 读入配置数据并写入() {
    var path = '/sdcard/GoogleProfile.txt';
    var 账号 = "无"
    var 密码 = "无"
    var 辅助邮箱 = "无"
    var 云编 = "无"
    if (files.exists(path)) {
        var 配置 = files.read(path).split("---");
        log(配置.length)
        if (配置.length == 3) {
            账号 = 配置[0]
            密码 = 配置[1]
            辅助邮箱 = 配置[2]
            ui.userName.setText(账号.toString())
            ui.password.setText(密码.toString())
            ui.email.setText(辅助邮箱.toString())
        } else if (配置.length = 2) {
            账号 = 配置[0]
            密码 = 配置[1]
            ui.userName.setText(账号.toString())
            ui.password.setText(密码.toString())
        } else {
            toastLog("信息录入不正确")
        }

        var path = '/sdcard/YunID.txt';
        if (files.exists(path)) {
            云编 = files.read(path)
            if (云编.includes("\n")) {
                云编 = 云编.replace(/[\r\n]+/g, '');
            }
        }

        log("谷歌账号为:" + 账号.toString())
        threads.start(function () {
            var json = {
                "设备id": 设备id,
                "google": 账号.toString(),
                "passwd": 密码.toString(),
                "email": 辅助邮箱.toString(),
                "服务器": "韩服",
                "云编": 云编.toString()
            }
            发送数据至中控("yeyaInternationUserData", json)
        });
    } else {
        var path = "/storage/emulated/0/disposition.txt"
        if (files.exists(path)) {
            var 配置 = files.read(path).split("---");
            log(配置.length)
            if (配置.length == 4) {
                ui.userName.setText(配置[0].toString())
                ui.password.setText(配置[1].toString())
                ui.email.setText(配置[2].toString())
                if (配置[3].includes("\n")) {
                    配置[3] = 配置[3].replace(/[\r\n]+/g, '');
                }
                threads.start(function () {
                    var json = {
                        "设备id": 设备id,
                        "google": 配置[0].toString(),
                        "passwd": 配置[1].toString(),
                        "email": 配置[2].toString(),
                        "服务器": "国际服",
                        "云编": 配置[3].toString()
                    }
                    发送数据至中控("yeyaInternationUserData", json)
                });
            } else {
                toastLog("信息录入不正确")
            }
        } else {
            threads.start(function () {
                var json = {
                    "设备id": 设备id,
                    "google": "无",
                    "passwd": "无",
                    "email": "无",
                    "服务器": "韩服",
                    "云编": "无",
                }
                发送数据至中控("yeyaInternationUserData", json)
            });
            log("没有配置文件")
        }
    }
}

ui.start.click(function () {
    ui.run(function () {
        ui.start.setEnabled(false);
    });

    threads.start(function () {
        var json = {
            "设备id": 设备id,
            "type": "异常",
            "异常信息": "正常"
        }
        发送数据至中控("fragmentaryState", json)
    });
    节电模式判断掉线时间戳 = new Date().getTime()
    重复点击坐标次数 = 0
    总提示 = ""
    线程控制 = true
    userName = ui.userName.getText();//账号
    log("谷歌账号为:" + userName)
    password = ui.password.getText();//密码
    email = ui.email.getText();//辅助邮箱
    var 野外挂机选项 = ui.野外挂机选项.isChecked();//
    var 主线任务 = ui.主线任务.isChecked()
    var 三五后主线 = ui.三五后主线.isChecked()
    var 主线提升 = ui.主线提升.isChecked()
    // 自动使用药水 = ui.自动使用药水.isChecked()
    每日制造 = ui.每日制造.isChecked()
    var 识别游戏大区 = ui.识别游戏大区.isChecked()
    var 工会任务 = ui.工会任务.isChecked()
    var 商城活动物质 = false// ui.商城活动物质.isChecked()
    Google登录 = ui.Google登录.isChecked()
    // var 图鉴材料分解 = ui.图鉴材料分解.isChecked()
    // var 野外图鉴材料分解 = ui.野外图鉴材料分解.isChecked()
    var 自动分解 = ui.自动分解.isChecked()
    var 白嫖属性 = ui.白嫖属性.isChecked()
    var 自动提升 = ui.自动提升.isChecked()
    自动提升属性时间 = ui.自动提升属性时间.getText()
    清空药水 = ui.清空药水.isChecked()
    var 经验本 = ui.经验本.isChecked()
    RandomTimeMAX = ui.RandomTimeMAX.isChecked()
    var 购买技能书 = ui.购买技能书.isChecked()
    var 药水设定 = false// ui.药水设定.isChecked()
    钱包地址 = ui.钱包地址.isChecked()
    var 三倍经验 = false// ui.三倍经验.isChecked()
    // var 兔子肉 = false//ui.兔子肉.isChecked();//
    // var 翅膀碎片 = false// ui.翅膀碎片.isChecked();//
    // var 山草 = false//ui.山草.isChecked();//
    // var 螳螂爪子 = false//ui.螳螂爪子.isChecked();//
    // var 水果 = false//ui.水果.isChecked();//
    // var 毒蜘蛛 = false//ui.毒蜘蛛.isChecked();//
    // var 骷髅头 = false//ui.骷髅头.isChecked();//
    // var 动物的血 = false//ui.动物的血.isChecked();
    // var 异教补给 = false//ui.异教补给.isChecked();
    二十四小时币价 = ui.二十四小时币价.isChecked()
    var spinner = ui.spinner.getSelectedItemPosition()
    var 激战地选择项 = ui.激战地选择项.getSelectedItemPosition()
    var 自动选择挂机点 = ui.自动选择挂机点.isChecked();//
    var 日副本 = ui.日副本.isChecked();//
    // var 日副本时间 = ui.日副本时间.getText();//
    var 委托 = ui.委托.isChecked();//
    var 周副本 = ui.周副本.isChecked();//
    var 周本时间 = ui.周本时间.getText();//
    var 小药水 = ui.小药水.isChecked()
    var 中药水 = ui.中药水.isChecked()
    var 区本 = ui.区本.isChecked();//
    var 区本时间 = ui.区本时间.getText();//
    var 三十五级 = ui.三十五.isChecked();//
    var 四十级 = ui.四十.isChecked();//
    var 四十五级 = ui.四十五.isChecked();//
    var 五十级 = ui.五十.isChecked();//
    var 交易 = ui.交易.isChecked();
    // var 交易时间 = ui.交易时间.getText();//
    // 巴斯锂野外 = ui.巴斯锂野外.isChecked()
    var 查看物价 = ui.查看物价.isChecked();
    var 单强化 = ui.单强化.isChecked();
    var 单灌注 = ui.单灌注.isChecked();
    var 单洗练 = ui.单洗练.isChecked()
    var 二转 = ui.二转.isChecked();
    var 环境优化 = ui.环境优化.isChecked()
    var 放入仓库 = ui.放入仓库.isChecked()
    激战地选项 = ui.激战地选项.isChecked()
    // var 四十激战地 = ui.四十激战地.isChecked()
    // var 四十五激战地 = ui.四十五激战地.isChecked()
    // var 五十激战地 = ui.五十激战地.isChecked()
    // var 学习制造 = ui.学习制造.isChecked()
    var 每日换购材料箱 = ui.每日换购材料箱.isChecked()//
    var 启动延时 = ui.启动延时.isChecked()
    var 自动铸币 = ui.自动铸币.isChecked()
    var 自动购买技能书 = ui.自动购买技能书.isChecked()
    var 每日换购铜钱箱 = false// ui.每日换购铜钱箱.isChecked()//
    var 每日换购经验药 = false// ui.每日换购经验药.isChecked()//
    // var 每日购买绿级材料箱 = ui.每日购买绿级材料箱.isChecked()
    var 三十五级提升 = ui.三十五级提升.isChecked()//
    var 平均价 = ui.平均价.isChecked()//
    var 上浮价 = ui.上浮价.isChecked()
    var 最低价 = ui.最低价.isChecked()//
    var 清除脚本缓存 = ui.清除脚本缓存.isChecked()//
    参数[0] = 野外挂机选项
    参数[1] = spinner
    参数[2] = 激战地选择项
    参数[3] = 查看物价
    // 参数[4] = 图鉴材料分解
    // 参数[2] = 翅膀碎片
    // 参数[3] = 山草
    // 参数[4] = 螳螂爪子
    参数[5] = 日副本
    // 参数[6] = 野外图鉴材料分解
    参数[7] = 委托
    参数[8] = 周副本
    参数[9] = 周本时间
    参数[10] = 区本
    参数[11] = 区本时间
    参数[12] = 三十五级//已变更为30级
    参数[13] = 四十级
    参数[14] = 交易
    参数[15] = 自动分解
    参数[16] = 四十五级//已变更为50级
    参数[17] = 五十级//已变更为60级
    参数[18] = 每日制造
    参数[19] = 每日换购材料箱
    参数[20] = 小药水
    参数[21] = 中药水
    参数[22] = 环境优化
    参数[23] = 放入仓库//false//
    参数[24] = 白嫖属性
    // 参数[25] = 四十五激战地
    参数[25] = 工会任务
    参数[26] = 主线任务
    参数[27] = 经验本
    参数[28] = 三倍经验
    参数[29] = 单强化
    // 参数[27] = 五十激战地
    // 参数[28] = 毒蜘蛛
    // 参数[29] = 每日购买绿级材料箱
    // 参数[30] = 学习制造11
    参数[31] = 单灌注
    参数[32] = 三十五级提升
    参数[33] = 平均价
    参数[34] = 最低价
    参数[35] = 上浮价
    参数[36] = 单洗练
    参数[37] = 二转
    参数[38] = 商城活动物质
    参数[39] = 三五后主线
    参数[40] = 每日换购铜钱箱
    参数[41] = 每日换购经验药
    参数[42] = 识别游戏大区
    参数[43] = 主线提升
    参数[44] = 购买技能书
    参数[45] = 自动提升
    参数[46] = 自动购买技能书
    参数[47] = 启动延时
    参数[48] = 药水设定
    参数[49] = 自动选择挂机点
    参数[50] = 自动铸币


    if (清除脚本缓存) {
        log("清除脚本所有记录")
        storages.remove("fyl")
        log("清除结束")
    }
    var storage = storages.create("fyl");
    log("脚本运行版本:" + versions)
    if (自动提升属性时间 == "") {
        toastLog("请输入提升时间")
        ui.run(function () {
            ui.start.setEnabled(true);
        });
        return
    }

    if (自动提升属性时间.toString()[0] == "0" && 自动提升属性时间.toString()[1] != ".") {
        toastLog("请输入正确的提升时间")
        ui.run(function () {
            ui.start.setEnabled(true);
        });
        return
    }

    if (storage.get("自动提升属性填写时间") != 自动提升属性时间) {
        storage.put("自动提升属性填写时间", 自动提升属性时间.toString())
        if (parseFloat(自动提升属性时间) < 1) {
            storage.put("自动提升属性时间随机分钟", random(5, parseInt(parseFloat(自动提升属性时间) * 24 * 60)).toString())
        } else {
            storage.put("自动提升属性时间随机分钟", random(1440, (parseInt(自动提升属性时间) + 1) * 24 * 60).toString())
        }
    }



    // 参数[35] = spinner
    // if (参数[5]) {
    //     if (参数[6] == "" || parseInt(参数[6]) > 24) {
    //         log("日副本时间错误")
    //         return
    //     }
    // }

    if (参数[8]) {
        if (参数[9] == "" || parseInt(参数[9]) > 7) {
            toastLog("周副本时间错误")
            ui.run(function () {
                ui.start.setEnabled(true);
            });
            return
        }
    }

    if (参数[10]) {
        if (参数[11] == "" || parseInt(参数[11]) > 7) {
            toastLog("区副本时间错误")
            ui.run(function () {
                ui.start.setEnabled(true);
            });
            return
        }
    }

    // if (参数[14]) {
    //     if (参数[15] == "" || parseInt(参数[15]) > 24) {
    //         log("交易时间错误")
    //     }
    // }



    storage.put("userName1", userName.toString());
    storage.put("password1", password.toString());
    storage.put("email1", email.toString());
    storage.put("野外挂机选项", 野外挂机选项);
    storage.put("每日制造", 每日制造);
    storage.put("识别游戏大区", 识别游戏大区);
    storage.put("工会任务", 工会任务);
    storage.put("商城活动物质", 商城活动物质);
    storage.put("自动选择挂机点", 自动选择挂机点);
    storage.put("二十四小时币价", 二十四小时币价)

    // storage.put("兔子肉", 兔子肉);
    // storage.put("翅膀碎片", 翅膀碎片);//
    // storage.put("山草", 山草);
    // storage.put("水果", 水果);
    // storage.put("毒蜘蛛", 毒蜘蛛);//
    // storage.put("骷髅头", 骷髅头);
    // storage.put("螳螂爪子", 螳螂爪子);
    // storage.put("动物的血", 动物的血);
    // storage.put("异教补给", 异教补给);/
    storage.put("查看物价", 查看物价);
    storage.put("spinner", spinner);
    storage.put("日副本", 日副本);
    // storage.put("日副本时间", 日副本时间.toString());
    storage.put("委托", 委托);
    storage.put("周副本", 周副本);
    storage.put("周本时间", 周本时间.toString());
    storage.put("区本", 区本);
    storage.put("区本时间", 区本时间.toString());
    storage.put("三十五级", 三十五级);
    storage.put("四十级", 四十级);
    storage.put("交易", 交易);
    // storage.put("交易时间", 交易时间.toString());
    storage.put("四十五级", 四十五级);
    storage.put("五十级", 五十级);
    // storage.put("巴斯锂野外", 巴斯锂野外);

    // storage.put("五十激战地", 五十激战地);
    storage.put("小药水", 小药水);
    storage.put("中药水", 中药水);
    storage.put("激战地选项", 激战地选项);
    // storage.put("四十五激战地", 四十五激战地);
    // storage.put("四十激战地", 四十激战地);
    storage.put("主线任务", 主线任务);
    storage.put("三五后主线", 三五后主线);
    storage.put("每日换购材料箱", 每日换购材料箱);
    storage.put("启动延时", 启动延时);
    storage.put("自动铸币", 自动铸币);
    storage.put("自动购买技能书", 自动购买技能书);
    storage.put("药水设定", 药水设定)
    storage.put("每日换购铜钱箱", 每日换购铜钱箱);
    storage.put("每日换购经验药", 每日换购经验药);

    // storage.put("每日购买绿级材料箱", 每日购买绿级材料箱);

    storage.put("平均价", 平均价);
    storage.put("上浮价", 上浮价)
    storage.put("最低价", 最低价);
    storage.put("激战地选择项", 激战地选择项)
    // storage.put("自动使用药水", 自动使用药水)
    // storage.put("Google登录", Google登录)
    // storage.put("图鉴材料分解", 图鉴材料分解)
    // storage.put("野外图鉴材料分解", 野外图鉴材料分解)
    storage.put("自动分解", 自动分解)
    storage.put("三倍经验", 三倍经验)
    storage.put("经验本", 经验本)

    // //storage.put("单强化", 单强化)
    // storage.put("单灌注", 单灌注)
    // storage.put("单洗练", 单洗练)
    // storage.put("二转", 二转)
    storage.put("白嫖属性", 白嫖属性)
    storage.put("自动提升", 自动提升)
    storage.put("自动提升属性时间", 自动提升属性时间.toString())


    if (参数[49]) {
        if (storage.get("自动挂机点测试") == null) {
            var 继承挂机点 = "120"
            if (storage.get("spinner") == "0") {
                继承挂机点 = "120";
            } else if (storage.get("spinner") == "1") {
                继承挂机点 = "140";
            } else if (storage.get("spinner") == "2") {
                继承挂机点 = "150";
            } else if (storage.get("spinner") == "3") {
                继承挂机点 = "160";
            } else if (parseInt(storage.get("spinner")) >= 4) {
                继承挂机点 = "180";
            }
            storage.put("自动挂机点测试", 继承挂机点)
            log("继承夜鸦防:" + 继承挂机点)
        }

        if (storage.get("自动激战地") == null) {
            if (storage.get("激战地选项") == false || storage.get("激战地选项") == null) {
                storage.put("自动激战地", "NO")
            } else {
                storage.put("自动激战地", "40")
            }
        }

        if (storage.get("自动副本测试") == null) {
            if (storage.get("三十五级") == true) {
                log("继承等级30")
                storage.put("自动副本测试", "30")
            } else {
                storage.put("自动副本测试", "40")
                log("继承等级40")
            }
        }
    }

    threads.start(function () {
        KeepAliveService.start("test", "脚本保活");
        权限获取()
    });
    // // if (执行) {
    // //     执行 = false
    //     if (主线程!=false) {
    //         if (主线程.isAlive()) {
    //             toastLog("请先home停止脚本")
    //             return
    //         }else{
    //             
    //         }
    //     }else{
    //         主线程 = threads.start(function () {

    //         });
    //     }
    // } else {
    //     log("请按HOME重新启动")
    // }
})

function 权限获取() {
    log("点击开始")
    threads.start(function () {
        var 随机时间分钟 = random(30, 59)
        var 未发送 = true
       
            window = floaty.rawWindow(
                <horizontal>
                    <text text="♣检" id="运维检测" h="*" w="*" bg="#FFFFFF" textStyle="bold" textColor="black" marginLeft="1" paddingBottom="2" />
                    <text text="" id="收益" h="*" bg="#FFFFFF" textStyle="bold" textColor="red" marginLeft="1" paddingBottom="2" />
                    <text text="." id="动态闪烁" />
                    <text text="" id="计时器" textColor="red" textSize="12" />
                    <text text="" id="死亡计次" textColor="red" textSize="12" />
                </horizontal>
            )
        window.setTouchable(false);
        var 当月 = new Date().getMonth() + 1
      
            if (storage.get(当月 + "月记录") != null) {
                ui.run(function () {
                    window.收益.setText("收益:" + storage.get(当月 + "月记录"))
                });
            } else {
                // ui.run(function () {
                //     window.收益.setText("暂无收益")
                // });
            }

       

        while (true) {
            if (text("立即开始").exists()) {
                log("点击授予截图权限")
                sleep(1000)
                if (text("立即开始").findOnce().click()) {
                } else {
                    text("立即开始").findOnce().clickCenter()
                }
            } else if (text("시작하기").exists()) {
                log("点击授予截图权限")
                sleep(1000)
                if (text("시작하기").findOnce().click()) {
                } else {
                    text("시작하기").findOnce().clickCenter()
                }
            }

            if (packageName("com.wemade.nightcrows").exists()) {
                ui.run(function () {
                    window.setPosition(1, 680);
                });
            } else {
                ui.run(function () {
                    window.setPosition(1, 1248);
                });
            }

            if (id("main_title").text("选择账号").exists()) {
                log("选择第一个账号")
                sleep(2000)
                swipe(621, 304, 611, 598, 500)
                sleep(2000)
                随机点击(517, 296)
            } else if (id("main_title").desc("选择账号").exists()) {
                log("选择第一个账号")
                sleep(2000)
                swipe(621, 304, 611, 598, 500)
                sleep(2000)
                随机点击(517, 296)
            }

            if (storage.get("记录今日次数") != new Date().getDate()) {
                storage.put("激战地今日逃跑次数", "0")
                storage.put("区本今日逃跑次数", "0")
                storage.put("区副本修复装备次数", "0")
                storage.put("记录今日次数", new Date().getDate())

                log("重置死亡次数")
            }

            if (new Date().getHours() == "0" && new Date().getMinutes() == 随机时间分钟.toString() && 未发送) {
                log("发送数据到中控")
                var 本月记录 = 0
                var 上个月记录 = 0
                var 上上月记录 = 0
                var 当月 = new Date().getMonth() + 1

                if (当月 == "1") {
                    var 上个月 = "12"
                    var 上上个月 = "11"
                } else if (当月 == "2") {
                    var 上上个月 = "12"
                    var 上个月 = "1"
                } else {
                    var 上个月 = 当月 - 1
                    var 上上个月 = 当月 - 2
                }

                if (storage.get(上上个月 + "月记录") != null) {
                    上上月记录 = parseInt(storage.get(上上个月 + "月记录"))
                }

                if (storage.get(上个月 + "月记录") != null) {
                    上个月记录 = parseInt(storage.get(上个月 + "月记录"))
                }

                if (storage.get(当月 + "月记录") != null) {
                    本月记录 = parseInt(storage.get(当月 + "月记录"))
                }

                var data = {
                    "type": "上线时",
                    "androidID": 设备id.toString(),
                    "thisMonth": 本月记录,
                    "lastMonth": 上个月记录,
                    "beforeLastMonth": 上上月记录,
                    "versions": versions.toString(),
                    "google": storage.get("userName1")
                };
                var jsonData = JSON.stringify(data);
                中控数据发送(jsonData)
                // 中控数据发送(jsonData)
                未发送 = false
            } else {
                if (new Date().getHours() != "0") {
                    未发送 = true
                }
            }
            sleep(1000)
        }
    })

    var ser = auto.service
    if (ser == null) {
        log("请开启无障碍服务！")
        auto.waitFor()
    } else {

    }

    sleep(random(1000, 3000))
    if (截图权限请求) {
        if (!requestScreenCapture(true)) {
            log("请赋予截图权限！")
        } else {
            log("已有截图权限！")
            截图权限请求 = false
        }
        sleep(random(1000, 3000))
    }

    if (钱包地址) {
        操作钱包中 = true
        注册钱包()
        ui.run(function () {
            ui.钱包地址.setChecked(false)
        });
    }

    if (Google登录) {
        if (RandomTimeMAX) {
            var 随机延时 = random(1, 7200)
        } else {
            var 随机延时 = random(1, 300)
        }
        while (随机延时 > 0) {
            随机延时--
            ui.run(function () {
                window.计时器.setText(随机延时.toString())
            })
            sleep(900)
        }
        ui.run(function () {
            window.计时器.setText("")
        })
        // 无痕模式登录Google()
        登录paly商店()
        ui.run(function () {
            ui.Google登录.setChecked(false)
        })
        Google登录 = false
    } else {
        if (参数[47]) {//随机延时
            if (参数[26]) {
                var 随机时间 = random(1, 18000)
                while (随机时间 > 0) {
                    var 时间 = convertSecondsToHMS(随机时间)
                    sleep(1000)
                    ui.run(function () {
                        window.计时器.setText(时间)
                    })
                    随机时间--
                }
            } else {
                var 随机时间 = random(1, 180)
                while (随机时间 > 0) {
                    var 时间 = convertSecondsToHMS(随机时间)
                    sleep(1000)
                    ui.run(function () {
                        window.计时器.setText(时间)
                    })
                    随机时间--
                }
            }
            ui.run(function () {
                window.计时器.setText("")
            })
        } else {
            sleep(random(1000, 10000))
        }
    }


    var a = app.launch("com.wemade.nightcrows")
    if (a) {
        log("进入游戏")
    } else {
        log("没有找到夜鸦!!")
        return;
    }
    
    任务分配()
}

let KeepAliveService = {
    /** 开启 */
    start: function (idStr, nameStr) {
        try {
            log("保活启动");
            idStr = idStr || "";
            let channel_id = idStr + ".foreground";
            let channel_name = nameStr + " 前台服务通知";
            let content_title = nameStr + " 正在运行中";
            let content_text = "请勿手动移除该通知";
            let ticker = nameStr + "已启动";
            let manager = context.getSystemService(android.app.Service.NOTIFICATION_SERVICE);
            let notification;
            let icon = context.getResources().getIdentifier("ic_3d_rotation_black_48dp", "drawable", context.getPackageName());
            if (device.sdkInt >= 26) {
                let channel = new android.app.NotificationChannel(channel_id, channel_name, android.app.NotificationManager.IMPORTANCE_DEFAULT);
                channel.enableLights(true);
                channel.setLightColor(0xff0000);
                channel.setShowBadge(false);
                manager.createNotificationChannel(channel);
                notification = new android.app.Notification.Builder(context, channel_id).setContentTitle(content_title).setContentText(content_text).setWhen(new Date().getTime()).setSmallIcon(icon).setTicker(ticker).setOngoing(true).build();
            } else {
                notification = new android.app.Notification.Builder(context).setContentTitle(content_title).setContentText(content_text).setWhen(new Date().getTime()).setSmallIcon(icon).setTicker(ticker).build();
            }
            manager.notify(1, notification);
            log("保活启动成功");
        } catch (error) {
            console.warn("前台保活服务启动失败:" + error);
            console.warn("保活服务启动失败,不影响辅助的正常运行,继续挂机即可.");
        }
    },
    /** 停止 */
    stop: function () {
        let manager = context.getSystemService(android.app.Service.NOTIFICATION_SERVICE);
        manager.cancelAll();
    },
};

function 中控数据发送(jsonData) {
        return 中控.send(jsonData)
}

function 执行铸币() {
    var 首次识别钻石 = true
    var 记录首次钻石 = 0
    var 结束铸币后钻石 = 0
    var 铸币轮数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            if (正在铸币 == false) {
                log("强制结束铸币")
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "停止铸币"
                }
            }
            if (packageName("com.wemadetree.wemixwallet").exists()) {
                log("操作钱包")
                var 结果 = wemix钱包相关操作()
                if (结果 == "停止铸币") {
                    return "停止铸币"
                }
                for (let index = 0; index < 20; index++) {
                    var qiagnhua = imgempt(true, 0.9, "燃料不足", 512, 42, 294, 95)
                    if (qiagnhua != null) {
                        log("燃料不足")
                        开始铸币 = false
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "停止铸币"
                        }
                    }
                    //燃料费不足
                    sleep(200)
                }
                铸币轮数++
                if (铸币轮数 >= 50) {
                    log("铸币多轮,放弃铸币")
                    正在铸币 = false
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "停止铸币"
                    }
                }
            } else {
                if (packageName("com.android.chrome").exists()) {
                    log("未下载钱包，退出铸币")
                    开始铸币 = false
                    app.launch("com.wemade.nightcrows")
                    storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
                } else {
                    var qiagnhua = imgempt(true, 0.9, "试图重试钱包", 626, 459, 258, 97)
                    if (qiagnhua != null) {
                        log("试图重试钱包")
                        随机点击(qiagnhua.x, qiagnhua.y)
                    } else {
                        var qiagnhua = imgempt(true, 0.9, "确认上面内容", 486, 411, 378, 110)
                        if (qiagnhua != null) {
                            log("确认上面内容")
                            随机点击(qiagnhua.x, qiagnhua.y)
                            随机点击(711, 546)
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "未安装WEMIX钱包", 459, 280, 387, 95)
                            if (qiagnhua != null) {
                                log("未安装WEMIX钱包")
                                随机点击(645, 447)
                                开始铸币 = false
                                storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
                            } else {
                                var qiagnhua = imgempt(true, 0.9, "连接钱包", 488, 393, 360, 118)
                                if (qiagnhua != null) {
                                    log("连接钱包")
                                    随机点击(qiagnhua.x, qiagnhua.y)
                                    sleep(3000)
                                } else {
                                    var qiagnhua = imgempt(true, 0.9, "WEMIX3.0", 294, 227, 701, 314)
                                    if (qiagnhua != null) {
                                        log("选择WEMIX3.0钱包")
                                        随机点击(qiagnhua.x, qiagnhua.y)
                                        随机点击(644, 571)
                                        sleep(7000)
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "游戏内paly钱包选项", 287, 183, 385, 381)
                                        if (qiagnhua != null) {
                                            log("选择paly钱包")
                                            随机点击(qiagnhua.x, qiagnhua.y)
                                            sleep(7000)
                                        } else {
                                            var qiagnhua = imgempt(true, 0.9, "夜鸦铸币详细", 700, 201, 198, 157)
                                            if (qiagnhua != null) {
                                                var 钻石及需求数 = findNumber("夜鸦制造", [704, 454, 118, 56])
                                                if (钻石及需求数 != null) {
                                                    var 当前钻石数量 = parseInt(钻石及需求数.slice(0, -2))
                                                    log("当前钻石:" + 当前钻石数量)
                                                    if (首次识别钻石) {
                                                        if (当前钻石数量 <= 90) {
                                                            log("钻石数量小于90，放弃铸币")
                                                            正在铸币 = false
                                                            storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                return "停止铸币"
                                                            }
                                                        }
                                                        记录首次钻石 = 当前钻石数量
                                                    } else {
                                                        var 消耗钻石 = 首次识别钻石 - 当前钻石数量//识别钻石
                                                        log("消耗钻石:" + 消耗钻石)
                                                        if (消耗钻石 > 0) {
                                                            var json = {
                                                                "设备id": 设备id,
                                                                "type": "铸币消耗",
                                                                "消耗钻石": 消耗钻石,
                                                            }
                                                            发送数据至中控("fragmentaryState", json)
                                                            正在铸币 = false
                                                            storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                log("本次铸币已完成")
                                                                return "完成"
                                                            }
                                                        } else {
                                                            log("铸币未成功")
                                                        }
                                                    }
                                                    log("点击选择最大然后铸币")
                                                    //这里目前是蓝书  需要改成crow币
                                                    // 随机点击(183, 685)
                                                    // 随机点击2(919, 670)

                                                    随机点击(752, 673)
                                                    随机点击2(753, 359)
                                                    随机点击2(731, 497)
                                                    随机点击2(923, 668)
                                                    for (let index = 0; index < 10; index++) {
                                                        var qiagnhua = imgempt(true, 0.9, "需要0.75以上", 546, 60, 127, 52)
                                                        if (qiagnhua != null) {
                                                            log("需要0.75以上才能铸币")
                                                            正在铸币 = false
                                                            storage.put("记录铸币时间", new Date().getTime() / (1000 * 60 * 60))
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                log("本次铸币已完成")
                                                                return "完成"
                                                            }
                                                        }
                                                        sleep(200)
                                                    }
                                                } else {
                                                    log("没有找到钻石数")
                                                }
                                            } else {
                                                var qiagnhua = imgempt(true, 0.9, "菜单_夜鸦币", 962, 522, 188, 115)
                                                if (qiagnhua != null) {
                                                    log("点击进入菜单_夜鸦币");
                                                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                } else {
                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                                    if (手 != null) {
                                                        log("主页点击菜单");
                                                        随机点击2(1238, 36, 10, 10)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 退出或解散队伍() {
    while (true) {
        if (异常捕获("屏蔽检测队伍副本") == "掉线") {
            return "掉线"
        } else {//
            var jiesou = imgempt(true, 0.9, "确定解散队伍|确定退出队伍", 448, 272, 396, 110)
            if (jiesou != null) {
                log("确定退出队伍")
                随机点击2(728, 449)
                return "成功"
            } else {
                var jiesou = imgempt(true, 0.9, "退出队伍|解散队伍", 249, 144, 112, 427)
                if (jiesou != null) {
                    log("点击退出队伍")
                    随机点击2(jiesou.x, jiesou.y)
                } else {
                    var jiesou = imgempt(true, 0.9, "在队伍中|在队伍中2", 80, 2, 213, 74)
                    if (jiesou != null) {
                        log("点击进入队伍")
                        随机点击2(jiesou.x, jiesou.y)
                    } else {
                        var jiesou = imgempt(true, 0.9, "没有队伍", 71, 343, 239, 79)
                        if (jiesou != null) {
                            log("没有队伍")
                            随机点击2(333, 85)
                            return "成功"
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                            if (手 != null) {
                                log("点击队伍")
                                随机点击(174, 29)
                            } else {
                                var jiesou = imgempt(true, 0.9, "队伍副本已经结束", 490, 278, 319, 100)
                                if (jiesou != null) {
                                    log("队伍副本已经结束")
                                    随机点击(645, 449)
                                } else {
                                    var jiesou = imgempt(true, 0.9, "队伍副本匹配页", 18, 2, 212, 86)
                                    if (jiesou != null) {
                                        log("队伍副本匹配页,退出")
                                        随机点击(37, 33)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 队伍副本() {
    log("检测队伍副本")
    var 战斗记录 = false
    var 接受进入 = false
    while (true) {
        if (异常捕获("屏蔽检测队伍副本") == "掉线") {
            return "掉线"
        } else {//
            var jiesou = imgempt(true, 0.9, "队伍副本无法获得奖励|队伍副本没有次数", 1019, 63, 209, 74)
            if (jiesou != null) {
                log("队伍副本已完成")
                storage.put("队伍副本完成日期", new Date().getDate().toString())
                随机点击(1238, 31)
                纯回主页("屏蔽检测队伍副本")
                return "掉线"
            } else {
                var jiesou = imgempt(true, 0.9, "队伍副本已经结束", 490, 278, 319, 100)
                if (jiesou != null) {
                    log("队伍副本已经结束")
                    随机点击(645, 449)
                    战斗记录 = true
                    let 结果 = 退出或解散队伍()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    接受进入 = false
                } else {
                    var jiesou = imgempt(true, 0.9, "队伍副本匹配完成", 492, 230, 306, 127)
                    if (jiesou != null) {
                        log("队伍副本匹配完成,点击进入")
                        随机点击(722, 449)
                    } else {
                        var jiesou = imgempt(true, 0.9, "成功击杀队伍boss", 538, 205, 217, 78)
                        if (jiesou != null) {
                            log("成功击杀队伍boss")
                            随机点击(632, 432)
                            战斗记录 = true
                        } else {
                            var jiesou = imgempt(true, 0.9, "队伍副本失败", 538, 205, 217, 78)
                            if (jiesou != null) {
                                log("队伍副本失败")
                                随机点击(632, 432)
                                战斗记录 = true
                                if (storage.get("记录队伍副本次数日期") != new Date().getDate().toString()) {
                                    log("重置队伍副本挑战次数")
                                    storage.put("记录队伍副本次数日期", new Date().getDate().toString())
                                    storage.put("队伍副本计次", "0")
                                } else {
                                    storage.put("队伍副本计次", (parseInt(storage.get("队伍副本计次")) + 1).toString())
                                    if (storage.get("队伍副本计次") >= 5) {
                                        storage.put("队伍副本计次", "0")
                                        storage.put("队伍副本完成日期", new Date().getDate().toString())
                                        纯回主页("屏蔽检测队伍副本")
                                        return "掉线"
                                    }
                                }
                            } else {
                                var jiesou = imgempt(true, 0.9, "自动退场", 30, 215, 135, 77)
                                if (jiesou != null) {
                                    log("等待自动退场")
                                    for (let index = 0; index < 10; index++) {
                                        var jiesou = imgempt(true, 0.9, "队伍副本已经结束", 490, 278, 319, 100)
                                        if (jiesou != null) {
                                            log("触发副本结束,不再等待10秒")
                                            break
                                        }
                                        sleep(1000)
                                    }
                                } else {
                                    var jiesou = imgempt(true, 0.9, "队伍副本任务", 1018, 79, 130, 58)
                                    if (jiesou != null) {
                                        log("队伍副本任务")
                                        战斗记录 = true
                                        接受进入 = false
                                        var zhuxian = imgempt(true, 0.9, "执行任务中|任务执行中|执行任务中2|执行任务中4", 1194, 421, 85, 83)
                                        if (zhuxian != null) {
                                            log("打boss中")
                                            sleep(5000)
                                        } else {
                                            var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                            if (auto != null) {
                                                log("点击前往boss")
                                                随机点击(jiesou.x, jiesou.y)
                                            } else {
                                                log("找到任务但未确认是否在打boss,暂时不动，尝试点击")
                                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                if (jdmsz != null) {
                                                    log("队伍副本中,退出节电")
                                                    swipe(566, 389, 968, 226, 500)
                                                }
                                                随机点击(jiesou.x, jiesou.y)
                                            }
                                        }
                                    } else {
                                        var jiesou = imgempt(true, 0.9, "接受队伍副本", 898, 605, 303, 106)
                                        if (jiesou != null) {
                                            log("接受队伍副本，判断人数");
                                            var qiagnhua = imgempt(true, 0.9, "第4位置有人|第4位置有人2", 1115, 397, 140, 99)
                                            if (qiagnhua != null) {
                                                log("4人以上，可以进入")
                                                随机点击(jiesou.x, jiesou.y)
                                                接受进入 = true
                                                sleep(10000)
                                            } else {
                                                log("少于4人拒绝匹配")
                                                随机点击(948, 663)
                                            }
                                        } else {
                                            var qiagnhua = imgempt(true, 0.9, "申请中", 898, 605, 303, 106)
                                            if (qiagnhua != null) {
                                                log("申请中,退出继续执行");
                                                接受进入 = false
                                                随机点击(40, 29)
                                                if (战斗记录) {
                                                    return "重置"
                                                }
                                                return "申请中"
                                            } else {
                                                var qiagnhua = imgempt(true, 0.9, "立即匹配队伍副本", 898, 605, 303, 106)
                                                if (qiagnhua != null) {
                                                    //这里看是否还有次数
                                                    log("立即匹配队伍副本");
                                                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                    for (let index = 0; index < 5; index++) {
                                                        var qiagnhua = imgempt(true, 0.9, "只有队长才可以申请", 470, 47, 314, 85)
                                                        if (qiagnhua != null) {
                                                            log("只有队长才可以申请,退出组队")
                                                            var 结果 = 纯回主页("屏蔽检测队伍副本")
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                            let 结果 = 退出或解散队伍()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                            break
                                                        } else {

                                                        }
                                                        sleep(200)
                                                    }
                                                } else {
                                                    var qiagnhua = imgempt(true, 0.9, "菜单_队伍副本", 957, 96, 322, 538)
                                                    if (qiagnhua != null) {
                                                        log("点击进入菜单_队伍副本");
                                                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                    } else {
                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                                        if (手 != null) {
                                                            var zhuxian = imgempt(true, 0.9, "执行任务中|任务执行中", 1194, 421, 85, 83)
                                                            if (zhuxian != null) {
                                                                log("打boss中")
                                                                sleep(5000)
                                                            } else {
                                                                log("检测是否在匹配中")//匹配中就点击进入
                                                                var qiagnhua = imgempt(true, 0.9, "队伍副本匹配中|队伍副本匹配中2|队伍副本匹配中3|队伍副本匹配中4", 258, 12, 95, 253)
                                                                if (qiagnhua != null) {
                                                                    log("队伍副本还在匹配中")
                                                                    if (战斗记录) {
                                                                        return "重置"
                                                                    }
                                                                    return "申请中"
                                                                } else {
                                                                    log("主页点击菜单");//未匹配就点击菜单
                                                                    随机点击2(1238, 36, 10, 10)
                                                                }
                                                            }
                                                        } else {
                                                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)//节电模式中6
                                                            if (jdmsz != null) {
                                                                log("队伍副本中,退出节电")
                                                                swipe(566, 389, 968, 226, 500)
                                                            } else {
                                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                                if (bfzl != null) {
                                                                    log("死亡复活")
                                                                    随机点击(bfzl.x, bfzl.y, 10, 10)
                                                                } else {
                                                                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                    if (zhuxian != null) {
                                                                        log("点击跳过剧情");
                                                                        随机点击2(zhuxian.x, zhuxian.y)
                                                                    } else {
                                                                        log("队伍副本啥也没找到")
                                                                        if (接受进入) {
                                                                            log("有接受记录，但未找到")
                                                                            var 结果 = 纯回主页("屏蔽检测队伍副本")
                                                                            if (结果 = "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function wemix钱包相关操作() {
    var 谷歌登录次数 = 0
    var 钱包啥也没识别到 = 0
    while (true) {
        if (正在铸币 == false) {
            log("强制结束铸币")
            app.launch("com.wemade.nightcrows")
            var 结果 = 纯回主页()
            if (结果 == "掉线") {
                return "掉线"
            } else {
                return "停止铸币"
            }
        }
        //0x2acdf032cf43f62c02967b88852fbd00afa7f65c05a7c21e9fd9991f309254e1 私钥
        if (packageName("com.wemade.nightcrows").exists()) {
            log("已回到游戏")
            return "回到游戏"
        } else if (textMatches(/(.*(可选).*)/).exists()) {
            钱包啥也没识别到 = 0
            log("允许访问权限")
            sleep(1000)
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else if (text("被限制的更新发布").exists()) {
            钱包啥也没识别到 = 0
            alert("需要更新钱包")
            exit()
        } else if (text("被限制的更新发布").exists()) {
            钱包啥也没识别到 = 0
            alert("需要更新钱包")
            exit()
        } else if (text("跳过").exists()) {
            钱包啥也没识别到 = 0
            log("跳过")
            sleep(1000)
            var 跳过 = text("跳过").findOne(2000)
            if (跳过 != null) {
                click(跳过.bounds().centerX(), 跳过.bounds().centerY())
            }
        } else if (textMatches(/(.*选择账号.*)/).exists()) {
            钱包啥也没识别到 = 0
            log("点击选择谷歌账号")
            谷歌登录次数++
            if (谷歌登录次数 >= 3) {
                log("循环登录不上")
                alert("循环登录不上")
                app.launch("com.wemade.nightcrows")
                return "完成"
            }
            sleep(1000)
            click(312, 683)
        } else if (textMatches(/(.*Google.*)/).exists()) {
            钱包啥也没识别到 = 0
            log("点击谷歌登录")
            sleep(1000)
            var 点击谷歌登录 = textMatches(/(.*Google.*)/).findOne(2000)
            if (点击谷歌登录 != null) {
                click(点击谷歌登录.bounds().centerX(), 点击谷歌登录.bounds().centerY())
            }
            for (let index = 0; index < 5; index++) {
                if (text("如果您想要进行签名，请点击“允许“。").exists() || textMatches(/(.*24小时内不再显示*)/).exists()) {
                    break
                }
                sleep(1000)
            }
        } else if (textMatches(/(.*全部同意.*)/).exists()) {
            钱包啥也没识别到 = 0
            log("全部同意")
            sleep(1000)
            var 全部同意范围 = text("全部同意").findOne(2000)
            if (全部同意范围 != null) {
                click(全部同意范围.bounds().centerX(), 全部同意范围.bounds().centerY())
                sleep(1000)
                click(344, 1228)
            }
        } else if (textMatches(/(.*创建的ID无法更改。*)/).exists() || textMatches(/(.*首字母只能使用小写英文*)/).exists()) {
            钱包啥也没识别到 = 0
            log("输入ID页,钱包未注册,结束铸币")
            alert("结束铸币")
            app.launch("com.wemade.nightcrows")
            return "完成"
            // click(344, 1228)
        } else if (textMatches(/(.*使用相同密码*)/).exists()) {
            钱包啥也没识别到 = 0
            log("使用相同密码")
            sleep(1000)
            setText("Kjfb0596#")
            click(344, 1228)
        } else if (textMatches(/(.*同意密码丢失责任*)/).exists()) {
            钱包啥也没识别到 = 0
            log("同意密码丢失责任")
            sleep(1000)
            click(53, 892)
            sleep(1000)
            var 同意 = text("同意").findOne(2000)
            if (同意 != null) {
                log(同意.bounds().centerX() + "," + 同意.bounds().centerY())
                click(同意.bounds().centerX(), 同意.bounds().centerY())
            }
            // click(53, 1058)
            sleep(1000)
        } else if (textMatches(/(.*24小时内不再显示*)/).exists()) {
            钱包啥也没识别到 = 0
            log("24小时内不再显示")
            sleep(1000)
            var 二十四小时内不显示 = text("24小时内不再显示").findOne(2000)
            if (二十四小时内不显示 != null) {
                click(二十四小时内不显示.bounds().centerX(), 二十四小时内不显示.bounds().centerY())
            }
        } else if (text("提供至PLAY钱包的信息").exists()) {
            钱包啥也没识别到 = 0
            log("提供至PLAY钱包的信息")
            sleep(1000)
            var 允许 = text("允许").findOne(2000)
            if (允许 != null) {
                click(允许.bounds().centerX(), 允许.bounds().centerY())
            }
        } else if (text("如果您想要进行签名，请点击“允许“。").exists()) {
            钱包啥也没识别到 = 0
            log("如果您想要进行签名，请点击“允许“。")
            var 允许 = text("允许").findOne(2000)
            if (允许 != null) {
                click(允许.bounds().centerX(), 允许.bounds().centerY())
            }
        } else if (text("认证已完成").exists()) {
            钱包啥也没识别到 = 0
            log("认证已完成")
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else if (text("请输入密码。").exists()) {
            钱包啥也没识别到 = 0
            log("输入密码")
            sleep(1000)
            setText("Kjfb0596#")
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else if (text("完成签名，请返回APP。").exists()) {
            钱包啥也没识别到 = 0
            log("完成签名，请返回APP")
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else if (text("签名已完成").exists()) {
            钱包啥也没识别到 = 0
            log("完成签名，请返回APP")
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else {

            if (packageName("com.android.chrome").exists()) {
                log("误点，返回钱包")
                钱包啥也没识别到 = 0
                back()
            } else {
                钱包啥也没识别到++
                if (钱包啥也没识别到 >= 10) {
                    log("钱包啥也没识别到，返回游戏")
                    app.launch("com.wemade.nightcrows")
                    return "完成"
                }
                log("!!!!!!!!!")
            }
        }
        sleep(1000)
    }
}

function 注册钱包() {
    log("打开钱包")
    app.launch("com.wemadetree.wemixwallet")
    var 识别wemix币 = true
    var wemix币数量 = 0
    var 识别钱包地址 = true
    var 钱包地址 = ""
    var 识别钱包私钥 = true
    var 获取的私钥 = ""

    //0x66a8f6db62357f78a88b7f87ee52e9a1fcd594709904ec5b3ab7590e7b04e7d9 测试账号私钥

    // storage.put("已有钱包地址",null)
    // storage.put("已有钱包私钥",null)

    if (storage.get("已有钱包私钥") != null) {
        获取的私钥 = storage.get("已有钱包私钥")
        log("已有钱包私钥:" + 获取的私钥)
        识别钱包私钥 = false
    }
    if (storage.get("已有钱包地址") != null) {
        钱包地址 = storage.get("已有钱包地址")
        log("已有钱包地址:" + 钱包地址)
        识别钱包地址 = false
    }
    var 谷歌登录次数 = 0
    while (true) {
        if (textMatches(/(.*(可选).*)/).exists()) {
            log("允许访问权限")
            sleep(1000)
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
        } else if (text("被限制的更新发布").exists()) {
            alert("需要更新钱包")
            exit()
        } else if (text("被限制的更新发布").exists()) {
            alert("需要更新钱包")
            exit()
        } else if (text("跳过").exists()) {
            log("跳过")
            sleep(1000)
            var 跳过 = text("跳过").findOne(2000)
            if (跳过 != null) {
                click(跳过.bounds().centerX(), 跳过.bounds().centerY())
            }
        } else if (textMatches(/(.*选择账号.*)/).exists()) {
            log("点击选择谷歌账号")
            谷歌登录次数++
            if (谷歌登录次数 >= 3) {
                alert("循环登录不上")
                exit()
            }
            sleep(1000)
            click(312, 683)
        } else if (textMatches(/(.*Google.*)/).exists()) {
            log("点击谷歌登录")
            sleep(1000)
            var 点击谷歌登录 = textMatches(/(.*Google.*)/).findOne(2000)
            if (点击谷歌登录 != null) {
                click(点击谷歌登录.bounds().centerX(), 点击谷歌登录.bounds().centerY())
            }
        } else if (textMatches(/(.*全部同意.*)/).exists()) {
            log("全部同意")
            sleep(1000)
            var 全部同意范围 = text("全部同意").findOne(2000)
            if (全部同意范围 != null) {
                click(全部同意范围.bounds().centerX(), 全部同意范围.bounds().centerY())
                sleep(1000)
                click(344, 1228)
            }
        } else if (textMatches(/(.*创建的ID无法更改。*)/).exists() || textMatches(/(.*首字母只能使用小写英文*)/).exists()) {
            log("输入ID")
            sleep(1000)
            var randomAscii;
            var 随机数 = random(3, 11)
            var 名字 = ""
            randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
            randomAscii = String.fromCharCode(randomAscii)
            名字 = 名字 + "" + randomAscii
            for (let index = 0; index < 随机数; index++) {
                var randomCase = Math.floor(Math.random() * 2);
                if (randomCase === 0) {
                    randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
                    randomAscii = String.fromCharCode(randomAscii);
                } else {
                    randomAscii = random(0, 9).toString()
                }
                名字 = 名字 + "" + randomAscii
            }
            setText(名字)
            sleep(1000)
            var 确认 = text("确认").findOne(2000)
            if (确认 != null) {
                click(确认.bounds().centerX(), 确认.bounds().centerY())
            }
            // click(344, 1228)
        } else if (textMatches(/(.*使用相同密码*)/).exists()) {
            log("使用相同密码")
            sleep(1000)
            setText("Kjfb0596#")
            click(344, 1228)
        } else if (textMatches(/(.*同意密码丢失责任*)/).exists()) {
            log("同意密码丢失责任")
            sleep(1000)
            click(53, 892)
            sleep(1000)
            var 同意 = text("同意").findOne(2000)
            if (同意 != null) {
                log(同意.bounds().centerX() + "," + 同意.bounds().centerY())
                click(同意.bounds().centerX(), 同意.bounds().centerY())
            }
            // click(53, 1058)
            sleep(1000)
        } else if (textMatches(/(.*24小时内不再显示*)/).exists()) {
            log("24小时内不再显示")
            sleep(1000)
            var 二十四小时内不显示 = text("24小时内不再显示").findOne(2000)
            if (二十四小时内不显示 != null) {
                click(二十四小时内不显示.bounds().centerX(), 二十四小时内不显示.bounds().centerY())
            }
        } else if (text("搜索代币名称").exists() && (识别wemix币 || 识别钱包私钥)) {
            if (识别wemix币) {
                log("搜索代币名称")
                sleep(2000)
                if (textMatches(/(.*24小时内不再显示*)/).exists()) {
                    log("24小时内不再显示")
                    sleep(1000)
                    var 二十四小时内不显示 = text("24小时内不再显示").findOne(2000)
                    if (二十四小时内不显示 != null) {
                        click(二十四小时内不显示.bounds().centerX(), 二十四小时内不显示.bounds().centerY())
                    }
                }
                var 搜索代币 = text("搜索代币名称").findOne(2000)
                if (搜索代币 != null) {
                    click(搜索代币.bounds().centerX(), 搜索代币.bounds().centerY())
                    sleep(1000)
                    var wemix币 = text("WEMIX").id("txt_name").findOne(2000)
                    if (wemix币 != null) {
                        log(wemix币.bounds().centerX() + "," + wemix币.bounds().centerY())
                        click(wemix币.bounds().centerX(), wemix币.bounds().centerY())
                    }
                }
            } else {
                log("识别钱包私钥,点击设置")
                click(653, 1231)
            }
        } else if (text("上线交易所").id("txt_title").exists() && 识别wemix币) {
            log("识别wemix币数量")
            sleep(3000)
            var wemix币数量控件 = id("txt_total_balance").findOne(2000)
            if (wemix币数量控件 != null) {
                wemix币数量 = wemix币数量控件.text()
                log("wemix币数量:" + wemix币数量)
                back()
                sleep(1000)
                back()
                wemix币数量 = wemix币数量
                识别wemix币 = false
            }
        } else if (text("领取").id("text").exists() && 识别钱包地址 && storage.get("已有钱包地址") == null) {
            log("点击领取")
            sleep(1000)
            var 领取 = text("领取").id("text").findOne(2000)
            if (领取 != null) {
                click(领取.bounds().centerX(), 领取.bounds().centerY())
            }
        } else if (text("复制").id("btn_copy").exists() && 识别钱包地址 && storage.get("已有钱包地址") == null) {
            log("钱包地址页")
            sleep(3000)
            var 钱包地址控件 = id("txt_address").findOne(2000)
            if (钱包地址控件 != null) {
                钱包地址 = 钱包地址控件.text()
                log("钱包地址:" + 钱包地址)
                storage.put("已有钱包地址", 钱包地址)
                back()
                识别钱包地址 = false
            }

        } else if (text("安全及隐私").id("txt_title").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("安全及隐私")
            sleep(1000)
            var 安全及隐私 = text("安全及隐私").id("txt_title").findOne(2000)
            if (安全及隐私 != null) {
                click(安全及隐私.bounds().centerX(), 安全及隐私.bounds().centerY())
            }
        } else if (text("已确认以上注意事项。").id("check_agree").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("已确认以上注意事项。")
            sleep(1000)
            var 已确认以上注意事项 = text("已确认以上注意事项。").id("check_agree").findOne(2000)
            if (已确认以上注意事项 != null) {
                click(已确认以上注意事项.bounds().centerX(), 已确认以上注意事项.bounds().centerY())
                sleep(1000)
                click(331, 1213)
                log("输入密码")
                sleep(1000)
                setText("Kjfb0596#")
                sleep(1000)
                var 确认 = text("确认").findOne().bounds()
                click(确认.centerX(), 确认.centerY())
            }
            // click(344, 1228)
            // swipe(53,1058,100,1058,3000)
        } else if (text("包含一个以上的小写字母和大写字母").exists()) {
            setText("Kjfb0596#")
            sleep(1000)
            var 下一步 = text("下一步").findOne().bounds()
            click(下一步.centerX(), 下一步.centerY())
        } else if (text("私钥").id("txt_title").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("点击私钥")
            sleep(1000)
            var 点击私钥 = text("私钥").id("txt_title").findOne(2000)
            if (点击私钥 != null) {
                click(点击私钥.bounds().centerX(), 点击私钥.bounds().centerY())
                sleep(1000)
                setText("Kjfb0596#")
                sleep(1000)
                click(344, 1228)
            }
        } else if (text("点击公开私钥").id("txt_title").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("点击公开私钥")
            sleep(1000)
            swipe(344, 1228, 344, 1228, 3000)
        } else if (id("txt_key").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("获取私钥")
            sleep(1000)
            获取的私钥控件 = id("txt_key").findOne(2000)
            if (获取的私钥控件 != null) {
                获取的私钥 = 获取的私钥控件.text()
                log("获取的私钥：" + 获取的私钥)
                storage.put("已有钱包私钥", 获取的私钥)
                back()
                sleep(1000)
                back()
                sleep(1000)
                click(53, 1228)
                识别钱包私钥 = false
            }
        } else if (text("复制至剪切板").exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("复制至剪切板获取私钥")
            sleep(1000)
            复制至剪切板 = text("复制至剪切板").findOne(2000).bounds()
            click(复制至剪切板.centerX(), 复制至剪切板.centerY())
            获取的私钥 = getClip()
            log("获取的私钥：" + 获取的私钥)
            if (获取的私钥 == "") {
                alert("有问题")
            }
            storage.put("已有钱包私钥", 获取的私钥)
            back()
            sleep(1000)
            back()
            sleep(1000)
            click(53, 1228)
            识别钱包私钥 = false
        } else if (textMatches(/(.*设置*)/).exists() && 识别钱包私钥 && storage.get("已有钱包私钥") == null) {
            log("设置")
            sleep(1000)
            // var 设置 = text("设置").id("navigation_bar_item_small_label_view").findOne().bounds()
            var 设置 = textMatches(/(.*设置*)/).findOne(2000).bounds()
            console.log(设置.centerX());
            console.log(设置.centerX());
            click(设置.centerX(), 设置.centerY())
        } else if (!识别钱包私钥 && !识别钱包地址 && !识别wemix币) {
            // if (typeof(识别wemix币)=="number") {
            //     log("wemix币正常")
            // }
            log(typeof (wemix币数量))
            if (钱包地址.includes("0x")) {
                log("钱包地址没问题")
            }
            if (获取的私钥.includes("0x")) {
                log("私钥没问题")
            }

            var json = {
                "设备id": 设备id,
                "type": "查看钱包",
                "wemix币": wemix币数量,
                "钱包地址": 钱包地址,
                "私钥": 获取的私钥
            }

            发送数据至中控("fragmentaryState", json)
            log("全部识别完毕")
            return
        } else if (text("导入").exists()) {
            var path = "/storage/emulated/0/WalletInformation.txt"
            if (files.exists(path)) {
                var 配置 = files.read(path).split("---");
                if (配置.length == 2) {
                    setText(配置[0].toString())
                } else {
                    log("钱包信息录入不正确")
                    alert("钱包信息录入不正确")
                }
            } else {
                log("没有钱包信息")
                alert("没有钱包信息")
            }
            var 导入 = text("导入").findOne(2000)
            if (导入 != null) {
                click(导入.bounds().centerX(), 导入.bounds().centerY())
            }
        } else if (text("导入现有钱包完成").exists()) {
            var 完成 = text("完成").findOne(2000)
            if (完成 != null) {
                click(完成.bounds().centerX(), 完成.bounds().centerY())
            }
        } else {
            log("!!!!!!!!!")
        }
        sleep(1000)
    }
}

function 识别等级() {
    log("识别等级")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var qiagnhua = imgempt(true, 0.9, "菜单_属性点|菜单_属性点2", 956, 88, 318, 540)
            if (qiagnhua != null) {
                log("点击进入菜单_属性点");
                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击2(1238, 36, 10, 10)
                } else {
                    var zhuxian = imgempt(true, 0.9, "信念传承页(中间)", 543, 391, 213, 198)
                    if (zhuxian != null) {
                        log("识别属性值计算等级")
                        var 已有属性值 = findNumber("属性值", [451, 396, 89, 56])
                        if (已有属性值 != null) {
                            var 当前等级 = 29 + parseInt(已有属性值)
                            var json = {
                                "设备id": 设备id,
                                "type": "等级",
                                "当前等级": 当前等级
                            }
                            发送数据至中控("fragmentaryState", json)
                            storage.put("识别等级时间", new Date().getDate().toString())
                            storage.put("识别的等级", 当前等级.toString())
                            纯回主页()
                            return "完成"
                        } else {

                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 检测蓝书() {
    log("检测蓝书数量")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标", 109, 77, 80, 57)
                if (jizhandi != null) {
                    var laolian = imgempt(true, 0.9, "制造(蓝弓详细)", 674, 237, 191, 160)
                    if (laolian != null) {
                        var laolian = imgempt(true, 0.9, "制造详细蓝书", 906, 498, 112, 86)
                        if (laolian != null) {
                            log("识别蓝书数量");
                            var 当前数量 = 找数字("字符串", "夜鸦制造", 6, 0.9, laolian.x + 45, laolian.y, 127, 43);
                            if (当前数量 != "false") {
                                已有数量 = parseInt(当前数量.slice(0, -2))
                                if (已有数量 < 15 || isNaN(已有数量)) {
                                    log("蓝书不足,制造完成")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "条件不足"
                                    }
                                    // exit()
                                } else {
                                    log("蓝书充足" + 已有数量)
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "条件达标"
                                    }
                                }
                            } else {
                                log("未找到数量")
                            }
                        } else {
                            log("没找到蓝书")
                            swipe(762, 528, 736, 614, 500)
                            sleep(1000)
                        }
                    } else {//
                        var laolian = imgempt(true, 0.9, "制造(蓝弓)", 220, 121, 354, 598)
                        if (laolian != null) {
                            log("制造(蓝弓)");
                            随机点击(laolian.x + 100, laolian.y, 10, 10)
                        } else {

                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                    if (jizhandi != null) {
                        log("点击菜单_制造");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                            if (zhunmen != null) {
                                log("专门制作,鉴别金币");//
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                        if (当前铜钱数量 <= 600000) {
                                            log("铜钱不足,制造完成")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "条件不足"
                                            }
                                        } else {
                                            随机点击(zhunmen.x - 630, zhunmen.y, 10, 10)
                                        }
                                    } else {
                                        log("没有找到铜钱")
                                        sleep(3000)
                                    }
                                }
                            } else {
                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                if (jdmsz != null) {
                                    log("检测蓝书,退出节电")
                                    swipe(566, 389, 968, 226, 500)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 检测铜钱() {
    log("检测铜钱")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
            if (jizhandi != null) {
                log("点击菜单_制造");
                随机点击(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                    if (zhunmen != null) {
                        log("专门制作,鉴别金币");//
                        var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                        if (tongqian != null) {
                            var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                            if (当前铜钱数量 != "false") {
                                var json = {
                                    "设备id": 设备id,
                                    "type": "铜钱数",
                                    "铜钱数量": 当前铜钱数量
                                }
                                发送数据至中控("fragmentaryState", json)
                                log("当前铜钱:" + 当前铜钱数量)
                                var 结果 = 纯回主页()
                                if (异常捕获() == "掉线") {
                                    return "掉线"
                                }
                                return 当前铜钱数量
                            } else {
                                log("没有找到铜钱")
                                sleep(3000)
                            }
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 使用技能书() {
    log("使用技能书")
    var 整理 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(603, 635)
            } else {
                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                if (bbym != null) {
                    log("背包里")
                    if (整理) {
                        log("点击整理背包")
                        随机点击(1178, 577)
                        sleep(2000)
                        log("点击宝箱栏")
                        随机点击2(1249, 309)
                        整理 = false
                    } else {//
                        var 未使用 = true
                        var guajizhon = imgempt(true, 0.9, "普通技能书", 918, 104, 305, 433)
                        if (guajizhon != null) {
                            未使用 = false
                            log("点击使用技能书")
                            for (let index = 0; index < 2; index++) {
                                随机点击2(guajizhon.x, guajizhon.y)
                            }
                            for (let index = 0; index < 3; index++) {
                                var guajizhon = imgempt(true, 0.9, "已经学习过的技能提示|已经学习过的技能提示2", 463, 49, 335, 88)
                                if (guajizhon != null) {
                                    log("此技能已学习过，放仓库去")
                                    var 结果 = 最终仓库调整("流程放入")
                                    if (结果 != "掉线") {
                                        continue
                                    } else {
                                        return "掉线"
                                    }
                                }
                                sleep(200)
                            }
                        }
                        var guajizhon = imgempt(true, 0.9, "绿级技能书", 918, 104, 305, 433)
                        if (guajizhon != null) {
                            未使用 = false
                            log("点击使用技能书")
                            for (let index = 0; index < 2; index++) {
                                随机点击2(guajizhon.x, guajizhon.y)
                            }
                            for (let index = 0; index < 3; index++) {
                                var guajizhon = imgempt(true, 0.9, "已经学习过的技能提示|已经学习过的技能提示2", 463, 49, 335, 88)
                                if (guajizhon != null) {
                                    log("此技能已学习过，放仓库去")
                                    var 结果 = 最终仓库调整("流程放入")
                                    if (结果 != "掉线") {
                                        continue
                                    } else {
                                        return "掉线"
                                    }
                                }
                                sleep(200)
                            }
                        }
                        var guajizhon = imgempt(true, 0.9, "蓝级技能书", 918, 104, 305, 433)
                        if (guajizhon != null) {
                            未使用 = false
                            log("点击使用技能书")
                            for (let index = 0; index < 2; index++) {
                                随机点击2(guajizhon.x, guajizhon.y)
                            }
                            for (let index = 0; index < 3; index++) {
                                var guajizhon = imgempt(true, 0.9, "已经学习过的技能提示|已经学习过的技能提示2", 463, 49, 335, 88)
                                if (guajizhon != null) {
                                    log("此技能已学习过，放仓库去")
                                    var 结果 = 最终仓库调整("流程放入")
                                    if (结果 != "掉线") {
                                        continue
                                    } else {
                                        return "掉线"
                                    }
                                }
                                sleep(200)
                            }
                        }
                        if (未使用) {
                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                            if (bbym != null) {
                                log("背包无技能书了")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "使用完成"
                                }
                            } else {
                                log("未找到技能书")
                                swipe(1037, 432, 1036, 228, 2000)
                            }
                        }
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                        整理 = true
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            整理 = true
                            随机点击(1115, 34, 10, 10)
                        } else {

                        }
                    }
                }

            }
        }
        sleep(200)
    }
}


function 活动制造() {
    log("活动制造")
    var 需要制造的内容 = "事先预约优惠卷|多洛万的支援箱"
    var 未找到需制造的内容 = 0
    var 点击月光糕制造活动栏次数 = 0
    var 已点击指定活动栏 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造", 958, 87, 321, 499)
                if (jizhandi != null) {
                    log("点击菜单_制造");
                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        已点击指定活动栏 = false
                        log("主页点击菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                        if (zhunmen != null) {
                            log("专门制作,点击普通制造");//
                            随机点击(322, 242)
                        } else {
                            var jizhandi = imgempt(true, 0.9, "制造页", 4, 4, 243, 76)
                            if (jizhandi != null) {
                                var jizhandi = imgempt(true, 0.9, "活动制造页", 10, 116, 202, 106)
                                if (jizhandi != null) {
                                    if (需要制造的内容 == "") {
                                        log("没有需要制造的物品了")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    } else {
                                        var zhizrenwu = CoordinatesAndPictureName(true, 0.9, 需要制造的内容, 225, 130, 356, 538)
                                        if (zhizrenwu != null && 已点击指定活动栏) {
                                            log("点击制造活动:" + zhizrenwu.图名)
                                            随机点击(zhizrenwu.x, zhizrenwu.y)
                                            sleep(1000)
                                            if (需要制造的内容.includes("|")) {
                                                var regex = new RegExp(zhizrenwu.图名 + "\\|");
                                                if (需要制造的内容.match(regex)) {
                                                    需要制造的内容 = 需要制造的内容.replace(zhizrenwu.图名 + "|", '');
                                                } else {
                                                    需要制造的内容 = 需要制造的内容.replace("|" + zhizrenwu.图名, '');
                                                }
                                            } else {
                                                需要制造的内容 = 需要制造的内容.replace(zhizrenwu.图名, '');
                                            }
                                            随机点击(879, 661)
                                            随机点击(755, 359)
                                            随机点击(728, 495)
                                            随机点击(1050, 660)
                                            sleep(1000)
                                        } else {
                                            var jizhandi = imgempt(true, 0.9, "事先预约", 12, 133, 205, 291)
                                            if (jizhandi != null) {
                                                log("点击制造活动栏事先预约")
                                                if (已点击指定活动栏) {
                                                    swipe(376, 507, 380, 315, 2000)
                                                    点击月光糕制造活动栏次数++
                                                    if (点击月光糕制造活动栏次数 >= 5) {
                                                        log("未找到可制造内容,退出")
                                                        var 结果 = 纯回主页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        } else {
                                                            return "完成"
                                                        }
                                                    }
                                                } else {
                                                    已点击指定活动栏 = true
                                                    随机点击(jizhandi.x, jizhandi.y)
                                                }
                                            } else {
                                                未找到需制造的内容++
                                                if (未找到需制造的内容 >= 3) {
                                                    log("未找到需制造的内容")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "完成"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                } else {
                                    log("点击活动制造页")
                                    随机点击(285, 94)
                                }
                            } else {
                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                if (jdmsz != null) {
                                    log("活动制造,退出节电")
                                    swipe(566, 389, 968, 226, 500)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 购买技能书改版(购买条件) {
    var 回城卷轴 = true
    var 滑动次数 = 0
    var 购买次数 = 0
    var 未售钱袋子 = true
    var 钱袋子滑动次数 = 0
    var 滑动次数 = 0
    var 购买致命一击 = false
    var 已购买致命一击 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "出售MAX", 680, 375, 156, 95)
                if (zhuchengzahuo != null) {
                    log("点击出售MAX");
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    随机点击2(726, 638, 10, 10)
                } else {
                    var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                    if (srgmjm != null) {
                        log("商人购买界面，购买");
                        var 识别数量 = findNumber("钻石铜钱数", [606, 559, 211, 43])
                        if (识别数量 != null) {
                            log("此技能数价格:" + 识别数量)
                            if (识别数量 >= 20000000) {
                                log("此技能书大于2000w 放弃购买")
                                随机点击(544, 636)
                                纯回主页()
                                if (购买次数 != 0) {
                                    return "完成购买"
                                } else {
                                    return "铜钱不足"
                                }
                            } else if (识别数量 >= 9000000) {
                                if (storage.get("二转记录") == "已二转") {
                                    if (购买致命一击 == false && 已购买致命一击 == false) {
                                        log("大于900w的技能书，取消购买并前往购买致命一击")
                                        随机点击(544, 636)
                                        购买致命一击 = true
                                        continue
                                    }
                                } else {
                                    log("未二转不再购买")
                                    随机点击(544, 636)
                                    纯回主页()
                                    if (购买次数 != 0) {
                                        return "完成购买"
                                    } else {
                                        return "铜钱不足"
                                    }
                                }
                            }
                        }
                        随机点击(636, 159)
                        sleep(1000)
                        log("二次确认是否购买")
                        var ercqr = imgempt(true, 0.9, "购买过的技能书", 492, 222, 285, 306)
                        if (ercqr != null) {
                            log("购买过")
                            随机点击(552, 633)
                            随机点击(552, 633)
                        } else {
                            var ercqr = imgempt(true, 0.9, "未学习前置技能", 492, 222, 285, 306)
                            if (ercqr != null) {
                                log("未学习前置技能")
                                纯回主页()
                                if (购买次数 != 0) {
                                    return "完成购买"
                                } else {
                                    return "铜钱不足"
                                }
                            } else {
                                购买次数++
                                随机点击(729, 633, 10, 10)
                                随机点击2(729, 633, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,完成购买")
                                    纯回主页()
                                    if (购买次数 != 0) {
                                        return "完成购买"
                                    } else {
                                        return "铜钱不足"
                                    }
                                } else {
                                    if (购买致命一击) {
                                        购买致命一击 = false
                                        已购买致命一击 = true
                                    }
                                    log("使用技能书")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    var 结果 = 使用技能书()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                }
                            }
                        }
                        sleep(1000)
                    } else {
                        var zhuchengzahuo = imgempt(true, 0.9, "确定出售", 639, 475, 206, 92)
                        if (zhuchengzahuo != null) {
                            log("确定出售");
                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                        } else {
                            var srgmjm = imgempt(true, 0.9, "技能商店页|技能商店页2", 6, 2, 265, 91)
                            if (srgmjm != null) {
                                if (未售钱袋子) {
                                    log("寻找钱袋子")
                                    随机点击2(1242, 303, 10, 10)
                                    var yssrhy = imgempt(true, 0.9, "钱袋子(背包)", 915, 109, 301, 502)
                                    if (yssrhy != null) {
                                        log("点击钱袋子")
                                        随机点击(yssrhy.x, yssrhy.y, 10, 10)
                                    } else {
                                        钱袋子滑动次数++
                                        if (钱袋子滑动次数 <= 5) {
                                            swipe(1063, 489, 1064, 279, 2000)
                                            sleep(1000)
                                        } else {
                                            log("没有钱袋子了")
                                            未售钱袋子 = false
                                            // if (购买条件 == false) {
                                            //     纯回主页()
                                            //     return "完成购买"
                                            // }
                                        }
                                    }
                                } else {
                                    //1:普通技能书,2:绿级技能书,3:蓝级技能书,4:绿级普通技能书
                                    let ColorArray = [
                                        ["#e7c887", [[-57, -23, "#756d5c"], [-70, -11, "#b0b09b"], [-55, -7, "#7b7561"]]],
                                        ["#fdfad7", [[-65, -22, "#4d7239"], [-68, -13, "#496c2c"], [-70, -1, "#6b7b3d"]]],
                                        ["#f5e5b0", [[-65, -28, "#13373d"], [-70, -17, "#e4d1a7"], [-70, -8, "#42585b"]]],
                                        ["#fcedb7", [[-60, -24, "#625b47"], [-66, -16, "#cccbba"], [-70, -3, "#85806c"]]]
                                    ]
                                    var srgmjm = colorRecognitionSelect(true, 12, "最上方", 24, 146, 151, 510, ColorArray)
                                    if (srgmjm != null && 购买致命一击 == false) {
                                        log(srgmjm)
                                        log("点击可购买技能书")
                                        随机点击(65, srgmjm.y, 10, 10)
                                        var ercqr = imgempt(true, 0.9, "购买过的技能书", 492, 222, 285, 306)
                                        if (ercqr != null) {
                                            log("购买过的技能")
                                            随机点击(srgmjm.x, srgmjm.y, 10, 10)
                                            continue
                                        } else {
                                            随机点击(srgmjm.x, srgmjm.y, 10, 10)
                                        }
                                        随机点击2(srgmjm.x, srgmjm.y, 10, 10)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,完成购买")
                                            纯回主页()
                                            if (购买次数 != 0) {
                                                return "完成购买"
                                            } else {
                                                return "铜钱不足"
                                            }
                                        }
                                    } else {//
                                        var srgmjm = imgempt(true, 0.9, "购买技能_致命一击", 90, 136, 244, 563)
                                        if (srgmjm != null && 购买致命一击) {
                                            log("点击致命一击技能")
                                            随机点击(srgmjm.x, srgmjm.y)
                                        } else {
                                            log("未找到可购买技能书")
                                            if (滑动次数 >= 10) {
                                                纯回主页()
                                                if (购买次数 != 0) {
                                                    return "完成购买"
                                                } else {
                                                    return "铜钱不足"
                                                }
                                            } else {
                                                log("技能页滑动")
                                                swipe(152, 564, 158, 413, 2000)
                                                滑动次数++
                                            }
                                        }
                                        sleep(1000)
                                    }
                                }
                            } else {
                                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                if (qrtz != null) {
                                    log("确认跳转");
                                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城主城技能商店图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                        if (dyzczhsrtb != null) {
                                            if (滑动次数 >= 8) {
                                                var json = {
                                                    "设备id": 设备id,
                                                    "type": "异常",
                                                    "异常信息": "未找到技能商店"
                                                }
                                                发送数据至中控("fragmentaryState", json)
                                                alert("未找到技能商店")
                                                滑动次数 = 0
                                            }
                                            log("主城杂货商人图标滑动");
                                            swipe(129, 287, 131, 153, 2000)
                                            sleep(2000)
                                            滑动次数++
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                if (滑动次数 >= 8) {
                                                    var json = {
                                                        "设备id": 设备id,
                                                        "type": "异常",
                                                        "异常信息": "未找到技能商店"
                                                    }
                                                    发送数据至中控("fragmentaryState", json)
                                                    alert("未找到技能商店")
                                                    滑动次数 = 0
                                                }
                                                log("主城杂货商人图标滑动");
                                                swipe(129, 287, 131, 153, 2000)
                                                sleep(2000)
                                                滑动次数++
                                            } else {
                                                var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                                if (shezhi != null) {
                                                    log("确定退出副本");
                                                    随机点击(shezhi.x, shezhi.y, 10, 10)
                                                } else {
                                                    var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                    if (guajizhon != null) {
                                                        log("点击退出副本");
                                                        随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                    } else {
                                                        if (回城卷轴) {
                                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                            if (zhuchengzahuo != null) {
                                                                log("主城委托图标");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(153, 87, 150, 282, 500)
                                                                }
                                                            } else {
                                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                if (huicheng != null) {
                                                                    log("点击回城卷轴")
                                                                    随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                    for (let index = 0; index < 5; index++) {
                                                                        var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                        if (guajizhon != null) {
                                                                            log("没有卷轴了")
                                                                            回城卷轴 = false
                                                                            break
                                                                        }
                                                                    }

                                                                    sleep(3000)
                                                                } else {
                                                                    回城卷轴 = false
                                                                }
                                                            }
                                                        } else {
                                                            var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                            if (dtl != null) {
                                                                var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                if (dthctb != null) {
                                                                    log("点击回城图标");
                                                                    随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                } else {
                                                                    log("地图里,寻找主城");
                                                                    for (let index = 0; index < 3; index++) {
                                                                        swipe(1104, 216, 1118, 614, 500)
                                                                        sleep(random(1000, 3000))
                                                                    }
                                                                }
                                                            } else {
                                                                var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                if (dtgbzt != null) {
                                                                    log("地图关闭状态,点击打开");
                                                                    随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                } else {
                                                                    var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                    if (dtdkzt != null) {
                                                                        log("点击地图");
                                                                        随机点击(139, 150, 10, 10)
                                                                        sleep(random(1000, 3000))
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }


                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 检测世界boss() {
    log("检测世界boss")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "boss讨伐弹窗|boss讨伐弹窗2", 545, 115, 223, 105)
            if (jizhandi != null) {
                log("boss讨伐弹窗,检测是否可以讨伐");
                var meizhou = findNumber("夜鸦拍卖行", [993, 449, 68, 36])
                if (meizhou != null) {
                    var meiri = findNumber("夜鸦拍卖行", [1000, 251, 63, 40])
                    if (meiri != null) {
                        if (meizhou == "55") {
                            if (meiri == "11") {
                                log("每周讨伐次数已上限,且今日已讨伐")
                                storage.put("讨伐世界boss记录", new Date().getDate().toString())
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                return "完成"
                            } else {
                                log("每周讨伐次数已上限,但今日未讨伐")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                return "讨伐"
                            }
                        } else {
                            log("每周讨伐次数未上限,直接干")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            return "讨伐"
                        }
                    } else {
                        log("没识别到每日讨伐次数")
                    }
                } else {
                    log("没识别到每周讨伐次数")
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "菜单_世界boss", 958, 87, 321, 499)
                if (jizhandi != null) {
                    log("点击菜单_世界boss");
                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                        if (jdmsz != null) {
                            log("检测boss,退出节电")
                            swipe(566, 389, 968, 226, 500)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 拿出可交易() {
    var 点击位置 = 1
    var 初始X = 113
    var 初始Y = 156
    var 点击X = 113
    var 点击Y = 156
    var 点击次数 = 0
    var TempPicture = null
    var 记录位置 = {}
    var 回城卷轴点击次数 = 0
    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "分解弹窗", 619, 114, 147, 72)
            if (bbym != null) {
                log("仓库，关闭分解");
                随机点击(1250, 87)
            } else {
                var xzfwq = imgempt(true, 0.9, "角色信息", 41, 45, 192, 97)
                if (xzfwq != null) {
                    log("关闭角色信息")
                    随机点击(33, 86)
                } else {
                    var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                    if (zhuxian != null) {
                        log("确定瞬移");
                        随机点击2(725, 496)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗按钮", 612, 398, 272, 165)
                        if (zhuxian != null) {
                            log("确定瞬移");
                            随机点击2(zhuxian.x, zhuxian.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var zhuxian = imgempt(true, 0.9, "物品寻找图标", 447, 490, 212, 111)
                            if (zhuxian != null) {
                                log("物品寻找图标");
                                点击次数 = 0
                                var shibie = imgempt(true, 0.9, "白级绑定|绿级绑定|蓝色绑定|金色绑定|蓝色绑定1字", 481, 125, 207, 59)
                                if (shibie != null) {
                                    console.log("不可交易，下一个");
                                    点击位置++
                                    随机点击2(26, 142, 10, 10)
                                } else {
                                    var bbym = cor(true, 12, 483, 175, 211, 41, "#c4ac84", [[5, 1, "#baa57c"], [14, 1, "#c0aa7d"], [18, 1, "#b8ac9e"], [38, -1, "#b79d83"], [47, 2, "#bbaa77"], [54, 0, "#baab7d"], [47, 3, "#bbaa77"], [47, 1, "#a39467"]], { region: [573, 146, 154, 104], threshold: [26] })
                                    if (bbym != null) {
                                        log("可交易，拿出")
                                        重复点击坐标次数 = 0
                                        随机点击2(点击X, 点击Y, 10, 10)
                                        for (let index = 0; index < 3; index++) {
                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                            if (bbkjbztc != null) {
                                                storage.put("拿出可交易时间", new Date().getTime() / (1000 * 60).toString())
                                                log("背包空间不足，放弃拿出")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {

                                                    return "完成"
                                                }
                                            }
                                            sleep(200)
                                        }
                                    } else {
                                        log("不确定，跳过")
                                        点击位置++
                                        随机点击2(26, 142, 10, 10)
                                    }
                                }
                            } else {
                                var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                                if (mi != null) {
                                    log("个人仓库")
                                    var 行 = Math.ceil(点击位置 / 4)
                                    var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                    点击X = 初始X + (列 * 69 - 69)
                                    点击Y = 初始Y + (行 * 69 - 69)
                                    if (点击Y > 536) {
                                        log("物品栏点击上限")
                                        点击位置--
                                        var 行 = Math.ceil(点击位置 / 4)
                                        var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                        点击X = 初始X + (列 * 69 - 69)
                                        点击Y = 初始Y + (行 * 69 - 69)
                                        var 截取区域 = {}
                                        截取区域.x = 点击X - 34
                                        截取区域.y = 点击Y - 34
                                        console.log("上次结束位置:");
                                        console.log(截取区域);
                                        var img = captureScreen();
                                        TempPicture = images.clip(img, 截取区域.x, 截取区域.y, 69, 69);
                                        TempPicture.saveTo("/storage/emulated/0/tete.png")
                                        记录位置 = 截取区域
                                        console.log("截最后一个物品图并翻页");
                                        swipe(204, 468, 205, 261, 1000)
                                        sleep(1000)
                                        var img = captureScreen();
                                        imgxy = images.findImage(img, TempPicture, { region: [75, 113, 281, 446], threshold: 0.9 })
                                        if (imgxy != null) {
                                            log("识别的位置")
                                            log(imgxy)
                                            if ((imgxy.x <= (截取区域.x + 2) && imgxy.x >= (截取区域.x - 2)) && (imgxy.y <= (截取区域.y + 2) && imgxy.y >= (截取区域.y - 2))) {
                                                log("最后一个物品为相同物品,判定为结束")
                                                log("完成拿出")
                                                storage.put("拿出可交易时间", new Date().getTime() / (1000 * 60).toString())
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    log("退出拿出")
                                                    return "完成"
                                                }
                                            } else {
                                                log("找到上次结束位置:" + imgxy.x + "," + imgxy.y + "，开始计算下一个物品位置")
                                                log(imgxy.y)
                                                初始X = 113
                                                初始Y = imgxy.y + 69 + 34
                                                点击位置 = 1
                                                log("计算的位置为:" + 初始X + "," + 初始Y)
                                            }
                                        } else {
                                            console.log("没找到上次记录位置，请留意");
                                            // alert("留意")
                                        }
                                        TempPicture.recycle()
                                    } else {
                                        log("点击下一个物品");
                                        log("点击的位置为:" + 点击位置 + "个物品")
                                        log(点击X + "," + 点击Y)
                                        随机点击(点击X, 点击Y, 10, 10)
                                        if (点击次数 > 2) {
                                            log("完成拿出")
                                            storage.put("拿出可交易时间", new Date().getTime() / (1000 * 60).toString())
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                log("退出拿出")
                                                return "完成"
                                            }
                                        } else {
                                            点击次数++
                                        }
                                    }
                                } else {
                                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                    if (mi != null) {
                                        log("移动中...");
                                        sleep(1000)
                                    } else {
                                        var shezhi = imgempt(true, 0.9, "主城仓库图标", 9, 57, 96, 367)
                                        if (shezhi != null) {
                                            log("点击主城仓库图标");
                                            随机点击(shezhi.x + 10, shezhi.y, 10, 10)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                                    if (qrtz != null) {
                                                        log("确认跳转");
                                                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                        if (guajizhon != null) {
                                                            log("铜钱不足,处理")
                                                            // 无铜钱处理()
                                                            野外挂机刷金币()
                                                            return "掉线"
                                                        }
                                                    } else {
                                                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                                        if (yssrhy != null) {
                                                            log("点击退出商店页")
                                                            随机点击(1244, 33, 10, 10)
                                                        } else {
                                                            if (回城卷轴) {
                                                                var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                                if (zhuchengzahuo != null) {
                                                                    log("主城委托图标");
                                                                    for (let index = 0; index < 3; index++) {
                                                                        swipe(153, 87, 150, 282, 500)
                                                                    }
                                                                } else {
                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                                                    if (zhuchengzahuo != null) {
                                                                        log("主城主城技能商店图标");
                                                                        swipe(122, 138, 114, 274, 500)
                                                                    } else {
                                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                        if (huicheng != null) {
                                                                            log("点击回城卷轴")
                                                                            随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                            回城卷轴点击次数++
                                                                            sleep(3000)
                                                                            if (回城卷轴点击次数 >= 3) {
                                                                                回城卷轴 = false
                                                                            }
                                                                        } else {
                                                                            回城卷轴 = false
                                                                        }
                                                                    }
                                                                }
                                                            } else {
                                                                var dyzczhsrtb = imgempt(true, 0.9, "地图里仓库图标", 7, 105, 244, 563)
                                                                if (dyzczhsrtb != null) {
                                                                    var guajizhon = imgempt(true, 0.9, "脚印|脚印2|脚印3", 161, 578, 239, 140)
                                                                    if (guajizhon != null && 点击脚印) {
                                                                        log("点击脚印移动")
                                                                        随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                                        点击脚印 = false
                                                                    } else {
                                                                        log("点击地图里仓库图标");
                                                                        随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                                                        点击脚印次数++
                                                                        if (点击脚印次数 >= 5) {
                                                                            点击脚印 = true
                                                                            点击脚印次数 = 0
                                                                        }
                                                                    }
                                                                } else {
                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                    if (zhuchengzahuo != null) {
                                                                        log("点击主城杂货商人图标");
                                                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                                    } else {
                                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                                        if (dtl != null) {
                                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                            if (dthctb != null) {
                                                                                log("点击回城图标");
                                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                            } else {
                                                                                log("地图里,寻找主城");
                                                                                for (let index = 0; index < 3; index++) {
                                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                                    sleep(random(1000, 3000))
                                                                                }
                                                                            }
                                                                        } else {
                                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                            if (dtgbzt != null) {
                                                                                log("地图关闭状态,点击打开");
                                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                            } else {
                                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                                if (dtdkzt != null) {
                                                                                    log("点击地图");
                                                                                    随机点击(139, 150, 10, 10)
                                                                                    sleep(random(1000, 3000))
                                                                                } else {

                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 讨伐世界boss() {//
    log("讨伐世界boss")
    var 点击自动 = true
    var 未识别到红色摇篮次数 = 0
    var 尝试点击 = true
    while (true) {
        if (异常捕获("世界boss") == "掉线") {
            return "掉线"
        } else {
            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
            if (shezhi != null) {
                log("确定退出副本");
                随机点击(shezhi.x, shezhi.y, 10, 10)
                纯回主页()
                return "掉线"
            } else {
                var jizhandi = imgempt(true, 0.9, "boss讨伐弹窗", 557, 121, 181, 85)
                if (jizhandi != null) {
                    log("前往讨伐世界boss，关闭检测弹窗")
                    随机点击(38, 32)
                } else {
                    var jdmsz = imgempt(true, 0.9, "红色摇篮|红色摇篮2", 96, 44, 154, 75)
                    if (jdmsz != null) {
                        未识别到红色摇篮次数 = 0
                        节电模式判断掉线时间戳 = new Date().getTime()
                        var jdmsz = imgempt(true, 0.9, "世界boss入场按钮", 582, 586, 130, 70)
                        if (jdmsz != null) {
                            log("已经进入boss了,点击退出")
                            随机点击(1238, 29)
                        } else {
                            if (点击自动) {
                                log("红色摇篮,已经在世界boss了,点击auto")
                                随机点击(1234, 462)
                                点击自动 = false
                            } else {
                                var jdmsz = imgempt(true, 0.9, "boss还未登场|boss还未登场2", 36, 230, 157, 57)
                                if (jdmsz != null) {
                                    log("boss还未登场")
                                    sleep(10000)
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "boss自动退场|boss自动退场2", 38, 229, 153, 67)
                                    if (jdmsz != null) {
                                        log("已经打完boss了")
                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                        if (huicheng != null) {
                                            log("点击回城卷轴")
                                            随机点击2(huicheng.x, huicheng.y, 10, 10)
                                            var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                            if (guajizhon != null) {
                                                log("没有卷轴了，点击退出")
                                                随机点击2(311, 78)
                                            } else {
                                                log("点击回城成功")
                                                纯回主页()
                                                return "掉线"
                                            }
                                            sleep(3000)
                                        } else {
                                            log("没有识别到回城卷轴，点击退出")
                                            随机点击2(311, 78)
                                        }
                                        // 回城买药()
                                    } else {

                                    }
                                }
                            }
                        }
                    } else {
                        var jdmsz = imgempt(true, 0.9, "世界boss入场按钮", 582, 586, 130, 70)
                        if (jdmsz != null) {
                            log("世界boss入场按钮,点击入场")
                            随机点击(jdmsz.x, jdmsz.y)
                            未识别到红色摇篮次数 = 0
                        } else {
                            var jdmsz = imgempt(true, 0.9, "世界boss提示|世界boss提示2|世界boss提示3|世界boss提示4|世界boss提示5|世界boss提示6|世界boss提示7|世界boss提示8|世界boss提示9|世界boss提示10|世界boss提示11", 255, 47, 285, 120)// 308, 45, 103, 92)
                            if (jdmsz != null) {
                                log("世界boss提示,点击进入")
                                随机点击(jdmsz.x, jdmsz.y)
                            } else {
                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                if (jdmsz != null) {
                                    log("刷boss中,退出节电")
                                    节电模式判断掉线时间戳 = new Date().getTime()
                                    swipe(566, 389, 968, 226, 500)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("主城杂货")
                                        if (new Date().getMinutes() <= 30) {
                                            log("未能在规定时间内进入世界boss或已攻略完毕")
                                            纯回主页()
                                            return "掉线"
                                        }
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            未识别到红色摇篮次数++
                                            if (未识别到红色摇篮次数 >= 30) {
                                                if (尝试点击) {
                                                    log("尝试直接点击")
                                                    尝试点击 = false
                                                    随机点击(359, 83)
                                                } else {
                                                    log("不在世界boss了")
                                                    纯回主页()
                                                    return "掉线"
                                                }

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 购买技能书(购买条件) {
    var 回城卷轴 = true
    var 滑动次数 = 0
    var 购买次数 = 0
    var 未售钱袋子 = false
    var 钱袋子滑动次数 = 0
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "出售MAX", 680, 375, 156, 95)
                if (zhuchengzahuo != null) {
                    log("点击出售MAX");
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    随机点击2(726, 638, 10, 10)
                } else {
                    var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                    if (srgmjm != null) {
                        log("商人购买界面，购买");
                        购买次数++
                        随机点击2(729, 633, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,完成购买")
                            纯回主页()
                            if (购买次数 != 0) {
                                return "完成购买"
                            } else {
                                return "铜钱不足"
                            }
                        }
                        sleep(1000)
                    } else {
                        var zhuchengzahuo = imgempt(true, 0.9, "确定出售", 639, 475, 206, 92)
                        if (zhuchengzahuo != null) {
                            log("确定出售");
                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                        } else {
                            var srgmjm = imgempt(true, 0.9, "技能商店页", 3, 1, 243, 77)
                            if (srgmjm != null) {
                                if (未售钱袋子) {
                                    log("寻找钱袋子")
                                    随机点击2(1242, 303, 10, 10)
                                    var yssrhy = imgempt(true, 0.9, "钱袋子(背包)", 915, 109, 301, 502)
                                    if (yssrhy != null) {
                                        log("点击钱袋子")
                                        随机点击(yssrhy.x, yssrhy.y, 10, 10)
                                    } else {
                                        钱袋子滑动次数++
                                        if (钱袋子滑动次数 <= 5) {
                                            swipe(1063, 489, 1064, 279, 2000)
                                            sleep(1000)
                                        } else {
                                            log("没有钱袋子了")
                                            未售钱袋子 = false
                                            if (购买条件 == false) {
                                                纯回主页()
                                                return "完成购买"
                                            }
                                        }
                                    }
                                } else {
                                    var srgmjm = matchImg(true, "最上边", 0.9, "技能书未购买", 96, 129, 131, 536)
                                    if (srgmjm != null) {
                                        log(srgmjm)
                                        log("点击可购买技能书")
                                        随机点击2(srgmjm.resultSet.x, srgmjm.resultSet.y, 10, 10)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,完成购买")
                                            纯回主页()
                                            if (购买次数 != 0) {
                                                return "完成购买"
                                            } else {
                                                return "铜钱不足"
                                            }
                                        }
                                    } else {
                                        log("未找到可购买技能书")
                                        if (滑动次数 >= 10) {
                                            纯回主页()
                                            if (购买次数 != 0) {
                                                return "完成购买"
                                            } else {
                                                return "铜钱不足"
                                            }
                                        } else {
                                            swipe(152, 564, 158, 413, 2000)
                                            滑动次数++
                                        }
                                        sleep(1000)
                                    }
                                }
                            } else {
                                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                if (qrtz != null) {
                                    log("确认跳转");
                                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城主城技能商店图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                        if (dyzczhsrtb != null) {
                                            if (滑动次数 >= 8) {
                                                var json = {
                                                    "设备id": 设备id,
                                                    "type": "异常",
                                                    "异常信息": "未找到技能商店"
                                                }
                                                发送数据至中控("fragmentaryState", json)
                                                alert("未找到技能商店")
                                                滑动次数 = 0
                                            }
                                            log("主城杂货商人图标滑动");
                                            swipe(129, 287, 131, 153, 2000)
                                            sleep(2000)
                                            滑动次数++
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                if (滑动次数 >= 8) {
                                                    var json = {
                                                        "设备id": 设备id,
                                                        "type": "异常",
                                                        "异常信息": "未找到技能商店"
                                                    }
                                                    发送数据至中控("fragmentaryState", json)
                                                    alert("未找到技能商店")
                                                    滑动次数 = 0
                                                }
                                                log("主城杂货商人图标滑动");
                                                swipe(129, 287, 131, 153, 2000)
                                                sleep(2000)
                                                滑动次数++
                                            } else {
                                                var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                                if (shezhi != null) {
                                                    log("确定退出副本");
                                                    随机点击(shezhi.x, shezhi.y, 10, 10)
                                                } else {
                                                    var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                    if (guajizhon != null) {
                                                        log("点击退出副本");
                                                        随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                    } else {
                                                        if (回城卷轴) {
                                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                            if (zhuchengzahuo != null) {
                                                                log("主城委托图标");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(153, 87, 150, 282, 500)
                                                                }
                                                            } else {
                                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                if (huicheng != null) {
                                                                    log("点击回城卷轴")
                                                                    随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                    for (let index = 0; index < 5; index++) {
                                                                        var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                        if (guajizhon != null) {
                                                                            log("没有卷轴了")
                                                                            回城卷轴 = false
                                                                            break
                                                                        }
                                                                    }
                                                                    sleep(3000)
                                                                } else {
                                                                    回城卷轴 = false
                                                                }
                                                            }
                                                        } else {
                                                            var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                            if (dtl != null) {
                                                                var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                if (dthctb != null) {
                                                                    log("点击回城图标");
                                                                    随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                } else {
                                                                    log("地图里,寻找主城");
                                                                    for (let index = 0; index < 3; index++) {
                                                                        swipe(1104, 216, 1118, 614, 500)
                                                                        sleep(random(1000, 3000))
                                                                    }
                                                                }
                                                            } else {
                                                                var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                if (dtgbzt != null) {
                                                                    log("地图关闭状态,点击打开");
                                                                    随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                } else {
                                                                    var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                    if (dtdkzt != null) {
                                                                        log("点击地图");
                                                                        随机点击(139, 150, 10, 10)
                                                                        sleep(random(1000, 3000))
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 技能二次配置() {
    var 剪刀技能 = true
    var 加强技能 = true
    var 后跳技能 = true
    var 配置技能 = true
    var 使用技能 = true
    var 下滑次数 = 0
    var 点击次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "放置技能", 944, 546, 82, 69)
            if (bbym != null) {
                if (配置技能) {
                    log("点击放置技能")
                    if (剪刀技能) {
                        var bbym = imgempt(true, 0.9, "剪刀技能左侧", 23, 111, 135, 491)//一技能
                        if (bbym != null) {
                            log("剪刀技能已放置")
                            剪刀技能 = false
                        } else {
                            var bbym = imgempt(true, 0.9, "剪刀技能(右侧)", 875, 84, 179, 493)
                            if (bbym != null) {
                                log("点击放置技能")
                                for (let index = 0; index < 2; index++) {
                                    随机点击2(bbym.x, bbym.y)
                                }
                                剪刀技能 = false
                            } else {

                            }
                        }
                    } else if (加强技能) {
                        var bbym = imgempt(true, 0.9, "加强技能左侧", 23, 111, 135, 491)//二技能
                        if (bbym != null) {
                            log("加强技能已放置")
                            加强技能 = false
                        } else {
                            var bbym = imgempt(true, 0.9, "加强技能右侧", 875, 84, 179, 493)
                            if (bbym != null) {
                                log("点击放置技能")
                                for (let index = 0; index < 2; index++) {
                                    随机点击2(bbym.x, bbym.y)
                                }
                                加强技能 = false
                            } else {
                                加强技能 = false
                            }
                        }
                    } else if (后跳技能) {
                        var bbym = imgempt(true, 0.9, "后跳技能左侧", 23, 111, 135, 491)//二技能
                        if (bbym != null) {
                            log("后跳技能已放置")
                            后跳技能 = false
                        } else {
                            var bbym = imgempt(true, 0.9, "后跳技能右侧", 875, 84, 179, 493)
                            if (bbym != null) {
                                log("点击放置技能")
                                for (let index = 0; index < 2; index++) {
                                    随机点击2(bbym.x, bbym.y)
                                }
                                后跳技能 = false
                            } else {
                                后跳技能 = false
                            }
                        }
                    } else if (使用技能) {
                        var bbym = imgempt(true, 0.9, "勾选技能使用功能", 9, 551, 287, 105)//二技能
                        if (bbym != null) {
                            log("点击勾选技能使用功能")
                            随机点击2(bbym.x, bbym.y)
                        } else {
                            var bbym = imgempt(true, 0.9, "自动使用技能关", 214, 529, 122, 61)//二技能
                            if (bbym != null) {
                                log("点击开启自动使用技能")
                                随机点击2(bbym.x, bbym.y)

                            } else {
                                使用技能 = false
                            }
                        }
                    } else {
                        配置技能 = false
                    }
                } else {
                    var srgmjm = matchImg(true, "最上边", 0.9, "开启右侧技能|自动使用技能关", 1091, 133, 139, 444)
                    if (srgmjm != null) {
                        if (点击次数 <= 4) {
                            log("开启自动使用技能")
                            随机点击2(srgmjm.resultSet.x, srgmjm.resultSet.y)
                            for (let index = 0; index < 5; index++) {
                                var bbym = imgempt(true, 0.9, "无法开启技能", 560, 54, 317, 76)
                                if (bbym != null) {
                                    log("技能未学习,无法开启自动")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "放置完成"
                                    }
                                }
                                sleep(200)
                            }
                        } else {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "放置完成"
                            }
                        }
                        点击次数++
                    } else {
                        if (下滑次数 <= 5) {
                            log("未找到可开启技能,下滑")
                            swipe(1059, 430, 1059, 246, 2000)
                            sleep(1000)
                        } else {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "放置完成"
                            }
                        }
                        下滑次数++
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "技能(打开)|技能(打开)2", 1040, 51, 163, 79)//右侧状态
                if (bbym != null) {
                    log("点击放置技能")
                    随机点击2(981, 578)
                } else {
                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                    if (zhuxian != null) {
                        log("点击跳过");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击技能")
                            随机点击(1176, 34, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 获得当前运行时间() {
    var now = new Date(); // 获取当前时间  
    var midnight = new Date(now.getFullYear(), now.getMonth(), now.getDate()); // 获取当天午夜的时间  
    // 计算从午夜到当前时间经过的毫秒数  
    var millisecondsSinceMidnight = now - midnight;
    // 将毫秒数转换为秒数  
    var secondsSinceMidnight = Math.floor(millisecondsSinceMidnight / 1000);
    return secondsSinceMidnight
}


function convertSecondsToHMS(seconds) {
    var hours = Math.floor(seconds / 3600);
    var minutes = Math.floor((seconds % 3600) / 60);
    var remainingSeconds = seconds % 60;
    console.log(hours + "小时" + minutes + "分钟" + remainingSeconds + "秒");
    var times = hours + "时" + minutes + "分" + remainingSeconds + "秒"
    return times
}

//  4~6   6~12

function 任务分配() {
    log("任务分配")
    //线程赋值
    委托线程 = threads.start(function () { });
    日副本线程 = threads.start(function () { });
    周副本线程 = threads.start(function () { });
    区副本线程 = threads.start(function () { });
    激战地线程 = threads.start(function () { });
    挂机线程 = threads.start(function () { });
    经验本线程 = threads.start(function () { });
    活动本线程 = threads.start(function () { });
    铸币线程 = threads.start(function () { });
    线程控制 = true
    var json = {
        "设备id": 设备id,
        "type": "选择项",
        "auto": 参数[49],
        "交易": 参数[14],
        "自动提升": 参数[45]
    }
    发送数据至中控("fragmentaryState", json)

    if (参数[49]) {
        log("自动挂机点测试：" + storage.get("自动挂机点测试"))
        log("自动激战地：" + storage.get("自动激战地"))
        log("自动副本测试：" + storage.get("自动副本测试"))
    }

    if (storage.get("日副本限制时间2") == null) {
        storage.put("日副本限制时间2", random(14400, 79200))//4~6
    }

    if (storage.get("经验本限制时间2") == null) {
        storage.put("经验本限制时间2", random(14400, 79200))//6~8
    }

    if (storage.get("活动本限制时间2") == null) {
        storage.put("活动本限制时间2", random(14400, 79200))//8~10
    }

    if (storage.get("区副本限制时间改2") == null) {
        storage.put("区副本限制时间改2", random(14400, 79200))//10~14
    }

    if (storage.get("周副本限制时间改2") == null) {
        storage.put("周副本限制时间改2", random(14400, 79200))//10~14
    }

    log("日副本随机时间是:")
    convertSecondsToHMS(parseInt(storage.get("日副本限制时间2")))
    log("经验本随机时间是:")
    convertSecondsToHMS(parseInt(storage.get("经验本限制时间2")))
    log("区副本随机时间是:")
    convertSecondsToHMS(parseInt(storage.get("区副本限制时间改2")))
    log("周副本随机时间是:")
    convertSecondsToHMS(parseInt(storage.get("周副本限制时间改2")))
    log("活动本限制时间2:")
    convertSecondsToHMS(parseInt(storage.get("活动本限制时间2")))
    sleep(1000)
    // 今日可交易 = true

    if (参数[26]) {
        任务状态 = "主线"
    } else {
        任务状态 = "挂机"
    }

    while (true) {
        if (参数[26]) {
            log("主线任务开始")
            执行主线任务()
        } else {
            if (二十四小时币价) {
                threads.start(function () {
                    log("二十四小时币价挂机线程开始")
                    while (true) {
                        回到主页("野外挂机", true)
                        sleep(1000)
                    }
                });
            } else {
                var 随机数 = random(3, 20)
                var 随机等待时间 = 随机数 * 1000
                var 随机数2 = random(3, 60)
                var 激战地随机时间 = 随机数2 * 1000
                var todayPast = 0
                var 打印一次 = true
                while (true) {
                    var 时间 = new Date()
                    var 星期 = 时间.getDay()
                    if (星期 == "0") {
                        星期 = "7"
                    }
                    todayPast = 获得当前运行时间()//秒

                    if (打印一次) {
                        log("区副本可进入条件:" + ((参数[10] || 参数[49]) && todayPast > parseInt(storage.get("区副本限制时间改2")) && storage.get("区本今日逃跑次数") < 区本逃跑次数限制 && (storage.get("区副本修复装备次数") <= 区本逃跑次数限制) && storage.get("区副本锁") && parseInt(星期) >= parseInt(参数[11]) && parseInt(storage.get("区副本时间记录")) != getTimestampWeekNumber().toString() && (parseInt(new Date().getTime()) - parseInt(storage.get("区副本拥挤时间戳"))) / (1000 * 3600) >= 1))
                        log("详细条件")
                        log("是否勾选:" + (参数[10] || 参数[49]))
                        log("限制时间:" + (todayPast > parseInt(storage.get("区副本限制时间改2"))))
                        log("逃跑次数:" + (storage.get("区本今日逃跑次数") < 区本逃跑次数限制))
                        log("修复次数:" + ((storage.get("区副本修复装备次数") <= 区本逃跑次数限制)))
                        log("区副本锁:" + storage.get("区副本锁"))
                        log("时间条件:" + (parseInt(星期) >= parseInt(参数[11])))
                        log("区副本记录:" + (parseInt(storage.get("区副本时间记录")) != getTimestampWeekNumber().toString()))
                        log("区副本拥挤:" + ((parseInt(new Date().getTime()) - parseInt(storage.get("区副本拥挤时间戳"))) / (1000 * 3600) >= 1))
                        打印一次 = false
                    }

                    if (参数[49]) {
                        // if (开始铸币 && (new Date().getTime() / (1000 * 60 * 60) - storage.get("记录铸币时间") >= 2)) {
                        if (开始铸币) {
                            if (线程控制) {
                                if (挂机线程.isAlive()) {
                                    线程控制 = false
                                    挂机线程.join()
                                    log("野外中断完毕")
                                } else if (区副本线程.isAlive()) {
                                    线程控制 = false
                                    区副本线程.join()
                                    log("区副本线程中断完毕")
                                } else if (周副本线程.isAlive()) {
                                    线程控制 = false
                                    周副本线程.join()
                                    log("周副本中断完毕")
                                } else if (激战地线程.isAlive()) {
                                    线程控制 = false
                                    激战地线程.join()
                                    log("激战地中断完毕")
                                } else if (日副本线程.isAlive()) {
                                    日副本线程.join()
                                    log("日副本中断完毕")
                                } else if (经验本线程.isAlive()) {
                                    线程控制 = false
                                    经验本线程.join()
                                    log("经验本中断完毕")
                                } else if (活动本线程.isAlive()) {
                                    线程控制 = false
                                    活动本线程.join()
                                    log("经验副本中断完毕")
                                } else if (委托线程.isAlive()) {
                                    线程控制 = false
                                    委托线程.join()
                                    log("经验副本中断完毕")
                                } else {
                                    线程控制 = false
                                }
                            } else if (!铸币线程.isAlive()) {
                                正在铸币 = true
                                铸币线程 = threads.start(function () {
                                    log("铸币开始")
                                    回到主页("铸币", true)
                                });
                                铸币线程.waitFor()
                                线程控制 = true
                                铸币线程.join()
                            }
                        } else if (参数[7] && storage.get("今日委托") != 时间.getDate() && 委托时间 == 时间.getHours()) {//) || (参数[7] && 强制委托 && storage.get("今日委托") != 时间.getDate())
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    } 铸币线程
                                } else if (!委托线程.isAlive()) {
                                    委托线程 = threads.start(function () {
                                        log("委托开始")
                                        委托时间记录 = new Date().getTime()
                                        回到主页("委托", true)
                                    });
                                    委托线程.waitFor()
                                    线程控制 = true
                                    委托线程.join()
                                }
                            } catch (error) {
                                log("委托停止线程报错" + error)
                                break
                            }
                        } else if (todayPast > parseInt(storage.get("日副本限制时间2")) && storage.get("日副本记录") != 星期 && parseInt(时间.getHours()) >= 4 && (parseInt(new Date().getTime()) - parseInt(storage.get("日副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                       
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log("委托中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!日副本线程.isAlive()) {
                                    日副本线程 = threads.start(function () {
                                        log("日副本开始")
                                        回到主页("日副本", true)
                                    });
                                    日副本线程.waitFor()
                                    线程控制 = true
                                    日副本线程.join()
                                }
                            } catch (error) {
                                log("日副本停止线程报错" + error)
                                break
                            }
                        } else if (todayPast > parseInt(storage.get("经验本限制时间2")) && parseInt(storage.get("经验本今日记录")) != 时间.getDate() && parseInt(时间.getHours()) >= 5 && (parseInt(new Date().getTime()) - parseInt(storage.get("经验本拥挤时间戳"))) / (1000 * 3600) >= 1) {////
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log("委托中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!经验本线程.isAlive()) {
                                    经验本线程 = threads.start(function () {
                                        log("经验本开始")
                                        回到主页("经验本", true)
                                    });
                                    经验本线程.waitFor()
                                    线程控制 = true
                                    经验本线程.join()
                                }

                            } catch (error) {
                                log("经验本停止线程报错" + error)
                                break
                            }

                        }
                        // else if (todayPast > parseInt(storage.get("活动本限制时间2")) && parseInt(storage.get("活动本今日记录")) != 时间.getDate() && parseInt(时间.getHours()) >= 7) {////
                        //     try {
                        //         if (线程控制) {
                        //             if (挂机线程.isAlive()) {
                        //                     log("任务分配等待随机时间:" + 随机等待时间)
                        //                     sleep(随机等待时间)
                        //                 线程控制 = false
                        //                 挂机线程.join()
                        //                 log("野外中断完毕")
                        //             } else if (区副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 区副本线程.join()
                        //                 log("区副本线程中断完毕")
                        //             } else if (周副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 周副本线程.join()
                        //                 log("周副本中断完毕")
                        //             } else if (激战地线程.isAlive()) {
                        //                     log("任务分配等待随机时间:" + 随机等待时间)
                        //                     sleep(随机等待时间)
                        //                 线程控制 = false
                        //                 激战地线程.join()
                        //                 log("激战地中断完毕")
                        //             } else if (委托线程.isAlive()) {
                        //                 线程控制 = false
                        //                 委托线程.join()
                        //                 log("委托中断完毕")
                        //             } else if (日副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 日副本线程.join()
                        //                 log("日副本中断完毕")
                        //             } else if (经验本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 经验本线程.join()
                        //                 log("经验副本中断完毕")
                        //             } else {
                        //                 线程控制 = false
                        //             }
                        //         } else if (!活动本线程.isAlive()) {
                        //             活动本线程 = threads.start(function () {
                        //                 log("活动本开始")
                        //                 回到主页("活动本", true)
                        //             });
                        //             活动本线程.waitFor()
                        //             线程控制 = true
                        //             活动本线程.join()
                        //         }
                        //     } catch (error) {
                        //         log("经验本停止线程报错" + error)
                        //         break
                        //     }

                        // }
                        else if ((参数[8] || 参数[49]) && todayPast > parseInt(storage.get("周副本限制时间改2")) && parseInt(星期) >= parseInt(参数[9]) && parseInt(storage.get("周副本时间记录")) != getTimestampWeekNumber().toString() && (parseInt(new Date().getTime()) - parseInt(storage.get("周副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!周副本线程.isAlive()) {
                                    周副本线程 = threads.start(function () {
                                        log("周副本开始")
                                        回到主页("周副本", true)
                                        强制委托 = true
                                    });
                                    周副本线程.waitFor()
                                    线程控制 = true
                                    周副本线程.join()

                                }
                            } catch (error) {
                                log("周副本停止线程报错" + error)
                                break
                            }

                        } else if ((参数[10] || 参数[49]) && todayPast > parseInt(storage.get("区副本限制时间改2")) && storage.get("区本今日逃跑次数") < 区本逃跑次数限制 && (storage.get("区副本修复装备次数") <= 区本逃跑次数限制) && storage.get("区副本锁") && parseInt(星期) >= parseInt(参数[11]) && parseInt(storage.get("区副本时间记录")) != getTimestampWeekNumber().toString() && (parseInt(new Date().getTime()) - parseInt(storage.get("区副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!区副本线程.isAlive()) {
                                    区副本线程 = threads.start(function () {
                                        区副本状态 = true
                                        log("区副本开始")
                                        回到主页("区副本", true)
                                        强制委托 = true
                                    });
                                    区副本线程.waitFor()
                                    线程控制 = true
                                    区副本线程.join()
                                }
                            } catch (error) {
                                log("区副本停止线程报错" + error)
                                break
                            }
                            // } else if (激战地选项 && storage.get("激战地今日逃跑次数") < 20 && storage.get("激战地锁") && (parseInt(时间.getHours()) >= 3 && parseInt(时间.getHours()) <= 18)) {//  18
                        } else if (parseInt(storage.get("识别的等级")) >= 35 && storage.get("自动激战地") != "NO" && storage.get("激战地今日逃跑次数") < 激战地逃跑次数限制 && storage.get("激战地锁") && (parseInt(时间.getHours()) >= 13 && parseInt(时间.getHours()) <= 20)) {
                            强制委托 = false
                            try {
                                if (挂机线程.isAlive() || 周副本线程.isAlive() || 委托线程.isAlive() || 区副本线程.isAlive() || 日副本线程.isAlive() || 经验本线程.isAlive()) {
                                    if (挂机线程.isAlive()) {
                                            log("任务分配激战地等待随机时间:" + 激战地随机时间)
                                            sleep(激战地随机时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!激战地线程.isAlive()) {
                                    线程控制 = true
                                    激战地线程 = threads.start(function () {
                                        log("激战地开始")
                                        回到主页("激战地", true)
                                    });
                                    激战地线程.waitFor()
                                    线程控制 = true
                                }
                            } catch (error) {
                                log("激战地停止线程报错" + error)
                                break
                            }
                        } else {
                            强制委托 = false
                            if (参数[0]) {
                                try {
                                    if (激战地线程.isAlive() || 周副本线程.isAlive() || 委托线程.isAlive() || 区副本线程.isAlive() || 日副本线程.isAlive() || 经验本线程.isAlive()) {
                                        if (激战地线程.isAlive()) {
                                                log("任务分配激战地等待随机时间:" + 激战地随机时间)
                                                sleep(激战地随机时间)
                                            线程控制 = false
                                            激战地线程.join()
                                            log("激战地线程中断完毕")
                                        } else if (周副本线程.isAlive()) {
                                            线程控制 = false
                                            周副本线程.join()
                                            log("周副本线程中断完毕")
                                        } else if (委托线程.isAlive()) {
                                            线程控制 = false
                                            委托线程.join()
                                            log(" 委托中断完毕")
                                        } else if (区副本线程.isAlive()) {
                                            线程控制 = false
                                            区副本线程.join()
                                            log("区副本线程中断完毕")
                                        } else if (日副本线程.isAlive()) {
                                            线程控制 = false
                                            日副本线程.join()
                                            log("日副本中断完毕")
                                        } else if (经验本线程.isAlive()) {
                                            线程控制 = false
                                            经验本线程.join()
                                            log("经验本中断完毕")
                                        } else if (活动本线程.isAlive()) {
                                            线程控制 = false
                                            活动本线程.join()
                                            log("经验副本中断完毕")
                                        } else {
                                            线程控制 = false
                                        }
                                    } else if (!挂机线程.isAlive()) {
                                        线程控制 = true
                                        挂机线程 = threads.start(function () {
                                            log("挂机线程开始")
                                            回到主页("野外挂机", true)
                                        });
                                        挂机线程.waitFor()
                                        线程控制 = true
                                    }
                                } catch (error) {
                                    log("野外挂机停止线程报错" + error)
                                    break
                                }

                            }
                        }

                    } else {
                        if (参数[7] && storage.get("今日委托") != 时间.getDate() && 委托时间 == 时间.getHours()) {//) || (参数[7] && 强制委托 && storage.get("今日委托") != 时间.getDate())
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!委托线程.isAlive()) {
                                    委托线程 = threads.start(function () {
                                        log("委托开始")
                                        委托时间记录 = new Date().getTime()
                                        回到主页("委托", true)
                                    });
                                    委托线程.waitFor()
                                    线程控制 = true
                                    委托线程.join()
                                }
                            } catch (error) {
                                log("委托停止线程报错" + error)
                                break
                            }
                        } else if ((参数[5] || 参数[39]) && todayPast > parseInt(storage.get("日副本限制时间2")) && storage.get("日副本记录") != 星期 && parseInt(时间.getHours()) >= 4 && (parseInt(new Date().getTime()) - parseInt(storage.get("日副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log("委托中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!日副本线程.isAlive()) {
                                    日副本线程 = threads.start(function () {
                                        log("日副本开始")
                                        回到主页("日副本", true)
                                    });
                                    日副本线程.waitFor()
                                    线程控制 = true
                                    日副本线程.join()
                                }
                            } catch (error) {
                                log("日副本停止线程报错" + error)
                                break
                            }
                        } else if ((参数[27] || 参数[49]) && todayPast > parseInt(storage.get("经验本限制时间2")) && parseInt(storage.get("经验本今日记录")) != 时间.getDate() && parseInt(时间.getHours()) >= 5 && (parseInt(new Date().getTime()) - parseInt(storage.get("经验本拥挤时间戳"))) / (1000 * 3600) >= 1) {////
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                            log("任务分配等待随机时间:" + 随机等待时间)
                                            sleep(随机等待时间)
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log("委托中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!经验本线程.isAlive()) {
                                    经验本线程 = threads.start(function () {
                                        log("经验本开始")
                                        回到主页("经验本", true)
                                    });
                                    经验本线程.waitFor()
                                    线程控制 = true
                                    经验本线程.join()
                                }

                            } catch (error) {
                                log("经验本停止线程报错" + error)
                                break
                            }

                        }
                        // else if (todayPast > parseInt(storage.get("活动本限制时间2")) && parseInt(storage.get("活动本今日记录")) != 时间.getDate() && parseInt(时间.getHours()) >= 7) {////
                        //     try {
                        //         if (线程控制) {
                        //             if (挂机线程.isAlive()) {
                        //                     log("任务分配等待随机时间:" + 随机等待时间)
                        //                     sleep(随机等待时间)
                        //                 线程控制 = false
                        //                 挂机线程.join()
                        //                 log("野外中断完毕")
                        //             } else if (区副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 区副本线程.join()
                        //                 log("区副本线程中断完毕")
                        //             } else if (周副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 周副本线程.join()
                        //                 log("周副本中断完毕")
                        //             } else if (激战地线程.isAlive()) {
                        //                     log("任务分配等待随机时间:" + 随机等待时间)
                        //                     sleep(随机等待时间)
                        //                 线程控制 = false
                        //                 激战地线程.join()
                        //                 log("激战地中断完毕")
                        //             } else if (委托线程.isAlive()) {
                        //                 线程控制 = false
                        //                 委托线程.join()
                        //                 log("委托中断完毕")
                        //             } else if (日副本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 日副本线程.join()
                        //                 log("日副本中断完毕")
                        //             } else if (经验本线程.isAlive()) {
                        //                 线程控制 = false
                        //                 经验本线程.join()
                        //                 log("经验副本中断完毕")
                        //             } else {
                        //                 线程控制 = false
                        //             }
                        //         } else if (!活动本线程.isAlive()) {
                        //             活动本线程 = threads.start(function () {
                        //                 log("活动本开始")
                        //                 回到主页("活动本", true)
                        //             });
                        //             活动本线程.waitFor()
                        //             线程控制 = true
                        //             活动本线程.join()
                        //         }
                        //     } catch (error) {
                        //         log("经验本停止线程报错" + error)
                        //         break
                        //     }
                        // } 
                        else if ((参数[8] || 参数[49]) && todayPast > parseInt(storage.get("周副本限制时间改2")) && parseInt(星期) >= parseInt(参数[9]) && parseInt(storage.get("周副本时间记录")) != getTimestampWeekNumber().toString() && (parseInt(new Date().getTime()) - parseInt(storage.get("周副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!周副本线程.isAlive()) {
                                    周副本线程 = threads.start(function () {
                                        log("周副本开始")
                                        回到主页("周副本", true)
                                        强制委托 = true
                                    });
                                    周副本线程.waitFor()
                                    线程控制 = true
                                    周副本线程.join()

                                }
                            } catch (error) {
                                log("周副本停止线程报错" + error)
                                break
                            }
                        } else if ((参数[10] || 参数[49]) && todayPast > parseInt(storage.get("区副本限制时间改2")) && storage.get("区本今日逃跑次数") < 区本逃跑次数限制 && storage.get("区副本锁") && parseInt(星期) >= parseInt(参数[11]) && parseInt(storage.get("区副本时间记录")) != getTimestampWeekNumber().toString() && (parseInt(new Date().getTime()) - parseInt(storage.get("区副本拥挤时间戳"))) / (1000 * 3600) >= 1) {
                            try {
                                if (线程控制) {
                                    if (挂机线程.isAlive()) {
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (激战地线程.isAlive()) {
                                        线程控制 = false
                                        激战地线程.join()
                                        log("激战地中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!区副本线程.isAlive()) {
                                    区副本线程 = threads.start(function () {
                                        log("区副本开始")
                                        回到主页("区副本", true)
                                        强制委托 = true
                                    });
                                    区副本线程.waitFor()
                                    线程控制 = true
                                    区副本线程.join()
                                }
                            } catch (error) {
                                log("区副本停止线程报错" + error)
                                break
                            }
                            // } else if (激战地选项 && storage.get("激战地今日逃跑次数") < 20 && storage.get("激战地锁") && (parseInt(时间.getHours()) >= 3 && parseInt(时间.getHours()) <= 18)) {//  18
                        } else if ((激战地选项 || (参数[49] && storage.get("自动激战地") != "NO")) && parseInt(storage.get("识别的等级")) >= 35 && storage.get("激战地今日逃跑次数") < 激战地逃跑次数限制 && storage.get("激战地锁") && (parseInt(时间.getHours()) >= 13 && parseInt(时间.getHours()) <= 20)) {
                            强制委托 = false
                            try {
                                if (挂机线程.isAlive() || 周副本线程.isAlive() || 委托线程.isAlive() || 区副本线程.isAlive() || 日副本线程.isAlive() || 经验本线程.isAlive()) {
                                    if (挂机线程.isAlive()) {
                                            log("任务分配激战地等待随机时间:" + 激战地随机时间)
                                            sleep(激战地随机时间)
                                        线程控制 = false
                                        挂机线程.join()
                                        log("野外中断完毕")
                                    } else if (周副本线程.isAlive()) {
                                        线程控制 = false
                                        周副本线程.join()
                                        log("周副本线程中断完毕")
                                    } else if (委托线程.isAlive()) {
                                        线程控制 = false
                                        委托线程.join()
                                        log(" 委托中断完毕")
                                    } else if (区副本线程.isAlive()) {
                                        线程控制 = false
                                        区副本线程.join()
                                        log("区副本线程中断完毕")
                                    } else if (日副本线程.isAlive()) {
                                        线程控制 = false
                                        日副本线程.join()
                                        log("日副本中断完毕")
                                    } else if (经验本线程.isAlive()) {
                                        线程控制 = false
                                        经验本线程.join()
                                        log("经验本中断完毕")
                                    } else if (活动本线程.isAlive()) {
                                        线程控制 = false
                                        活动本线程.join()
                                        log("经验副本中断完毕")
                                    } else {
                                        线程控制 = false
                                    }
                                } else if (!激战地线程.isAlive()) {
                                    线程控制 = true
                                    激战地线程 = threads.start(function () {
                                        log("激战地开始")
                                        回到主页("激战地", true)
                                    });
                                    激战地线程.waitFor()
                                    线程控制 = true
                                }
                            } catch (error) {
                                log("激战地停止线程报错" + error)
                                break
                            }
                        } else {
                            // log("激战地选项:"+激战地选项)
                            // log("激战地今日逃跑次数:"+storage.get("激战地今日逃跑次数")+storage.get("激战地今日逃跑次数") < 20)
                            // log("激战地锁:"+storage.get("激战地锁"))
                            // log("时间条件:"+(parseInt(时间.getHours()) >= 3 && parseInt(时间.getHours()) <= 18))
                            强制委托 = false
                            if (参数[0]) {
                                try {
                                    if (激战地线程.isAlive() || 周副本线程.isAlive() || 委托线程.isAlive() || 区副本线程.isAlive() || 日副本线程.isAlive() || 经验本线程.isAlive()) {
                                        if (激战地线程.isAlive()) {
                                                log("任务分配激战地等待随机时间:" + 激战地随机时间)
                                                sleep(激战地随机时间)
                                            线程控制 = false
                                            激战地线程.join()
                                            log("激战地线程中断完毕")
                                        } else if (周副本线程.isAlive()) {
                                            线程控制 = false
                                            周副本线程.join()
                                            log("周副本线程中断完毕")
                                        } else if (委托线程.isAlive()) {
                                            线程控制 = false
                                            委托线程.join()
                                            log(" 委托中断完毕")
                                        } else if (区副本线程.isAlive()) {
                                            线程控制 = false
                                            区副本线程.join()
                                            log("区副本线程中断完毕")
                                        } else if (日副本线程.isAlive()) {
                                            线程控制 = false
                                            日副本线程.join()
                                            log("日副本中断完毕")
                                        } else if (经验本线程.isAlive()) {
                                            线程控制 = false
                                            经验本线程.join()
                                            log("经验本中断完毕")
                                        } else if (活动本线程.isAlive()) {
                                            线程控制 = false
                                            活动本线程.join()
                                            log("经验副本中断完毕")
                                        } else {
                                            线程控制 = false
                                        }
                                    } else if (!挂机线程.isAlive()) {
                                        线程控制 = true
                                        挂机线程 = threads.start(function () {
                                            log("挂机线程开始")
                                            回到主页("野外挂机", true)
                                        });
                                        挂机线程.waitFor()
                                        线程控制 = true
                                    }
                                } catch (error) {
                                    log("野外挂机停止线程报错" + error)
                                    break
                                }
                            }
                        }
                    }
                    sleep(1000)
                }
            }
        }
        sleep(1000)
    }
    
}


function 登录paly商店() {
    log("开始登录paly商店")
    while (true) {
        if (packageName("com.android.vending").exists() || packageName("com.google.android.gms").exists()) {//
            log("1111")
            if (className("android.widget.Button").text("不开启").exists()) {
                log("不开启")
                className("android.widget.Button").text("不开启").findOne().click()
            } else if (className("android.widget.Button").desc("不开启").exists()) {
                log("不开启")
                className("android.widget.Button").desc("不开启").findOne().click()
            } else if (className("android.widget.Button").text("跳过").exists()) {
                log("跳过")
                className("android.widget.Button").text("跳过").findOne().click()
            } else if (className("android.widget.Button").desc("跳过").exists()) {
                log("跳过")
                className("android.widget.Button").desc("跳过").findOne().click()
            } else if (className("android.widget.Button").text("我同意").exists()) {
                log("我同意")
                className("android.widget.Button").text("我同意").findOne().click()
            } else if (className("android.widget.Button").desc("我同意").exists()) {
                log("我同意")
                className("android.widget.Button").desc("我同意").findOne().click()
            } else if (className("android.widget.Button").text("동의").exists()) {
                log("我同意韩文")
                className("android.widget.Button").text("동의").findOne().click()
            } else if (className("android.widget.Button").desc("동의").exists()) {// 
                log("我同意韩文")
                className("android.widget.Button").desc("동의").findOne().click()
            } else if (className("android.widget.Button").text("I agree").exists()) {
                log("I agree")
                className("android.widget.Button").text("I agree").findOne().click()
            } else if (className("android.widget.Button").desc("I agree").exists()) {// I agree
                log("I agree")
                className("android.widget.Button").desc("I agree").findOne().click()
            } else if (className("android.widget.Button").text("更多").exists()) {
                log("更多")
                className("android.widget.Button").text("更多").findOne().click()
            } else if (className("android.widget.Button").desc("更多").exists()) {
                log("更多")
                className("android.widget.Button").desc("更多").findOne().click()
            } else if (className("android.widget.Button").text("더보기").exists()) {//再看
                log("再看")
                className("android.widget.Button").text("더보기").findOne().click()
            } else if (className("android.widget.Button").desc("더보기").exists()) {
                log("再看")
                className("android.widget.Button").desc("더보기").findOne().click()
            } else if (className("android.widget.Button").text("Jeg accepterer").exists()) {//同意
                log("再看")
                className("android.widget.Button").text("Jeg accepterer").findOne().click()
            } else if (className("android.widget.Button").desc("Jeg accepterer").exists()) {
                log("再看")
                className("android.widget.Button").desc("Jeg accepterer").findOne().click()
            } else if (className("android.widget.Button").text("Add phone number?").exists()) {//同意
                log("翻页")
                for (let index = 0; index < 2; index++) {
                    swipe(340, 1064, 362, 228, 500)
                }
            } else if (className("android.widget.Button").desc("Add phone number?").exists()) {
                log("翻页")
                for (let index = 0; index < 2; index++) {
                    swipe(340, 1064, 362, 228, 500)
                }
            } else if (className("android.widget.Button").text("Skip").exists()) {//
                log("Skip")
                className("android.widget.Button").text("Skip").findOne().click()
            } else if (className("android.widget.Button").desc("Skip").exists()) {//Yes, I'm in
                log("Skip")
                className("android.widget.Button").desc("Skip").findOne().click()
            } else if (className("android.widget.Button").text("Yes, I'm in").exists()) {
                log("我同意英文")
                className("android.widget.Button").text("Yes, I'm in").findOne().click()
            } else if (className("android.widget.Button").desc("Yes, I'm in").exists()) {//Yes, I'm in
                log("我同意英文")
                className("android.widget.Button").desc("Yes, I'm in").findOne().click()
            } else {//
                if (id("selectionc0").desc("显示密码").exists() || id("selectionc1").desc("显示密码").exists()) {
                    log("输入密码节点")
                    sleep(1000)
                    setText(password)
                    sleep(1000)
                    if (className("android.widget.Button").text("下一步").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").text("下一步").findOne().click()
                    } else if (className("android.widget.Button").desc("下一步").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").desc("下一步").findOne().click()
                    } else if (className("android.widget.Button").text("다음").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").text("다음").findOne().click()
                    } else if (className("android.widget.Button").desc("다음").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").desc("다음").findOne().click()
                    } else if (className("android.widget.Button").desc("Næste").exists()) {
                        log("辅助邮箱下一步节点")
                        className("android.widget.Button").desc("Næste").findOne().click()
                    } else if (className("android.widget.Button").text("Næste").exists()) {
                        log("辅助邮箱下一步节点")
                        className("android.widget.Button").text("Næste").findOne().click()
                    } else if (className("android.widget.Button").text("Next").exists()) {
                        log("输入账号下一步节点")
                        className("android.widget.Button").text("Next").findOne().click()
                    } else if (className("android.widget.Button").desc("Next").exists()) {
                        log("输入账号下一步节点")
                        className("android.widget.Button").desc("Next").findOne().click()//Next
                    }
                    sleep(1500)
                } else {
                    if (id("selectionc1").text("显示密码").exists() || id("selectionc0").text("显示密码").exists() || id("selectionc1").text("비밀번호 표시").exists()) {//
                        log("输入密码节点")
                        sleep(1000)
                        setText(password)
                        sleep(1000)
                        if (className("android.widget.Button").text("下一步").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").text("下一步").findOne().click()
                        } else if (className("android.widget.Button").desc("下一步").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").desc("下一步").findOne().click()
                        } else if (className("android.widget.Button").text("다음").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").text("다음").findOne().click()
                        } else if (className("android.widget.Button").desc("다음").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").desc("다음").findOne().click()
                        } else if (className("android.widget.Button").desc("Næste").exists()) {
                            log("辅助邮箱下一步节点")
                            className("android.widget.Button").desc("Næste").findOne().click()
                        } else if (className("android.widget.Button").text("Næste").exists()) {
                            log("辅助邮箱下一步节点")
                            className("android.widget.Button").text("Næste").findOne().click()
                        } else if (className("android.widget.Button").text("Next").exists()) {
                            log("输入账号下一步节点")
                            className("android.widget.Button").text("Next").findOne().click()
                        } else if (className("android.widget.Button").desc("Next").exists()) {
                            log("输入账号下一步节点")
                            className("android.widget.Button").desc("Next").findOne().click()//Next
                        }
                        sleep(1500)
                    } else {
                        if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {//
                            log("输入账号节点")
                            sleep(2000)
                            setText(userName)
                            sleep(1000)
                            if (className("android.widget.Button").text("下一步").exists()) {//
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("下一步").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("下一步").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("下一步").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").text("다음").exists()) {//다음
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("다음").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("다음").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("다음").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("Næste").exists()) {
                                log("辅助邮箱下一步节点")
                                className("android.widget.Button").desc("Næste").findOne().click()
                            } else if (className("android.widget.Button").text("Næste").exists()) {
                                log("辅助邮箱下一步节点")
                                className("android.widget.Button").text("Næste").findOne().click()
                            } else if (className("android.widget.Button").text("Next").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("Next").findOne().click()
                            } else if (className("android.widget.Button").desc("Next").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("Next").findOne().click()//Next
                            }
                            sleep(1500)
                        } else {
                            if (id("headingText").desc("登录").exists() || id("headingText").desc("로그인").exists()) {
                                log("输入账号节点")
                                sleep(2000)
                                setText(userName)
                                sleep(1000)
                                if (className("android.widget.Button").text("下一步").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("下一步").findOne().click()
                                } else if (className("android.widget.Button").desc("下一步").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("下一步").findOne().click()
                                } else if (className("android.widget.Button").text("다음").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("다음").findOne().click()
                                } else if (className("android.widget.Button").desc("다음").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("다음").findOne().click()
                                } else if (className("android.widget.Button").desc("Næste").exists()) {
                                    log("辅助邮箱下一步节点")
                                    className("android.widget.Button").desc("Næste").findOne().click()
                                } else if (className("android.widget.Button").text("Næste").exists()) {
                                    log("辅助邮箱下一步节点")
                                    className("android.widget.Button").text("Næste").findOne().click()
                                } else if (className("android.widget.Button").text("Next").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("Next").findOne().click()
                                } else if (className("android.widget.Button").desc("Next").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("Next").findOne().click()//Next
                                }
                                sleep(1500)
                            } else {
                                if (desc("确认您的辅助邮箱").exists()) {//복구 이메일 확인
                                    log("确认您的辅助邮箱节点")
                                    desc("确认您的辅助邮箱").findOne().click()
                                } else {
                                    if (text("确认您的辅助邮箱").exists()) {
                                        log("确认您的辅助邮箱节点")
                                        text("确认您的辅助邮箱").findOne().click()
                                    } else {
                                        if (desc("복구 이메일 확인").exists()) {
                                            log("确认您的辅助邮箱节点")
                                            desc("복구 이메일 확인").findOne().click()
                                        } else {
                                            if (text("복구 이메일 확인").exists()) {
                                                log("确认您的辅助邮箱节点")
                                                text("복구 이메일 확인").findOne().click()
                                            } else {
                                                if (id("knowledge-preregistered-email-response").exists() || text("Verificer, at det er dig").exists() || desc("Verificer, at det er dig").exists()) {
                                                    log("输入辅助邮箱节点")
                                                    sleep(2000)
                                                    setText(email)
                                                    sleep(1000)
                                                    if (className("android.widget.Button").desc("下一步").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").desc("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").text("下一步").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").text("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").text("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("다음").findOne().click()
                                                    } else if (className("android.widget.Button").desc("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("다음").findOne().click()//
                                                    } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").desc("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").text("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("Next").findOne().click()
                                                    } else if (className("android.widget.Button").desc("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("Next").findOne().click()//Next
                                                    }//
                                                } else {
                                                    if (className("android.widget.Button").desc("接受").exists()) {
                                                        log("接受节点")
                                                        sleep(2000)
                                                        className("android.widget.Button").desc("接受").findOne().click()
                                                        sleep(2000)
                                                    } else if (className("android.widget.Button").text("接受").exists()) {
                                                        log("接受节点")
                                                        sleep(2000)
                                                        className("android.widget.Button").text("接受").findOne().click()
                                                        sleep(2000)
                                                    } else {
                                                        if (id("0_resource_name_obfuscated").exists() && text("登录").exists()) {
                                                            toastLog("点击登录")
                                                            var google_login = text("登录").findOne().bounds()
                                                            click(google_login.centerX(), google_login.centerY())
                                                            sleep(5000)
                                                        } else {
                                                            if (id("0_resource_name_obfuscated").exists() && text("Sign in").exists()) {
                                                                toastLog("点击登录")
                                                                var google_login = id("0_resource_name_obfuscated").text("Sign in").findOne().bounds()
                                                                click(google_login.centerX(), google_login.centerY())
                                                                sleep(5000)
                                                            } else {
                                                                if (id("0_resource_name_obfuscated").exists() && text("Try again").exists()) {
                                                                    toastLog("完成登录")
                                                                    return
                                                                } else {
                                                                    if (packageName("com.android.vending").exists() && text("搜索应用和游戏").exists()) {
                                                                        toastLog("完成登录")
                                                                        return
                                                                    } else {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } else {
            app.launch("com.android.vending")
            sleep(3000)
        }
        sleep(1500)
    }
}


function 无痕模式登录Google() {
    log("开始登录浏览器")
    while (true) {
        if (id("location_bar_incognito_badge").exists()) {
            log("1111")
            if (className("android.widget.Button").text("不开启").exists()) {
                log("不开启")
                className("android.widget.Button").text("不开启").findOne().click()
            } else if (className("android.widget.Button").desc("不开启").exists()) {
                log("不开启")
                className("android.widget.Button").desc("不开启").findOne().click()
            } else if (className("android.widget.Button").text("跳过").exists()) {
                log("跳过")
                className("android.widget.Button").text("跳过").findOne().click()
            } else if (className("android.widget.Button").desc("跳过").exists()) {
                log("跳过")
                className("android.widget.Button").desc("跳过").findOne().click()
            } else if (className("android.widget.Button").text("我同意").exists()) {
                log("我同意")
                className("android.widget.Button").text("我同意").findOne().click()
            } else if (className("android.widget.Button").desc("我同意").exists()) {
                log("我同意")
                className("android.widget.Button").desc("我同意").findOne().click()
            } else if (className("android.widget.Button").text("동의").exists()) {
                log("我同意韩文")
                className("android.widget.Button").text("동의").findOne().click()
            } else if (className("android.widget.Button").desc("동의").exists()) {// 
                log("我同意韩文")
                className("android.widget.Button").desc("동의").findOne().click()
            } else if (className("android.widget.Button").text("I agree").exists()) {
                log("I agree")
                className("android.widget.Button").text("I agree").findOne().click()
            } else if (className("android.widget.Button").desc("I agree").exists()) {// I agree
                log("I agree")
                className("android.widget.Button").desc("I agree").findOne().click()
            } else if (className("android.widget.Button").text("更多").exists()) {
                log("更多")
                className("android.widget.Button").text("更多").findOne().click()
            } else if (className("android.widget.Button").desc("更多").exists()) {
                log("更多")
                className("android.widget.Button").desc("更多").findOne().click()
            } else if (className("android.widget.Button").text("더보기").exists()) {//再看
                log("再看")
                className("android.widget.Button").text("더보기").findOne().click()
            } else if (className("android.widget.Button").desc("더보기").exists()) {
                log("再看")
                className("android.widget.Button").desc("더보기").findOne().click()
            } else if (className("android.widget.Button").text("Jeg accepterer").exists()) {//同意
                log("再看")
                className("android.widget.Button").text("Jeg accepterer").findOne().click()
            } else if (className("android.widget.Button").desc("Jeg accepterer").exists()) {
                log("再看")
                className("android.widget.Button").desc("Jeg accepterer").findOne().click()
            } else if (className("android.widget.Button").text("Add phone number?").exists()) {//同意
                log("翻页")
                for (let index = 0; index < 2; index++) {
                    swipe(340, 1064, 362, 228, 500)
                }
            } else if (className("android.widget.Button").desc("Add phone number?").exists()) {
                log("翻页")
                for (let index = 0; index < 2; index++) {
                    swipe(340, 1064, 362, 228, 500)
                }
            } else if (className("android.widget.Button").text("Skip").exists()) {//
                log("Skip")
                className("android.widget.Button").text("Skip").findOne().click()
            } else if (className("android.widget.Button").desc("Skip").exists()) {//Yes, I'm in
                log("Skip")
                className("android.widget.Button").desc("Skip").findOne().click()
            } else if (className("android.widget.Button").text("Yes, I'm in").exists()) {
                log("我同意英文")
                className("android.widget.Button").text("Yes, I'm in").findOne().click()
            } else if (className("android.widget.Button").desc("Yes, I'm in").exists()) {//Yes, I'm in
                log("我同意英文")
                className("android.widget.Button").desc("Yes, I'm in").findOne().click()
            } else {//
                if (id("selectionc0").desc("显示密码").exists() || id("selectionc1").desc("显示密码").exists()) {
                    log("输入密码节点")
                    sleep(1000)
                    setText(password)
                    sleep(1000)
                    if (className("android.widget.Button").text("下一步").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").text("下一步").findOne().click()
                    } else if (className("android.widget.Button").desc("下一步").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").desc("下一步").findOne().click()
                    } else if (className("android.widget.Button").text("다음").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").text("다음").findOne().click()
                    } else if (className("android.widget.Button").desc("다음").exists()) {
                        log("输入密码下一步节点")
                        className("android.widget.Button").desc("다음").findOne().click()
                    } else if (className("android.widget.Button").desc("Næste").exists()) {
                        log("辅助邮箱下一步节点")
                        className("android.widget.Button").desc("Næste").findOne().click()
                    } else if (className("android.widget.Button").text("Næste").exists()) {
                        log("辅助邮箱下一步节点")
                        className("android.widget.Button").text("Næste").findOne().click()
                    } else if (className("android.widget.Button").text("Next").exists()) {
                        log("输入账号下一步节点")
                        className("android.widget.Button").text("Next").findOne().click()
                    } else if (className("android.widget.Button").desc("Next").exists()) {
                        log("输入账号下一步节点")
                        className("android.widget.Button").desc("Next").findOne().click()//Next
                    }
                    sleep(1500)
                } else {
                    if (id("selectionc1").text("显示密码").exists() || id("selectionc0").text("显示密码").exists() || id("selectionc1").text("비밀번호 표시").exists()) {//
                        log("输入密码节点")
                        sleep(1000)
                        setText(password)
                        sleep(1000)
                        if (className("android.widget.Button").text("下一步").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").text("下一步").findOne().click()
                        } else if (className("android.widget.Button").desc("下一步").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").desc("下一步").findOne().click()
                        } else if (className("android.widget.Button").text("다음").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").text("다음").findOne().click()
                        } else if (className("android.widget.Button").desc("다음").exists()) {
                            log("输入密码下一步节点")
                            className("android.widget.Button").desc("다음").findOne().click()
                        } else if (className("android.widget.Button").desc("Næste").exists()) {
                            log("辅助邮箱下一步节点")
                            className("android.widget.Button").desc("Næste").findOne().click()
                        } else if (className("android.widget.Button").text("Næste").exists()) {
                            log("辅助邮箱下一步节点")
                            className("android.widget.Button").text("Næste").findOne().click()
                        } else if (className("android.widget.Button").text("Next").exists()) {
                            log("输入账号下一步节点")
                            className("android.widget.Button").text("Next").findOne().click()
                        } else if (className("android.widget.Button").desc("Next").exists()) {
                            log("输入账号下一步节点")
                            className("android.widget.Button").desc("Next").findOne().click()//Next
                        }
                        sleep(1500)
                    } else {
                        if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {//
                            log("输入账号节点")
                            sleep(2000)
                            setText(userName)
                            sleep(1000)
                            if (className("android.widget.Button").text("下一步").exists()) {//
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("下一步").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("下一步").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("下一步").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").text("다음").exists()) {//다음
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("다음").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("다음").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("다음").findOne().click()
                                log("点击完成")
                            } else if (className("android.widget.Button").desc("Næste").exists()) {
                                log("辅助邮箱下一步节点")
                                className("android.widget.Button").desc("Næste").findOne().click()
                            } else if (className("android.widget.Button").text("Næste").exists()) {
                                log("辅助邮箱下一步节点")
                                className("android.widget.Button").text("Næste").findOne().click()
                            } else if (className("android.widget.Button").text("Next").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").text("Next").findOne().click()
                            } else if (className("android.widget.Button").desc("Next").exists()) {
                                log("输入账号下一步节点")
                                className("android.widget.Button").desc("Next").findOne().click()//Next
                            }
                            sleep(1500)
                        } else {
                            if (id("headingText").desc("登录").exists() || id("headingText").desc("로그인").exists()) {
                                log("输入账号节点")
                                sleep(2000)
                                setText(userName)
                                sleep(1000)
                                if (className("android.widget.Button").text("下一步").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("下一步").findOne().click()
                                } else if (className("android.widget.Button").desc("下一步").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("下一步").findOne().click()
                                } else if (className("android.widget.Button").text("다음").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("다음").findOne().click()
                                } else if (className("android.widget.Button").desc("다음").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("다음").findOne().click()
                                } else if (className("android.widget.Button").desc("Næste").exists()) {
                                    log("辅助邮箱下一步节点")
                                    className("android.widget.Button").desc("Næste").findOne().click()
                                } else if (className("android.widget.Button").text("Næste").exists()) {
                                    log("辅助邮箱下一步节点")
                                    className("android.widget.Button").text("Næste").findOne().click()
                                } else if (className("android.widget.Button").text("Next").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").text("Next").findOne().click()
                                } else if (className("android.widget.Button").desc("Next").exists()) {
                                    log("输入账号下一步节点")
                                    className("android.widget.Button").desc("Next").findOne().click()//Next
                                }
                                sleep(1500)
                            } else {
                                if (desc("确认您的辅助邮箱").exists()) {//복구 이메일 확인
                                    log("确认您的辅助邮箱节点")
                                    desc("确认您的辅助邮箱").findOne().click()
                                } else {
                                    if (text("确认您的辅助邮箱").exists()) {
                                        log("确认您的辅助邮箱节点")
                                        text("确认您的辅助邮箱").findOne().click()
                                    } else {
                                        if (desc("복구 이메일 확인").exists()) {
                                            log("确认您的辅助邮箱节点")
                                            desc("복구 이메일 확인").findOne().click()
                                        } else {
                                            if (text("복구 이메일 확인").exists()) {
                                                log("确认您的辅助邮箱节点")
                                                text("복구 이메일 확인").findOne().click()
                                            } else {
                                                if (id("knowledge-preregistered-email-response").exists() || text("Verificer, at det er dig").exists() || desc("Verificer, at det er dig").exists()) {
                                                    log("输入辅助邮箱节点")
                                                    sleep(2000)
                                                    setText(email)
                                                    sleep(1000)
                                                    if (className("android.widget.Button").desc("下一步").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").desc("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").text("下一步").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").text("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").text("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("다음").findOne().click()
                                                    } else if (className("android.widget.Button").desc("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("다음").findOne().click()//
                                                    } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").desc("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").text("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("Next").findOne().click()
                                                    } else if (className("android.widget.Button").desc("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("Next").findOne().click()//Next
                                                    }//
                                                } else {
                                                    if (className("android.widget.Button").desc("接受").exists()) {
                                                        log("接受节点")
                                                        sleep(2000)
                                                        className("android.widget.Button").desc("接受").findOne().click()
                                                        sleep(2000)
                                                        return
                                                    } else if (className("android.widget.Button").text("接受").exists()) {
                                                        log("接受节点")
                                                        sleep(2000)
                                                        className("android.widget.Button").text("接受").findOne().click()
                                                        sleep(2000)
                                                        return
                                                    } else {
                                                        if (id("url_bar").text("搜索或输入网址").exists()) {
                                                            var url_bar = id("url_bar").text("搜索或输入网址").findOne().bounds()
                                                            click(url_bar.centerX(), url_bar.centerY())
                                                            sleep(1000)
                                                            setText("www.google.com")
                                                            sleep(1000)
                                                            click()
                                                        } else {
                                                            if (id("line_2").text("www.google.com").exists()) {
                                                                var line_1_google = id("line_2").text("www.google.com").findOne().bounds()
                                                                click(line_1_google.centerX(), line_1_google.centerY())
                                                                sleep(5000)
                                                            } else {
                                                                if (id("hplogo").exists() && text("登录").exists()) {
                                                                    var google_login = text("登录").findOne().bounds()
                                                                    click(google_login.centerX(), google_login.centerY())
                                                                    sleep(5000)
                                                                } else {
                                                                    if (text("您已登录").exists()) {
                                                                        return
                                                                    } else {
                                                                        if (id("hplogo").exists() && id("url_bar").textContains("google.com").exists()) {
                                                                            return
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } else {
            if (packageName("com.android.chrome").exists()) {//判断是否在Google浏览器
                log("3333")
                if (id("title").text("打开新的无痕式标签页").exists()) {
                    log("title")
                    var menu_item_text = id("title").text("打开新的无痕式标签页").findOne().bounds()
                    click(menu_item_text.centerX(), menu_item_text.centerY())
                } else {
                    if (id("menu_item_text").text("打开新的无痕式标签页").exists()) {
                        log("menu_item_text")
                        var menu_item_text = id("menu_item_text").text("打开新的无痕式标签页").findOne().bounds()
                        click(menu_item_text.centerX(), menu_item_text.centerY())
                    } else {
                        if (id("menu_button").exists()) {
                            if (id("menu_button").findOne().click()) {
                            } else {
                                id("menu_button").findOne().clickCenter()
                            }
                        } else {
                            if (id("menu_button_wrapper").exists()) {
                                if (id("menu_button_wrapper").findOne().click()) {
                                } else {
                                    id("menu_button_wrapper").findOne().clickCenter()
                                }
                            } else {
                                if (id("signin_fre_dismiss_button").text("在不登录帐号的情况下使用").exists()) {
                                    log("在不登录帐号的情况下使用")
                                    var signin_fre_dismiss_button = id("signin_fre_dismiss_button").text("在不登录帐号的情况下使用").findOne().bounds()
                                    click(signin_fre_dismiss_button.centerX(), signin_fre_dismiss_button.centerY())
                                } else {
                                    if (id("button_secondary").text("继续使用 Google").exists()) {
                                        log("继续使用Google")
                                        var button_secondary = id("button_secondary").text("继续使用 Google").findOne().bounds()
                                        click(button_secondary.centerX(), button_secondary.centerY())
                                    } else {
                                        if (id("terms_accept").text("接受并继续").exists()) {
                                            log("接受并继续")
                                            if (id("terms_accept").text("接受并继续").findOne().click()) {

                                            } else {
                                                id("terms_accept").text("接受并继续").findOne().clickCenter()
                                            }
                                        } else {
                                            if (id("negative_button").text("不用了，谢谢").exists()) {
                                                log("不用了，谢谢")
                                                var negative_button = id("negative_button").text("不用了，谢谢").findOne().bounds()
                                                click(negative_button.centerX(), negative_button.centerY())
                                            } else {
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                app.launch("com.android.chrome")
                sleep(3000)
            }
        }
        sleep(1500)
    }
}

function 开始寻找角色() {
    var 寻找次数 = 0
    var 初始Y = 138
    while (true) {
        if (异常捕获("寻找角色") == "掉线") {//
            return "掉线"
        } else {
            var 结果 = imgempt(true, 0.9, "进服排队中", 536, 444, 252, 98)
            if (结果 != null) {
                log("进服排队中");
                登录点击计次 = 0
                sleep(10000)
                return
            } else {
                var 结果 = imgempt(true, 0.9, "取消等待", 456, 412, 354, 157)
                if (结果 != null) {
                    log("排队中");
                    登录点击计次 = 0
                    sleep(10000)
                    return
                } else {
                    var ljjs = imgempt(true, 0.9, "寻找角色页", 841, 593, 333, 71)
                    if (ljjs != null) {
                        var ljjs = imgempt(true, 0.9, "选区页", 336, 567, 251, 84)
                        if (ljjs != null) {
                            log("选区页,点击寻找角色");
                            随机点击(806, 104, 10, 10)
                            sleep(5000)
                        } else {
                            var ljjs = imgempt(true, 0.9, "连接角色|连接角色2", 978, 149, 194, 80)
                            if (ljjs != null) {
                                log("连接角色");
                                随机点击(ljjs.x, ljjs.y, 10, 10)
                            } else {
                                if (寻找次数 < 4) {
                                    log("点击寻找角色");
                                    随机点击(241, 初始Y, 10, 10)
                                    sleep(5000)
                                } else if (寻找次数 >= 6) {
                                    var json = {
                                        "设备id": 设备id,
                                        "type": "异常",
                                        "异常信息": "请检查是否有角色或有网"
                                    }
                                    发送数据至中控("fragmentaryState", json)
                                    alert("请检查是否有角色或有网")
                                    for (let index = 200; index >= 1; index--) {
                                        ui.run(function () {
                                            window.计时器.setText(index.toString())
                                        });
                                        sleep(1000)
                                    }
                                    ui.run(function () {
                                        window.计时器.setText("")
                                    });
                                    寻找次数 = 0
                                    初始Y = 138
                                    continue
                                } else {
                                    log("滑动后寻找角色");
                                    swipe(222, 514, 222, 201, 500)
                                    sleep(1000)
                                    随机点击(218, 581, 10, 10)
                                    sleep(5000)
                                }
                                初始Y = 初始Y + 138
                                寻找次数++
                            }
                        }
                    } else {
                        log("寻找角色弹窗消失")
                        return
                    }
                }
            }
        }
        sleep(1000)
    }
}

function 回到主页(mode, 进行任务) {
    var 点击开始游戏次数 = 0
    还未制造蓝装 = true
    还未制造绿装 = true
    if (参数[49]) {
        var json = {
            "设备id": 设备id,
            "type": "挂机点",
            "副本": storage.get("自动副本测试"),
            "野外": storage.get("自动挂机点测试"),
            "激战地": storage.get("自动激战地")
        }
        发送数据至中控("fragmentaryState", json)
    } else {
        var 选择的副本 = ""
        var 选择的激战地 = ""
        var 选择的挂机点 = ""
        if (参数[12])
            选择的副本 = "35"
        if (参数[13])
            选择的副本 = "40"
        if (参数[16])
            选择的副本 = "45"
        if (参数[17])
            选择的副本 = "50"

        if (参数[2] == 0) {
            选择的激战地 = "40"
        } else if (参数[2] == 1) {
            选择的激战地 = "45"
        } else if (参数[2] == 2) {
            选择的激战地 = "50"
        } else if (参数[2] == 3) {
            选择的激战地 = "55"
        }

        if (参数[1] == 0)
            选择的挂机点 = "120"
        if (参数[1] == 1)
            选择的挂机点 = "140"
        if (参数[1] == 2)
            选择的挂机点 = "150"
        if (参数[1] == 3)
            选择的挂机点 = "160"
        if (参数[1] == 4)
            选择的挂机点 = "180"
        if (参数[1] == 5)
            选择的挂机点 = "200"
        if (参数[1] == 6)
            选择的挂机点 = "220"
        if (参数[1] == 7)
            选择的挂机点 = "240"
        if (参数[1] == 8)
            选择的挂机点 = "250"
        if (参数[1] == 9)
            选择的挂机点 = "270"
        if (参数[1] == 10)
            选择的挂机点 = "280"
        if (参数[1] == 11)
            选择的挂机点 = "300"
        if (参数[1] == 12)
            选择的挂机点 = "310"
        if (参数[1] == 13)
            选择的挂机点 = "320"

        var json = {
            "设备id": 设备id,
            "type": "挂机点",
            "副本": 选择的副本,
            "野外": 选择的挂机点,
            "激战地": 选择的激战地
        }
        发送数据至中控("fragmentaryState", json)
    }

    while (true) {
        var 结果 = imgempt(true, 0.9, "维护|维护2", 516, 61, 260, 132)
        if (结果 != null) {
            log("检查状态");
            发送异常("检查状态，维护")
            alert("检查状态，维护")
            exit()
        } else {
            var 结果 = imgempt(true, 0.9, "维护3|维护4", 434, 590, 439, 90)
            if (结果 != null) {
                log("检查状态");
                发送异常("检查状态，维护")
                alert("检查状态，维护")
                exit()
            } else {
                var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
                if (dtyd != null) {
                    log("副本使用时间满")
                    随机点击(631, 445, 10, 10)
                } else {
                    var 结果 = imgempt(true, 0.9, "进服排队中", 536, 444, 252, 98)
                    if (结果 != null) {
                        log("进服排队中");
                        登录点击计次 = 0
                        节电模式判断掉线时间戳 = new Date().getTime()
                        sleep(10000)
                    } else {
                        var 结果 = imgempt(true, 0.9, "取消等待", 456, 412, 354, 157)
                        if (结果 != null) {
                            log("排队中");
                            登录点击计次 = 0
                            sleep(10000)
                        } else {
                            var tyxyan = imgempt(true, 0.9, "复制认证密钥图标", 427, 399, 209, 134)
                            if (tyxyan != null) {
                                toastLog("复制认证密钥图标")
                                if (className("android.widget.FrameLayout").exists()) {
                                    var target = className("android.widget.FrameLayout").findOne()
                                    var 认证密钥 = traverseChildren(target);
                                    if (认证密钥) {
                                        var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                        try {
                                            // 发送POST请求，将JSON数据放入请求体
                                            http.__okhttp__.setTimeout(10000);
                                            var result = http.post(url, { "param1": 认证密钥 });
                                            if (result.statusCode == 200) {
                                                var 认证码 = result.body.string()
                                                for (let index = 0; index < 认证码.length; index++) {
                                                    setText(index, 认证码[index])
                                                }
                                                随机点击(806, 598)
                                            }
                                        } catch (e) {
                                            toastLog("访问中控获取OTP超时...");
                                            log(e)
                                        }
                                    } else {
                                        console.log("未找到符合条件的控件");
                                    }
                                } else { log("未找到符合条件的控件") }

                            } else {
                                var tyxyan = imgempt(true, 0.9, "认证按钮", 699, 542, 217, 120)
                                if (tyxyan != null) {
                                    toastLog("认证按钮，复制认证密钥图标")
                                    if (className("android.widget.FrameLayout").exists()) {
                                        var target = className("android.widget.FrameLayout").findOne()
                                        var 认证密钥 = traverseChildren(target);
                                        if (认证密钥) {
                                            var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                            try {
                                                // 发送POST请求，将JSON数据放入请求体
                                                http.__okhttp__.setTimeout(10000);
                                                var result = http.post(url, { "param1": 认证密钥 });
                                                if (result.statusCode == 200) {
                                                    var 认证码 = result.body.string()
                                                    for (let index = 0; index < 认证码.length; index++) {
                                                        setText(index, 认证码[index])
                                                    }
                                                    随机点击(806, 598)
                                                }
                                            } catch (e) {
                                                toastLog("访问中控获取OTP超时...");
                                                log(e)
                                            }
                                        } else {
                                            console.log("未找到符合条件的控件");
                                        }
                                    } else { log("未找到符合条件的控件") }
                                } else {
                                    var tyxyan = imgempt(true, 0.9, "游戏认证页|游戏认证页2", 176, 244, 309, 253)
                                    if (tyxyan != null) {
                                        toastLog("请认证")
                                        随机点击2(638, 455)
                                        // exit()
                                    } else {
                                        var tyxyan = imgempt(true, 0.9, "同意协议开始按钮|同意协议开始按钮2", 509, 481, 263, 111)
                                        if (tyxyan != null) {
                                            for (let index = 0; index < 5; index++) {
                                                var tyxy = imgempt(true, 0.9, "同意协议勾选|同意协议勾选2|同意协议勾选3|同意协议勾选4", 365, 166, 74, 368)
                                                if (tyxy != null) {
                                                    log("勾选协议")
                                                    随机点击2(tyxy.x + 8, tyxy.y + 8)
                                                } else {

                                                }
                                            }
                                            随机点击2(tyxyan.x, tyxyan.y)
                                        } else {
                                            var 结果 = imgempt(true, 0.9, "移动到标题画面", 415, 238, 457, 171)
                                            if (结果 != null) {
                                                log("移动到标题画面");
                                               
                                                    var 随机时间 = random(5, 10) * 60
                                                var 重启 = true
                                                while (随机时间 > 0) {
                                                    var 时间 = convertSecondsToHMS(随机时间)
                                                    sleep(1000)
                                                    ui.run(function () {
                                                        window.计时器.setText(时间)
                                                    })
                                                    随机时间--
                                                    var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                    if (ksyx != null) {
                                                        toastLog("检测到已进入角色页面,不再等待")
                                                        重启 = false
                                                        break
                                                    }
                                                }
                                                ui.run(function () {
                                                    window.计时器.setText("")
                                                })
                                                if (重启) {
                                                    关闭应用("com.wemade.nightcrows");
                                                    log("拉起游戏")
                                                    app.launch("com.wemade.nightcrows")
                                                    sleep(5000)
                                                }
                                            } else {
                                                var 结果 = imgempt(true, 0.9, "制裁期限|制裁期限2", 426, 272, 275, 162)
                                                if (结果 != null) {
                                                    toastLog("封号")
                                                    exit()
                                                } else {
                                                    var 结果 = imgempt(true, 0.9, "资源下载中", 548, 638, 189, 60)
                                                    if (结果 != null) {
                                                        toastLog("资源下载中")
                                                        sleep(10000)
                                                    } else {
                                                        var 结果 = imgempt(true, 0.9, "有下载补丁", 441, 291, 421, 121)
                                                        if (结果 != null) {
                                                            toastLog("有下载补丁,点击下载")
                                                            随机点击2(729, 473)
                                                        } else {
                                                            var 结果 = imgempt(true, 0.9, "服务器连接失败", 420, 225, 446, 192)
                                                            if (结果 != null) {
                                                                log("服务器连接失败");
                                                               
                                                                    var 随机时间 = random(5, 10) * 60
                                                                var 重启 = true
                                                                while (随机时间 > 0) {
                                                                    var 时间 = convertSecondsToHMS(随机时间)
                                                                    sleep(1000)
                                                                    ui.run(function () {
                                                                        window.计时器.setText(时间)
                                                                    })
                                                                    随机时间--
                                                                    var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                                    if (ksyx != null) {
                                                                        toastLog("检测到已进入角色页面,不再等待")
                                                                        重启 = false
                                                                        break
                                                                    }
                                                                }
                                                                ui.run(function () {
                                                                    window.计时器.setText("")
                                                                })
                                                                // alert("无网络环境")
                                                                // exit()
                                                                随机点击(643, 450, 10, 10)
                                                                if (重启) {
                                                                    关闭应用("com.wemade.nightcrows");
                                                                    sleep(10000)
                                                                    log("拉起游戏")
                                                                    app.launch("com.wemade.nightcrows")
                                                                    sleep(5000)
                                                                }
                                                            } else {
                                                                var 结果 = imgempt(true, 0.9, "长时间未操作", 462, 264, 135, 88)
                                                                if (结果 != null) {
                                                                    log("长时间未操作");
                                                                    随机点击(639, 450, 10, 10)
                                                                } else {
                                                                    var jinribts = imgempt(true, 0.9, "英文退出账号|英文退出账号2", 11, 632, 215, 77)
                                                                    if (jinribts != null) {
                                                                        log("英文退出账号,设置韩文");
                                                                        设置韩文()
                                                                    } else {
                                                                        var 结果 = imgempt(true, 0.9, "画面标题", 429, 196, 420, 325)
                                                                        if (结果 != null) {
                                                                            log("画面标题");
                                                                            随机点击(结果.x, 结果.y, 10, 10)
                                                                        } else {
                                                                            var jinribts = imgempt(true, 0.9, "今天不提示|今天不提示2", 102, 561, 280, 77)
                                                                            if (jinribts != null) {
                                                                                log("今天不提示");
                                                                                随机点击(144, 590, 10, 10)
                                                                            } else {
                                                                                var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                                                if (ksyx != null) {
                                                                                    log("开始游戏");
                                                                                    sleep(1000)
                                                                                    随机点击(ksyx.x, ksyx.y, 10, 10)
                                                                                    sleep(5000)
                                                                                    登录点击计次 = 0
                                                                                    点击开始游戏次数++
                                                                                    重复点击坐标次数 = 0
                                                                                    if (点击开始游戏次数 >= 40) {
                                                                                        点击开始游戏次数 = 0
                                                                                        log("断网")
                                                                                        关闭应用("com.wemade.nightcrows");
                                                                                        sleep(10000)
                                                                                        log("拉起游戏")
                                                                                        app.launch("com.wemade.nightcrows")
                                                                                        sleep(5000)
                                                                                    }
                                                                                } else {
                                                                                    var ljjs = imgempt(true, 0.9, "寻找角色页", 841, 593, 333, 71)
                                                                                    if (ljjs != null) {
                                                                                        log("寻找角色页,开始寻找角色");
                                                                                        开始寻找角色()
                                                                                    } else {
                                                                                        var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                                                                                        if (关闭XX != null) {
                                                                                            log("关闭XX");
                                                                                            随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                                                                        } else {
                                                                                            var 关闭背包 = imgempt(true, 0.9, "关闭背包", 1209, 42, 70, 87)
                                                                                            if (关闭背包 != null) {
                                                                                                log("关闭背包");
                                                                                                随机点击(关闭背包.x, 关闭背包.y, 10, 10)
                                                                                            } else {
                                                                                                var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                                                                if (退出 != null) {
                                                                                                    log("退出");
                                                                                                    随机点击(退出.x, 退出.y, 10, 10)
                                                                                                } else {
                                                                                                    var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 5, 2, 80, 68)
                                                                                                    if (dtgbzt != null) {
                                                                                                        log("地图关闭状态,点击打开");
                                                                                                        随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                                                    } else {
                                                                                                        var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                                                                                                        if (guajizhon != null) {
                                                                                                            log("死亡墓碑恢复经验,回主页");
                                                                                                            死亡恢复经验()
                                                                                                        } else {
                                                                                                            var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                                                                                                            if (bbym != null) {
                                                                                                                log("死亡墓碑恢复经验,回主页颜色");
                                                                                                                死亡恢复经验()
                                                                                                            } else {
                                                                                                                var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                                                                                                                if (zhuxian != null) {
                                                                                                                    log("确定瞬移");
                                                                                                                    随机点击2(725, 496)
                                                                                                                } else {
                                                                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                                                                    if (手 != null) {
                                                                                                                        //这里是测试点位
                                                                                                                        // 使用背包物品()
                                                                                                                        // alert("测试完毕")
                                                                                                                        if (mode == "铸币") {
                                                                                                                            var 结果 = 执行铸币()
                                                                                                                            if (结果 == "停止铸币") {
                                                                                                                                return
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            节电模式判断掉线时间戳 = new Date().getTime()
                                                                                                                            点击开始游戏次数 = 0
                                                                                                                            var huichengjuanzhou = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)//判断瞬移及回城卷轴()
                                                                                                                            if (huichengjuanzhou != null) {
                                                                                                                                var shunyijuanzhou = imgempt(true, 0.9, "瞬间移动卷轴", 779, 609, 94, 99)
                                                                                                                                if (shunyijuanzhou != null) {//卷轴判定时间
                                                                                                                                    var 当前时间 = new Date().getHours()
                                                                                                                                    if (当前时间 != 卷轴判定时间) {
                                                                                                                                        var sunyjz = imgempt(true, 0.9, "药水千字", 792, 649, 69, 51)//瞬移卷轴
                                                                                                                                        var huicyjz = imgempt(true, 0.9, "药水千字", 864, 659, 82, 44)//回城卷轴
                                                                                                                                        if (sunyjz == null || huicyjz == null) {
                                                                                                                                            if (sunyjz != null) {
                                                                                                                                                var 瞬移卷轴数量 = 1000
                                                                                                                                            } else {
                                                                                                                                                var 瞬移卷轴数量 = 找数字("数字", "药水数量", 6, 0.9, 792, 649, 69, 51);//瞬移卷轴
                                                                                                                                            }
                                                                                                                                            if (huicyjz != null) {
                                                                                                                                                var 回城卷轴数量 = 1000
                                                                                                                                            } else {
                                                                                                                                                var 回城卷轴数量 = 找数字("数字", "药水数量", 6, 0.9, 864, 659, 82, 44);//回城卷轴
                                                                                                                                            }
                                                                                                                                            log("回城:" + 回城卷轴数量 + ",瞬移:" + 瞬移卷轴数量)
                                                                                                                                            if (瞬移卷轴数量 < 20 || 回城卷轴数量 < 20 || 瞬移卷轴数量 == "false" || 回城卷轴数量 == "false") {
                                                                                                                                                var 结果 = 判断瞬移及回城卷轴()
                                                                                                                                                if (结果.includes("回城") || 结果.includes("瞬移")) {
                                                                                                                                                    回城买药()
                                                                                                                                                }
                                                                                                                                                // if (结果 == "回城及瞬移卷轴") {
                                                                                                                                                //     回城购买卷轴("卷轴回城")
                                                                                                                                                //     回城购买瞬间移动卷轴("使用卷轴")
                                                                                                                                                // } else if (结果 == "回城卷轴") {
                                                                                                                                                //     回城购买卷轴("卷轴回城")
                                                                                                                                                // } else if (结果 == "瞬移卷轴") {
                                                                                                                                                //     回城购买瞬间移动卷轴("使用卷轴")
                                                                                                                                                // } else if (结果 == "无需买卷轴") {

                                                                                                                                                // }
                                                                                                                                            }
                                                                                                                                        } else {
                                                                                                                                            log("瞬移及回城卷轴都大于1000")
                                                                                                                                        }
                                                                                                                                        卷轴判定时间 = 当前时间
                                                                                                                                    } else {

                                                                                                                                        if (storage.get("识别等级时间") != new Date().getDate()) {
                                                                                                                                            识别等级()
                                                                                                                                        }

                                                                                                                                        // if (参数[49] && storage.get("上次识别属性时间测试12") == "0") {
                                                                                                                                        //     var 结果 = 识别属性值()
                                                                                                                                        //     if (结果 = "掉线") {
                                                                                                                                        //         return "掉线"
                                                                                                                                        //     }
                                                                                                                                        // } else {
                                                                                                                                        //     log("未达到识别属性条件")
                                                                                                                                        // }

                                                                                                                                        if (storage.get("游戏区服") == null) {
                                                                                                                                            识别游戏区服()
                                                                                                                                        }

                                                                                                                                        if (storage.get("活动购买版本") != "1" && storage.get("活动物资购买时间") != new Date().getDate() && false) {
                                                                                                                                            商城其他活动购买()
                                                                                                                                        }

                                                                                                                                        // if (参数[3] && 查看物价时间 != new Date().getDate()) {//查看物价
                                                                                                                                        //     查看材料价格改()
                                                                                                                                        // }

                                                                                                                                        if (参数[46] && parseInt(new Date().getTime() / (1000 * 60 * 60)) - parseInt(storage.get("购买技能书记录时间")) >= storage.get("购买技能书随机时间")) {

                                                                                                                                            if (storage.get("二转记录") == null && storage.get("识别的等级") >= 45) {
                                                                                                                                                开始二转()
                                                                                                                                            }

                                                                                                                                            var 结果 = 使用背包物品("钱箱子")
                                                                                                                                            if (结果 == "掉线") {
                                                                                                                                                return "掉线"
                                                                                                                                            }

                                                                                                                                            var 结果 = 检测铜钱()
                                                                                                                                            if (结果 != "掉线") {
                                                                                                                                                if (结果 >= 2500000) {
                                                                                                                                                    log("可以购买技能书")
                                                                                                                                                    var 买技能书条件 = true
                                                                                                                                                } else {
                                                                                                                                                    log("购买技能书条件不达标只卖钱袋子")
                                                                                                                                                    var 买技能书条件 = false
                                                                                                                                                }
                                                                                                                                                log("可以购买技能书")
                                                                                                                                                if (买技能书条件) {
                                                                                                                                                    清理背包()
                                                                                                                                                    if (!参数[32]) {
                                                                                                                                                        最终仓库调整()
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                var 结果 = 购买技能书改版(买技能书条件)
                                                                                                                                                if (结果 == "完成购买") {
                                                                                                                                                    var 结果 = 技能二次配置()
                                                                                                                                                    if (结果 == "放置完成") {
                                                                                                                                                        // storage.put("购买技能时间记录", getTimestampWeekNumber().toString())
                                                                                                                                                        storage.put("购买技能书记录时间", new Date().getTime() / (1000 * 60 * 60))
                                                                                                                                                        storage.put("购买技能书随机时间", random(24, 72).toString())
                                                                                                                                                        log("购买技能书记录小时:" + storage.get("购买技能书记录时间") + ",重新随机小时:" + storage.get("购买技能书随机时间"))
                                                                                                                                                    }
                                                                                                                                                } else if (结果 == "铜钱不足") {
                                                                                                                                                    // storage.put("购买技能时间记录",getTimestampWeekNumber().toString())
                                                                                                                                                    storage.put("购买技能书记录时间", new Date().getTime() / (1000 * 60 * 60))
                                                                                                                                                    storage.put("购买技能书随机时间", random(24, 72).toString())
                                                                                                                                                    log("购买技能书记录小时:" + storage.get("购买技能书记录时间") + ",重新随机小时:" + storage.get("购买技能书随机时间"))
                                                                                                                                                }

                                                                                                                                                // if (storage.get("弱点感知") != "已学习") {
                                                                                                                                                //     制造弱点感知()
                                                                                                                                                // } else {
                                                                                                                                                //     log("已学习过弱点感知")
                                                                                                                                                // }

                                                                                                                                            }
                                                                                                                                        }


                                                                                                                                        if (参数[32]) {//35级提升
                                                                                                                                            清理背包()
                                                                                                                                            最终仓库调整()
                                                                                                                                            var 结果 = 装备蓝装()
                                                                                                                                            if (结果 == "装备完毕") {
                                                                                                                                                var 结果 = 判断需要强化的装备()
                                                                                                                                                if (结果 == "提升完成") {
                                                                                                                                                    参数[32] = false
                                                                                                                                                    ui.run(function () {
                                                                                                                                                        ui.三十五级提升.setChecked(false)
                                                                                                                                                    })
                                                                                                                                                    成就图鉴()
                                                                                                                                                    if (!参数[43]) {
                                                                                                                                                        if (总提示 != "") {
                                                                                                                                                            alert("总提示:" + 总提示)
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }

                                                                                                                                        if (参数[43]) {
                                                                                                                                            全绿打造含交易()
                                                                                                                                            if (总提示 != "") {
                                                                                                                                                alert("总提示:" + 总提示)
                                                                                                                                            }
                                                                                                                                        }

                                                                                                                                        if (参数[44]) {
                                                                                                                                            if (!参数[32]) {
                                                                                                                                                最终仓库调整()
                                                                                                                                            } else {
                                                                                                                                                清理背包()
                                                                                                                                            }
                                                                                                                                            var 结果 = 购买技能书()
                                                                                                                                            if (结果 == "完成购买") {
                                                                                                                                                var 结果 = 使用技能书()
                                                                                                                                                if (结果 == "使用完成") {
                                                                                                                                                    var 结果 = 技能二次配置()
                                                                                                                                                    if (结果 == "放置完成") {
                                                                                                                                                        参数[44] = false
                                                                                                                                                        ui.run(function () {
                                                                                                                                                            ui.购买技能书.setChecked(false)
                                                                                                                                                        })

                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            } else if (结果 == "铜钱不足") {
                                                                                                                                                参数[44] = false
                                                                                                                                                ui.run(function () {
                                                                                                                                                    ui.购买技能书.setChecked(false)
                                                                                                                                                })

                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (参数[31]) {
                                                                                                                                            var 结果 = 仓库调整("一级绿级灌注石(仓库)|一级蓝级灌注石(仓库)|一级紫级灌注石(仓库)|二级绿级灌注石(仓库)|二级蓝级灌注石(仓库)|三级绿级灌注石(仓库)")
                                                                                                                                            // if (结果 == "填充") {
                                                                                                                                            //     放入拿出仓库("一键")
                                                                                                                                            // }
                                                                                                                                            使用背包物品("分解")
                                                                                                                                        }

                                                                                                                                        // if (parseInt(new Date().getTime()/(1000*60*60))-parseInt(storage.get("自动灌注记录时间"))>parseInt(storage.get("自动灌注随机时间测试"))) {
                                                                                                                                        //     log("到达灌注时间")
                                                                                                                                        //     开始灌注()
                                                                                                                                        // }

                                                                                                                                        // if (参数[36]) {
                                                                                                                                        //     var 结果 = 仓库调整(null)
                                                                                                                                        //     if (结果 == "填充") {
                                                                                                                                        //         放入拿出仓库("一键")
                                                                                                                                        //     }
                                                                                                                                        //     开始洗练()
                                                                                                                                        // }

                                                                                                                                        if (参数[37]) {
                                                                                                                                            var 结果 = 开始二转()
                                                                                                                                            if (结果 != "掉线") {
                                                                                                                                                log("二转完成")
                                                                                                                                            }
                                                                                                                                        }

                                                                                                                                        if (参数[29]) {
                                                                                                                                            var 结果 = 购买强化卷轴()
                                                                                                                                            if (结果 == "购买完成") {
                                                                                                                                                var 结果 = 使用背包物品("练级")
                                                                                                                                                if (结果 == "使用完毕") {
                                                                                                                                                    var 结果 = 挂机强化()
                                                                                                                                                    if (结果 == "完成强化") {
                                                                                                                                                        参数[29] = false
                                                                                                                                                        ui.run(function () {
                                                                                                                                                            ui.单强化.setChecked(false)
                                                                                                                                                        });
                                                                                                                                                        //storage.put("单强化", false)
                                                                                                                                                        alert("完成强化")
                                                                                                                                                    } else if (结果 == "掉线") {
                                                                                                                                                        return "掉线"
                                                                                                                                                    }
                                                                                                                                                } else if (结果 == "掉线") {
                                                                                                                                                    return "掉线"
                                                                                                                                                }
                                                                                                                                            } else if (结果 == "掉线") {
                                                                                                                                                return "掉线"
                                                                                                                                            }
                                                                                                                                        }

                                                                                                                                        if (参数[28] && 购买三倍经验 != new Date().getDate() && false) {
                                                                                                                                            商城购买三倍经验()
                                                                                                                                        }

                                                                                                                                        if (清空药水) {
                                                                                                                                            清空背包红药()
                                                                                                                                        }

                                                                                                                                        var 工会捐献日期 = storage.get("工会每日捐献日期")
                                                                                                                                        if (工会捐献日期 != new Date().getDate()) {//工会捐献
                                                                                                                                            var 结果 = 工会捐献()
                                                                                                                                            if (结果 == "完成") {
                                                                                                                                                var 结果 = 工会币兑换蓝书()
                                                                                                                                                if (结果 == "购买成功") {
                                                                                                                                                    storage.put("工会每日捐献日期", new Date().getDate())
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }



                                                                                                                                        // if (参数[30]) {
                                                                                                                                        //     var 结果 = 前往激战地兑换材料箱()
                                                                                                                                        //     if (结果 == "购买成功") {
                                                                                                                                        //         学习制造术()
                                                                                                                                        //     }
                                                                                                                                        // }

                                                                                                                                        // var 自动清理过期物品时差 = Math.ceil((parseInt(new Date().getTime()) - parseInt(storage.get("清理过期物品时间点"))) / (1000 * 3600 * 24));//大于等于7天
                                                                                                                                        // // var 清理过期物品日期 = storage.get("清理过期物品日期")
                                                                                                                                        // if (自动清理过期物品时差 >= 2 && new Date().getDay()=="2" && new Date().getHours()>8) {





                                                                                                                                        // var 自动使用药水时间 = storage.get("自动使用药水时间")

                                                                                                                                        if (参数[22]) {
                                                                                                                                            环境优化()
                                                                                                                                        } else {
                                                                                                                                            // if (new Date().getDate() != storage.get("仓库存放时间")) {
                                                                                                                                            //     最终仓库调整()
                                                                                                                                            // } else {
                                                                                                                                            if (!参数[23] && new Date().getTime() / (1000 * 60 * 60) - parseInt(storage.get("上次仓库时间2")) / (1000 * 60 * 60) >= 2) {
                                                                                                                                                var 结果 = 最终仓库调整("一键放入")
                                                                                                                                                if (结果 != "掉线" && new Date().getTime() / (1000 * 60) - storage.get("拿出可交易时间") >= storage.get("拿出可交易随机时间2")) {
                                                                                                                                                    拿出可交易()//random((2*60*24),(4*60*24))  
                                                                                                                                                }
                                                                                                                                            }

                                                                                                                                            var 当前时间 = new Date().getDate()
                                                                                                                                            if (进行任务) {
                                                                                                                                                // if (参数[23] != false) {
                                                                                                                                                //     var 一键存放时间 = storage.get("一键存放时间")
                                                                                                                                                //     // var 条件1 = parseInt(当前时间) - parseInt(一键存放时间)
                                                                                                                                                //     // var 条件2 = parseInt(一键存放时间) - parseInt(当前时间)
                                                                                                                                                //     if (当前时间 != 一键存放时间) {//每大于等于俩小时放入
                                                                                                                                                //         log("一键式放入仓库")
                                                                                                                                                //         var 结果 = 放入拿出仓库("一键")
                                                                                                                                                //         // if (结果 != "掉线") {
                                                                                                                                                //         //     出售钱袋子()
                                                                                                                                                //         // }
                                                                                                                                                //         continue
                                                                                                                                                //     }
                                                                                                                                                // }


                                                                                                                                            }

                                                                                                                                            // if (参数[31] && storage.get("购买材料箱") != new Date().getDate()) {
                                                                                                                                            if ((参数[19] || 参数[40] || 参数[41]) && storage.get("购买材料箱") != new Date().getDate() && parseInt(storage.get("识别的等级")) >= 35) {
                                                                                                                                                var 需要购买的物资 = ""
                                                                                                                                                // if (参数[40]) {
                                                                                                                                                //     需要购买的物资 = 需要购买的物资 + "激战地铜钱箱"
                                                                                                                                                // }
                                                                                                                                                // if (参数[41]) {
                                                                                                                                                //     if (参数[40]) {
                                                                                                                                                //         需要购买的物资 = 需要购买的物资 + "|激战地经验药"
                                                                                                                                                //     } else {
                                                                                                                                                //         需要购买的物资 = 需要购买的物资 + "激战地经验药"
                                                                                                                                                //     }
                                                                                                                                                // }
                                                                                                                                                var 结果 = 前往激战地兑换材料箱(需要购买的物资)
                                                                                                                                                if (结果 == "购买成功") {
                                                                                                                                                    storage.put("购买材料箱", new Date().getDate())
                                                                                                                                                }
                                                                                                                                            }

                                                                                                                                            // if (storage.get("辅助装备购买") == null && new Date().getDate() != storage.get("辅助装备上次购买日期")) {
                                                                                                                                            //     var 缺失的装备 = 识别辅助装备()
                                                                                                                                            //     if (缺失的装备 != null && 缺失的装备 != "掉线") {
                                                                                                                                            //         let 结果 = 检查委托红点()
                                                                                                                                            //         if (结果 == "已领取") {
                                                                                                                                            //             装备蓝装遍历版()
                                                                                                                                            //             缺失的装备 = 识别辅助装备()
                                                                                                                                            //         }
                                                                                                                                            //         if (缺失的装备 != null && 缺失的装备 != "掉线") {
                                                                                                                                            //             if (缺失的装备.includes("地球仪")) {
                                                                                                                                            //                 let 结果 = 委托或制造地球仪()
                                                                                                                                            //                 if (结果 == "掉线") {
                                                                                                                                            //                     return "掉线"
                                                                                                                                            //                 }
                                                                                                                                            //             }
                                                                                                                                            //             if (缺失的装备.includes("护身符")) {
                                                                                                                                            //                 let 结果 = 购买护身符()
                                                                                                                                            //                 if (结果 == "掉线") {
                                                                                                                                            //                     return "掉线"
                                                                                                                                            //                 }
                                                                                                                                            //             }
                                                                                                                                            //             var 结果 = 装备蓝装遍历版()
                                                                                                                                            //             if (结果 == "掉线") {
                                                                                                                                            //                 return "掉线"
                                                                                                                                            //             } else {

                                                                                                                                            //             }
                                                                                                                                            //         } else {
                                                                                                                                            //             log("已有所需辅助装备")
                                                                                                                                            //             storage.put("辅助装备购买", "已完成")
                                                                                                                                            //         }
                                                                                                                                            //     } else {
                                                                                                                                            //         storage.put("辅助装备购买", "已完成")
                                                                                                                                            //     }
                                                                                                                                            //     storage.put("辅助装备上次购买日期", new Date().getDate().toString())
                                                                                                                                            // }

                                                                                                                                            // if (邮件领取时间 != new Date().getHours()) {
                                                                                                                                            //     log("领取邮件")
                                                                                                                                            //     领取邮件内容()
                                                                                                                                            // } else {

                                                                                                                                            // var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
                                                                                                                                            // if (bbym != null) {
                                                                                                                                            //     log("领取活动")
                                                                                                                                            //     活动领取()
                                                                                                                                            // } else {
                                                                                                                                            log("已回到主页,是否进行任务:" + 进行任务);
                                                                                                                                            if (进行任务) {
                                                                                                                                                // var 节电检测负重时间戳 = new Date().getTime() / 1000
                                                                                                                                                // var 检测负重时间差 = (节电检测负重时间戳 - 判定背包满检测时间) / 1000
                                                                                                                                                // if (检测负重时间差 >= 300) {
                                                                                                                                                //     var 结果 = 节电模式检测负重()
                                                                                                                                                // } else {
                                                                                                                                                // var 结果 = "没问题"
                                                                                                                                                // }

                                                                                                                                                // if (结果 == "没问题") {
                                                                                                                                                //     var 结果 = 判断是否买药()
                                                                                                                                                //     if (结果 == "购买成功") {
                                                                                                                                                //         卷轴判定 = true
                                                                                                                                                //         if (使用背包物品日期 != new Date().getDate()) {
                                                                                                                                                //             var 结果 = 使用背包物品()
                                                                                                                                                //         } else {
                                                                                                                                                //             log("今日已使用背包物品")
                                                                                                                                                //             var 结果 = "使用完毕"
                                                                                                                                                //         }
                                                                                                                                                //         if (结果 == "使用完毕") {

                                                                                                                                                回城买药()
                                                                                                                                                if (mode == "委托") {
                                                                                                                                                    var 结果 = 快速回城("卷轴")
                                                                                                                                                    if (结果 == "已回城") {
                                                                                                                                                        var 结果 = 开始委托()
                                                                                                                                                        if (结果 == "结束委托") {
                                                                                                                                                            return
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                } else if (mode == "野外挂机") {
                                                                                                                                                    var 结果 = 接取公会任务("野外")
                                                                                                                                                    if (结果 == "完成") {
                                                                                                                                                        var 结果 = 设置扫描()
                                                                                                                                                        if (结果 == "设置完毕") {
                                                                                                                                                            var 结果 = 野外挂机()
                                                                                                                                                            if (结果 == "死亡") {
                                                                                                                                                                sleep(20000)
                                                                                                                                                                药水上次检测 = "123"
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                } else if (mode == "日副本") {
                                                                                                                                                    // var 结果 = 接取公会任务("日副本")
                                                                                                                                                    // if (结果 == "完成") {
                                                                                                                                                    var 结果 = 设置扫描()
                                                                                                                                                    if (结果 == "设置完毕") {
                                                                                                                                                        // var 结果 = 购买商城属性药水()
                                                                                                                                                        // if (结果 == "完成") {
                                                                                                                                                        var 结果 = 日副本开始()
                                                                                                                                                        if (结果 == "完成日本" || 结果 == "等会") {
                                                                                                                                                            return
                                                                                                                                                        } else if (结果 == "死亡") {
                                                                                                                                                            sleep(20000)
                                                                                                                                                            药水上次检测 = "123"
                                                                                                                                                        }
                                                                                                                                                        // }
                                                                                                                                                    }
                                                                                                                                                    // } else {

                                                                                                                                                    // }
                                                                                                                                                } else if (mode == "经验本") {
                                                                                                                                                    // var 结果 = 接取公会任务("经验本")
                                                                                                                                                    // if (结果 == "完成") {
                                                                                                                                                    var 结果 = 设置扫描()
                                                                                                                                                    if (结果 == "设置完毕") {
                                                                                                                                                        var 结果 = 经验本开始()
                                                                                                                                                        if (结果 == "完成经验本" || 结果 == "等会") {
                                                                                                                                                            return
                                                                                                                                                        } else if (结果 == "死亡") {
                                                                                                                                                            sleep(20000)
                                                                                                                                                            药水上次检测 = "123"
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    // }
                                                                                                                                                } else if (mode == "周副本") {
                                                                                                                                                    // var 结果 = 接取公会任务("周本")
                                                                                                                                                    // if (结果 == "完成") {
                                                                                                                                                    var 结果 = 设置扫描()
                                                                                                                                                    if (结果 == "设置完毕") {
                                                                                                                                                        var 结果 = 周副本开始()
                                                                                                                                                        if (结果 == "完成周本" || 结果 == "等会") {
                                                                                                                                                            return
                                                                                                                                                        } else if (结果 == "死亡") {
                                                                                                                                                            sleep(20000)
                                                                                                                                                            药水上次检测 = "123"
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    // }
                                                                                                                                                } else if (mode == "区副本") {
                                                                                                                                                    var 结果 = 判断金币数量()
                                                                                                                                                    if (结果 != "掉线") {
                                                                                                                                                        if (结果.铜钱 >= 500000) {
                                                                                                                                                            log("可以去区副本")
                                                                                                                                                            var 结果 = 区副本开始()
                                                                                                                                                            if (结果 == "完成区本" || 结果 == "等会") {
                                                                                                                                                                return
                                                                                                                                                            } else if (结果 == "死亡") {
                                                                                                                                                                sleep(20000)
                                                                                                                                                                药水上次检测 = "123"
                                                                                                                                                            }
                                                                                                                                                        } else {
                                                                                                                                                            log("铜钱数量不达标,暂时放弃区副本")
                                                                                                                                                            storage.put("区副本锁", false)//锁死
                                                                                                                                                            threads.currentThread().interrupt()
                                                                                                                                                        }
                                                                                                                                                    }

                                                                                                                                                    // var 结果 = 接取公会任务("区本")
                                                                                                                                                    // if (结果 == "完成") {
                                                                                                                                                    // var 结果 = 区副本开始()
                                                                                                                                                    // if (结果 == "完成区本" || 结果 == "等会") {
                                                                                                                                                    //     return
                                                                                                                                                    // } else if (结果 == "死亡") {
                                                                                                                                                    //     sleep(20000)
                                                                                                                                                    //     药水上次检测 = "123"
                                                                                                                                                    // }
                                                                                                                                                    // }
                                                                                                                                                } else if (mode == "活动本") {
                                                                                                                                                    var 结果 = 活动副本开始()
                                                                                                                                                    if (结果 == "完成") {
                                                                                                                                                        return
                                                                                                                                                    } else if (结果 == "死亡") {
                                                                                                                                                        sleep(20000)
                                                                                                                                                        药水上次检测 = "123"
                                                                                                                                                    }
                                                                                                                                                } else if (mode == "激战地") {
                                                                                                                                                    log("判断进入激战地条件")
                                                                                                                                                    var 结果 = 判断金币数量()
                                                                                                                                                    if (结果 != "掉线") {
                                                                                                                                                        if (结果.铜钱 >= 12000000) {
                                                                                                                                                            log("可以去激战地")
                                                                                                                                                            纯回主页()
                                                                                                                                                            var 结果 = 接取公会任务("激战地")
                                                                                                                                                            if (结果 == "完成") {
                                                                                                                                                                // var 结果 = 设置扫描()
                                                                                                                                                                // if (结果 == "设置完毕") {
                                                                                                                                                                // var 结果 = 激战地开始()
                                                                                                                                                                // if (结果 == "死亡") {
                                                                                                                                                                //     sleep(20000)
                                                                                                                                                                //     药水上次检测 = "123"
                                                                                                                                                                // }
                                                                                                                                                                var 结果 = 激战地开始改版()
                                                                                                                                                                if (结果 == "死亡") {
                                                                                                                                                                    sleep(20000)
                                                                                                                                                                    药水上次检测 = "123"
                                                                                                                                                                }
                                                                                                                                                                // }
                                                                                                                                                            }
                                                                                                                                                        } else {
                                                                                                                                                            log("铜钱数量不达标,暂时放弃激战地")
                                                                                                                                                            storage.put("激战地锁", false)//锁死
                                                                                                                                                            var json = {
                                                                                                                                                                "设备id": 设备id,
                                                                                                                                                                "type": "激战地锁",
                                                                                                                                                                "状态": "锁死"
                                                                                                                                                            }
                                                                                                                                                            发送数据至中控("fragmentaryState", json)
                                                                                                                                                            threads.currentThread().interrupt()
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                //         } else {

                                                                                                                                                //         }


                                                                                                                                                //     } else {

                                                                                                                                                //     }

                                                                                                                                                // } else {

                                                                                                                                                // }
                                                                                                                                            } else {
                                                                                                                                                return "已回到主页"
                                                                                                                                            }
                                                                                                                                            // }
                                                                                                                                            // }
                                                                                                                                            // }

                                                                                                                                        }
                                                                                                                                        // }
                                                                                                                                    }
                                                                                                                                } else {
                                                                                                                                    log("没有放置瞬间移动卷轴")
                                                                                                                                    var 结果 = 放置瞬间移动卷轴()
                                                                                                                                    if (结果 == "没有瞬间移动卷轴") {
                                                                                                                                        回城购买瞬间移动卷轴("使用卷轴")
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            } else {
                                                                                                                                log("没有放置回城卷轴")
                                                                                                                                var 结果 = 放置回城卷轴()
                                                                                                                                if (结果 == "没有回城卷轴") {
                                                                                                                                    回城购买卷轴("铜钱回城")
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        var djryhm = imgempt(true, 0.9, "封号", 540, 488, 92, 53)
                                                                                                                        if (djryhm != null) {
                                                                                                                            log("账号已被封禁")
                                                                                                                            var dialog = floaty.rawWindow(
                                                                                                                                <vertical bg="#FF0000" padding="10" w="*" h="*" gravity="center">
                                                                                                                                    <text text="封号" textSize="120" textColor="white" gravity="center" />
                                                                                                                                    <button text="确定" id="btn_ok" textSize="16" textColor="black" gravity="center" />
                                                                                                                                </vertical>
                                                                                                                            );
                                                                                                                            dialog.setPosition(100, 200);
                                                                                                                            dialog.btn_ok.click(() => {
                                                                                                                                dialog.close();
                                                                                                                                exit()
                                                                                                                            });
                                                                                                                            sleep(999999999)
                                                                                                                        } else {
                                                                                                                            var djryhm = imgempt(true, 0.9, "点击任意画面", 540, 488, 92, 53)
                                                                                                                            if (djryhm != null) {
                                                                                                                                log("点击任意画面");
                                                                                                                                随机点击(djryhm.x, djryhm.y, 10, 10)
                                                                                                                                登录点击计次++
                                                                                                                                log("登录点击计次:" + 登录点击计次)
                                                                                                                                if (登录点击计次 >= 6) {
                                                                                                                                    登录点击计次 = 0
                                                                                                                                    关闭应用("com.wemade.nightcrows");
                                                                                                                                    sleep(10000)
                                                                                                                                    log("拉起游戏")
                                                                                                                                    app.launch("com.wemade.nightcrows")
                                                                                                                                }
                                                                                                                                sleep(10000)
                                                                                                                            } else {
                                                                                                                                // var xzfwq = imgempt(true, 0.9, "选择服务器", 760, 606, 62, 61)
                                                                                                                                // if (xzfwq != null) {
                                                                                                                                //     log("选择服务器");
                                                                                                                                //     随机点击(xzfwq.x, xzfwq.y, 10, 10)
                                                                                                                                //     重复点击坐标次数 = 0
                                                                                                                                // } else {
                                                                                                                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                                                                if (jdmsz != null) {
                                                                                                                                    log("主页,退出节电")
                                                                                                                                    swipe(566, 389, 968, 226, 500)
                                                                                                                                } else {
                                                                                                                                    if (text("验证身份").exists()) {
                                                                                                                                        log("需谷歌验证身份")
                                                                                                                                        exit()
                                                                                                                                    } else {
                                                                                                                                        if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {
                                                                                                                                            自动登录Google()
                                                                                                                                        } else {
                                                                                                                                            var xzfwq = imgempt(false, 0.9, "Google登录图标|Google登录图标2", 257, 281, 214, 125)
                                                                                                                                            if (xzfwq != null) {
                                                                                                                                                log("点击google登录");
                                                                                                                                                随机点击(xzfwq.x, xzfwq.y, 10, 10)
                                                                                                                                                // 自动登录Google()
                                                                                                                                                // if (Google登录) {
                                                                                                                                                //     sleep(2000)
                                                                                                                                                //     自动登录Google()
                                                                                                                                                // }
                                                                                                                                            } else {
                                                                                                                                                var xzfwq = imgempt(false, 0.9, "谷歌弹窗选择页2|谷歌弹窗选择页|谷歌弹窗选择页3", 257, 281, 214, 125)
                                                                                                                                                if (xzfwq != null) {
                                                                                                                                                    log("谷歌弹窗选择页");
                                                                                                                                                    swipe(621, 304, 611, 598, 500)
                                                                                                                                                    sleep(2000)
                                                                                                                                                    随机点击(517, 296)
                                                                                                                                                } else {
                                                                                                                                                    var zhuxian = imgempt(true, 0.9, "登录页点击任意", 1150, 605, 126, 112)
                                                                                                                                                    if (zhuxian != null) {
                                                                                                                                                        log("登录页点击任意(回到主页)");
                                                                                                                                                        var jinribts = imgempt(true, 0.9, "英文退出账号|英文退出账号2", 11, 632, 215, 77)
                                                                                                                                                        if (jinribts != null) {
                                                                                                                                                            log("英文退出账号,设置韩文");
                                                                                                                                                            设置韩文()
                                                                                                                                                        } else {
                                                                                                                                                            随机点击2(630, 514)
                                                                                                                                                            登录点击计次++
                                                                                                                                                            log("登录点击计次:" + 登录点击计次)
                                                                                                                                                            if (登录点击计次 >= 6) {
                                                                                                                                                                登录点击计次 = 0
                                                                                                                                                                关闭应用("com.wemade.nightcrows");
                                                                                                                                                                sleep(10000)
                                                                                                                                                                log("拉起游戏")
                                                                                                                                                                app.launch("com.wemade.nightcrows")
                                                                                                                                                            }
                                                                                                                                                            sleep(10000)
                                                                                                                                                        }

                                                                                                                                                    } else {
                                                                                                                                                        if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {//
                                                                                                                                                            var json = {
                                                                                                                                                                "设备id": 设备id,
                                                                                                                                                                "type": "异常",
                                                                                                                                                                "异常信息": "可能是苹果,请检测"
                                                                                                                                                            }
                                                                                                                                                            发送数据至中控("fragmentaryState", json)
                                                                                                                                                            alert("可能是苹果,请检测")
                                                                                                                                                            exit()
                                                                                                                                                        } else {
                                                                                                                                                            if (id("headingText").desc("登录").exists() || id("headingText").desc("로그인").exists()) {
                                                                                                                                                                var json = {
                                                                                                                                                                    "设备id": 设备id,
                                                                                                                                                                    "type": "异常",
                                                                                                                                                                    "异常信息": "可能是苹果,请检测"
                                                                                                                                                                }
                                                                                                                                                                发送数据至中控("fragmentaryState", json)
                                                                                                                                                                alert("可能是苹果,请检测")
                                                                                                                                                                exit()
                                                                                                                                                            } else {
                                                                                                                                                                异常捕获()
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                // }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        // }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
// 检查文本是否符合32位数字和字母的条件  
function checkText(text) {
    return /^[0-9a-zA-Z]{32}$/.test(text);
}

// 递归遍历所有子控件  
function traverseChildren(parent) {
    var childCount = parent.childCount();
    for (var i = 0; i < childCount; i++) {
        var child = parent.child(i);
        // 检查当前控件的文本  
        if (child.text() != "" && checkText(child.text())) {
            console.log("找到符合条件的控件，内容为: " + child.text());
            return child.text(); // 找到后返回该文本  
        }
        // 递归检查子控件  
        var result = traverseChildren(child);
        if (result) {
            return result; // 如果子控件中找到，直接返回结果  
        }
    }
    return null; // 未找到返回null  
}

function 执行主线任务() {
    var 未优化 = true
    var 药水百分比设置 = true
    var 点击开始游戏次数 = 0
    while (true) {
        var 结果 = imgempt(true, 0.9, "前往认证", 421, 409, 245, 113)
        if (结果 != null) {
            log("游戏认证");
            while (true) {
                var renz = imgempt(true, 0.9, "前往认证", 421, 409, 245, 113)
                if (renz != null) {
                    log("点击认证")
                    随机点击(renz.x, renz.y)
                } else {
                    if (textMatches(/(.*cert.wemade.games.*)/).exists()) {
                        log("获取链接")
                        sleep(5000)
                        var 链接栏 = textMatches(/(.*cert.wemade.games.*)/).findOne(2000)
                        if (链接栏 != null) {
                            var 链接 = textMatches(/(.*cert.wemade.games.*)/).findOne(2000).text()
                            // click(链接栏.bounds().centerX(), 链接栏.bounds().centerY())
                        }
                        // sleep(2000)
                        // var desc =  className("android.widget.ImageView").desc("复制链接").findOne(2000)
                        // if (desc!=null) {
                        //     click(desc.bounds().centerX(), desc.bounds().centerY())
                        // }else{
                        //     var desc =  className("android.widget.ImageView").text("复制链接").findOne(2000)
                        //     if (desc!=null) {
                        //         click(desc.bounds().centerX(), desc.bounds().centerY())
                        //     }else{
                        //         alert("未找到控件,请检查")
                        //     }
                        // }
                        // sleep(2000)
                        // var 链接1 = getClip()
                        log(链接)
                        log(设备id)
                        var json = {
                            "设备id": 设备id,
                            "链接": 链接.toString()
                        }
                        发送数据至中控("setToolDate", json)
                        alert("提取完成")
                    } else {

                    }
                }
                sleep(1000)
            }
        } else {
            var 结果 = imgempt(true, 0.9, "维护|维护2", 516, 61, 260, 132)
            if (结果 != null) {
                log("检查状态");
                发送异常("检查状态，维护")
                alert("检查状态，维护")
                exit()
            } else {
                var 结果 = imgempt(true, 0.9, "维护3|维护4", 434, 590, 439, 90)
                if (结果 != null) {
                    log("检查状态");
                    发送异常("检查状态，维护")
                    alert("检查状态，维护")
                    exit()
                } else {
                    var 结果 = imgempt(true, 0.9, "制裁期限|制裁期限2", 426, 272, 275, 162)
                    if (结果 != null) {
                        toastLog("封号")
                        sleep(9999999999)
                    } else {
                        var 结果 = imgempt(true, 0.9, "进服排队中", 536, 444, 252, 98)
                        if (结果 != null) {
                            log("进服排队中");
                            登录点击计次 = 0
                            节电模式判断掉线时间戳 = new Date().getTime()
                            sleep(10000)
                        } else {
                            var 结果 = imgempt(true, 0.9, "取消等待", 456, 412, 354, 157)
                            if (结果 != null) {
                                log("排队中");
                                登录点击计次 = 0
                                sleep(10000)
                            } else {
                                var tyxyan = imgempt(true, 0.9, "复制认证密钥图标", 427, 399, 209, 134)
                                if (tyxyan != null) {
                                    toastLog("复制认证密钥图标")
                                    if (className("android.widget.FrameLayout").exists()) {
                                        var target = className("android.widget.FrameLayout").findOne()
                                        var 认证密钥 = traverseChildren(target);
                                        if (认证密钥) {
                                            var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                            try {
                                                // 发送POST请求，将JSON数据放入请求体
                                                http.__okhttp__.setTimeout(10000);
                                                var result = http.post(url, { "param1": 认证密钥 });
                                                if (result.statusCode == 200) {
                                                    var 认证码 = result.body.string()
                                                    for (let index = 0; index < 认证码.length; index++) {
                                                        setText(index, 认证码[index])
                                                    }
                                                    随机点击(806, 598)
                                                }
                                            } catch (e) {
                                                toastLog("访问中控获取OTP超时...");
                                                log(e)
                                            }
                                        } else {
                                            console.log("未找到符合条件的控件");
                                        }
                                    } else { log("未找到符合条件的控件") }

                                } else {
                                    var tyxyan = imgempt(true, 0.9, "认证按钮", 699, 542, 217, 120)
                                    if (tyxyan != null) {
                                        toastLog("认证按钮，复制认证密钥图标")
                                        if (className("android.widget.FrameLayout").exists()) {
                                            var target = className("android.widget.FrameLayout").findOne()
                                            var 认证密钥 = traverseChildren(target);
                                            if (认证密钥) {
                                                var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                                try {
                                                    // 发送POST请求，将JSON数据放入请求体
                                                    http.__okhttp__.setTimeout(10000);
                                                    var result = http.post(url, { "param1": 认证密钥 });
                                                    if (result.statusCode == 200) {
                                                        var 认证码 = result.body.string()
                                                        for (let index = 0; index < 认证码.length; index++) {
                                                            setText(index, 认证码[index])
                                                        }
                                                        //这里加关闭输入法
                                                        for (let index = 0; index < 3; index++) {
                                                            var shurufa = imgempt(false, 0.9, "输入法回车", 25, 53, 217, 110)//请输入检索词
                                                            if (shurufa != null) {
                                                                sleep(500)
                                                                log("点击输入法回车")
                                                                随机点击(shurufa.x, shurufa.y)
                                                                break
                                                            }
                                                            sleep(200)
                                                        }
                                                        随机点击(806, 598)
                                                    }
                                                } catch (e) {
                                                    toastLog("访问中控获取OTP超时...");
                                                    log(e)
                                                }
                                            } else {
                                                console.log("未找到符合条件的控件");
                                            }
                                        } else { log("未找到符合条件的控件") }

                                    } else {
                                        var tyxyan = imgempt(true, 0.9, "游戏认证页|游戏认证页2", 176, 244, 309, 253)
                                        if (tyxyan != null) {
                                            toastLog("请认证")
                                            随机点击2(638, 455)
                                            // exit()
                                        } else {
                                            var tyxyan = imgempt(true, 0.9, "同意协议开始按钮|同意协议开始按钮2", 509, 481, 263, 111)
                                            if (tyxyan != null) {
                                                log("协议")
                                                for (let index = 0; index < 5; index++) {
                                                    var tyxy = imgempt(true, 0.9, "同意协议勾选5|同意协议勾选|同意协议勾选2|同意协议勾选3|同意协议勾选4", 365, 166, 74, 368)
                                                    if (tyxy != null) {
                                                        log("勾选协议")
                                                        随机点击2(tyxy.x + 8, tyxy.y + 8)
                                                    } else {

                                                    }
                                                }
                                                随机点击2(tyxyan.x, tyxyan.y)
                                            } else {
                                                var 结果 = imgempt(true, 0.9, "创建角色战士页|创建角色战士页2|创建角色弓手页2", 904, 406, 373, 211)
                                                if (结果 != null) {
                                                    log("创建角色");
                                                    创建弓手()
                                                } else {
                                                    var 结果 = imgempt(true, 0.9, "服务器连接失败", 420, 225, 446, 192)
                                                    if (结果 != null) {
                                                        log("服务器连接失败");
                                                       
                                                            var 随机时间 = random(5, 10) * 60
                                                        while (随机时间 > 0) {
                                                            var 时间 = convertSecondsToHMS(随机时间)
                                                            sleep(1000)
                                                            ui.run(function () {
                                                                window.计时器.setText(时间)
                                                            })
                                                            随机时间--
                                                            var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                            if (ksyx != null) {
                                                                toastLog("检测到已进入角色页面,不再等待")
                                                                break
                                                            }
                                                        }
                                                        ui.run(function () {
                                                            window.计时器.setText("")
                                                        })

                                                        // alert("无网络环境")
                                                        // exit()
                                                        随机点击(643, 450, 10, 10)
                                                        return "掉线"
                                                    } else {
                                                        var 结果 = imgempt(true, 0.9, "长时间未操作", 462, 264, 135, 88)
                                                        if (结果 != null) {
                                                            log("长时间未操作");
                                                            随机点击(639, 450, 10, 10)
                                                        } else {
                                                            var 结果 = imgempt(true, 0.9, "画面标题", 429, 196, 420, 325)
                                                            if (结果 != null) {
                                                                log("画面标题");
                                                                // 随机点击(结果.x, 结果.y, 10, 10)
                                                                log("移动到标题画面");
                                                               
                                                                    var 随机时间 = random(5, 10) * 60
                                                                while (随机时间 > 0) {
                                                                    var 时间 = convertSecondsToHMS(随机时间)
                                                                    sleep(1000)
                                                                    ui.run(function () {
                                                                        window.计时器.setText(时间)
                                                                    })
                                                                    随机时间--
                                                                }
                                                                ui.run(function () {
                                                                    window.计时器.setText("")
                                                                })
                                                                // alert("移动到标题画面")
                                                                // exit()
                                                                关闭应用("com.wemade.nightcrows");
                                                                log("拉起游戏")
                                                                app.launch("com.wemade.nightcrows")
                                                                sleep(5000)
                                                            } else {
                                                                var jinribts = imgempt(true, 0.9, "今天不提示|今天不提示2", 102, 561, 280, 77)
                                                                if (jinribts != null) {
                                                                    log("今天不提示");
                                                                    随机点击(144, 590, 10, 10)
                                                                } else {
                                                                    var jinribts = imgempt(true, 0.9, "英文退出账号|英文退出账号2", 11, 632, 215, 77)
                                                                    if (jinribts != null) {
                                                                        log("英文退出账号,设置韩文");
                                                                        设置韩文()
                                                                    } else {
                                                                        var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                                        if (ksyx != null) {
                                                                            log("开始游戏");
                                                                            重复点击坐标次数 = 0
                                                                            // if (Google登录) {
                                                                            //     Google登录 = false
                                                                            //     storage.put("Google登录", false)
                                                                            //     ui.run(function () {
                                                                            //         ui.Google登录.setChecked(false)
                                                                            //     })
                                                                            // }
                                                                            sleep(1000)
                                                                            随机点击(ksyx.x, ksyx.y, 10, 10)
                                                                            sleep(5000)
                                                                            登录点击计次 = 0
                                                                            点击开始游戏次数++
                                                                            重复点击坐标次数 = 0
                                                                            if (点击开始游戏次数 >= 40) {
                                                                                点击开始游戏次数 = 0
                                                                                log("断网")
                                                                                关闭应用("com.wemade.nightcrows");
                                                                                sleep(10000)
                                                                                log("拉起游戏")
                                                                                app.launch("com.wemade.nightcrows")
                                                                                sleep(5000)
                                                                            }
                                                                        } else {
                                                                            var ljjs = imgempt(true, 0.9, "连接角色", 943, 154, 208, 75)
                                                                            if (ljjs != null) {
                                                                                log("连接角色");
                                                                                随机点击(ljjs.x, ljjs.y, 10, 10)
                                                                            } else {

                                                                                var djryhm = imgempt(true, 0.9, "选区弹窗", 115, 557, 299, 128)
                                                                                if (djryhm != null) {
                                                                                    log("选区弹窗");
                                                                                    var 选区位置 = [{ x: 527, y: 241 }, { x: 762, y: 240 }, { x: 995, y: 242 }, { x: 524, y: 359 }, { x: 752, y: 358 }, { x: 980, y: 359 }]
                                                                                    var 随机区 = random(0, 2)
                                                                                    var djryhm = imgempt(true, 0.9, "推荐区", 129, 164, 129, 66)
                                                                                    if (djryhm != null) {
                                                                                        log("推荐区1")
                                                                                        随机区 = random(0, 2)
                                                                                    }
                                                                                    var djryhm = imgempt(true, 0.9, "推荐区", 131, 283, 119, 69)
                                                                                    if (djryhm != null) {
                                                                                        log("推荐区2")
                                                                                        随机区 = random(0, 5)
                                                                                    }
                                                                                    随机点击2(选区位置[随机区].x, 选区位置[随机区].y)
                                                                                } else {



                                                                                    // var xzwdjs = imgempt(true, 0.9, "寻找我的角色", 510, 69, 211, 84)
                                                                                    // if (xzwdjs != null) {
                                                                                    //     log("选择服务器");
                                                                                    //     随机点击(xzwdjs.x, xzwdjs.y, 10, 10)
                                                                                    //     重复点击坐标次数 = 0
                                                                                    // } else {
                                                                                    // var ljjs = imgempt(true, 0.9, "寻找角色页", 841, 593, 333, 71)
                                                                                    // if (ljjs != null) {
                                                                                    //     // alert("请手动选区,确认后30秒选区时间")
                                                                                    //     // for (let index = 30; index >= 1; index--) {
                                                                                    //     //     ui.run(function () {
                                                                                    //     //         window.计时器.setText(index)
                                                                                    //     //     });
                                                                                    //     //     sleep(1000)
                                                                                    //     // }
                                                                                    //     // ui.run(function () {
                                                                                    //     //     window.计时器.setText("")
                                                                                    //     // });                                           
                                                                                    //     // if (不选区==false) {
                                                                                    //     log("寻找角色页,开始寻找角色");
                                                                                    //     开始寻找角色()
                                                                                    //     // }
                                                                                    // } else {

                                                                                    var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                                                                                    if (关闭XX != null) {
                                                                                        log("关闭XX");
                                                                                        随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                                                                    } else {
                                                                                        var 关闭背包 = imgempt(true, 0.9, "关闭背包", 1209, 42, 70, 87)
                                                                                        if (关闭背包 != null) {
                                                                                            log("关闭背包");
                                                                                            随机点击(关闭背包.x, 关闭背包.y, 10, 10)
                                                                                        } else {
                                                                                            var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                                                            if (退出 != null) {
                                                                                                log("退出");
                                                                                                随机点击(退出.x, 退出.y, 10, 10)
                                                                                            } else {
                                                                                                var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 5, 2, 80, 68)
                                                                                                if (dtgbzt != null) {
                                                                                                    log("地图关闭状态,点击打开");
                                                                                                    随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                                                } else {
                                                                                                    var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                                                                                                    if (guajizhon != null) {
                                                                                                        log("死亡墓碑恢复经验,执行主线任务");
                                                                                                        死亡恢复经验()
                                                                                                    } else {
                                                                                                        var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                                                                                                        if (bbym != null) {
                                                                                                            log("死亡墓碑恢复经验，执行主线任务颜色");
                                                                                                            死亡恢复经验()
                                                                                                        } else {
                                                                                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                                                            if (手 != null) {
                                                                                                                点击开始游戏次数 = 0
                                                                                                                if (参数[22] && 未优化) {
                                                                                                                    环境优化()
                                                                                                                    未优化 = false
                                                                                                                } else {
                                                                                                                    log("到达主页,开始执行")
                                                                                                                    if (参数[43]) {
                                                                                                                        全绿打造()
                                                                                                                    }

                                                                                                                    if (药水百分比设置) {
                                                                                                                        while (true) {
                                                                                                                            if (异常捕获() == "掉线") {
                                                                                                                                log("掉线")
                                                                                                                                break
                                                                                                                            } else {
                                                                                                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂3|设定自动使用生命药剂|设定自动使用生命药剂2", 375, 349, 321, 83)//齿轮图标
                                                                                                                                if (jeig != null) {
                                                                                                                                    log("设定自动使用生命药剂")
                                                                                                                                    var dtgbzt = imgempt(true, 0.9, "百分百自动使用生命药剂2|百分百自动使用生命药剂", 416, 404, 126, 55)
                                                                                                                                    if (dtgbzt != null) {
                                                                                                                                        log("百分百自动使用生命药剂");
                                                                                                                                        随机点击(678, 381)
                                                                                                                                        药水百分比设置 = false
                                                                                                                                        break
                                                                                                                                    } else {
                                                                                                                                        swipe(568, 467, 642, 468, 500)
                                                                                                                                        sleep(1000)
                                                                                                                                    }
                                                                                                                                } else {
                                                                                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                                                                                    if (手 != null) {
                                                                                                                                        log("点击药水")
                                                                                                                                        随机点击2(323, 660)
                                                                                                                                    } else {

                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }

                                                                                                                    }
                                                                                                                    if (参数[39]) {
                                                                                                                        开始主线()
                                                                                                                        if (任务状态 == "挂机") {
                                                                                                                            log("转挂机去了")
                                                                                                                            return
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        var guajizhon = imgempt(true, 0.9, "状态栏小药2|状态栏小药|节电模式中红药|节电模式小红药2|节电模式中红药2", 630, 609, 110, 100)
                                                                                                                        if (guajizhon != null) {
                                                                                                                            开始主线()
                                                                                                                            if (任务状态 == "挂机") {
                                                                                                                                log("转挂机去了")
                                                                                                                                return
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            console.log("需要放置血药");
                                                                                                                            放置血药()
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            } else {
                                                                                                                if (text("验证身份").exists()) {
                                                                                                                    log("需谷歌验证身份")
                                                                                                                    exit()
                                                                                                                } else {
                                                                                                                    if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {
                                                                                                                        自动登录Google()
                                                                                                                    } else {
                                                                                                                        var xzfwq = imgempt(false, 0.9, "Google登录图标|Google登录图标2", 257, 281, 214, 125)
                                                                                                                        if (xzfwq != null) {
                                                                                                                            log("点击google登录");
                                                                                                                            随机点击(xzfwq.x, xzfwq.y, 10, 10)
                                                                                                                            // if (Google登录) {
                                                                                                                            //     sleep(2000)
                                                                                                                            // 自动登录Google()
                                                                                                                            // }
                                                                                                                        } else {
                                                                                                                            var xzfwq = imgempt(false, 0.9, "谷歌弹窗选择页2|谷歌弹窗选择页|谷歌弹窗选择页3", 257, 281, 214, 125)
                                                                                                                            if (xzfwq != null) {
                                                                                                                                log("谷歌弹窗选择页");
                                                                                                                                swipe(621, 304, 611, 598, 500)
                                                                                                                                sleep(2000)
                                                                                                                                随机点击(517, 296)
                                                                                                                            } else {

                                                                                                                                var djryhm = imgempt(true, 0.9, "点击任意画面", 540, 488, 92, 53)
                                                                                                                                if (djryhm != null) {
                                                                                                                                    log("点击任意画面");
                                                                                                                                    随机点击2(djryhm.x, djryhm.y, 10, 10)
                                                                                                                                    登录点击计次++
                                                                                                                                    log("登录点击计次:" + 登录点击计次)
                                                                                                                                    if (登录点击计次 >= 6) {
                                                                                                                                        登录点击计次 = 0
                                                                                                                                        关闭应用("com.wemade.nightcrows");
                                                                                                                                        sleep(10000)
                                                                                                                                        log("拉起游戏")
                                                                                                                                        app.launch("com.wemade.nightcrows")
                                                                                                                                    }
                                                                                                                                    sleep(10000)
                                                                                                                                } else {
                                                                                                                                    // var xzfwq = imgempt(true, 0.9, "选择服务器", 760, 606, 62, 61)
                                                                                                                                    // if (xzfwq != null) {
                                                                                                                                    //     log("选择服务器");
                                                                                                                                    //     随机点击2(xzfwq.x, xzfwq.y, 10, 10)
                                                                                                                                    //     重复点击坐标次数 = 0
                                                                                                                                    // } else {
                                                                                                                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                                                                    if (jdmsz != null) {
                                                                                                                                        log("主页,退出节电")
                                                                                                                                        swipe(566, 389, 968, 226, 500)
                                                                                                                                    } else {
                                                                                                                                        var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                                                                                        if (zhuxian != null) {
                                                                                                                                            log("点击跳过");
                                                                                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                                                                                            var xzfwq = imgempt(true, 0.9, "确认跳过动画", 647, 418, 182, 70)
                                                                                                                                            if (xzfwq != null) {
                                                                                                                                                log("点击确认跳过");
                                                                                                                                                随机点击2(xzfwq.x, xzfwq.y)
                                                                                                                                            }
                                                                                                                                        } else {
                                                                                                                                            var xzfwq = imgempt(true, 0.9, "跳过开头", 565, 230, 264, 113)
                                                                                                                                            if (xzfwq != null) {
                                                                                                                                                log("跳过开头");
                                                                                                                                                随机点击2(712, 443, 10, 10)
                                                                                                                                            } else {
                                                                                                                                                var xzfwq = imgempt(true, 0.9, "进入创建角色页面", 27, 168, 101, 73)
                                                                                                                                                if (xzfwq != null) {
                                                                                                                                                    log("进入创建角色页面");
                                                                                                                                                    随机点击2(xzfwq.x, xzfwq.y)
                                                                                                                                                } else {
                                                                                                                                                    异常捕获()
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                // }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    // }
                                                                                }
                                                                                // }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 设置韩文() {
    while (true) {
        var jinribts = imgempt(true, 0.9, "今天不提示|今天不提示2", 102, 561, 280, 77)
        if (jinribts != null) {
            log("今天不提示");
            随机点击(144, 590, 10, 10)
        } else {
            var ljjs = imgempt(true, 0.9, "寻找角色页|寻找角色页2", 841, 593, 333, 71)
            if (ljjs != null) {
                log("关闭选区弹窗")
                随机点击(1154, 90)
            } else {
                var ljjs = imgempt(true, 0.9, "寻找角色页|寻找角色页2", 670, 592, 320, 93)
                if (ljjs != null) {
                    log("关闭选区弹窗")
                    随机点击(1154, 90)
                } else {
                    var jinribts = imgempt(true, 0.9, "已经是韩文了", 169, 131, 224, 115)
                    if (jinribts != null) {
                        log("已经是韩文了,退出");
                        sleep(1500)
                        随机点击(1235, 33)
                        return
                    } else {
                        var jinribts = imgempt(true, 0.9, "点击韩文", 188, 172, 409, 125)
                        if (jinribts != null) {
                            log("点击韩文");
                            随机点击(jinribts.x, jinribts.y)
                            sleep(2000)
                        } else {
                            var jinribts = imgempt(true, 0.9, "图形预设英文", 167, 135, 304, 123)
                            if (jinribts != null) {
                                log("图形预设英文点击语言");
                                随机点击(57, 267)
                            } else {
                                var jinribts = imgempt(true, 0.9, "英文退出账号|英文退出账号2", 11, 632, 215, 77)
                                if (jinribts != null) {
                                    log("点击设置");
                                    随机点击(1231, 44)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }

        sleep(200)
    }
}
events.observeKey();
events.on("key", function (keyCode, event) {
    if (keyCode == keys.home && event.getAction() == event.ACTION_UP) {
        log("脚本结束");
        死亡次数 = 0
        try {
            ui.run(function () {
                window.close();
            });
            window = null
        } catch (error) {
            log("关闭悬浮窗报错" + error)
        }
        执行 = true
        线程控制 = true
        threads.shutDownAll()
        ui.run(function () {
            ui.start.setEnabled(true);
        });
    }
});

ui.log.click(function () {
    if (ui.log.isChecked()) {
        console.setPosition(0, 40)
        console.setSize(device.width, device.height)
        console.show()
    } else {
        console.hide()
    }
})

ui.更新脚本.click(function () {
    threads.start(function () {
        更新()
    });
})

// ui.发送币价.click(function () {
//     var 输入币价 =  ui.输入币价.getText()
//     if (输入币价!="") {
//         log("设备ID："+设备id)
//         log("输入币价:"+输入币价)
//         var data = {
//             "type": "币价",
//             "CurrencyRate": 输入币价.toString(),
//             "androidID": 设备id
//         };
//         var jsonData = JSON.stringify(data);
//         中控数据发送(jsonData)
//     }else{
//         toastLog("请输入币价")
//     }
// });

ui.进度.click(function () {
    var 状态 = ui.进度.getText();
    if (状态 == "点击安装") {
        if (files.exists("/sdcard/customize/yeyaInternationalServerScript.apk")) {
            log("打开文件")
            app.viewFile("/sdcard/customize/yeyaInternationalServerScript.apk")
        } else {
            log('文件不存在');
        }
    }
})

ui.qingkong.click(function () {
    ui.userName.setText("");
    ui.password.setText("");
    ui.email.setText("");
})


ui.清空所有选项.click(function () {

    ui.主线任务.setChecked(false)
    ui.三五后主线.setChecked(false)
    ui.主线提升.setChecked(false)
    ui.清空药水.setChecked(false)
    ui.识别游戏大区.setChecked(false)
    ui.单强化.setChecked(false)
    ui.单灌注.setChecked(false)
    ui.单洗练.setChecked(false)
    ui.二转.setChecked(false)
    ui.三十五级提升.setChecked(false)
    ui.交易.setChecked(false)
    ui.野外挂机选项.setChecked(false)
    ui.委托.setChecked(false)
    ui.日副本.setChecked(false)
    ui.经验本.setChecked(false)
    ui.周副本.setChecked(false)
    ui.区本.setChecked(false)
    ui.激战地选项.setChecked(false)
    // ui.Google登录.setChecked(false)
    ui.每日制造.setChecked(false)
    ui.白嫖属性.setChecked(false)
    ui.自动提升.setChecked(false)
    ui.查看物价.setChecked(false)
    ui.工会任务.setChecked(false)
    ui.商城活动物质.setChecked(false)
    ui.放入仓库.setChecked(false)
    ui.环境优化.setChecked(false)
    ui.每日换购材料箱.setChecked(false)
    ui.启动延时.setChecked(false)
    ui.自动铸币.setChecked(false)
    ui.自动购买技能书.setChecked(false)
    ui.药水设定.setChecked(false)
    // ui.图鉴材料分解.setChecked(false)
    // ui.野外图鉴材料分解.setChecked(false)
    ui.自动分解.setChecked(false)
})

function 更新() {
    ui.run(function () {
        ui.进度.setText("连接中...")
    });

    var url = "http://10.6.130.124/yeyaInternationalServerScript.apk";
    var call = http.client().newCall(
        http.buildRequest(url, {
            method: "GET",
        })
    ).execute();

    files.createWithDirs("/sdcard/customize/");
    var fs = new java.io.FileOutputStream("/sdcard/customize/yeyaInternationalServerScript.apk");
    var buffer = util.java.array("byte", 1024); //byte[]
    var byteSum = 0; //总共读取的文件大小
    var byteRead; //每次读取的byte数
    var is = call.body().byteStream();
    var fos = call.body().contentLength();
    log(fos);
    log("开始下载");
    var aa = 0
    var ProgressBar = floaty.rawWindow(
        <horizontal>
            <seekbar id="progress" w="300" h="40" bg="#40000000" />
        </horizontal>
    );
    ProgressBar.setPosition(device.width / 2 - 300, device.height / 2 - 5);
    ProgressBar.progress.setMax(100);
    while ((byteRead = is.read(buffer)) != -1) {
        byteSum += byteRead;
        fs.write(buffer, 0, byteRead); //读取
        if (((byteSum / fos) * 100) > aa) {
            aa++
            ProgressBar.progress.setProgress(parseInt((byteSum / fos) * 100));
            ui.run(function () {
                ui.进度.setText(parseInt((byteSum / fos) * 100) + "%")
            });
        }
    }
    ui.run(function () {
        ui.进度.setText("点击安装")
    });
    ProgressBar.close();
    if (files.exists("/sdcard/customize/yeyaInternationalServerScript.apk")) {
        shell("pm install -r /sdcard/customize/yeyaInternationalServerScript.apk", true)
    } else {
        log('下载失败');
    }

}

function 自动登录Google() {
    while (true) {
        var xzfwq = imgempt(false, 0.9, "谷歌弹窗选择页2|谷歌弹窗选择页|谷歌弹窗选择页3", 257, 281, 214, 125)
        if (xzfwq != null) {
            log("谷歌弹窗选择页");
            swipe(621, 304, 611, 598, 500)
            sleep(2000)
            随机点击(517, 296)
            return
        } else {
            var xzfwq = imgempt(false, 0.9, "Google登录图标|Google登录图标2", 257, 281, 214, 125)
            if (xzfwq != null) {
                log("点击google登录");
                随机点击(xzfwq.x, xzfwq.y, 10, 10)
                sleep(2000)
            } else {
                var xzfwq = imgempt(true, 0.9, "游戏认证", 440, 416, 228, 102)//仔细看//游戏认证
                if (xzfwq != null) {
                    log("登录成功")
                    // Google登录 = false
                    // storage.put("Google登录", false)
                    // ui.run(function () {
                    //     ui.Google登录.setChecked(false)
                    // })
                    exit()
                } else {
                    var xzfwq = imgempt(true, 0.9, "密钥验证", 515, 414, 277, 131)//仔细看//游戏认证
                    if (xzfwq != null) {
                        log("登录成功")
                        // Google登录 = false
                        // storage.put("Google登录", false)
                        // ui.run(function () {
                        //     ui.Google登录.setChecked(false)
                        // })
                        exit()
                    } else {
                        var xzfwq = imgempt(true, 0.9, "仔细看", 754, 186, 208, 169)//仔细看//
                        if (xzfwq != null) {
                            exit()
                            // for (let index = 0; index < 5; index++) {
                            //     var xzfwq = imgempt(true, 0.9, "同意条款", 367, 210, 70, 243)//仔细看
                            //     if (xzfwq != null) {
                            //         log("勾选条款")
                            //         随机点击2(xzfwq.x + 10, xzfwq.y + 10, 10, 10)
                            //     }
                            //     sleep(200)
                            // }
                            // 随机点击2(641, 498, 10, 10)
                        } else {
                            var xzfwq = imgempt(true, 0.9, "同意条款", 329, 139, 141, 355)
                            if (xzfwq != null) {
                                exit()
                                // for (let index = 0; index < 5; index++) {
                                //     var xzfwq = imgempt(true, 0.9, "同意条款", 329, 139, 141, 355)//仔细看
                                //     if (xzfwq != null) {
                                //         log("勾选条款")
                                //         随机点击2(xzfwq.x + 10, xzfwq.y + 10, 10, 10)
                                //     }
                                //     sleep(200)
                                // }
                                // 随机点击2(638, 532, 10, 10)
                            } else {

                                if (className("android.widget.Button").text("不开启").exists()) {
                                    log("不开启")
                                    className("android.widget.Button").text("不开启").findOne().click()
                                } else if (className("android.widget.Button").desc("不开启").exists()) {
                                    log("不开启")
                                    className("android.widget.Button").desc("不开启").findOne().click()
                                } else if (className("android.widget.Button").text("跳过").exists()) {
                                    log("跳过")
                                    className("android.widget.Button").text("跳过").findOne().click()
                                } else if (className("android.widget.Button").desc("跳过").exists()) {
                                    log("跳过")
                                    className("android.widget.Button").desc("跳过").findOne().click()
                                } else if (className("android.widget.Button").text("我同意").exists()) {
                                    log("我同意")
                                    className("android.widget.Button").text("我同意").findOne().click()
                                } else if (className("android.widget.Button").desc("我同意").exists()) {
                                    log("我同意")
                                    className("android.widget.Button").desc("我同意").findOne().click()
                                } else if (className("android.widget.Button").text("동의").exists()) {
                                    log("我同意韩文")
                                    className("android.widget.Button").text("동의").findOne().click()
                                } else if (className("android.widget.Button").desc("동의").exists()) {// 
                                    log("我同意韩文")
                                    className("android.widget.Button").desc("동의").findOne().click()
                                } else if (className("android.widget.Button").text("I agree").exists()) {
                                    log("I agree")
                                    className("android.widget.Button").text("I agree").findOne().click()
                                } else if (className("android.widget.Button").desc("I agree").exists()) {// I agree
                                    log("I agree")
                                    className("android.widget.Button").desc("I agree").findOne().click()
                                } else if (className("android.widget.Button").text("更多").exists()) {
                                    log("更多")
                                    className("android.widget.Button").text("更多").findOne().click()
                                } else if (className("android.widget.Button").desc("更多").exists()) {
                                    log("更多")
                                    className("android.widget.Button").desc("更多").findOne().click()
                                } else if (className("android.widget.Button").text("더보기").exists()) {//再看
                                    log("再看")
                                    className("android.widget.Button").text("더보기").findOne().click()
                                } else if (className("android.widget.Button").desc("더보기").exists()) {
                                    log("再看")
                                    className("android.widget.Button").desc("더보기").findOne().click()
                                } else if (className("android.widget.Button").text("Jeg accepterer").exists()) {//同意
                                    log("再看")
                                    className("android.widget.Button").text("Jeg accepterer").findOne().click()
                                } else if (className("android.widget.Button").desc("Jeg accepterer").exists()) {
                                    log("再看")
                                    className("android.widget.Button").desc("Jeg accepterer").findOne().click()
                                } else if (className("android.widget.Button").text("Add phone number?").exists()) {//同意
                                    log("翻页")
                                    for (let index = 0; index < 2; index++) {
                                        swipe(340, 1064, 362, 228, 500)
                                    }
                                } else if (className("android.widget.Button").desc("Add phone number?").exists()) {
                                    log("翻页")
                                    for (let index = 0; index < 2; index++) {
                                        swipe(340, 1064, 362, 228, 500)
                                    }
                                } else if (className("android.widget.Button").text("Skip").exists()) {//
                                    log("Skip")
                                    className("android.widget.Button").text("Skip").findOne().click()
                                } else if (className("android.widget.Button").desc("Skip").exists()) {//Yes, I'm in
                                    log("Skip")
                                    className("android.widget.Button").desc("Skip").findOne().click()
                                } else if (className("android.widget.Button").text("Yes, I'm in").exists()) {
                                    log("我同意英文")
                                    className("android.widget.Button").text("Yes, I'm in").findOne().click()
                                } else if (className("android.widget.Button").desc("Yes, I'm in").exists()) {//Yes, I'm in
                                    log("我同意英文")
                                    className("android.widget.Button").desc("Yes, I'm in").findOne().click()
                                } else {//
                                    if (id("selectionc0").desc("显示密码").exists() || id("selectionc1").desc("显示密码").exists()) {
                                        log("输入密码节点")
                                        sleep(1000)
                                        setText(password)
                                        sleep(1000)
                                        if (className("android.widget.Button").text("下一步").exists()) {
                                            log("输入密码下一步节点")
                                            className("android.widget.Button").text("下一步").findOne().click()
                                        } else if (className("android.widget.Button").desc("下一步").exists()) {
                                            log("输入密码下一步节点")
                                            className("android.widget.Button").desc("下一步").findOne().click()
                                        } else if (className("android.widget.Button").text("다음").exists()) {
                                            log("输入密码下一步节点")
                                            className("android.widget.Button").text("다음").findOne().click()
                                        } else if (className("android.widget.Button").desc("다음").exists()) {
                                            log("输入密码下一步节点")
                                            className("android.widget.Button").desc("다음").findOne().click()
                                        } else if (className("android.widget.Button").desc("Næste").exists()) {
                                            log("辅助邮箱下一步节点")
                                            className("android.widget.Button").desc("Næste").findOne().click()
                                        } else if (className("android.widget.Button").text("Næste").exists()) {
                                            log("辅助邮箱下一步节点")
                                            className("android.widget.Button").text("Næste").findOne().click()
                                        } else if (className("android.widget.Button").text("Next").exists()) {
                                            log("输入账号下一步节点")
                                            className("android.widget.Button").text("Next").findOne().click()
                                        } else if (className("android.widget.Button").desc("Next").exists()) {
                                            log("输入账号下一步节点")
                                            className("android.widget.Button").desc("Next").findOne().click()//Next
                                        }
                                        sleep(1500)
                                    } else {
                                        if (id("selectionc1").text("显示密码").exists() || id("selectionc0").text("显示密码").exists() || id("selectionc1").text("비밀번호 표시").exists()) {//
                                            log("输入密码节点")
                                            sleep(1000)
                                            setText(password)
                                            sleep(1000)
                                            if (className("android.widget.Button").text("下一步").exists()) {
                                                log("输入密码下一步节点")
                                                className("android.widget.Button").text("下一步").findOne().click()
                                            } else if (className("android.widget.Button").desc("下一步").exists()) {
                                                log("输入密码下一步节点")
                                                className("android.widget.Button").desc("下一步").findOne().click()
                                            } else if (className("android.widget.Button").text("다음").exists()) {
                                                log("输入密码下一步节点")
                                                className("android.widget.Button").text("다음").findOne().click()
                                            } else if (className("android.widget.Button").desc("다음").exists()) {
                                                log("输入密码下一步节点")
                                                className("android.widget.Button").desc("다음").findOne().click()
                                            } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                log("辅助邮箱下一步节点")
                                                className("android.widget.Button").desc("Næste").findOne().click()
                                            } else if (className("android.widget.Button").text("Næste").exists()) {
                                                log("辅助邮箱下一步节点")
                                                className("android.widget.Button").text("Næste").findOne().click()
                                            } else if (className("android.widget.Button").text("Next").exists()) {
                                                log("输入账号下一步节点")
                                                className("android.widget.Button").text("Next").findOne().click()
                                            } else if (className("android.widget.Button").desc("Next").exists()) {
                                                log("输入账号下一步节点")
                                                className("android.widget.Button").desc("Next").findOne().click()//Next
                                            }
                                            sleep(1500)
                                        } else {
                                            if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {//
                                                log("输入账号节点")
                                                sleep(2000)
                                                setText(userName)
                                                sleep(1000)
                                                if (className("android.widget.Button").text("下一步").exists()) {//
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").text("下一步").findOne().click()
                                                    log("点击完成")
                                                } else if (className("android.widget.Button").desc("下一步").exists()) {
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").desc("下一步").findOne().click()
                                                    log("点击完成")
                                                } else if (className("android.widget.Button").text("다음").exists()) {//다음
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").text("다음").findOne().click()
                                                    log("点击完成")
                                                } else if (className("android.widget.Button").desc("다음").exists()) {
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").desc("다음").findOne().click()
                                                    log("点击完成")
                                                } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                    log("辅助邮箱下一步节点")
                                                    className("android.widget.Button").desc("Næste").findOne().click()
                                                } else if (className("android.widget.Button").text("Næste").exists()) {
                                                    log("辅助邮箱下一步节点")
                                                    className("android.widget.Button").text("Næste").findOne().click()
                                                } else if (className("android.widget.Button").text("Next").exists()) {
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").text("Next").findOne().click()
                                                } else if (className("android.widget.Button").desc("Next").exists()) {
                                                    log("输入账号下一步节点")
                                                    className("android.widget.Button").desc("Next").findOne().click()//Next
                                                }
                                                sleep(1500)
                                            } else {
                                                if (id("headingText").desc("登录").exists() || id("headingText").desc("로그인").exists()) {
                                                    log("输入账号节点")
                                                    sleep(2000)
                                                    setText(userName)
                                                    sleep(1000)
                                                    if (className("android.widget.Button").text("下一步").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").desc("下一步").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("下一步").findOne().click()
                                                    } else if (className("android.widget.Button").text("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("다음").findOne().click()
                                                    } else if (className("android.widget.Button").desc("다음").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("다음").findOne().click()
                                                    } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").desc("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Næste").exists()) {
                                                        log("辅助邮箱下一步节点")
                                                        className("android.widget.Button").text("Næste").findOne().click()
                                                    } else if (className("android.widget.Button").text("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").text("Next").findOne().click()
                                                    } else if (className("android.widget.Button").desc("Next").exists()) {
                                                        log("输入账号下一步节点")
                                                        className("android.widget.Button").desc("Next").findOne().click()//Next
                                                    }
                                                    sleep(1500)
                                                } else {
                                                    if (desc("确认您的辅助邮箱").exists()) {//복구 이메일 확인
                                                        log("确认您的辅助邮箱节点")
                                                        desc("确认您的辅助邮箱").findOne().click()
                                                    } else {
                                                        if (text("确认您的辅助邮箱").exists()) {
                                                            log("确认您的辅助邮箱节点")
                                                            text("确认您的辅助邮箱").findOne().click()
                                                        } else {
                                                            if (desc("복구 이메일 확인").exists()) {
                                                                log("确认您的辅助邮箱节点")
                                                                desc("복구 이메일 확인").findOne().click()
                                                            } else {
                                                                if (text("복구 이메일 확인").exists()) {
                                                                    log("确认您的辅助邮箱节点")
                                                                    text("복구 이메일 확인").findOne().click()
                                                                } else {
                                                                    if (id("knowledge-preregistered-email-response").exists() || text("Verificer, at det er dig").exists() || desc("Verificer, at det er dig").exists()) {
                                                                        log("输入辅助邮箱节点")
                                                                        sleep(2000)
                                                                        setText(email)
                                                                        sleep(1000)
                                                                        if (className("android.widget.Button").desc("下一步").exists()) {
                                                                            log("辅助邮箱下一步节点")
                                                                            className("android.widget.Button").desc("下一步").findOne().click()
                                                                        } else if (className("android.widget.Button").text("下一步").exists()) {
                                                                            log("辅助邮箱下一步节点")
                                                                            className("android.widget.Button").text("下一步").findOne().click()
                                                                        } else if (className("android.widget.Button").text("다음").exists()) {
                                                                            log("输入账号下一步节点")
                                                                            className("android.widget.Button").text("다음").findOne().click()
                                                                        } else if (className("android.widget.Button").desc("다음").exists()) {
                                                                            log("输入账号下一步节点")
                                                                            className("android.widget.Button").desc("다음").findOne().click()//
                                                                        } else if (className("android.widget.Button").desc("Næste").exists()) {
                                                                            log("辅助邮箱下一步节点")
                                                                            className("android.widget.Button").desc("Næste").findOne().click()
                                                                        } else if (className("android.widget.Button").text("Næste").exists()) {
                                                                            log("辅助邮箱下一步节点")
                                                                            className("android.widget.Button").text("Næste").findOne().click()
                                                                        } else if (className("android.widget.Button").text("Next").exists()) {
                                                                            log("输入账号下一步节点")
                                                                            className("android.widget.Button").text("Next").findOne().click()
                                                                        } else if (className("android.widget.Button").desc("Next").exists()) {
                                                                            log("输入账号下一步节点")
                                                                            className("android.widget.Button").desc("Next").findOne().click()//Next
                                                                        }//
                                                                    } else {
                                                                        if (className("android.widget.Button").desc("接受").exists()) {
                                                                            log("接受节点")
                                                                            sleep(2000)
                                                                            className("android.widget.Button").desc("接受").findOne().click()
                                                                            sleep(2000)
                                                                            return
                                                                        } else if (className("android.widget.Button").text("接受").exists()) {
                                                                            log("接受节点")
                                                                            sleep(2000)
                                                                            className("android.widget.Button").text("接受").findOne().click()
                                                                            sleep(2000)
                                                                            return
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(1000)
    }
}

function randomChinese() {
    var 随机数 = random(3, 8)
    var 名字 = ""
    for (let index = 0; index < 随机数; index++) {
        var randomUnicode = Math.floor(Math.random() * (40869 - 19968) + 19968); // 生成19968到40869之间的随机Unicode值
        var chineseCharacter = String.fromCharCode(randomUnicode); // 将Unicode值转换为中文字符
        名字 = 名字 + "" + chineseCharacter
    }
    return 名字;
}

function chineseToAscii(chineseCharacter) {
    var asciiCode = chineseCharacter.charCodeAt(0); // 获取中文字符的ASCII码
    return asciiCode;
}


function randomLetter() {
    // 生成0或1，用于随机选择大小写
    var randomAscii;
    var 随机数 = random(3, 8)
    var 名字 = ""
    for (let index = 0; index < 随机数; index++) {
        var randomCase = Math.floor(Math.random() * 2);
        if (randomCase === 0) {
            randomAscii = Math.floor(Math.random() * (122 - 97 + 1) + 97);
        } else {
            // 生成随机大写字母的ASCII码（65到90之间）
            randomAscii = Math.floor(Math.random() * (90 - 65 + 1) + 65);
        }
        var randomLetter = String.fromCharCode(randomAscii);
        名字 = 名字 + "" + randomLetter
    }
    // 将ASCII码转换为字母
    return 名字;
}
//사마귀 갈고리 발톱  螳螂腿
//투박한 오크 칼   半兽人刀

//늙은 놀 수염   老鬣狗的胡须
//싱싱한 과일   水果   
//정체불명의 파편   来历不明的碎片
//푸른 꽃   蓝花
//독거미액  毒蜘蛛
//훼손된 쪽지   损坏的纸条 
//신선한 생선   新鲜的鱼
//동물 뼈 견장 动物头骨肩章
//반짝이는 서리 결정  闪耀的冰雪結晶
//반짝이는 서리 원석  闪耀的冰雪原石

function 制造古董图鉴() {
    log("制造古董图鉴")
    节电模式判断掉线时间戳 = new Date().getTime()
    var 未找到特定材料次数 = 0
    var 不是需要制作的材料 = 0
    var 首次进入 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var pmhssy = imgempt(true, 0.9, "拍卖行_搜索页", 219, 637, 225, 82)
                if (pmhssy != null) {
                    log("拍卖行_搜索页,退出拍卖行");
                    随机点击2(37, 33)
                } else {
                    var srgmjm = matchImg(true, "最上边", 0.9, "古董未制作|古董未制作2", 464, 161, 118, 547)
                    if (srgmjm != null) {
                        if (首次进入) {
                            首次进入 = false
                            log("首次进入,先回到最上面")
                            for (let index = 0; index < 3; index++) {
                                swipe(387, 228, 419, 486, 500)
                                sleep(200)
                            }
                        } else {
                            log("点击未制作")
                            随机点击(srgmjm.resultSet.x, srgmjm.resultSet.y, 10, 10)
                            sleep(1000)
                            var jizhandi = imgempt(true, 0.9, "船长的藏宝图|德鲁伊的古书|异教道的咒术人偶", 694, 246, 167, 114)//
                            if (jizhandi != null) {
                                log("点击制作古董");
                                随机点击2(1050, 661)
                                for (let index = 0; index < 3; index++) {
                                    var jizhandi = imgempt(true, 0.9, "制作等级不足|制作等级不足2|制作材料不足", 539, 51, 224, 62)//
                                    if (jizhandi != null) {
                                        log("制作条件不足")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        return "完成"
                                    }
                                    sleep(200)
                                }
                            } else {
                                log("不是需要制作的材料")
                                storage.put("古董版本号", "2")
                                不是需要制作的材料++
                                if (不是需要制作的材料 >= 3) {
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                }
                            }
                        }

                    } else {
                        var 图鉴页 = imgempt(true, 0.9, "图鉴左上角", 2, 1, 198, 71)
                        if (图鉴页 != null) {
                            var shousk = imgempt(true, 0.9, "图鉴制作图标|图鉴制作图标2", 960, 284, 104, 91)
                            if (shousk != null) {
                                log("图鉴制作图标");
                                随机点击(shousk.x, shousk.y, 10, 10)
                            } else {
                                var shousk = imgempt(true, 0.9, "图鉴古董页|图鉴古董页2", 610, 648, 230, 70)
                                if (shousk != null) {
                                    var jizhandi = imgempt(true, 0.9, "图鉴古董1|图鉴古董2|图鉴古董3", 722, 129, 111, 287)//
                                    if (jizhandi != null) {
                                        log("点击需要制作的古董");
                                        随机点击(jizhandi.x - 200, jizhandi.y, 10, 10)
                                    } else {
                                        未找到特定材料次数++
                                        if (未找到特定材料次数 >= 3) {
                                            log("未找到特定古董材料")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            return "完成"
                                        }
                                    }
                                } else {
                                    log("点击古董页")
                                    随机点击(548, 101)
                                }
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "菜单_图鉴|菜单_图鉴2", 958, 87, 321, 499)//
                            if (jizhandi != null) {
                                log("点击菜单_图鉴");
                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("宝鉴,退出节电")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 自动图鉴() {
    if (storage.get("收藏图鉴记录") != storage.get("收藏图鉴版本号")) {
        var 结果 = 收藏指定材料()
        if (结果 == "掉线") {
            return "掉线"
        }
        storage.put("收藏图鉴记录版本", storage.get("收藏图鉴版本号"))
    } else {
        log("已经收藏过直接去图鉴")
    }

    var 结果 = 图鉴收藏材料()
    if (结果 == "掉线") {
        return "掉线"
    } else {
        var 结果 = 纯回主页()
        if (结果 == "掉线") {
            return "掉线"
        } else {
            var 结果 = 清理背包("图鉴材料")
            if (结果 == "掉线") {
                return "掉线"
            } else {
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "已清理"
                }
            }
        }
    }
}

//搜索出的图鉴材料2
function 收藏指定材料() {
    log("收藏指定材料")
    var 收藏材料 = ["딱딱한 껍데기", "풍성한 동물털", "찢어진 날개 조각", "오색 날개 조각", "야생 산딸기", "토끼 고기", "딱딱한 껍데기", "악에 물든 가루", "빈 술병", "약재 가루", "육중한 고기", "누더기 망토", "깨진 달팽이 껍질", "서리의 불꽃", "하급 번영의 증표", "반짝이는 서리 결정", "사마귀 갈고리 발톱", "늙은 놀 수염", "싱싱한 과일", "정체불명의 파편", "독거미액", "훼손된 쪽지", "동물 뼈 견장", "이를레타의 증표 I", "바스티움 결정"]
    var 收藏任务 = "佣兵资格Ⅲ|佣兵资格Ⅰ|佣兵资格Ⅱ|被认可的勇士ⅩⅠ|村里的一员Ⅳ|村里的一员Ⅲ|村里的一员Ⅰ|问题调解师Ⅵ|问题调解师Ⅱ|问题调解师Ⅰ|问题调解师Ⅴ|问题调解师|伸出援手Ⅷ|万能收藏家Ⅰ|伸出援手Ⅰ|万能收藏家Ⅷ|认可的勇士Ⅱ|认可的勇士Ⅳ|认可的勇士Ⅶ|援助之手Ⅶ|万能收藏家Ⅱ|万能收藏家ⅩⅤ|恐惧的根源Ⅰ|恐惧的根源ⅩⅠ|恐惧的根源Ⅱ|持续的战斗Ⅸ|冰霜气息Ⅱ|冰窟的火花Ⅰ|冰窟的火花Ⅱ|执着的杀人犯Ⅰ|巴斯提姆的光明Ⅰ|执着的掠夺者Ⅰ"//删除任务|村里的一员Ⅴ  |认可的勇士Ⅵ  |佣兵资格Ⅳ  |伸出援手Ⅱ
    var 翻页 = true
    var 翻页次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var 图鉴页 = imgempt(true, 0.9, "图鉴左上角", 2, 1, 198, 71)
            if (图鉴页 != null) {
                log("收藏页")
                var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                if (pmhss != null) {
                    log("主页搜索");
                    随机点击(pmhss.x, pmhss.y, 10, 10)
                } else {
                    var pmhss = imgempt(true, 0.9, "左侧请输入检索词|请输入检索词|请输入检索词2|请输入检索词3", 25, 53, 217, 110)//请输入检索词
                    if (pmhss != null) {
                        if (收藏材料.length != 0) {
                            log("点击输入检索词");
                            随机点击(pmhss.x, pmhss.y)
                            setText(收藏材料[0].toString())
                        } else {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        }
                    } else {
                        var pmhss = imgempt(true, 0.9, "搜索出的图鉴材料|搜索出的图鉴材料2", 22, 110, 102, 86)//
                        if (pmhss != null) {
                            log("点击搜索出的物品");
                            随机点击(pmhss.x + 100, pmhss.y + 20, 10, 10)
                        } else {
                            var pmhss = imgempt(true, 0.8, "收藏图标", 7, 107, 125, 565)//
                            if (pmhss != null) {
                                log("寻找收藏任务");
                                var pmhss = CoordinatesAndPictureName(true, 0.9, 收藏任务, 67, 113, 380, 551)//
                                if (pmhss != null) {
                                    log("找到" + pmhss.图名 + "任务,识别范围:" + pmhss.x + "," + pmhss.y + "," + (16 + 88) + "," + (pmhss.y + 78));
                                    var bbym = cor(true, 12, 16, pmhss.y, 88, 78, "#b2a7a3", [[0, -1, "#a9a09b"], [-3, 1, "#b1aaa4"], [1, 8, "#88807e"], [-9, 13, "#252422"], [10, 14, "#292826"]])//有问题需修改，识别不到第二栏，可修改成二值化看颜色点数量
                                    if (bbym != null) {
                                        log("找到可收藏,点击收藏")
                                        随机点击2(bbym.x, bbym.y)
                                        var regex = new RegExp(pmhss.图名 + "\\|");
                                        if (收藏任务.match(regex)) {
                                            收藏任务 = 收藏任务.replace(pmhss.图名 + "|", '');
                                        } else {
                                            收藏任务 = 收藏任务.replace("|" + pmhss.图名, '');
                                        }
                                    } else {
                                        var huise = imgempt(true, 0.98, "收藏图标灰色", 16, pmhss.y, 88, 78)//
                                        if (huise != null) {
                                            log("找到灰色收藏,点击收藏")
                                            随机点击2(huise.x, huise.y)
                                            var regex = new RegExp(pmhss.图名 + "\\|");
                                            if (收藏任务.match(regex)) {
                                                收藏任务 = 收藏任务.replace(pmhss.图名 + "|", '');
                                            } else {
                                                收藏任务 = 收藏任务.replace("|" + pmhss.图名, '');
                                            }
                                        } else {
                                            log("已收藏")
                                            var regex = new RegExp(pmhss.图名 + "\\|");
                                            var regexWithoutPipe = new RegExp("^" + pmhss.图名 + "$");
                                            if (收藏任务.match(regex)) {
                                                收藏任务 = 收藏任务.replace(pmhss.图名 + "|", '');
                                            } else if (收藏任务.match(regexWithoutPipe)) { // 检查是否整个字符串就是没有竖线的 pmhss.图名  
                                                收藏任务 = 收藏任务.replace(pmhss.图名, '');// 或者你可以设置为其他你想要的值  
                                            } else {
                                                收藏任务 = 收藏任务.replace("|" + pmhss.图名, '');
                                            }
                                        }
                                    }
                                } else {
                                    var pmhss = imgempt(true, 0.9, "已完成图鉴", 53, 110, 136, 553)//
                                    if (pmhss != null) {
                                        log("找到已完成图鉴,代表找完了")
                                        翻页次数 = 0
                                        翻页 = true
                                        log("清空搜索")
                                        随机点击(1238, 100)
                                        收藏材料 = 收藏材料.splice(1)
                                    } else {
                                        if (翻页次数 <= 3) {
                                            log("翻页")
                                            swipe(257, 493, 275, 274, 2000)
                                            sleep(1000)
                                            翻页 = false
                                        } else {
                                            翻页次数 = 0
                                            翻页 = true
                                            log("清空搜索")
                                            随机点击(1238, 100)
                                            收藏材料 = 收藏材料.splice(1)
                                        }
                                        翻页次数++
                                    }

                                }
                            } else {

                            }
                        }
                    }
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "菜单_图鉴|菜单_图鉴2", 958, 87, 321, 499)//
                if (jizhandi != null) {
                    log("点击菜单_图鉴");
                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                        if (jdmsz != null) {
                            log("宝鉴,退出节电")
                            swipe(566, 389, 968, 226, 500)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }

}


function 图鉴收藏材料() {
    var 翻页次数 = 0
    var 价格不合理 = false
    log("图鉴收藏材料")
    节电模式判断掉线时间戳 = new Date().getTime()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var pmhssy = imgempt(true, 0.9, "拍卖行_搜索页", 219, 637, 225, 82)
            if (pmhssy != null) {
                log("拍卖行_搜索页,退出拍卖行");
                随机点击2(37, 33)
            } else {
                var 图鉴页 = imgempt(true, 0.9, "图鉴左上角", 2, 1, 198, 71)
                if (图鉴页 != null) {
                    log("图鉴页")
                    var shousk = imgempt(true, 0.9, "收藏夹", 648, 642, 132, 72)
                    if (shousk != null) {
                        log("收藏页")
                        var 点击的Y轴 = 189//86高
                        var 首个图鉴物品 = true
                        for (let index = 0; index < 5; index++) {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("无故卡退,退出for");
                                break
                            } else {
                                随机点击(300, 点击的Y轴)
                                var 下滑 = true
                                while (true) {
                                    if (异常捕获() == "掉线") {
                                        return "掉线"
                                    } else {
                                        var pmhssy = imgempt(true, 0.9, "拍卖行_搜索页", 219, 637, 225, 82)
                                        if (pmhssy != null) {
                                            log("拍卖行_搜索页,退出拍卖行");
                                            随机点击2(37, 33)
                                        } else {
                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                log("无故卡退,退出while");
                                                break
                                            } else {
                                                var bbym = cor(true, 12, 920, 560, 262, 111, "#e3dccb", [[11, 7, "#766347"], [25, 7, "#83704f"], [21, -1, "#73644f"], [30, 0, "#887251"], [44, 13, "#e3dccb"], [43, 1, "#877350"], [51, -4, "#806b49"], [116, 5, "#0f0e0e"], [-67, 2, "#111010"]])//有问题需修改，识别不到第二栏，可修改成二值化看颜色点数量
                                                if (bbym != null) {
                                                    log("点击一键图鉴")
                                                    首个图鉴物品 = false
                                                    价格不合理 = false
                                                    随机点击2(bbym.x, bbym.y)
                                                } else {
                                                    var bbym = imgempt(true, 0.9, "确定注册图鉴", 615, 429, 246, 123)
                                                    if (bbym != null) {
                                                        log("确定注册图鉴")
                                                        随机点击2(bbym.x, bbym.y)
                                                    } else {
                                                        var bbym = imgempt(true, 0.9, "单个登记按钮", 1109, 310, 141, 254)
                                                        if (bbym != null) {
                                                            log("跳转拍卖行")
                                                            var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                                            if (dinbuzuanshi1 != null) {
                                                                var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                                                if (当前钻石数量 != "false") {
                                                                    if (当前钻石数量 < 50) {
                                                                        log("钻石不足50,不再进行图鉴购买")
                                                                        var 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            return "完成"
                                                                        }
                                                                    } else {
                                                                        随机点击2(bbym.x - 206, bbym.y)
                                                                        var 结果 = 跳转购买图鉴材料()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else if (结果 == "无故卡退") {
                                                                            break
                                                                        } else if (结果 == "已清理") {
                                                                            break
                                                                        } else if (结果 == "价格不合理") {
                                                                            价格不合理 = true
                                                                            break
                                                                        }
                                                                    }
                                                                }
                                                            } else {
                                                                log("没有找到钻石图标")
                                                            }

                                                        } else {
                                                            if (下滑) {
                                                                var bbym = imgempt(true, 0.9, "单个登记按钮", 1126, 465, 106, 115)
                                                                if (bbym != null) {
                                                                    log("下滑看看")
                                                                    swipe(993, 527, 987, 427, 2000)
                                                                    下滑 = false
                                                                } else {
                                                                    if (首个图鉴物品 && index == 0) {
                                                                        log("图鉴完毕")
                                                                        return "完成"
                                                                    }
                                                                    log("已完成单图鉴物品登记")
                                                                    break
                                                                }
                                                            } else {
                                                                if (首个图鉴物品 && index == 0) {
                                                                    log("图鉴完毕")
                                                                    return "完成"
                                                                }
                                                                log("未找到可图鉴物品")
                                                                break
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            点击的Y轴 += 86
                        }
                        if (价格不合理) {
                            log("图鉴完毕,有不合理价格,下次图鉴")
                            return "完成"
                        }
                        var shousk = imgempt(true, 0.9, "收藏夹", 648, 642, 132, 72)
                        if (shousk != null) {
                            log("点击跳转出去刷新")
                            随机点击2(712, 96)
                        }
                    } else {
                        log("点击收藏页")
                        随机点击(856, 95)
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_图鉴|菜单_图鉴2", 958, 87, 321, 499)//
                    if (jizhandi != null) {
                        log("点击菜单_图鉴");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (jdmsz != null) {
                                log("宝鉴,退出节电")
                                swipe(566, 389, 968, 226, 500)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 跳转购买图鉴材料() {
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "单个登记按钮", 1109, 310, 141, 254)
            if (bbym != null) {
                log("跳转拍卖行")
                随机点击2(bbym.x - 206, bbym.y)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("无故退出跳转购买图鉴材料");
                    return "无故退出"
                } else {
                    var pmhss = imgempt(true, 0.9, "拍卖行购买物品弹窗|拍卖行购买物品弹窗2", 524, 67, 257, 115)//
                    if (pmhss != null) {
                        log("点击购买");
                        随机点击2(730, 588)
                        for (let index = 0; index < 3; index++) {
                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                            if (bbkjbztc != null) {
                                log("背包空间不足弹窗")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    var 结果 = 清理背包("图鉴材料")
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "已清理"
                                        }
                                    }
                                }
                            }
                            sleep(200)
                        }
                        // var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452,42,357,202)
                        // if (bbkjbztc != null) {
                        //     log("背包空间不足弹窗")
                        //     var 结果 = 纯回主页()
                        //     if (结果 == "掉线") {
                        //         return "掉线"
                        //     } else {
                        //         var 结果 = 清理背包("图鉴材料")
                        //         if (结果 == "掉线") {
                        //             return "掉线"
                        //         } else {
                        //             var 结果 = 纯回主页()
                        //             if (结果 == "掉线") {
                        //                 return "掉线"
                        //             } else {
                        //                 return "已清理"
                        //             }
                        //         }
                        //     }
                        // } else {
                        sleep(1300)
                        随机点击2(37, 33)
                        break
                        // }
                    } else {
                        var pmhss = imgempt(true, 0.9, "图鉴材料标识", 247, 117, 106, 226)//
                        if (pmhss != null) {
                            var pmhss1 = imgempt(true, 0.9, "销售金额列表", 992, 114, 223, 105)//
                            if (pmhss1 != null) {
                                var 初始Y = pmhss.y
                                var 购买条件 = true
                                节电模式判断掉线时间戳 = new Date().getTime()
                                for (let index = 0; index < 4; index++) {
                                    var 当前总价 = 找数字("字符串", "夜鸦拍卖行", 6, 0.9, 987, 初始Y, 126, 73);
                                    if (当前总价 != "false") {
                                        if (当前总价 > 15 || 当前总价 < 10) {
                                            log("价格过高")
                                            初始Y = 初始Y + 73
                                        } else {
                                            var 当前单价 = 找数字("字符串", "夜鸦拍卖行", 6, 0.9, 684, 初始Y, 126, 73);
                                            if (当前单价 != "false") {
                                                if (当前单价 <= 8) {
                                                    log("总价:" + 当前总价 + ",单价:" + 当前单价)
                                                    随机点击(pmhss.x + 150, 初始Y + 20)
                                                    购买条件 = false
                                                } else {
                                                    log("单价大于指定值")
                                                    随机点击2(1239, 96)
                                                }
                                                break;
                                            } else {

                                            }
                                        }
                                    } else {

                                    }
                                }
                                if (购买条件) {
                                    log("没找到达到可购买条件物资,滑动")
                                    滑动次数++
                                    if (滑动次数 >= 3) {
                                        滑动次数 = 0
                                        log("没有合理价格物品，退出")
                                        随机点击2(37, 33)
                                        return "价格不合理"
                                    } else {
                                        swipe(579, 566, 580, 338, 2000)
                                        sleep(2000)
                                    }
                                }
                            } else {
                                log("点击搜索出的物品");
                                随机点击(pmhss.x + 340, pmhss.y, 10, 10)
                            }
                        } else {
                            var pmhss = imgempt(true, 0.9, "搜索出的图鉴材料", 22, 110, 102, 86)//
                            if (pmhss != null) {
                                log("点击搜索出的物品");
                                随机点击(pmhss.x + 200, pmhss.y + 20, 10, 10)
                            } else {

                            }
                        }
                    }
                }
            }
        }
    }
}

function 购买指定图鉴材料() {
    var 购买材料 = [{ key: "사마귀 갈고리 발톱", value: 15 }, { key: "투박한 오크 칼", value: 10 }, { key: "늙은 놀 수염", value: 5 }, { key: "싱싱한 과일", value: 5 }, { key: "정체불명의 파편", value: 10 }, { key: "푸른 꽃", value: 5 }, { key: "독거미액", value: 25 }, { key: "훼손된 쪽지", value: 5 }, { key: "신선한 생선", value: 5 }, { key: "동물 뼈 견장", value: 10 }, { key: "반짝이는 서리 결정", value: 10 }, { key: "반짝이는 서리 원석", value: 10 }]
    var 购买数量 = 0
    var 滑动次数 = 0
    var 已购买物资 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("点击交易所");
                随机点击(cdjys.x, cdjys.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                    if (pmhss != null) {
                        log("主页搜索");
                        随机点击(pmhss.x, pmhss.y, 10, 10)
                    } else {
                        var pmhss = imgempt(true, 0.9, "请输入检索词|请输入检索词2|请输入检索词3", 25, 53, 217, 110)//请输入检索词
                        if (pmhss != null) {
                            if (购买材料.length != 0) {
                                log("点击输入检索词");
                                随机点击(pmhss.x, pmhss.y)
                                setText(购买材料[0].key.toString())
                            } else {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "购买完成"
                                }
                            }
                        } else {
                            var pmhss = imgempt(true, 0.9, "拍卖行购买物品弹窗|拍卖行购买物品弹窗2", 524, 67, 257, 115)//
                            if (pmhss != null) {
                                log("点击购买");
                                随机点击(730, 588)
                                sleep(300)
                                var pmhss = imgempt(true, 0.9, "购买成功提升", 513, 51, 273, 71)//
                                if (pmhss != null) {
                                    已购买物资 = 已购买物资 + 购买数量
                                    if (已购买物资 >= 购买材料[0].value) {
                                        log(购买材料[0].key + "购买完成")//
                                        购买数量 = 0
                                        已购买物资 = 0
                                        随机点击2(1239, 96)
                                        购买材料 = 购买材料.slice(1)
                                    } else {
                                        toastLog("已购买数量" + 已购买物资)
                                    }
                                }
                            } else {
                                var pmhss = imgempt(true, 0.9, "图鉴材料标识", 247, 117, 106, 226)//
                                if (pmhss != null) {
                                    var pmhss1 = imgempt(true, 0.9, "销售金额列表", 992, 114, 223, 105)//
                                    if (pmhss1 != null) {
                                        var 初始Y = pmhss.y
                                        购买数量 = 0
                                        for (let index = 0; index < 4; index++) {
                                            var 当前总价 = 找数字("字符串", "夜鸦拍卖行", 6, 0.9, 987, 初始Y, 126, 73);
                                            if (当前总价 != "false") {
                                                if (当前总价 > 50) {
                                                    log("价格过高")
                                                    初始Y = 初始Y + 73
                                                } else {
                                                    var 当前单价 = 找数字("字符串", "夜鸦拍卖行", 6, 0.9, 684, 初始Y, 126, 73);
                                                    if (当前单价 != "false") {
                                                        if (当前单价 <= 8) {
                                                            购买数量 = 当前总价 / 当前单价
                                                            log("总价:" + 当前总价 + ",单价:" + 当前单价 + ",数量:" + 购买数量)
                                                            随机点击(pmhss.x + 100, 初始Y + 20)
                                                        } else {
                                                            log("单价大于指定值")
                                                            购买材料 = 购买材料.slice(1)
                                                            随机点击2(1239, 96)
                                                        }
                                                        break;
                                                    } else {

                                                    }
                                                }
                                            } else {

                                            }
                                        }
                                        if (购买数量 == 0) {
                                            log("没找到达到可购买条件物资,滑动")
                                            滑动次数++
                                            if (滑动次数 >= 5) {
                                                滑动次数 = 0
                                                log("刷新物品")
                                                随机点击2(1183, 681)
                                            } else {
                                                swipe(579, 566, 580, 338, 2000)
                                                sleep(2000)
                                            }
                                        }
                                    } else {
                                        log("点击搜索出的物品");
                                        随机点击(pmhss.x + 340, pmhss.y, 10, 10)
                                    }
                                } else {
                                    var pmhss = imgempt(true, 0.9, "搜索出的图鉴材料", 22, 110, 102, 86)//
                                    if (pmhss != null) {
                                        log("点击搜索出的物品");
                                        随机点击(pmhss.x + 100, pmhss.y + 20, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}


function 飞行器穿戴() {
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "安装效果|安装效果2", 14, 197, 225, 317)
            if (qiagnhua != null) {
                var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                if (zhuxian != null) {
                    log("退出")
                    随机点击(1240, 29)
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "完成"
                    }
                } else {
                    log("点击装备飞行器")
                    随机点击(885, 236)
                    随机点击2(1156, 677)
                }
            } else {
                var qiagnhua = imgempt(true, 0.9, "菜单_飞行器|菜单_飞行器2", 956, 88, 318, 540)
                if (qiagnhua != null) {
                    log("点击进入菜单_飞行器");
                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击2(1238, 36, 10, 10)
                    } else {
                        var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                        if (bbym != null) {
                            log("飞行器穿戴,退出节电");
                            swipe(566, 389, 968, 226, 500)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function boss红点处理() {
    log("boss红点处理")
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var zhuxian = imgempt(true, 0.9, "每日boss奖励领取|每日boss奖励领取2|每周boss奖励领取|每周boss奖励领取2", 898, 166, 212, 346)
            if (zhuxian != null) {
                log("boss奖励领取")
                随机点击2(zhuxian.x, zhuxian.y)
                for (let index = 0; index < 3; index++) {
                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                    if (bbkjbztc != null) {
                        log("背包空间不足弹窗")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 清理背包()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                break
                            }
                        }
                    }
                    sleep(200)
                }
            } else {
                var zhuxian = imgempt(true, 0.9, "boss奖励已领取", 897, 188, 110, 298)
                if (zhuxian != null) {
                    log("boss奖励已领取,退出")
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "完成"
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "领取委托奖励", 930, 609, 265, 100)
                    if (zhuxian != null) {
                        log("领取委托奖励")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var jizhandi = imgempt(true, 0.9, "菜单_世界boss", 958, 87, 321, 499)
                        if (jizhandi != null) {
                            log("点击菜单_世界boss");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("已经回到主页");
                                return
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 白嫖属性检测() {
    log("白嫖属性检测")
    if ((new Date().getTime() / (1000 * 60) - storage.get("飞行器固定穿戴时间")) > storage.get("飞行器随机穿戴时间")) {
        var 结果 = 飞行器穿戴()
        if (结果 == "掉线") {
            return "掉线"
        }
        log("武器熟练度")
        var 结果 = 武器熟练度()
        if (结果 == "掉线") {
            return "掉线"
        }


        log("武器装扮")
        var 结果 = 武器装扮合成及领取()
        if (结果 == "掉线") {
            return "掉线"
        }


        log("图鉴")
        var 结果 = 成就图鉴()
        if (结果 == "掉线") {
            return "掉线"
        }


        storage.put("飞行器固定穿戴时间", new Date().getTime() / (1000 * 60).toString())
        log("重新赋予当前时间为飞行器穿戴时间")
    }


    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("检测红点");
                var zhuxian = imgempt(true, 0.9, "翅膀红点|滑翔机红点", 956, 88, 323, 370)
                if (zhuxian != null) {
                    log("飞行器")
                    var 结果 = 飞行器穿戴()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "马儿红点", 1085, 260, 92, 99)
                    if (zhuxian != null) {
                        log("坐骑")
                        var 结果 = 坐骑合成及领取()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        var zhuxian = imgempt(true, 0.9, "武器装扮红点", 1194, 257, 83, 108)
                        if (zhuxian != null) {
                            log("武器外观")
                            var 结果 = 武器装扮合成及领取()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            var zhuxian = imgempt(true, 0.9, "成就领取", 1024, 165, 98, 97)
                            if (zhuxian != null) {
                                log("成就领取")
                                var 结果 = 领取成就("提升")
                                if (结果 == "完成") {
                                    
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else {
                                var zhuxian = imgempt(true, 0.9, "武器熟练红点", 1034, 100, 75, 75)
                                if (zhuxian != null) {
                                    log("武器熟练度")
                                    var 结果 = 武器熟练度()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "天赋红点", 1153, 174, 89, 81)
                                    if (zhuxian != null) {
                                        log("天赋")
                                        var 结果 = 属性点提升()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    } else {
                                        var zhuxian = imgempt(true, 0.9, "委托红点", 1016, 289, 113, 126)
                                        if (zhuxian != null) {
                                            log("委托红点")
                                            var 结果 = 委托红点处理()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            var zhuxian = imgempt(true, 0.9, "boss红点", 1209, 385, 69, 88)
                                            if (zhuxian != null) {
                                                log("boss红点")
                                                var 结果 = boss红点处理()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                            } else {
                                                var bbym = cor(true, 15, 956, 613, 118, 99, "#d02e2c", [[0, 2, "#d42c2b"]])
                                                if (bbym != null) {
                                                    log("邮件")
                                                    var 结果 = 领取邮件内容()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                } else {
                                                    log("无可操作红点")
                                                    storage.put("白嫖属性时间戳", new Date().getTime())
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "完成"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击2(1238, 36, 10, 10)
                } else {
                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                    if (bbym != null) {
                        log("白嫖属性,退出节电");
                        swipe(566, 389, 968, 226, 500)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 全绿打造含交易(mode) {
    log("全绿打造含交易")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
            if (jdmsz != null) {
                log("全绿打造,退出节电")
                swipe(566, 389, 968, 226, 500)
            } else {

                // var 结果 = 装备蓝装遍历版()
                // if (结果 == "掉线") {
                //     return "掉线"
                // } else {
                //     var 结果 = 纯回主页()
                //     if (结果 == "掉线") {
                //         return "掉线"
                //     }
                //     return "完成"
                // }

                var 结果 = 装备蓝装遍历版()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    var 结果 = 清理背包()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        var 需要提升的装备 = 判断需要提升绿级的装备()
                        if (需要提升的装备 == "掉线") {
                            return "掉线"
                        } else if (需要提升的装备 != "完成") {
                            var 结果 = 制造绿装含交易(需要提升的装备)
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 装备蓝装遍历版()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    var 结果 = 挂机强化(mode)
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        参数[43] = false
                                        ui.run(function () {
                                            ui.主线提升.setChecked(false)
                                        })
                                        return "完成"
                                    }
                                }
                            }
                        } else {
                            var 结果 = 挂机强化(mode)
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                参数[43] = false
                                ui.run(function () {
                                    ui.主线提升.setChecked(false)
                                })
                                return "完成"
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 委托首饰强化卷轴() {
    var 首次登记 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "输入登记数量MAX", 696, 317, 137, 88)
                if (jizhandi != null) {
                    log("点击max数量")
                    随机点击(jizhandi.x, jizhandi.y)
                    随机点击2(727, 499)

                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,处理")
                        // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }


                } else {
                    var jizhandi = imgempt(true, 0.9, "委托登记弹窗", 552, 50, 192, 90)
                    if (jizhandi != null) {
                        log("委托登记弹窗")
                        if (首次登记) {
                            log("点击输入数量")
                            随机点击(1048, 261)
                            首次登记 = false
                        } else {
                            log("点击登记")
                            随机点击2(1048, 610)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "委托完成"
                            }
                        }
                        // var jizhandi = imgempt(true, 0.9, "登记数量为5", 1009, 233, 93, 66)
                        // if (jizhandi != null) {
                        //     log("登记数量为5")
                        //     随机点击(1048, 610)
                        //     var 结果 = 纯回主页()
                        //     if (结果 == "掉线") {
                        //         return "掉线"
                        //     } else {
                        //         return "委托完成"
                        //     }
                        // } else {
                        //     log("点击输入数量")
                        //     随机点击(1048, 261)
                        // }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "专业制造页", 7, 5, 196, 80)
                        if (jizhandi != null) {
                            var zhunmen = imgempt(true, 0.9, "专门制作|专门制作2", 859, 132, 205, 161)
                            if (zhunmen != null) {
                                log("专门制作,鉴别金币");//
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                        if (当前铜钱数量 <= 50000) {
                                            log("铜钱不足,委托完成")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "制造完成"
                                            }
                                        } else {
                                            随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                        }
                                    } else {
                                        log("没有找到铜钱")
                                        sleep(3000)
                                    }
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "强化卷轴制造栏关闭状态", 22, 110, 222, 479)
                                if (jizhandi != null) {
                                    log("点击展开强化卷轴制造栏")
                                    随机点击2(jizhandi.x, jizhandi.y)
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "制造首饰强化卷轴详细|制造首饰强化卷轴详细2", 651, 207, 227, 195)
                                    if (jizhandi != null) {
                                        log("制造首饰强化卷轴详细")
                                        var jizhandi = imgempt(true, 0.9, "制作按钮", 857, 623, 196, 79)
                                        if (jizhandi != null) {
                                            log("点击加数量")
                                            for (let index = 0; index < 6; index++) {
                                                随机点击2(838, 667)
                                                sleep(200)
                                            }
                                            随机点击2(967, 663)
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "委托完成"
                                            }
                                        } else {
                                            log("点击添加委托 ")
                                            随机点击2(1142, 665)
                                            var jizhandi = imgempt(true, 0.9, "制造委托材料不足", 509, 46, 262, 78)
                                            if (jizhandi != null) {
                                                log("制造委托材料不足")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "制造完成"
                                                }
                                            } else {

                                            }
                                        }
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "制造页强化栏首饰卷轴", 222, 128, 132, 445)
                                        if (jizhandi != null) {
                                            log("制造页强化栏首饰卷轴")
                                            随机点击2(jizhandi.x + 100, jizhandi.y)
                                        } else {
                                            var zhunmen = imgempt(true, 0.9, "确认学习", 644, 418, 230, 76)
                                            if (zhunmen != null) {
                                                log("确认学习");
                                                随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                            } else {
                                                var zhunmen = imgempt(true, 0.9, "学习", 504, 618, 281, 90)
                                                if (zhunmen != null) {
                                                    log("学习");
                                                    随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                                } else {
                                                    var zhunmen = imgempt(true, 0.9, "请选择制作术", 626, 571, 180, 96)
                                                    if (zhunmen != null) {
                                                        log("随机选择制作术");
                                                        var 随机值 = random(1, 4)
                                                        if (随机值 == 1) {
                                                            随机点击(215, 333, 10, 10)
                                                        } else if (随机值 == 2) {
                                                            随机点击(494, 333, 10, 10)
                                                        } else if (随机值 == 3) {
                                                            随机点击(779, 320, 10, 10)
                                                        } else if (随机值 == 4) {
                                                            随机点击(1080, 328, 10, 10)
                                                        }

                                                    } else {
                                                        log("点击首饰制作页")
                                                        随机点击2(626, 99)
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                            if (jizhandi != null) {
                                log("点击菜单_制造");
                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 识别属性值() {
    log("识别属性")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                var 存储命中 = null
                var 存储防御 = null
                for (let index = 0; index < 3; index++) {
                    swipe(176, 503, 176, 404, 1000)
                    sleep(1000)
                    var 命中 = findNumber("三围", [229, 640, 60, 30])
                    var 防御 = findNumber("三围", [174, 641, 49, 28])
                    if (index <= 0 && 命中 != null && 防御 != null) {
                        存储命中 = 命中
                        存储防御 = 防御
                    } else if (命中 != null && 防御 != null) {
                        if (存储命中 == 命中 && 存储防御 == 防御) {
                            log(index + "次属性相同")
                        } else {
                            log("识别属性不同,放弃")
                            return "完成"
                        }
                    } else {
                        log("未识别到三围,放弃识别")
                        return "完成"
                    }
                }

                log("防御:" + 防御 + "---命中:" + 命中)
                storage.put("自动识别属性随机时间", random(1440, 2880).toString())
                storage.put("上次识别属性时间测试12", new Date().getTime() / (1000 * 60).toString())
                log("重新赋予自动识别属性随机时间:" + storage.get("自动识别属性随机时间"))
                log("重置上次自动识别属性时间:" + storage.get("上次识别属性时间测试12"))
                var json = {
                    "设备id": 设备id,
                    "type": "三围",
                    "命中": parseInt(命中),
                    "防御": parseInt(防御)
                }
                发送数据至中控("fragmentaryState", json)

                if (parseInt(防御) >= 350) {
                    log("大于350，挂机点不变")
                } else if (命中.toString().length <= 2 || 防御.length <= 2) {
                    if (storage.get("自动挂机点测试") == null) {
                        storage.put("自动挂机点测试", "120")
                        log("小于3位数，设置为120防")
                    } else {
                        log("小于3位数，挂机点不变")
                    }
                } else if (parseInt(防御) >= 270) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 270 + "防")
                    storage.put("自动挂机点测试", "270")
                } else if (parseInt(防御) >= 250) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 250 + "防")
                    storage.put("自动挂机点测试", "250")
                } else if (parseInt(防御) >= 240) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 240 + "防")
                    storage.put("自动挂机点测试", "240")
                } else if (parseInt(防御) >= 220) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 220 + "防")
                    storage.put("自动挂机点测试", "220")
                } else if (parseInt(防御) >= 210) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 210 + "防")
                    storage.put("自动挂机点测试", "210")
                } else if (parseInt(防御) >= 190) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 190 + "防")
                    storage.put("自动挂机点测试", "190")
                } else if (parseInt(防御) >= 160) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 160 + "防")
                    storage.put("自动挂机点测试", "160")
                } else if (parseInt(防御) >= 150) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 150 + "防")
                    storage.put("自动挂机点测试", "150")
                } else if (parseInt(防御) >= 120) {
                    storage.put("自动挂机点测试", 防御.toString())
                    log("挂机点变更为:" + 120 + "防")
                    storage.put("自动挂机点测试", "120")
                } else {
                    log("不在控制范围内不做修改")
                }

                if (parseInt(命中) >= 200 && parseInt(防御) >= 210) {
                    log("激战地变更为:" + 45 + "级")
                    storage.put("自动激战地", "45")
                } else if (parseInt(命中) >= 125 && parseInt(防御) >= 140) {
                    log("激战地变更为:" + 40 + "防")
                    storage.put("自动激战地", "40")
                } else {
                    if (storage.get("自动激战地") == null) {
                        storage.put("自动激战地", "NO")
                        log("属性太差设置为不去激战地")
                    } else {
                        log("不在控制范围内不做修改")
                    }
                }

                if (parseInt(命中) >= 210 && parseInt(防御) >= 230) {
                    log("副本变更为:" + 50 + "级")
                    storage.put("自动副本测试", "50")
                } else if (parseInt(命中) >= 140 && parseInt(防御) >= 160) {
                    log("副本变更为:" + 40 + "级")
                    storage.put("自动副本测试", "40")
                } else {
                    if (storage.get("自动副本测试") == null) {
                        storage.put("自动副本测试", "30")
                    } else {
                        log("不在控制范围内不做修改")
                    }
                }
                纯回主页()
                return
            } else {
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }
        }
        sleep(200)
    }
}





function 判断金币数量() {
    var 结果集 = {}
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
            if (bbym != null) {
                log("活动商店页,识别金币")
                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                if (tongqian != null) {
                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                    if (当前铜钱数量 != "false") {
                        结果集.铜钱 = 当前铜钱数量
                        var json = {
                            "设备id": 设备id,
                            "type": "铜钱数",
                            "铜钱数量": 当前铜钱数量
                        }
                        发送数据至中控("fragmentaryState", json)
                        log("识别到的金币数量为:" + 当前铜钱数量)
                        var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                        if (dinbuzuanshi1 != null) {
                            var 当前钻石数量 = findNumber("钻石铜钱数", [dinbuzuanshi1.x, 1, 98, 45]);
                            if (当前钻石数量 != null) {
                                结果集.钻石 = 当前钻石数量
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                return 结果集
                            } else {
                                toastLog()("未找到当前已有钻石")
                                sleep(3000)
                            }
                        }
                    } else {
                        log("没有找到铜钱")
                        sleep(3000)
                    }
                } else {
                    log("没有找到顶端金币图标")
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("点击活动商店");
                    随机点击2(998, 39)
                    sleep(2000)
                } else {

                }
            }
        }
        sleep(200)
    }
}

function 全绿打造() {
    var 属性点未提升 = true
    var 成就未领取 = true
    var 坐骑未领取 = true
    var 武器装扮未领取 = true
    var 飞行器未穿戴 = true
    var 武器熟练度未提升 = true
    var 未灌注 = true
    var 未打造 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            if (武器熟练度未提升) {
                var 结果 = 武器熟练度()
                if (结果 == "完成") {
                    武器熟练度未提升 = false
                    continue
                }
            } else if (属性点未提升) {
                var 结果 = 属性点提升()
                if (结果 == "完成") {
                    属性点未提升 = false
                    continue
                }
            } else if (成就未领取) {
                var 结果 = 领取成就("提升")
                if (结果 == "完成") {
                    // var 结果 = 成就图鉴()
                    // if (结果 == "完成") {
                    //     成就未领取 = false
                    //     continue
                    // }
                }
            } else if (坐骑未领取) {
                var 结果 = 坐骑合成及领取()
                if (结果 == "完成") {
                    坐骑未领取 = false
                    continue
                }
            } else if (武器装扮未领取) {
                var 结果 = 武器装扮合成及领取()
                if (结果 == "完成") {
                    武器装扮未领取 = false
                    continue
                }
            } else if (飞行器未穿戴) {
                while (true) {
                    if (异常捕获() == "掉线") {//
                        break
                    } else {
                        var qiagnhua = imgempt(true, 0.9, "安装效果|安装效果2", 14, 197, 225, 317)
                        if (qiagnhua != null) {
                            var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                            if (zhuxian != null) {
                                log("退出")
                                随机点击(1240, 29)
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    break
                                } else {
                                    飞行器未穿戴 = false
                                    // 白嫖属性时间 = new Date().getDate()
                                    storage.put("白嫖属性时间戳", new Date().getTime())
                                    break
                                }
                            } else {
                                log("点击装备飞行器")
                                随机点击(885, 236)
                                随机点击2(1156, 677)
                            }
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "菜单_飞行器|菜单_飞行器2", 956, 88, 318, 540)
                            if (qiagnhua != null) {
                                log("点击进入菜单_飞行器");
                                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击2(1238, 36, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                    sleep(200)
                }
            } else if (未打造) {
                var 结果 = 装备蓝装遍历版()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    var 结果 = 清理背包()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        var 需要提升的装备 = 判断需要提升绿级的装备()
                        if (需要提升的装备 == "掉线") {
                            return "掉线"
                        } else if (需要提升的装备 != "完成") {
                            var 结果 = 制造绿装(需要提升的装备)
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 装备蓝装遍历版()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    var 结果 = 前往强化()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        未打造 = false
                                        continue
                                    }
                                }
                            }
                        } else {
                            未打造 = false
                        }
                    }
                }
            } else if (未灌注) {
                var 结果 = 开始灌注()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    未灌注 = false
                    continue
                }
            } else {
                var 结果 = 购买强化卷轴("纯一瓶属性药")
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    var 结果 = 回城购买攻速药()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        var 结果 = 购买阴阳卡()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 开启药水自动()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                参数[43] = false
                                ui.run(function () {
                                    ui.主线提升.setChecked(false)
                                });
                                storage.put("主线提升", false)
                                return "完成"
                            }
                        }
                    }
                }
            }
            sleep(200)
        }
    }
}

function 最终仓库调整(mode) {
    log("仓库前清理一次背包")
    if (mode != false) {
        if (清理背包("仓库") == "掉线") {
            return "掉线"
        }
    } else {
        log("仓库前已经清理过了不再清理")
    }
    log("最终仓库调整")
    var 回城卷轴 = true
    var 回城卷轴点击次数 = 0
    var 一键放入 = false
    // var 只一键放入 = false
    // if (保留物品 == "强制一键放入") {
    //     只一键放入 = true
    // } else {
    // if (保留物品 == "一键放入") {
    if (new Date().getTime() / (1000 * 60) - parseInt(storage.get("每周放入仓库时间记录7")) / (1000 * 60) > parseInt(storage.get("每周放入仓库随机时间"))) {
        log("每周物品存放")

    } else {
        if (new Date().getTime() / (1000 * 60 * 60) - parseInt(storage.get("上次仓库时间2")) / (1000 * 60 * 60) < 2) {
            log("俩个小时内放过一次了")
            return "完成"
        } else {
            if (mode == "流程放入") {
                log("流程放入")
            } else {
                一键放入 = true
            }
        }
        // }
    }
    // }

    var 放入物品 = "高级木材_背包|普通木材_背包|普通毛团_背包|普通水晶_背包|高级水晶_背包|高级铁矿_背包|普通皮革_背包|普通铁矿_背包|高级毛团_背包|高级皮革_背包|紫色能量棒_背包|齿轮_背包|辅助装备|钻石装备|铁片_背包|蓝书_背包|紫色水滴玉_背包|紫级大徽章_背包|小徽章_背包|蓝色漩涡_背包|齿轮_背包|黄石头_背包|月光石_背包|顶蓝材料箱_背包|背包_星星碎片|背包_灌注石板|飞信器制造币|天枰|刻刀|工会任务书|天赋点制造书|黄金钥匙|五行洗属性石头"
    var 技能书 = "普通技能书|绿级技能书|蓝级技能书"
    var 点击脚印 = true
    var 点击脚印次数 = 0
    //紫级洗点石非仓库截图,可能需要重做
    // "橙装蜂巢(仓库)|橙装眼镜(仓库)|橙装强化卷(仓库)|五行洗点石(仓库)|五行彩色洗点石(仓库)|橙色魔法书(仓库)|橙装笛子装备箱(仓库)|橙装装备箱(仓库)|顶蓝材料箱(仓库)|绿级材料箱(仓库)|普通材料箱(仓库)|普通顶蓝材料箱(仓库)|紫色装备随机箱(仓库)|紫色装备随机箱2(仓库)|蓝色装备随机箱(仓库)|消耗品菜篮子(仓库)|普通五行抽奖(仓库)|蓝色时长钟(仓库)|橙色时长钟(仓库)|黄色时长钟(仓库)|活动制造卷轴1(仓库)|活动制造卷轴3(仓库)|活动制造卷轴2(仓库)|首饰洗点石(仓库)|钻石洗点石(仓库)|武器洗练石(仓库)|防具洗练石(仓库)|钻石紫级洗练石(临时)|武器紫级洗练石(临时)|防具紫级洗练石(临时)|首饰紫级洗练石(临时)钱袋子(仓库)|瞬移卷轴(仓库)|回城卷轴(仓库)|小药(仓库)|中级药水(仓库)|随机强化卷轴箱(仓库)|坐骑武器抽奖箱(仓库)"
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "分解弹窗", 619, 114, 147, 72)
            if (bbym != null) {
                // var bbfj = imgempt(true, 0.9, "背包_分解", 987, 545, 77, 67)
                // if (bbfj != null) {
                log("仓库，关闭分解");
                随机点击(1250, 87)
            } else {
                var xzfwq = imgempt(true, 0.9, "角色信息", 41, 45, 192, 97)
                if (xzfwq != null) {
                    log("关闭角色信息")
                    随机点击(33, 86)
                } else {
                    var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                    if (zhuxian != null) {
                        log("确定瞬移");
                        随机点击2(725, 496)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗按钮", 612, 398, 272, 165)
                        if (zhuxian != null) {
                            log("确定瞬移");
                            随机点击2(zhuxian.x, zhuxian.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var zhuxian = imgempt(true, 0.9, "钻石不足", 576, 237, 238, 88)
                            if (zhuxian != null) {
                                log("扩充背包钻石不足");
                                发送异常("扩充背包钻石不足")
                                alert("扩充背包钻石不足")
                                exit()
                            } else {
                                var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                                if (mi != null) {
                                    var 放入 = true
                                    var 拿出 = true
                                    var 拿出次数 = 0
                                    if (一键放入) {
                                        随机点击(211, 678)
                                        // 一键放入 = false
                                        // if (只一键放入) {
                                        // if (保留物品 == "强制一键放入") {
                                        sleep(2000)
                                        // log("一键放入成功,判断是否还有背包空间")
                                        // var 背包格子 = findNumber("背包数字", [941, 68, 88, 41]);
                                        // if (背包格子 != null && 背包格子.toString().length >= 4 && 背包格子.toString().length <= 6) {
                                        //     var 后面位数 = parseInt(Math.ceil(背包格子.toString().length / 2))
                                        //     log("后面位数" + 后面位数)
                                        //     总格子 = parseInt(背包格子.toString().slice(-后面位数))
                                        //     可用格子 = parseInt(背包格子.toString().slice(0, (背包格子.toString().length - 后面位数)))
                                        //     log("可用格子:" + 可用格子 + "----总格子:" + 总格子)
                                        //     var 剩余格子 = 总格子 - 可用格子
                                        //     if (可用格子 == 总格子) {
                                        //         发送异常("满背包请手动处理")
                                        //         alert("满背包请手动处理(已一键放入仓库)")
                                        //         exit()
                                        //     } else if (剩余格子 <= 5 && 总格子 >= 112) {
                                        //         alert("剩余格子小于5格且总格子大于等于112格")
                                        //         发送异常("满背包请手动处理")
                                        //         exit()
                                        //     } else if (剩余格子 <= 5 && 总格子 <= 104) {
                                        //         log("剩余格子小于5格且总格子小于104格，扩充")
                                        //         随机点击(931, 86)
                                        //         随机点击(726, 513)
                                        //     } else {

                                        //     }
                                        // } else {

                                            var 截图 = captureScreen();//#84
                                            var clip = images.clip(截图, 948, 74, 73, 32);
                                            var bb = images.interval(clip, "#C9634F", 20)
                                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })

                                        // var 截图 = captureScreen();//#84
                                        // var clip = images.clip(截图, 948, 74, 73, 32);
                                        // var bb = images.interval(clip, "#C9634F", 20)
                                        // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                        bb.recycle()
                                        clip.recycle()
                                        if (获取的所有点.length >= 50) {
                                                log("放入仓库后还是满背包自动扩充")
                                                随机点击(928, 87)
                                                随机点击(728, 510)
                                        } else {

                                        }
                                        // }
                                        // }
                                        storage.put("上次仓库时间2", new Date().getTime().toString())
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        return "完成"
                                        // }
                                    } else {
                                        随机点击(211, 678)
                                        while (true) {
                                            if (异常捕获() == "掉线") {
                                                return "掉线"
                                            } else {
                                                var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                                                if (mi != null) {
                                                    if (放入) {
                                                        var resoult = matchImg(true, "全部", 0.9, 放入物品, 924, 118, 288, 536)
                                                        if (resoult != null) {
                                                            for (let index = 0; index < resoult.resultSet.length; index++) {
                                                                log("点击物品");
                                                                随机点击(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                                var shibie = imgempt(true, 0.9, "白级绑定|绿级绑定|蓝色绑定|金色绑定|蓝色绑定1字", 601, 120, 288, 60)
                                                                if (shibie != null) {
                                                                    log("放入")
                                                                    随机点击2(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                                    var mi = imgempt(true, 0.9, "仓库空间不足|仓库空间不足2", 541, 66, 52, 43)
                                                                    if (mi != null) {
                                                                        log("仓库空间已满")
                                                                        storage.put("每周放入仓库时间记录7", new Date().getTime().toString())
                                                                        storage.put("上次仓库时间2", new Date().getTime().toString())
                                                                        storage.put("仓库存放时间", new Date().getDate())
                                                                        // var 结果 = 纯回主页()
                                                                        // if (结果 == "掉线") {
                                                                        //     return "掉线"
                                                                        // } else {
                                                                        //     return "完成"
                                                                        // }
                                                                        // var 背包格子 = findNumber("背包数字", [941, 68, 88, 41]);
                                                                        // if (背包格子 != null && 背包格子.toString().length >= 4 && 背包格子.toString().length <= 6) {
                                                                        //     var 后面位数 = parseInt(Math.ceil(背包格子.toString().length / 2))
                                                                        //     log("后面位数" + 后面位数)
                                                                        //     总格子 = parseInt(背包格子.toString().slice(-后面位数))
                                                                        //     可用格子 = parseInt(背包格子.toString().slice(0, (背包格子.toString().length - 后面位数)))
                                                                        //     log("可用格子:" + 可用格子 + "----总格子:" + 总格子)
                                                                        //     var 剩余格子 = 总格子 - 可用格子
                                                                        //     if (可用格子 == 总格子) {
                                                                        // 发送异常("满背包请手动处理")
                                                                        // alert("满背包请手动处理(已一键放入仓库)")
                                                                        //         exit()
                                                                        //     } else if (剩余格子 <= 5 && 总格子 >= 112) {
                                                                        //         发送异常("满背包请手动处理")
                                                                        //         alert("剩余格子小于5格且总格子大于等于112格")
                                                                        //         exit()
                                                                        //     } else if (剩余格子 <= 5 && 总格子 <= 104) {
                                                                        //         log("剩余格子小于5格且总格子小于104格，扩充")
                                                                        //         随机点击(931, 86)
                                                                        //         随机点击(726, 513)
                                                                        //     } else {

                                                                        //     }
                                                                        // } else {

                                                                        var 截图 = captureScreen();//#84
                                                                        var clip = images.clip(截图, 948, 74, 73, 32);
                                                                        var bb = images.interval(clip, "#C9634F", 20)
                                                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                                        bb.recycle()
                                                                        clip.recycle()
                                                                        if (获取的所有点.length >= 50) {
                                                                                log("放入仓库后还是满背包自动扩充")
                                                                                随机点击(928, 87)
                                                                                随机点击(728, 510)
                                                                        } else {
                                                                            var 结果 = 纯回主页()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else {
                                                                                return "完成"
                                                                            }
                                                                        }
                                                                        // }
                                                                        放入 = false
                                                                        拿出 = true
                                                                        sleep(3000)
                                                                        break
                                                                    } else {

                                                                    }
                                                                } else {
                                                                    log("可交易不放入")
                                                                }
                                                                sleep(200)
                                                            }
                                                            var regex = new RegExp(resoult.picture + "\\|");
                                                            if (放入物品.match(regex)) {
                                                                放入物品 = 放入物品.replace(resoult.picture + "|", '');
                                                            } else {
                                                                放入物品 = 放入物品.replace("|" + resoult.picture, '');
                                                            }
                                                        } else {
                                                            if (技能书.includes("技能")) {
                                                                var resoult = matchImg(true, "全部", 0.9, 技能书, 924, 118, 288, 536)
                                                                if (resoult != null) {
                                                                    for (let index = 0; index < resoult.resultSet.length; index++) {
                                                                        log("点击物品");
                                                                        随机点击(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                                        var shibie = imgempt(true, 0.9, "已学习过的技能", 603, 226, 216, 284)
                                                                        if (shibie != null) {
                                                                            log("已学习过的技能,放入")
                                                                            随机点击2(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                                            var mi = imgempt(true, 0.9, "仓库空间不足|仓库空间不足2", 541, 66, 52, 43)
                                                                            if (mi != null) {
                                                                                log("仓库空间已满")
                                                                                storage.put("每周放入仓库时间记录7", new Date().getTime().toString())
                                                                                storage.put("上次仓库时间2", new Date().getTime().toString())
                                                                                storage.put("仓库存放时间", new Date().getDate())

                                                                                var 截图 = captureScreen();//#84
                                                                                var clip = images.clip(截图, 306, 66, 73, 40);
                                                                                var bb = images.interval(clip, "#C9634F", 20)
                                                                                var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                                                bb.recycle()
                                                                                clip.recycle()
                                                                                if (获取的所有点.length >= 50) {
                                                                                    alert("放入技能书仓库满")
                                                                                } else {
                                                                                    var 结果 = 纯回主页()
                                                                                    if (结果 == "掉线") {
                                                                                        return "掉线"
                                                                                    } else {
                                                                                        return "完成"
                                                                                    }
                                                                                }
                                                                                放入 = false
                                                                                拿出 = true
                                                                                sleep(3000)
                                                                                break
                                                                            } else {

                                                                            }
                                                                        } else {
                                                                            log("未学习不放入")
                                                                        }
                                                                        sleep(200)
                                                                    }
                                                                    var regex = new RegExp(resoult.picture + "\\|");
                                                                    if (技能书.match(regex)) {
                                                                        技能书 = 技能书.replace(resoult.picture + "|", '');
                                                                    } else {
                                                                        技能书 = 技能书.replace("|" + resoult.picture, '');
                                                                    }
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                                                    if (bbym != null) {
                                                                        log("放入完毕")
                                                                        var 翻页 = 0
                                                                        var 截图 = captureScreen();//#84
                                                                        var clip = images.clip(截图, 948, 74, 73, 32);
                                                                        var bb = images.interval(clip, "#C9634F", 20)
                                                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                                        bb.recycle()
                                                                        clip.recycle()
                                                                        if (获取的所有点.length >= 50) {
                                                                            log("放入仓库后还是满背包自动扩充")
                                                                            随机点击(928, 87)
                                                                            随机点击(728, 510)
                                                                        } else {

                                                                        }

                                                                        storage.put("每周放入仓库时间记录7", new Date().getTime().toString())
                                                                        storage.put("上次仓库时间2", new Date().getTime().toString())
                                                                        storage.put("仓库存放时间", new Date().getDate())
                                                                        var 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            return "完成"
                                                                        }
                                                                    } else {
                                                                        log("下滑背包")
                                                                        swipe(1062, 450, 1063, 300, 2000)
                                                                        sleep(2000)
                                                                    }
                                                                }
                                                            } else {
                                                                var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                                                if (bbym != null) {
                                                                    log("放入完毕")
                                                                    var 翻页 = 0
                                                                    // var 背包格子 = findNumber("背包数字", [941, 68, 88, 41]);
                                                                    // if (背包格子 != null && 背包格子.toString().length >= 4 && 背包格子.toString().length <= 6) {
                                                                    //     var 后面位数 = parseInt(Math.ceil(背包格子.toString().length / 2))
                                                                    //     log("后面位数" + 后面位数)
                                                                    //     总格子 = parseInt(背包格子.toString().slice(-后面位数))
                                                                    //     可用格子 = parseInt(背包格子.toString().slice(0, (背包格子.toString().length - 后面位数)))
                                                                    //     log("可用格子:" + 可用格子 + "----总格子:" + 总格子)
                                                                    //     var 剩余格子 = 总格子 - 可用格子
                                                                    //     if (可用格子 == 总格子) {
                                                                    // 发送异常("满背包请手动处理")
                                                                    // alert("满背包请手动处理(已一键放入仓库)")
                                                                    //         exit()
                                                                    //     } else if (剩余格子 <= 5 && 总格子 >= 112) {
                                                                    //         alert("剩余格子小于5格且总格子大于等于112格")
                                                                    //         exit()
                                                                    //     } else if (剩余格子 <= 5 && 总格子 <= 104) {
                                                                    //         log("剩余格子小于5格且总格子小于104格，扩充")
                                                                    //         随机点击(931, 86)
                                                                    //         随机点击(726, 513)
                                                                    //     } else {

                                                                    //     }
                                                                    // } else {
                                                                    var 截图 = captureScreen();//#84
                                                                    var clip = images.clip(截图, 948, 74, 73, 32);
                                                                    var bb = images.interval(clip, "#C9634F", 20)
                                                                    var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                                    bb.recycle()
                                                                    clip.recycle()
                                                                    if (获取的所有点.length >= 50) {
                                                                       
                                                                            log("放入仓库后还是满背包自动扩充")
                                                                            随机点击(928, 87)
                                                                            随机点击(728, 510)
                                                                    } else {

                                                                    }
                                                                    // }
                                                                    // while (true) {//规定拿出物品
                                                                    //     var nachu = imgempt(true, 0.9, "黄装强化卷轴_背包|武器强化卷轴_背包|首饰强化卷轴_背包|防具强化卷轴_背包|辅助装备强化卷轴_背包", 63, 98, 301, 450)
                                                                    //     if (nachu != null) {
                                                                    //         log("双击拿出")
                                                                    //         for (let index = 0; index < 2; index++) {
                                                                    //             随机点击2(nachu.x, nachu.y)
                                                                    //         }
                                                                    //         重复点击坐标次数 = 0
                                                                    //     } else {
                                                                    //         if (翻页 <= 5) {
                                                                    //             翻页++
                                                                    //             swipe(217, 451, 217, 250, 2000)
                                                                    //         } else {
                                                                    //             break
                                                                    //         }
                                                                    //     }
                                                                    //     sleep(300)
                                                                    // }
                                                                    storage.put("每周放入仓库时间记录7", new Date().getTime().toString())
                                                                    storage.put("上次仓库时间2", new Date().getTime().toString())
                                                                    storage.put("仓库存放时间", new Date().getDate())
                                                                    var 结果 = 纯回主页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    } else {
                                                                        return "完成"
                                                                    }
                                                                } else {
                                                                    log("下滑背包")
                                                                    swipe(1062, 450, 1063, 300, 2000)
                                                                    sleep(2000)
                                                                }
                                                            }
                                                        }
                                                    } else {//拿出
                                                        翻页 = 0
                                                        while (true) {//规定拿出物品
                                                            var mi = imgempt(true, 0.9, "黄装强化卷轴_背包|武器强化卷轴_背包|首饰强化卷轴_背包|防具强化卷轴_背包|辅助装备强化卷轴_背包|队伍副本次数增加卷|绿级武器熟练度书|普通武器熟练度书|时装染色卷|雪花_背包", 63, 98, 301, 450)
                                                            if (mi != null) {
                                                                log("双击拿出强化卷轴")
                                                                for (let index = 0; index < 2; index++) {
                                                                    随机点击2(mi.x + 15, mi.y + 15)
                                                                }
                                                                重复点击坐标次数 = 0
                                                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                if (bbkjbztc != null) {
                                                                    放入 = true
                                                                    拿出 = false
                                                                    拿出次数 = 0
                                                                    break
                                                                } else {
                                                                    拿出次数++
                                                                }
                                                            } else {
                                                                if (翻页 <= 3) {
                                                                    翻页++
                                                                    swipe(217, 451, 217, 250, 2000)
                                                                } else {
                                                                    翻页 = 0
                                                                    放入 = true
                                                                    拿出 = false
                                                                    拿出次数 = 0
                                                                    break
                                                                }
                                                            }
                                                            sleep(300)
                                                        }
                                                        // var 初始X = 81
                                                        // var 初始Y = 123
                                                        // var 识别位置 = 1
                                                        // while (true) {//规定外拿出物品
                                                        //     let 行 = Math.ceil(识别位置 / 4);
                                                        //     let 列 = (识别位置 % 4 === 0) ? 4 : (识别位置 % 4);
                                                        //     let 点击X = 初始X + (列 * 69 - 69);
                                                        //     let 点击Y = 初始Y + (行 * 69 - 69);
                                                        //     var zhuxian = imgempt(true, 0.9, 放入物品, 点击X, 点击Y, 76, 76)
                                                        //     if (zhuxian != null) {
                                                        //         log("规定物品,不拿出")
                                                        //         识别位置++
                                                        //     } else {
                                                        //         var mi = imgempt(true, 0.9, "空仓库", 点击X, 点击Y, 76, 76)
                                                        //         if (mi != null) {
                                                        //             log("继续放入")
                                                        //             放入 = true
                                                        //             break
                                                        //         } else {
                                                        //             if (识别位置 <= 4) {
                                                        //                 识别位置++
                                                        //                 log("前4个物品,不拿出")
                                                        //             } else {
                                                        //                 log("双击拿出");
                                                        //                 for (let index = 0; index < 2; index++) {
                                                        //                     随机点击2(点击X + 15, 点击Y + 15)
                                                        //                 }
                                                        //                 重复点击坐标次数 = 0
                                                        //                 var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452,42,357,202)
                                                        //                 if (bbkjbztc != null) {
                                                        //                     log("背包已满")
                                                        //                     if (拿出次数 == 0) {
                                                        //                         var json = {
                                                        //                             "设备id": 设备id,
                                                        //                             "type": "异常",
                                                        //                             "异常信息": "背包仓库都满了"
                                                        //                         }
                                                        //                         发送数据至中控("fragmentaryState", json)
                                                        //                         alert("背包仓库都满了")
                                                        //                     } else {
                                                        //                         放入 = true
                                                        //                         拿出 = false
                                                        //                         拿出次数 = 0
                                                        //                         break
                                                        //                     }
                                                        //                     sleep(3000)
                                                        //                 } else {
                                                        //                     拿出次数++
                                                        //                     if (识别位置 > 20) {
                                                        //                         log("无可拿出物品")
                                                        //                         if (只一键放入 == false) {
                                                        //                             storage.put("每周放入仓库时间记录7", new Date().getTime().toString())
                                                        //                         }
                                                        //                         storage.put("上次仓库时间2", new Date().getTime().toString())
                                                        //                         storage.put("仓库存放时间", new Date().getDate())
                                                        //                         var 结果 = 纯回主页()
                                                        //                         if (结果 == "掉线") {
                                                        //                             return "掉线"
                                                        //                         } else {
                                                        //                             return "完成"
                                                        //                         }
                                                        //                     }
                                                        //                 }
                                                        //             }
                                                        //         }
                                                        //     }
                                                        //     sleep(200)
                                                        // }
                                                    }
                                                } else {
                                                    var 手 = imgempt(true, 0.9, "手|齿轮图标", 1121, 421, 84, 82)
                                                    if (手 != null) {
                                                        log("卡回主页");
                                                        break;
                                                    } else {

                                                    }
                                                }
                                            }
                                            sleep(200)
                                        }
                                    }

                                } else {
                                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                    if (mi != null) {
                                        log("移动中...");
                                        sleep(1000)
                                    } else {
                                        var shezhi = imgempt(true, 0.9, "主城仓库图标", 9, 57, 96, 367)
                                        if (shezhi != null) {
                                            log("点击主城仓库图标");
                                            随机点击(shezhi.x + 10, shezhi.y, 10, 10)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                                    if (qrtz != null) {
                                                        log("确认跳转");
                                                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                        if (guajizhon != null) {
                                                            log("铜钱不足,处理")
                                                            // 无铜钱处理()
                                                            野外挂机刷金币()
                                                            return "掉线"
                                                        }
                                                    } else {
                                                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                                        if (yssrhy != null) {
                                                            log("点击退出商店页")
                                                            随机点击(1244, 33, 10, 10)
                                                        } else {
                                                            if (回城卷轴) {
                                                                var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                                if (zhuchengzahuo != null) {
                                                                    log("主城委托图标");
                                                                    for (let index = 0; index < 3; index++) {
                                                                        swipe(153, 87, 150, 282, 500)
                                                                    }
                                                                } else {
                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                                                    if (zhuchengzahuo != null) {
                                                                        log("主城主城技能商店图标");
                                                                        swipe(122, 138, 114, 274, 500)
                                                                    } else {
                                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                        if (huicheng != null) {
                                                                            log("点击回城卷轴")
                                                                            随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                            回城卷轴点击次数++
                                                                            sleep(3000)
                                                                            if (回城卷轴点击次数 >= 3) {
                                                                                回城卷轴 = false
                                                                            }
                                                                        } else {
                                                                            回城卷轴 = false
                                                                        }
                                                                    }
                                                                }
                                                            } else {
                                                                var dyzczhsrtb = imgempt(true, 0.9, "地图里仓库图标", 7, 105, 244, 563)
                                                                if (dyzczhsrtb != null) {
                                                                    var guajizhon = imgempt(true, 0.9, "脚印|脚印2|脚印3", 161, 578, 239, 140)
                                                                    if (guajizhon != null && 点击脚印) {
                                                                        log("点击脚印移动")
                                                                        随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                                        点击脚印 = false
                                                                    } else {
                                                                        log("点击地图里仓库图标");
                                                                        随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                                                        点击脚印次数++
                                                                        if (点击脚印次数 >= 5) {
                                                                            点击脚印 = true
                                                                            点击脚印次数 = 0
                                                                        }
                                                                    }
                                                                } else {
                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                    if (zhuchengzahuo != null) {
                                                                        log("点击主城杂货商人图标");
                                                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                                    } else {
                                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                                        if (dtl != null) {
                                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                            if (dthctb != null) {
                                                                                log("点击回城图标");
                                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                            } else {
                                                                                log("地图里,寻找主城");
                                                                                for (let index = 0; index < 3; index++) {
                                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                                    sleep(random(1000, 3000))
                                                                                }
                                                                            }
                                                                        } else {
                                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                            if (dtgbzt != null) {
                                                                                log("地图关闭状态,点击打开");
                                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                            } else {
                                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                                if (dtdkzt != null) {
                                                                                    log("点击地图");
                                                                                    随机点击(139, 150, 10, 10)
                                                                                    sleep(random(1000, 3000))
                                                                                } else {

                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 购买阴阳卡() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                if (jizhandi != null) {
                    log("到达兑换地点");
                    var 结果 = 开始兑换("阴阳卡")
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "购买成功"
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                    if (jizhandi != null) {
                        log("点击确认进入激战地");
                        随机点击2(718, 494, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "激战地图标", 958, 87, 321, 499)
                        if (jizhandi != null) {
                            log("点击激战地图标");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击(1238, 36, 10, 10)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 回城购买攻速药() {
    var 购买成功 = false
    var 回城卷轴 = true
    var 必胜灵药 = true
    var 突击灵药 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    var srgmjm = imgempt(true, 0.9, "购买突击灵药详细", 537, 196, 211, 74)
                    if (srgmjm != null) {
                        突击灵药 = false
                        log("突击灵药");
                        for (let index = 0; index < 3; index++) {
                            随机点击2(601, 463, 10, 10)
                        }
                    } else {
                        var srgmjm = imgempt(true, 0.9, "购买必胜灵药详细", 537, 196, 211, 74)
                        if (srgmjm != null) {
                            必胜灵药 = false
                            log("必胜灵药");
                            for (let index = 0; index < 3; index++) {
                                随机点击2(601, 463, 10, 10)
                            }
                        } else {

                        }
                    }
                    随机点击(738, 641, 10, 10)
                } else {
                    var yssrhy = imgempt(true, 0.9, "突击灵药NPC|必胜灵药NPC", 7, 68, 159, 585)
                    if (yssrhy != null) {
                        if (必胜灵药) {
                            var qrtz = imgempt(true, 0.9, "必胜灵药NPC", 7, 68, 159, 585)
                            if (qrtz != null) {
                                log("点击必胜灵药")
                                随机点击2(qrtz.x + 100, qrtz.y)
                            } else {
                                var qrtz = imgempt(true, 0.9, "突击灵药NPC", 7, 68, 159, 585)
                                if (qrtz != null) {
                                    log("突击灵药下滑一丢丢")
                                    swipe(64, 515, 75, 457, 2000)
                                } else {

                                }
                            }
                        } else if (突击灵药) {
                            var qrtz = imgempt(true, 0.9, "突击灵药NPC", 7, 68, 159, 585)
                            if (qrtz != null) {
                                log("点击突击灵药")
                                随机点击2(qrtz.x + 100, qrtz.y)
                            } else {
                                var qrtz = imgempt(true, 0.9, "必胜灵药NPC", 7, 68, 159, 585)
                                if (qrtz != null) {
                                    log("必胜灵药上滑一丢丢")
                                    swipe(75, 457, 64, 515, 2000)
                                } else {

                                }
                            }
                        } else {
                            log("购买属性药完成")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        }
                    } else {
                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                        if (yssrhy != null) {
                            log("红药下滑")
                            swipe(132, 505, 147, 325, 2000)
                            sleep(2000)
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (回城卷轴) {
                                                        var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                        if (zhuchengzahuo != null) {
                                                            log("主城委托图标");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(153, 87, 150, 282, 500)
                                                            }
                                                        } else {
                                                            var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                            if (huicheng != null) {
                                                                log("点击回城卷轴")
                                                                随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                sleep(3000)
                                                            } else {
                                                                回城卷轴 = false
                                                            }
                                                        }
                                                    } else {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("回城买攻速药,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 前往激战地兑换材料箱(mode) {
    log("激战地换材料")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                if (jizhandi != null) {
                    log("到达兑换地点");

                    //     if (storage.get("二转记录") == "已二转") {
                    //         log("已二转,不再查看是否只兑换紫徽章")
                    //     } else {
                    //         var 兑换条件 = 判断激战地商人是否只兑换紫徽章()
                    //         if (兑换条件 == "掉线") {
                    //             return "掉线"
                    //         } else if (兑换条件 == "只兑换紫级徽章") {
                    //             mode = "紫级徽章"
                    //         }
                    //     }


                    var 结果 = 开始兑换(mode)
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "购买成功"
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                    if (jizhandi != null) {
                        log("点击确认进入激战地");
                        随机点击2(718, 494, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "激战地图标", 958, 87, 321, 499)
                        if (jizhandi != null) {
                            log("点击激战地图标");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击(1238, 36, 10, 10)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
function 制造绿装含交易(需要提升的装备) {
    var 未找到装备栏 = true
    var 需购买装备 = []
    var 直接购买 = false
    var 钻石不足 = false
    var 铜钱不足 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标|制作图标2", 109, 77, 80, 57)
                if (jizhandi != null) {
                    if (需要提升的装备.includes("斗篷")) {
                        var laolian = imgempt(true, 0.9, "制造(斗篷绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            if (铜钱不足) {
                                需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                需购买装备.push("斗篷")
                            } else {
                                var 结果 = 识别绿级制造材料(直接购买)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "钻石不足") {
                                    钻石不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                } else if (结果 == "铜钱不足") {
                                    铜钱不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                } else if (结果 == "无货") {
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                } else if (结果 == "可以制造") {
                                    log("点击制造")
                                    需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                    随机点击(1025, 659, 10, 10)
                                } else {
                                    需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                    需购买装备.push("斗篷")
                                }
                            }
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "绿级斗篷(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("绿级斗篷(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通斗篷(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通斗篷(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(斗篷)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(斗篷)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到装备，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }

                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到装备栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到装备，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("耳环")) {
                        var laolian = imgempt(true, 0.9, "制造(耳环绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            if (铜钱不足) {
                                需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                需购买装备.push("耳环")
                            } else {
                                var 结果 = 识别绿级制造材料(直接购买)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "钻石不足") {
                                    钻石不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                } else if (结果 == "铜钱不足") {
                                    铜钱不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                } else if (结果 == "无货") {
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                } else if (结果 == "可以制造") {
                                    log("点击制造")
                                    需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                    随机点击(1025, 659, 10, 10)
                                } else {
                                    需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                    需购买装备.push("耳环")
                                }
                            }
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "级绿耳环(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("级绿耳环(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通耳环(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通耳环(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(耳环)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(耳环)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }
                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到饰品栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("戒指")) {
                        var laolian = imgempt(true, 0.9, "制造(戒指绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            if (铜钱不足) {
                                需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                需购买装备.push("戒指")
                            } else {
                                var 结果 = 识别绿级制造材料(直接购买)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "钻石不足") {
                                    钻石不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                } else if (结果 == "铜钱不足" || 结果 == "无货") {
                                    铜钱不足 = true
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                } else if (结果 == "无货") {
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                } else if (结果 == "可以制造") {
                                    log("点击制造")
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                    随机点击(1025, 659, 10, 10)

                                } else {
                                    需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                    需购买装备.push("戒指")
                                }
                            }
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "绿级戒指(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("绿级戒指(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通戒指(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通戒指(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(戒指)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(戒指)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }
                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到饰品栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else {
                        if (需购买装备.length != 0) {
                            if (钻石不足) {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    log("最终判定为钻石不足,放弃购买")
                                    return "制造完成"
                                }
                            } else {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                var 结果 = 前往购买绿装(需购买装备)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "购买完成") {
                                    return "制造完成"
                                } else if (结果 == "钻石不足") {
                                    log("最终判定为钻石不足,放弃购买")
                                    return "制造完成"
                                } else {
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "制造完成"
                                    // log("购买材料制造:" + 结果)
                                    // 需要提升的装备 = 结果
                                    // 直接购买 = true
                                    // 需购买装备 = []
                                }
                            }

                        } else {
                            log("制造完成")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "制造完成"
                            }
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                    if (jizhandi != null) {
                        log("点击菜单_制造");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var zhunmen = imgempt(true, 0.9, "专门制作|专门制作2", 859, 132, 205, 161)
                            if (zhunmen != null) {
                                log("专门制作,鉴别金币");//
                                // var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                // if (tongqian != null) {
                                // var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                // if (当前铜钱数量 != "false") {
                                //     if (当前铜钱数量 <= 200000) {
                                //         log("铜钱不足,制造完成")
                                //         var 结果 = 纯回主页()
                                //         if (结果 == "掉线") {
                                //             return "掉线"
                                //         } else {
                                //             return "制造完成"
                                //         }
                                //     } else {
                                随机点击(zhunmen.x - 630, zhunmen.y, 10, 10)
                                //     }
                                // } else {
                                //     log("没有找到铜钱")
                                //     sleep(3000)
                                // }
                                // }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 购买强化卷轴无箱子(Materials) {
    log("购买强化卷轴")
    var 未识别次数 = 0
    var 购买次数 = 0
    var 购买武器强化卷轴 = false
    var 购买防具强化卷轴 = false
    if (Materials.includes("武器强化卷轴")) {
        购买武器强化卷轴 = true
    }
    if (Materials.includes("防具强化卷轴")) {
        购买防具强化卷轴 = true
    }
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(640, 429)
            } else {
                var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
                if (bbym != null) {
                    log("活动商店页")
                    var bbym = imgempt(true, 0.9, "礼包领取图标", 1003, 4, 118, 88)
                    if (bbym != null) {
                        log("点击活动商店")
                        随机点击2(993, 39)
                        sleep(2000)
                    } else {
                        var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                        if (bbym != null) {
                            log("获得道具点击画面")
                            随机点击2(640, 429)
                        } else {
                            var bbym = imgempt(true, 0.9, "活动商店购买MAX", 509, 465, 145, 65)
                            if (bbym != null) {
                                log("点击活动商店购买MAX")
                                随机点击2(bbym.x, bbym.y)
                                随机点击2(747, 568)
                                购买次数++
                                if (购买次数 >= 10) {
                                    
                                    var json = {
                                        "设备id": 设备id,
                                        "type": "异常",
                                        "异常信息": "购买出错,请检查"
                                    }
                                    发送数据至中控("fragmentaryState", json)
                                    alert("购买出错,请检查")
                                }
                                // }
                            } else {
                                var bbym1 = imgempt(true, 0.9, "商城购买按钮", 588, 494, 299, 161)
                                if (bbym1 != null) {
                                    log("购买按钮识别MAX")
                                    var bbym = imgempt(true, 0.9, "商城购买MAX", 493, 444, 185, 105)
                                    if (bbym != null) {
                                        log("点击MAX")
                                        随机点击2(bbym.x, bbym.y)
                                        // }
                                    }
                                    随机点击2(bbym1.x, bbym1.y)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        纯回主页()
                                        return "购买完成"
                                    } else {
                                        for (let index = 0; index < 3; index++) {
                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                            if (bbkjbztc != null) {
                                                log("背包空间不足弹窗")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    // var 结果 = 成就图鉴()
                                                    // if (结果 == "掉线") {
                                                    //     return "掉线"
                                                    // } else {
                                                    var 结果 = 清理背包()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        break
                                                    }
                                                    // }
                                                }
                                            }
                                            sleep(200)
                                        }
                                    }
                                } else {
                                    var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                                    if (bbym != null) {
                                        log("购买成功")
                                        随机点击2(635, 435)
                                    } else {
                                        var bbym = imgempt(true, 0.8, "武器强化卷轴(商店)|武器强化卷轴2(商店)|武器强化卷轴3(商店)", 207, 120, 1042, 584)
                                        if (bbym != null && 购买武器强化卷轴) {
                                            未识别次数 = 0
                                            log("点击武器强化卷轴")
                                            随机点击2(bbym.x, bbym.y)
                                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                            if (guajizhon != null) {
                                                log("铜钱不足,处理")
                                                纯回主页()
                                                return "购买完成"
                                            }
                                        } else {
                                            var bbym = imgempt(true, 0.8, "装备强化卷轴(商店)|装备强化卷轴2(商店)|装备强化卷轴3(商店)", 207, 120, 1042, 584)
                                            if (bbym != null && 购买防具强化卷轴) {
                                                未识别次数 = 0
                                                log("点击装备强化卷轴")
                                                随机点击2(bbym.x, bbym.y)
                                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                if (guajizhon != null) {
                                                    log("铜钱不足,处理")
                                                    纯回主页()
                                                    return "购买完成"
                                                }
                                            } else {
                                                var bbym = imgempt(true, 0.9, "一次性购买", 7, 175, 162, 95)
                                                if (bbym != null) {
                                                    未识别次数++
                                                    if (未识别次数 >= 5) {
                                                        log("退出商店")
                                                        随机点击2(40, 30)
                                                        纯回主页()
                                                        return "购买完成"
                                                    }
                                                } else {//一次性购买
                                                    log("点击铜钱购买卷轴页")
                                                    随机点击2(277, 96)
                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                    if (guajizhon != null) {
                                                        log("铜钱不足,处理")
                                                        纯回主页()
                                                        return "购买完成"
                                                    } else {
                                                        for (let index = 0; index < 3; index++) {
                                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                            if (bbkjbztc != null) {
                                                                log("背包空间不足弹窗")
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    // var 结果 = 成就图鉴()
                                                                    // if (结果 == "掉线") {
                                                                    //     return "掉线"
                                                                    // } else {
                                                                    var 结果 = 清理背包()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    } else {
                                                                        break
                                                                    }
                                                                    // }
                                                                }
                                                            }
                                                            sleep(200)
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击活动商店");
                        随机点击2(998, 39)
                        sleep(2000)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}


function 前往购买绿装(argument) {
    var 装备数组 = argument
    var 无货物品 = ""
    var 刷新次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("点击交易所");
                随机点击(cdjys.x, cdjys.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                    if (pmhss != null) {
                        log("主页搜索");
                        随机点击(pmhss.x, pmhss.y, 10, 10)
                    } else {
                        var pmhss = imgempt(true, 0.9, "请输入检索词|请输入检索词2|请输入检索词3", 25, 53, 217, 110)//请输入检索词
                        if (pmhss != null) {
                            log("需要购买的装备:" + 装备数组)
                            if (装备数组.length != 0) {
                                log("点击输入检索词");
                                随机点击(pmhss.x, pmhss.y)
                                if (装备数组[0] == "斗篷") {
                                    setText("기사 단장의 망토")
                                } else if (装备数组[0] == "戒指") {
                                    setText("루벨라이트 반지")
                                } else if (装备数组[0] == "耳环") {
                                    setText("쿤자이트 귀걸이")
                                } else if (装备数组[0] == "肩甲") {
                                    setText("은제 장식 견장")
                                }
                                //这里加关闭输入法

                                for (let index = 0; index < 3; index++) {
                                    var shurufa = imgempt(false, 0.9, "输入法回车", 25, 53, 217, 110)//请输入检索词
                                    if (shurufa != null) {
                                        sleep(500)
                                        log("点击输入法回车")
                                        随机点击(shurufa.x, shurufa.y)
                                        break
                                    }
                                    sleep(200)
                                }

                            } else {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    if (无货物品 == "") {
                                        return "购买完成"
                                    } else {
                                        return 无货物品
                                    }
                                }
                            }
                        } else {
                            var pmhss = imgempt(true, 0.9, "拍卖行购买物品弹窗|拍卖行购买物品弹窗2", 524, 67, 257, 115)//
                            if (pmhss != null) {
                                log("点击购买");
                                随机点击(730, 588)
                                sleep(1000)
                                var pmhss = imgempt(true, 0.9, "购买钻石不够", 431, 217, 433, 201)//
                                if (pmhss != null) {
                                    log("钻石不足以购买")
                                    if (!总提示.includes("钻石不足")) {
                                        总提示 = 总提示 + "钻石不足"
                                    }
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "钻石不足"
                                    }
                                } else {
                                    随机点击(1237, 95)
                                    装备数组 = 装备数组.slice(1);
                                }
                            } else {
                                var pmhss = imgempt(true, 0.9, "拍卖行绿戒指|拍卖行绿斗篷|拍卖行绿耳环|拍卖行绿级肩甲", 232, 174, 358, 121)//
                                if (pmhss != null) {
                                    var pmhss1 = imgempt(true, 0.9, "销售金额列表", 992, 114, 223, 105)//
                                    if (pmhss1 != null) {
                                        var pmhss1 = imgempt(true, 0.9, "拍卖价零数量", 1088, 184, 112, 75)//
                                        if (pmhss1 != null) {
                                            toastLog("拍卖行无货")
                                            随机点击(1237, 95)
                                            无货物品 = 无货物品 + 装备数组[0]
                                            装备数组 = 装备数组.slice(1);
                                        } else {
                                            var 当前价格 = 找数字("字符串", "夜鸦拍卖行", 6, 0.9, 1027, 203, 90, 44);
                                            if (当前价格 != "false") {
                                                if (当前价格 > 20) {
                                                    if (刷新次数 >= 10) {
                                                        随机点击(1237, 95)
                                                        无货物品 = 无货物品 + 装备数组[0]
                                                        装备数组 = 装备数组.slice(1);
                                                    } else {
                                                        toastLog("价格过高")
                                                        随机点击2(1183, 681)
                                                        刷新次数++
                                                        重复点击坐标次数 = 0
                                                    }
                                                } else {
                                                    log("点击搜索出的物品");
                                                    随机点击(pmhss.x + 340, pmhss.y, 10, 10)
                                                }
                                            } else {

                                            }
                                        }
                                    } else {
                                        var pmhss1 = imgempt(true, 0.9, "拍卖价零数量", 1088, 184, 112, 75)//
                                        if (pmhss1 != null) {
                                            toastLog("拍卖行无货")
                                            随机点击(1237, 95)
                                            无货物品 = 无货物品 + 装备数组[0]
                                            装备数组 = 装备数组.slice(1);
                                        } else {
                                            log("点击搜索出的物品");
                                            随机点击(pmhss.x + 340, pmhss.y, 10, 10)
                                        }
                                    }
                                } else {
                                    var pmhss = imgempt(true, 0.9, "拍卖行绿戒指|拍卖行绿斗篷|拍卖行绿耳环|拍卖行绿级肩甲", 18, 91, 308, 184)//
                                    if (pmhss != null) {
                                        log("点击搜索出的物品");
                                        随机点击(pmhss.x + 100, pmhss.y, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
function 制造绿装(需要提升的装备) {
    var 未找到装备栏 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标|制作图标2", 109, 77, 80, 57)
                if (jizhandi != null) {
                    if (需要提升的装备.includes("斗篷")) {
                        var laolian = imgempt(true, 0.9, "制造(斗篷绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            log("点击制造")
                            随机点击(1025, 659, 10, 10)
                            需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "绿级斗篷(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("绿级斗篷(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通斗篷(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通斗篷(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(斗篷)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(斗篷)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到装备，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }

                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到装备栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到装备，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("耳环")) {
                        var laolian = imgempt(true, 0.9, "制造(耳环绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            log("点击制造")
                            随机点击(1025, 659, 10, 10)
                            需要提升的装备 = 需要提升的装备.replace("耳环", "");
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "级绿耳环(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("级绿耳环(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通耳环(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通耳环(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(耳环)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(耳环)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }
                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到饰品栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("戒指")) {
                        var laolian = imgempt(true, 0.9, "制造(戒指绿详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            log("点击制造")
                            随机点击(1025, 659, 10, 10)
                            需要提升的装备 = 需要提升的装备.replace("戒指", "");
                            未找到装备栏 = true
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "绿级戒指(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("绿级戒指(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通戒指(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通戒指(制造),下滑");
                                        swipe(368, 580, 385, 423, 2000)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(戒指)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(戒指)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                            if (!未找到装备栏) {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            } else {
                                                未找到装备栏 = false
                                            }
                                        } else {
                                            if (未找到装备栏) {
                                                log("没找到饰品栏，下滑")
                                                swipe(102, 491, 105, 352, 2000)
                                            } else {
                                                log("没找到饰品，下滑")
                                                swipe(380, 501, 375, 330, 2000)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else {
                        log("制造完成")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "制造完成"
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                    if (jizhandi != null) {
                        log("点击菜单_制造");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var zhunmen = imgempt(true, 0.9, "专门制作|专门制作2", 859, 132, 205, 161)
                            if (zhunmen != null) {
                                log("专门制作,鉴别金币");//
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                        if (当前铜钱数量 <= 200000) {

                                            alert("铜钱不足,请检查")
                                            log("铜钱不足,制造完成")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "制造完成"
                                            }
                                        } else {
                                            随机点击(zhunmen.x - 630, zhunmen.y, 10, 10)
                                        }
                                    } else {
                                        log("没有找到铜钱")
                                        sleep(3000)
                                    }
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 识别游戏区服() {
    log("识别游戏区服")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var shezhi = imgempt(true, 0.9, "设置图标|设置图标2", 960, 616, 297, 97)
            if (shezhi != null) {
                log("点击设置");
                随机点击(shezhi.x, shezhi.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var shezhi = imgempt(true, 0.9, "设置页", 18, 2, 188, 80)
                    if (shezhi != null) {
                        var shezhi = imgempt(true, 0.9, "退出游戏|退出游戏2", 725, 626, 254, 92)//1047,134
                        if (shezhi != null) {
                            log("开始识别大区")
                            var 游戏大区 = CoordinatesAndPictureName(true, 0.9, "2区|3区|4区|5区|6区|7区|8区|9区|11区|12区|16区|18区|19区|20区", 407, 232, 170, 67)
                            if (游戏大区 != null) {
                                log("游戏大区为:" + 游戏大区.图名)
                                var 游戏小区 = CoordinatesAndPictureName(true, 0.9, "1字|2字|3字", 522, 229, 137, 72)
                                if (游戏小区 != null) {
                                    log("游戏小区为:" + 游戏小区.图名)
                                    toastLog(游戏大区.图名 + ":" + 游戏小区.图名)
                                    var 游戏总和区服 = 游戏大区.图名 + ":" + 游戏小区.图名
                                    var json = {
                                        "设备id": 设备id,
                                        "游戏大区": 游戏总和区服
                                    }
                                    参数[42] = false
                                    ui.run(function () {
                                        ui.识别游戏大区.setChecked(false)
                                    });
                                    storage.put("游戏区服", 游戏总和区服)
                                    storage.put("识别游戏大区", false)
                                    发送数据至中控("yeyaInternationServerRegion", json)
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "完成"
                                    }
                                } else {
                                    toastLog("未找到小区")
                                }
                            } else {
                                toastLog("未找到大区")
                            }
                        } else {
                            log("不在游戏大区页,点击游戏大区")
                            随机点击2(811, 101)
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}



function 发送数据至中控(url, json) {
   
        var url = "http://14.22.112.230:8233/snhc/" + url;
        //  var url = "http://192.168.3.56:1572/SocketTest/" + url;
        var data = JSON.stringify(json);
        try {
            // 发送POST请求，将JSON数据放入请求体
            http.__okhttp__.setTimeout(10000);
            var result = http.post(url, { "param1": data });
            if (result.statusCode == 200) {
                // var r = result.body.json()
                // if (r.data == "成功") {
                //     log("数据发送成功")
                // } else {
                //     log("修改大区失败")
                // }
            } else {
                log("访问中控失败")
            }
        } catch (e) {
            log(json)
            toastLog("访问中控超时。。。");
        }
}

function 商城其他活动购买() {
    var 需要购买的活动列表 = "需要购买的活动栏活动详细列表1|需要购买的活动栏活动详细列表2|需要购买的活动栏活动详细列表3"
    var 本次活动重复点击 = 0
    var 识别到可购买 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(640, 429)
            } else {
                var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                if (bbym != null) {
                    log("购买成功")
                    随机点击2(635, 435)
                } else {
                    var bbym = imgempt(true, 0.9, "商城活动购买弹窗铜钱标识", 867, 539, 96, 74)
                    if (bbym != null) {
                        log("点击活动商店弹窗购买")
                        随机点击2(bbym.x, bbym.y)
                        for (let index = 0; index < 3; index++) {
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,不再购买")
                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "完成"
                                }
                            } else {
                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                if (bbkjbztc != null) {
                                    log("背包空间不足弹窗")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        var 结果 = 清理背包()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            break
                                        }
                                    }
                                }
                            }
                            sleep(200)
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "商城购买", 551, 419, 384, 253)
                        if (bbym != null) {
                            log("点击单购买")
                            随机点击2(bbym.x, bbym.y)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                return "完成"
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "需要购买的活动栏活动详细列表1|需要购买的活动栏活动详细列表2|需要购买的活动栏活动详细列表3", 11, 126, 245, 448)
                            if (bbym != null) {
                                本次活动重复点击 = 0
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        if (当前铜钱数量 >= 300000) {
                                            var bbym = imgempt(true, 0.9, "活动商城未购买1|活动商城未购买2|活动商城未购买3", 343, 496, 86, 50)
                                            if (bbym != null) {
                                                识别到可购买 = true
                                                log("活动商城未购买物品")
                                                随机点击(bbym.x, bbym.y)
                                            } else {
                                                if (需要购买的活动列表 == "") {
                                                    if (识别到可购买 == false) {
                                                        log("已购买所有,此后不再执行")
                                                        storage.put("活动购买版本", "1")
                                                    }
                                                    log("已全部执行完毕")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        storage.put("活动物资购买时间", new Date().getDate().toString())
                                                        return "完成"
                                                    }
                                                } else {
                                                    var pmhss = CoordinatesAndPictureName(true, 0.9, 需要购买的活动列表, 11, 126, 245, 448)
                                                    if (pmhss != null) {
                                                        log(pmhss.图名)
                                                        随机点击(pmhss.x, pmhss.y)
                                                        if (需要购买的活动列表.includes("|")) {
                                                            var regex = new RegExp(pmhss.图名 + "\\|");
                                                            if (需要购买的活动列表.match(regex)) {
                                                                需要购买的活动列表 = 需要购买的活动列表.replace(pmhss.图名 + "|", '');
                                                            } else {
                                                                需要购买的活动列表 = 需要购买的活动列表.replace("|" + pmhss.图名, '');
                                                            }
                                                        } else {
                                                            需要购买的活动列表 = 需要购买的活动列表.replace(pmhss.图名, '');
                                                        }
                                                    } else {

                                                    }
                                                }
                                            }
                                        } else {
                                            log("铜钱不足已购买活动")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                                return "完成"
                                            }
                                        }
                                    } else {
                                        log("未识别到铜钱")
                                    }
                                } else {
                                    log("未找到铜钱标识")
                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "需要购买的活动栏", 11, 126, 245, 448)
                                if (bbym != null) {
                                    log("需要购买的活动栏")
                                    随机点击2(bbym.x, bbym.y)
                                    本次活动重复点击++
                                    if (本次活动重复点击 >= 10) {
                                        log("活动可能结束了请留意")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            storage.put("活动物资购买时间", new Date().getDate().toString())
                                            return "完成"
                                        }
                                    }
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("点击活动商店");
                                        随机点击2(998, 39)
                                        sleep(2000)
                                    } else {
                                        本次活动重复点击++
                                        if (本次活动重复点击 >= 10) {
                                            log("活动可能结束了请留意")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                                return "完成"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 活动物质购买0926() {
    var 未点击第2栏 = true
    var 未识别到200天活动 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(640, 429)
            } else {
                var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                if (bbym != null) {
                    log("购买成功")
                    随机点击2(635, 435)
                } else {
                    var bbym = imgempt(true, 0.9, "活动商店购买MAX", 509, 465, 145, 65)
                    if (bbym != null) {
                        log("点击活动商店购买MAX")
                        随机点击2(bbym.x, bbym.y)
                        随机点击2(747, 568)
                        for (let index = 0; index < 3; index++) {
                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                            if (bbkjbztc != null) {
                                log("背包空间不足弹窗")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    var 结果 = 清理背包()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        break
                                    }
                                }
                            } else {

                            }
                            sleep(200)
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "商城购买", 551, 419, 384, 253)
                        if (bbym != null) {
                            log("点击单购买")
                            随机点击2(bbym.x, bbym.y)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                return "完成"
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
                            if (bbym != null) {
                                var bbym = imgempt(true, 0.9, "商城20天活动栏", 11, 123, 219, 251)
                                if (bbym != null) {
                                    log("商城20天活动栏")
                                    var bbym = imgempt(false, 0.8, "商城活动物品售罄", 207, 120, 1042, 584)
                                    if (bbym != null) {
                                        log("商城活动物品售罄")
                                        if (未点击第2栏) {
                                            log("点击第二栏")
                                            随机点击(102, 301)
                                            未点击第2栏 = false
                                        } else {
                                            log("购买完毕")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                                return "完成"
                                            }
                                        }
                                    } else {
                                        var toingqian = imgempt(true, 0.9, "200铜钱购买|100铜钱购买", 223, 134, 990, 584)
                                        if (toingqian != null) {
                                            log("点击铜钱购买物资")
                                            随机点击(toingqian.x, toingqian.y)
                                        } else {

                                        }
                                    }
                                } else {
                                    未识别到200天活动++
                                    if (未识别到200天活动 >= 7) {
                                        log("200天活动可能已结束")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            storage.put("活动物资购买时间", new Date().getDate().toString())
                                            return "完成"
                                        }
                                    }
                                }
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("点击活动商店");
                                    随机点击2(998, 39)
                                    sleep(2000)
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("退出节电,领取邮件")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 活动物质购买() {
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(640, 429)
            } else {
                var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                if (bbym != null) {
                    log("购买成功")
                    随机点击2(635, 435)
                } else {
                    var bbym = imgempt(true, 0.9, "活动商店购买MAX", 509, 465, 145, 65)
                    if (bbym != null) {
                        log("点击活动商店购买MAX")
                        随机点击2(bbym.x, bbym.y)
                        随机点击2(747, 568)
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            storage.put("活动物资购买时间", new Date().getDate().toString())
                            return "完成"
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "商城购买", 551, 419, 384, 253)
                        if (bbym != null) {
                            log("点击单购买")
                            随机点击2(bbym.x, bbym.y)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                return "完成"
                            }
                        } else {
                            var bbym = imgempt(false, 0.8, "商城活动物品售罄", 207, 120, 1042, 584)
                            if (bbym != null) {
                                log("商城活动物品售罄")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    storage.put("活动物资购买时间", new Date().getDate().toString())
                                    return "完成"
                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
                                if (bbym != null) {
                                    log("活动商店页")
                                    var bbym = imgempt(true, 0.9, "商城周期活动", 12, 120, 170, 96)
                                    if (bbym != null) {
                                        随机点击2(87, 161)
                                        var bbym = imgempt(false, 0.9, "商城活动物品", 1003, 4, 118, 88)
                                        if (bbym != null) {
                                            log("商城活动物品")
                                            随机点击2(bbym.x, bbym.y)
                                        } else {
                                            log("没找到活动，滑动")
                                            滑动次数++
                                            if (滑动次数 >= 7) {
                                                storage.put("活动物资购买时间", new Date().getDate().toString())
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    storage.put("今日购买商城属性药水记录", new Date().getDate())
                                                    return "完成"
                                                }
                                            }
                                            swipe(825, 432, 625, 430, 2000)
                                        }
                                    } else {
                                        log("点击第一页")
                                        随机点击2(100, 98)
                                    }
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("点击活动商店");
                                        随机点击2(998, 39)
                                        sleep(2000)
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (jdmsz != null) {
                                            log("退出节电,领取邮件")
                                            swipe(566, 389, 968, 226, 500)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 购买商城属性药水() {
    if (new Date().getDate() != storage.get("今日购买商城属性药水记录") ) {
        var 未识别次数 = 0
        while (true) {
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {//
                var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
                if (bbym != null) {
                    log("活动商店页")
                    var bbym = imgempt(true, 0.9, "礼包领取图标", 1003, 4, 118, 88)
                    if (bbym != null) {
                        log("点击活动商店")
                        随机点击2(993, 39)
                        sleep(2000)
                    } else {
                        var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                        if (bbym != null) {
                            log("获得道具点击画面")
                            随机点击2(640, 429)
                        } else {
                            var bbym = imgempt(true, 0.9, "活动商店购买MAX", 509, 465, 145, 65)
                            if (bbym != null) {
                                log("点击活动商店购买MAX")
                                随机点击2(bbym.x, bbym.y)
                                随机点击2(747, 568)
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    storage.put("今日购买商城属性药水记录", new Date().getDate())
                                    return "完成"
                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                                if (bbym != null) {
                                    log("购买成功")
                                    随机点击2(635, 435)
                                } else {
                                    var bbym = imgempt(true, 0.8, "商城属性药售罄", 207, 120, 1042, 584)
                                    if (bbym != null) {
                                        log("属性药售罄")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            storage.put("今日购买商城属性药水记录", new Date().getDate())
                                            return "完成"
                                        }
                                    } else {
                                        var bbym = imgempt(true, 0.8, "商城属性药水|商城属性药水2|商城属性药水3", 207, 120, 1042, 584)
                                        if (bbym != null) {
                                            未识别次数 = 0
                                            log("点击商城属性药水")
                                            随机点击2(bbym.x, bbym.y)
                                            sleep(1000)
                                            随机点击2(716, 561)
                                            未购买属性药 = false
                                        } else {
                                            var bbym = imgempt(true, 0.9, "一次性购买", 7, 175, 162, 95)
                                            if (bbym != null) {
                                                未识别次数++
                                                if (未识别次数 >= 5) {
                                                    log("退出商店")
                                                    随机点击2(40, 30)
                                                    纯回主页()
                                                    return "购买完成"
                                                }
                                            } else {//一次性购买
                                                log("点击铜钱购买卷轴页")
                                                随机点击2(277, 96)
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击活动商店");
                        随机点击2(998, 39)
                        sleep(2000)
                    } else {

                    }
                }
            }
            sleep(200)
        }
    } else {
        log("今日已购买过属性药")
        return "完成"
    }
}

function 创建弓手() {
    while (true) {
        var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
        if (ksyx != null) {
            log("创建成功");
            return
        } else {
            var ksyx = imgempt(true, 0.9, "名字违规或已使用", 447, 280, 415, 113)
            if (ksyx != null) {
                log("名字违规或已使用")
                随机点击(645, 450)
            } else {

                var ksyx = imgempt(true, 0.9, "取名字", 631, 247, 223, 89)
                if (ksyx != null) {
                    log("取名字");
                    var result = "";
                    随机点击(629, 374, 10, 10)
                    var 随机字符 = random(1, 3)
                    if (随机字符 == 1) {
                        var result = randomChinese();
                        // result = chineseToAscii(randomChineseCharacter);
                    } else if (随机字符 == 2) {
                        var result = randomLetter();
                    } else {
                        var start = 44032;  // 韩文字母的Unicode起始值
                        var end = 55203;    // 韩文字母的Unicode结束值
                        var random2 = new java.util.Random();
                        var 长度 = random(3, 8)
                        for (var i = 0; i <= 长度; i++) {
                            result += String.fromCharCode(random2.nextInt(end - start + 1) + start);
                        }
                    }
                    // else{
                    //     var 随机数量 = random(4, 8)
                    //     var result = ""
                    //     for (var i = 0; i <= 随机数量; i++) {
                    //         result = result+""+random(0, 9).toString()
                    //     }
                    // }
                    setText(result)
                    sleep(1000)
                    //这里加关闭输入法

                    for (let index = 0; index < 3; index++) {
                        var shurufa = imgempt(false, 0.9, "输入法回车|输入法确认勾", 25, 53, 217, 110)//请输入检索词
                        if (shurufa != null) {
                            sleep(500)
                            log("点击输入法回车")
                            随机点击(shurufa.x, shurufa.y)
                            sleep(3000)
                            break
                        }
                        sleep(200)
                    }
                    随机点击(774, 378)
                    随机点击2(723, 446, 10, 10)
                } else {
                    var ksyx = imgempt(true, 0.9, "发型选择", 20, 137, 123, 94)
                    if (ksyx != null) {
                        log("发型选择");
                        var 点击X = random(1008, 1230)
                        var 点击Y = random(76, 644)
                        随机点击(点击X, 点击Y, 10, 10)
                        随机点击2(1100, 676, 10, 10)
                    } else {
                        var ksyx = imgempt(true, 0.9, "创建角色弓手页|创建角色弓手页2", 904, 406, 373, 211)
                        if (ksyx != null) {
                            log("点击创建");
                            随机点击2(1106, 684, 10, 10)
                        } else {
                            var ksyx = imgempt(true, 0.9, "创建角色战士页|创建角色战士页2", 904, 406, 373, 211)
                            if (ksyx != null) {
                                log("点击弓手");
                                var suijijuese = random(1, 2)
                                if (suijijuese == 2) {
                                    log("女")
                                    随机点击2(135, 100, 10, 10)
                                }
                                随机点击2(67, 441, 10, 10)
                            } else {
                                var xzfwq = imgempt(true, 0.9, "进入创建角色页面", 27, 168, 101, 73)
                                if (xzfwq != null) {
                                    log("进入创建角色页面");
                                    随机点击2(xzfwq.x, xzfwq.y)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
function 武器装扮合成及领取() {
    var 合成 = true
    var 领取 = true
    var 穿戴 = true
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "合成结果", 530, 216, 257, 118)
            if (qiagnhua != null) {
                log("点击确认结果")
                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
            } else {


                var bbym = imgempt(true, 0.9, "触摸屏幕关闭|触摸屏幕关闭2", 485, 593, 323, 96)
                if (bbym != null) {
                    log("触摸屏幕关闭")
                    随机点击2(bbym.x, bbym.y)
                } else {

                    var bbym = imgempt(true, 0.9, "获得", 613, 385, 268, 138)
                    if (bbym != null) {
                        log("获得")
                        随机点击2(bbym.x, bbym.y)
                    } else {

                        var bbym = imgempt(true, 0.9, "继续开卡牌|继续开卡牌2", 615, 625, 247, 91)
                        if (bbym != null) {
                            log("继续开卡牌")
                            随机点击2(bbym.x, bbym.y)
                        } else {
                            var bbym = imgempt(true, 0.9, "直接看结果|直接看结果2", 470, 587, 353, 127)
                            if (bbym != null) {
                                log("直接看结果")
                                随机点击2(bbym.x, bbym.y)
                            } else {
                                var bbym = imgempt(true, 0.9, "都打开2", 529, 626, 240, 87)
                                if (bbym != null) {
                                    log("都打开")
                                    随机点击2(bbym.x, bbym.y)
                                } else {
                                    var bbym = imgempt(true, 0.9, "都打开", 537, 638, 242, 74)
                                    if (bbym != null) {
                                        log("都打开")
                                        随机点击2(bbym.x, bbym.y)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "跳过", 1096, 12, 181, 82)
                                        if (bbym != null) {
                                            log("跳过")
                                            随机点击2(bbym.x, bbym.y)
                                        } else {

                                            var lkzh = imgempt(true, 0.9, "离开召唤", 548, 640, 202, 74)
                                            if (lkzh != null) {
                                                log("离开召唤")
                                                var bbym = imgempt(true, 0.9, "跳过召唤动画", 1067, 645, 83, 64)
                                                if (bbym != null) {
                                                    log("跳过召唤动画")
                                                    随机点击2(bbym.x, bbym.y)
                                                } else {
                                                    随机点击2(lkzh.x, lkzh.y)
                                                }
                                            } else {
                                                var qiagnhua = imgempt(true, 0.9, "武器装扮页|武器装扮页2", 4, 3, 277, 91)
                                                if (qiagnhua != null) {
                                                    if (合成) {
                                                        var qiagnhua = imgempt(true, 0.9, "获得合成次数补偿", 93,531,164,185)
                                                        if (qiagnhua != null) {
                                                            log("点击合成次数补偿")
                                                            随机点击2(qiagnhua.x, qiagnhua.y)
                                                        }else{
                                                            var qiagnhua = imgempt(true, 0.9, "坐骑合成|坐骑合成2", 239, 645, 224, 73)
                                                            if (qiagnhua != null) {
                                                                log("点击武器装扮合成");
                                                                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                                var qiagnhua = imgempt(true, 0.9, "无可合成|无可合成2", 271, 52, 521, 65)
                                                                if (qiagnhua != null) {
                                                                    log("合成完毕")
                                                                    合成 = false
                                                                } else {
                                                                    随机点击2(525, 677, 10, 10)
                                                                }
                                                            } else {
                                                                log("点击合成页")
                                                                随机点击2(274, 98, 10, 10)
                                                            }
                                                        }

                                                        
                                                    } else if (领取) {//
                                                        var qiagnhua = imgempt(true, 0.9, "确定领取坐骑", 614, 370, 281, 171)
                                                        if (qiagnhua != null) {
                                                            log("点击确定领取武器装扮");
                                                            随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                        } else {
                                                            var qiagnhua = imgempt(true, 0.9, "无可领取的坐骑", 533, 286, 221, 202)
                                                            if (qiagnhua != null) {
                                                                log("无可领取的武器装扮");
                                                                领取 = false
                                                            } else {
                                                                var qiagnhua = imgempt(true, 0.9, "领取坐骑", 50, 560, 748, 80)
                                                                if (qiagnhua != null) {
                                                                    log("点击领取武器装扮");
                                                                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                                } else {
                                                                    log("点击武器装扮领取页")
                                                                    随机点击2(630, 94, 10, 10)
                                                                }
                                                            }
                                                        }
                                                    } else if (穿戴) {//
                                                        var qiagnhua = imgempt(true, 0.9, "安装效果|安装效果2", 14, 197, 225, 317)
                                                        if (qiagnhua != null) {
                                                            var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                                                            if (zhuxian != null) {
                                                                log("退出")
                                                                随机点击(1240, 29)
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "完成"
                                                                }
                                                            } else {
                                                                log("点击装备武器装扮")
                                                                随机点击(885, 236)
                                                                随机点击2(1156, 677)
                                                            }
                                                        } else {
                                                            log("点击武器装扮穿戴页")
                                                            随机点击2(98, 100, 10, 10)
                                                        }
                                                    }
                                                } else {
                                                    var qiagnhua = imgempt(true, 0.9, "菜单_武器装扮|菜单_武器装扮2", 956, 88, 318, 540)
                                                    if (qiagnhua != null) {
                                                        log("点击进入菜单_武器装扮");
                                                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                    } else {
                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                                        if (手 != null) {
                                                            log("主页点击菜单");
                                                            随机点击2(1238, 36, 10, 10)
                                                        } else {

                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

//ncsmjvvdmvvsqwtymhvvnsn@gmail.com---Kjfb20220596---VycnBycnm492572@outlook.com

function 制作灌注材料(mode) {
    if (mode == "一级绿") {
        var 识别物品 = "一级绿制造栏"
    } else if (mode == "一级蓝") {
        var 识别物品 = "一级蓝制造栏"
    } else if (mode == "一级紫") {
        var 识别物品 = "一级紫制造栏"
    }
    log("需要制造的:" + 识别物品)
    var 制造所有一级 = true
    var 制造所有二级 = true
    var 制造所有一级次数 = 0
    var 制造所有二级次数 = 0
    var 制造所有二级次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            // var qiagnhua = imgempt(true, 0.9, "物品信息(制造)", 485, 252, 70, 200)
            // if (qiagnhua != null) {
            //     log("点击物品信息(制造)");
            //     随机点击2(qiagnhua.x + 42, qiagnhua.y + 5, 10, 10)
            // } else {
            var qiagnhua = imgempt(true, 0.9, "物品信息(获取方式)|物品信息(获取方式)2", 485, 252, 70, 200)
            if (qiagnhua != null) {
                log("物品信息(获取方式)");
                随机点击2(qiagnhua.x + 40 + 40, qiagnhua.y + 5, 10, 10)
            } else {
                var qiagnhua = imgempt(true, 0.9, "获得途径选择", 494, 89, 305, 97)
                if (qiagnhua != null) {
                    log("物品信息(获取方式)获得途径选择");
                    随机点击2(418, 235, 10, 10)
                } else {
                    var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
                    if (jizhandi != null) {
                        log("制作成功")
                        随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var qiagnhua = imgempt(true, 0.9, "前往制造(二级归属)|前往制造(三级归属)", 284, 104, 422, 257)
                        if (qiagnhua != null) {
                            log("点击前往")
                            随机点击2(qiagnhua.x, qiagnhua.y)//
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "在第一栏1|在第一栏2|在第一栏3|在第二栏1|在第二栏2|在第二栏3", 96, 341, 1159, 87)
                            if (qiagnhua != null) {
                                log("点击灌注石")
                                随机点击2(qiagnhua.x, qiagnhua.y)//
                            } else {
                                if (制造所有一级) {
                                    var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                                    if (jizhandi != null) {
                                        log("点击max")
                                        // 随机点击2(753, 360, 10, 10)//MAX
                                        随机点击2(598, 400, 10, 10)//+10
                                        随机点击2(731, 497, 10, 10)
                                        随机点击2(1044, 662, 10, 10)
                                        var jizhandi = imgempt(true, 0.9, "所需材料不足|所需材料不足2", 558, 48, 244, 81)
                                        if (jizhandi != null) {
                                            log("一级制造所需材料不足")
                                            if (mode == "一级绿" && 制造所有一级次数 == 0) {
                                                随机点击2(1044, 662, 10, 10)
                                                return "材料不足"
                                            } else if (mode == "一级绿") {
                                                随机点击2(1044, 662, 10, 10)
                                                return "完成"
                                            } else {
                                                制造所有一级 = false
                                                log("跳转到二级制造")
                                            }
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                            if (guajizhon != null) {
                                                log("铜钱不足,处理")
                                                // 无铜钱处理()
                                                野外挂机刷金币()
                                                return "掉线"
                                            } else {
                                                制造所有一级次数++
                                                log("一级制造成功")
                                                if (mode == "一级绿") {
                                                    sleep(2000)
                                                    随机点击2(1044, 662, 10, 10)
                                                    return "完成"
                                                }
                                            }
                                        }
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "一级灌注制造详细|一级灌注制造详细2", 678, 356, 213, 90)
                                        if (qiagnhua != null) {
                                            log("一级灌注制造详细,点击输入数量")
                                            随机点击2(877, 663)//
                                        } else {
                                            var qiagnhua = imgempt(true, 0.9, "一级绿制造栏|一级绿制造栏2", 220, 130, 265, 356)
                                            if (qiagnhua != null) {
                                                log("点击一级绿制造栏")
                                                随机点击2(qiagnhua.x, qiagnhua.y)//
                                            } else {

                                            }
                                        }
                                    }
                                } else if (制造所有二级) {
                                    var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                                    if (jizhandi != null) {
                                        log("点击max")
                                        随机点击2(753, 360, 10, 10)
                                        随机点击2(731, 497, 10, 10)
                                        随机点击2(1044, 662, 10, 10)
                                        var jizhandi = imgempt(true, 0.9, "所需材料不足|所需材料不足2", 558, 48, 244, 81)
                                        if (jizhandi != null) {
                                            log("二级制造所需材料不足")
                                            if (mode == "一级蓝" && 制造所有二级次数 == 0) {
                                                随机点击2(1044, 662, 10, 10)
                                                return "材料不足"
                                            } else if (mode == "一级蓝") {
                                                随机点击2(1044, 662, 10, 10)
                                                return "完成"
                                            } else {
                                                制造所有二级 = false
                                                log("跳转到三级制造")
                                            }
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                            if (guajizhon != null) {
                                                log("铜钱不足,处理")
                                                // 无铜钱处理()
                                                野外挂机刷金币()
                                                return "掉线"
                                            } else {
                                                制造所有二级次数++
                                                log("二级制造成功")
                                            }
                                        }
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "二级灌注制造详细|二级灌注制造详细2", 678, 356, 213, 90)
                                        if (qiagnhua != null) {
                                            log("二级灌注制造详细,点击输入数量")
                                            随机点击2(877, 663)//
                                        } else {
                                            var qiagnhua = imgempt(true, 0.9, "一级蓝制造栏", 220, 130, 265, 356)
                                            if (qiagnhua != null) {
                                                log("点击一级蓝制造栏")
                                                随机点击2(qiagnhua.x, qiagnhua.y)//
                                            } else {

                                            }
                                        }
                                    }
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                                    if (jizhandi != null) {
                                        log("点击max")
                                        随机点击2(753, 360, 10, 10)
                                        随机点击2(731, 497, 10, 10)
                                        随机点击2(1044, 662, 10, 10)
                                        var jizhandi = imgempt(true, 0.9, "所需材料不足|所需材料不足2", 558, 48, 244, 81)
                                        if (jizhandi != null) {
                                            log("三级制造所需材料不足")
                                            if (mode == "一级紫" && 制造所有三级次数 == 0) {
                                                随机点击2(1044, 662, 10, 10)
                                                return "材料不足"
                                            } else if (mode == "一级紫") {
                                                随机点击2(1044, 662, 10, 10)
                                                return "完成"
                                            } else {
                                                log("留意错误")
                                            }
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                            if (guajizhon != null) {
                                                log("铜钱不足,处理")
                                                // 无铜钱处理()
                                                野外挂机刷金币()
                                                return "掉线"
                                            } else {
                                                制造所有三级次数++
                                                log("三级制造成功")
                                            }
                                        }
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "三级灌注制造详细|三级灌注制造详细2", 678, 356, 213, 90)
                                        if (qiagnhua != null) {
                                            log("三级灌注制造详细,点击输入数量")
                                            随机点击2(877, 663)//
                                        } else {
                                            var qiagnhua = imgempt(true, 0.9, "一级紫制造栏", 220, 130, 265, 356)
                                            if (qiagnhua != null) {
                                                log("点击一级紫制造栏")
                                                随机点击2(qiagnhua.x, qiagnhua.y)//
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            // }
        }
        sleep(200)
    }
}

function 申请加入工会() {
    var 未加入工会 = true
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {//  
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.8, "立即加入工会|立即加入工会2|立即加入工会3", 1032, 167, 236, 505)//
            if (jizhandi != null) {
                log("点击立即加入工会");
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                未加入工会 = true
            } else {
                var jizhandi = imgempt(true, 0.9, "申请加入工会|申请加入工会2|申请加入工会3", 1032, 167, 236, 505)//
                if (jizhandi != null) {
                    log("申请加入工会2");
                    swipe(1048, 575, 1050, 224, 1500)//
                    滑动次数++
                    if (滑动次数 >= 8) {
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                        storage.put("工会每日捐献日期", new Date().getDate())
                        return "刚加入"
                    }
                } else {//
                    var jizhandi = imgempt(true, 0.9, "工会申请中|工会申请中2", 1032, 167, 236, 505)//
                    if (jizhandi != null) {
                        log("工会申请中");
                        swipe(1048, 575, 1050, 224, 1500)//
                        滑动次数++
                        if (滑动次数 >= 8) {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            storage.put("工会每日捐献日期", new Date().getDate())
                            return "刚加入"
                        }
                    } else {//
                        var jizhandi = imgempt(true, 0.9, "工会捐献", 609, 527, 248, 147)//
                        if (jizhandi != null) {
                            log("已进入工会")
                            if (未加入工会) {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                storage.put("工会每日捐献日期", new Date().getDate())
                                return "刚加入"
                            } else {
                                return "完成"
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "工会申请中|工会申请中2", 1032, 167, 236, 505)//
                            if (jizhandi != null) {
                                log("工会申请中");
                                swipe(1048, 575, 1050, 224, 1500)//
                            } else {//

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 接取公会任务(mode) {
    log("接取公会任务")
    if (参数[25] && 接取工会任务时间 != new Date().getDate()) {
        var 识别范围 = {}
        if (mode == "激战地") {
            识别范围.x = 692
            识别范围.y = 564
        } else if (mode == "野外") {
            识别范围.x = 395
            识别范围.y = 547
        } else if (mode == "周本" || mode == "日副本" || mode == "经验本") {
            识别范围.x = 995
            识别范围.y = 569
        } else if (mode == "区本") {
            识别范围.x = 995
            识别范围.y = 569
        }

        while (true) {
            if (异常捕获() == "掉线") {//  
                return "掉线"
            } else {
                var jizhandi = imgempt(true, 0.8, "立即加入工会|立即加入工会2|立即加入工会3|申请加入工会|申请加入工会2|申请加入工会3", 1032, 167, 236, 505)//
                if (jizhandi != null) {
                    log("需要加入工会");
                    var 结果 = 申请加入工会()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else if (结果 == "刚加入") {
                        接取工会任务时间 = new Date().getDate()
                        return "完成"
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "完成每日工会任务", 688,279,317,114)
                    if (zhuxian != null) {
                        log("完成每日工会任务")
                        接取工会任务时间 = new Date().getDate()
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "完成"
                        }
                    } else {
                        var zhuxian = imgempt(true, 0.9, "加入的当天|加入的当天2", 490, 440, 292, 88)
                        if (zhuxian != null) {
                            log("加入的当天不能进行任务")
                            接取工会任务时间 = new Date().getDate()
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        } else {
                            var zhuxian = imgempt(true, 0.9, "完成任务", 896, 62, 72, 273)
                            if (zhuxian != null) {
                                var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                                if (信件 != null) {
                                    log("关闭菜单")
                                    随机点击(1243, 35, 10, 10)
                                } else {
                                    log("点击完成任务")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                }
                            } else {
                                var zhuxian = imgempt(true, 0.9, "完成工会任务", 371, 537, 884, 131)
                                if (zhuxian != null) {
                                    log("点击完成工会任务")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "确定要刷新吗", 558, 302, 262, 108)//
                                    if (jizhandi != null) {
                                        log("确定要刷新")
                                        随机点击2(728, 448)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            // 无铜钱处理()
                                            野外挂机刷金币()
                                            return "掉线"
                                        } else { }
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "放弃任务", 识别范围.x, 识别范围.y, 241, 82)//
                                        if (jizhandi != null) {
                                            log("任务已接取")
                                            随机点击2(183, 670)
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                        } else {
                                            var jizhandi = imgempt(true, 0.9, "确认放弃任务吗", 591, 233, 229, 69)//
                                            if (jizhandi != null) {
                                                log("确认放弃")
                                                随机点击2(727, 444)
                                            } else {
                                                var jizhandi = imgempt(true, 0.9, "放弃任务", 358, 548, 904, 94)//
                                                if (jizhandi != null) {
                                                    log("点击放弃")
                                                    随机点击2(jizhandi.x, jizhandi.y)
                                                } else {
                                                    var jizhandi = imgempt(true, 0.9, "接取任务", 识别范围.x, 识别范围.y, 241, 82)//
                                                    if (jizhandi != null) {
                                                        if (mode == "区本") {
                                                            var fblx = imgempt(true, 0.9, "一般副本", 972, 148, 274, 133)//
                                                            if (fblx != null) {
                                                                // log("更新任务")
                                                                // 随机点击2(1103, 680)
                                                                // 重复点击坐标次数 = 0
                                                                log("区本模式下一般副本不接")
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "完成"
                                                                }
                                                            } else {
                                                                // var fblx = imgempt(true, 0.9, "工会任务箱子|工会任务箱子2|工会积分任务", 977, 460, 275, 126)//
                                                                // if (fblx != null) {
                                                                log("接取任务")
                                                                随机点击2(jizhandi.x, jizhandi.y)
                                                                // } else {
                                                                //     log("非箱子更新任务")
                                                                //     随机点击2(1103, 680)
                                                                // }
                                                            }
                                                        } else if (mode == "普本") {
                                                            var fblx = imgempt(true, 0.9, "一般副本", 972, 148, 274, 133)//
                                                            if (fblx != null) {
                                                                // var fblx = imgempt(true, 0.9, "工会任务箱子|工会任务箱子2|工会积分任务", 977, 460, 275, 126)//
                                                                // if (fblx != null) {
                                                                log("接取任务")
                                                                随机点击2(jizhandi.x, jizhandi.y)
                                                                // } else {
                                                                //     log("非箱子更新任务")
                                                                //     随机点击2(1103, 680)
                                                                // }
                                                            } else {
                                                                log("普本模式下特殊副本不接")
                                                                // log("更新任务")
                                                                // 随机点击2(1103, 680)
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "完成"
                                                                }
                                                            }
                                                        } else if (mode == "激战地") {
                                                            // var fblx = imgempt(true, 0.9, "工会任务箱子|工会任务箱子2|工会积分任务", 676, 459, 276, 113)//
                                                            // if (fblx != null) {
                                                            log("接取任务")
                                                            随机点击2(jizhandi.x, jizhandi.y)
                                                            // } else {
                                                            // log("非箱子更新任务")
                                                            // 随机点击2(1103, 680)
                                                            // }
                                                        } else {
                                                            // var fblx = imgempt(true, 0.9, "工会任务箱子|工会任务箱子2|工会积分任务", 378, 471, 273, 101)//
                                                            // if (fblx != null) {
                                                            log("接取任务")
                                                            随机点击2(jizhandi.x, jizhandi.y)
                                                            // } else {
                                                            //     log("非箱子更新任务")
                                                            //     随机点击2(1103, 680)
                                                            // }
                                                        }
                                                    } else {
                                                        var jizhandi = imgempt(true, 0.9, "更新车队指令", 1031, 638, 232, 80)//
                                                        if (jizhandi != null) {
                                                            log("更新车队指令")
                                                            随机点击2(jizhandi.x, jizhandi.y)
                                                        } else {
                                                            var jizhandi = imgempt(true, 0.9, "工会捐献", 609, 527, 248, 147)//
                                                            if (jizhandi != null) {
                                                                var jizhandi = imgempt(true, 0.9, "工会任务未解锁", 353, 61, 224, 96)//
                                                                if (jizhandi != null) {
                                                                    log("工会任务未解锁")
                                                                    接取工会任务时间 = new Date().getDate()
                                                                    var 结果 = 纯回主页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    } else {
                                                                        return "完成"
                                                                    }
                                                                } else {
                                                                    log("捐献页,点击任务页")
                                                                    随机点击2(455, 101)
                                                                }
                                                            } else {
                                                                var jizhandi = imgempt(true, 0.9, "工会图标(菜单)", 958, 87, 321, 499)//
                                                                if (jizhandi != null) {
                                                                    log("点击工会图标");
                                                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                                                } else {
                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                                                    if (手 != null) {
                                                                        log("主页点击菜单");
                                                                        随机点击2(1238, 36, 10, 10)
                                                                    } else {
                                                                        var dtyd = imgempt(true, 0.9, "节电模式任务完成", 428, 567, 204, 67)
                                                                        if (dtyd != null) {
                                                                            log("节电模式任务完成,退出节电")
                                                                            swipe(566, 389, 968, 226, 500)
                                                                        } else {

                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            sleep(200)
        }
    } else {
        return "完成"
    }
}

function 开始灌注() {
    var 第一栏 = true
    var 第二栏 = true
    var 第几个 = 1
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "制造页", 4, 4, 243, 76)
            if (qiagnhua != null) {
                log("返回到灌注页")
                随机点击2(37, 29)
            } else {
                var qiagnhua = imgempt(true, 0.9, "灌注页|灌注页2", 32, 3, 218, 65)
                if (qiagnhua != null) {
                    if (第一栏) {//
                        var qiagnhua = imgempt(true, 0.9, "在第一栏1|在第一栏2|在第一栏3", 96, 341, 1159, 87)
                        if (qiagnhua != null) {
                            var qiagnhua = imgempt(true, 0.9, "第" + 第几个 + "个灌注", 127, 50, 1108, 96)
                            if (qiagnhua != null) {
                                if (qiagnhua.x <= 173) {
                                    log("向左微调")
                                    swipe(182, 266, 356, 273, 2000)
                                } else if (qiagnhua.x >= 1079) {
                                    log("向右微调")
                                    swipe(356, 273, 182, 266, 2000)
                                } else {
                                    var 识别位置x = qiagnhua.x - 147
                                    var 识别位置y = qiagnhua.y + 302
                                    var shibie = imgempt(true, 0.9, "灌注_普通命中|灌注_顶级命中|灌注_普通防|灌注_顶级防|灌注_普通攻击|灌注_顶级攻击", 识别位置x, 识别位置y, 316, 233)//识别想要的
                                    if (shibie != null) {
                                        log("第:" + 第几个 + "为想要属性")
                                        第几个++
                                    } else {
                                        var shibie = cor(true, 12, qiagnhua.x - 145, qiagnhua.y + 454, 331, 75, "#573951", [[21, 0, "#5a3a51"], [38, -1, "#55384e"], [52, 4, "#55354c"], [57, 2, "#583b51"], [86, 2, "#593951"]])////识别是否为紫色
                                        if (shibie != null) {
                                            log("第:" + 第几个 + "为紫色级别")
                                            第几个++
                                        } else {
                                            var shibie = imgempt(true, 0.9, "灌注位未解锁", 识别位置x, 识别位置y, 316, 233)////识别是否开放
                                            if (shibie != null) {
                                                log("灌注位未解锁")
                                                第一栏 = false
                                                第几个 = 1
                                                // var 结果 = 纯回主页()
                                                // if (结果 == "掉线") {
                                                //     return "掉线"
                                                // } else {
                                                //     // alert("完成灌注")
                                                //     参数[31] = false
                                                //     ui.run(function () {
                                                //         ui.单灌注.setChecked(false)
                                                //     });
                                                //     return
                                                // }
                                            } else {
                                                //判断是否有洗练物品
                                                // var shibie = imgempt(true, 0.9, "自动灌注中", 20, 583, 1254, 98)////
                                                // if (shibie != null) {
                                                //     log("自动灌注中")
                                                //     sleep(3000)
                                                // } else {
                                                //     var shibie = imgempt(true, 0.9, "单次灌注", 20, 583, 1254, 98)////
                                                //     if (shibie != null) {
                                                //         log("勾选自动灌注")
                                                //         随机点击2(233, 698)
                                                //     } else {
                                                //         var shibie = imgempt(true, 0.9, "自动灌注", 20, 583, 1254, 98)////
                                                //         if (shibie != null) {
                                                log("点击灌注")
                                                随机点击2(qiagnhua.x - 90, qiagnhua.y + 542)
                                                重复点击坐标次数 = 0
                                                if (第几个 == 3) {
                                                    log("第三个只洗一次")
                                                    第几个++
                                                }
                                                var shibie = imgempt(true, 0.9, "灌注材料不足3|灌注材料不足2|灌注材料不足1", 515, 61, 261, 51)////
                                                if (shibie != null) {
                                                    if (第几个 <= 2) {
                                                        log("绿级材料不足")
                                                        var 结果 = 制作灌注材料("一级绿")
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        } else if (结果 == "材料不足") {
                                                            第几个 = 3
                                                        }
                                                    } else {
                                                        log("蓝级材料不足")
                                                        第一栏 = false
                                                        第几个 = 1
                                                    }
                                                    //  else if (第几个 <= 5) {
                                                    //     log("蓝级材料不足")
                                                    //     var 结果 = 制作灌注材料("一级蓝")
                                                    //     if (结果 == "掉线") {
                                                    //         return "掉线"
                                                    //     } else if (结果 == "材料不足") {
                                                    //         第几个 = 6
                                                    //     }
                                                    // } else {
                                                    //     log("紫级材料不足")
                                                    //     var 结果 = 制作灌注材料("一级紫")
                                                    //     if (结果 == "掉线") {
                                                    //         return "掉线"
                                                    //     } else if (结果 == "材料不足") {
                                                    //         第几个 = 9
                                                    //     }
                                                    // }
                                                } else {
                                                    sleep(1000)
                                                    // swipe(356, 273, 182, 266, 2000)
                                                }
                                                //         } else {

                                                //         }
                                                //     }

                                                // }
                                            }
                                        }
                                    }
                                }
                            } else {
                                if (第几个 <= 3) {
                                    log("划到最前面")
                                    for (let index = 0; index < 3; index++) {
                                        swipe(157, 293, 807, 305, 1000)
                                    }
                                    
                                } else if (第几个 <= 5) {
                                    var qiagnhua = imgempt(true, 0.9, "第2个灌注", 127, 50, 1108, 96)
                                    if (qiagnhua != null) {
                                        log("向右微调")
                                        swipe(639, 275, 505, 275, 2000)
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "第6个灌注", 127, 50, 1108, 96)
                                        if (qiagnhua != null) {
                                            log("向左微调")
                                            swipe(505, 275, 639, 275, 2000)
                                        } else {

                                        }
                                    }
                                } else {
                                    log("划到最后面")
                                    swipe(807, 305, 157, 293, 1000)
                                }
                            }
                        } else {
                            log("点击第一栏")
                            随机点击2(49, 148)
                        }
                    } else if (第二栏) {
                        var qiagnhua = imgempt(true, 0.9, "在第二栏1|在第二栏2|在第二栏3", 96, 341, 1159, 87)
                        if (qiagnhua != null) {
                            var qiagnhua = imgempt(true, 0.9, "第" + 第几个 + "个灌注", 127, 50, 1108, 96)
                            if (qiagnhua != null) {
                                if (qiagnhua.x <= 252) {
                                    log("向左微调")
                                    swipe(182, 266, 356, 273, 2000)
                                } else if (qiagnhua.x >= 1079) {
                                    log("向右微调")
                                    swipe(356, 273, 182, 266, 2000)
                                } else {
                                    var 识别位置x = qiagnhua.x - 147
                                    var 识别位置y = qiagnhua.y + 302
                                    var shibie = imgempt(true, 0.9, "灌注_普通命中|灌注_顶级命中|灌注_普通防|灌注_顶级防|灌注_普通攻击|灌注_顶级攻击", 识别位置x, 识别位置y, 316, 233)//识别想要的
                                    if (shibie != null) {
                                        log("第:" + 第几个 + "为想要属性")
                                        第几个++
                                    } else {
                                        var shibie = cor(true, 12, qiagnhua.x - 145, qiagnhua.y + 454, 331, 75, "#573951", [[21, 0, "#5a3a51"], [38, -1, "#55384e"], [52, 4, "#55354c"], [57, 2, "#583b51"], [86, 2, "#593951"]])////识别是否为紫色
                                        if (shibie != null) {
                                            log("第:" + 第几个 + "为紫色级别")
                                            第几个++
                                        } else {
                                            var shibie = imgempt(true, 0.9, "灌注位未解锁", 识别位置x, 识别位置y, 316, 233)////识别是否开放
                                            if (shibie != null) {
                                                log("灌注位未解锁")
                                                参数[31] = false
                                                ui.run(function () {
                                                    ui.单灌注.setChecked(false)
                                                });
                                                // storage.put("单灌注", false)
                                                // alert("完成灌注")
                                                storage.put("自动灌注随机时间测试", random(24, 48).toString())
                                                storage.put("自动灌注记录时间", (new Date().getTime() / (1000 * 60 * 60)).toString())
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                                return "完成"
                                            } else {
                                                //判断是否有洗练物品
                                                log("点击灌注")
                                                随机点击2(qiagnhua.x - 90, qiagnhua.y + 542)
                                                重复点击坐标次数 = 0
                                                var shibie = imgempt(true, 0.9, "灌注材料不足3|灌注材料不足2|灌注材料不足1", 515, 61, 261, 51)////
                                                if (shibie != null) {
                                                    toastLog("绿级材料不足")
                                                    参数[31] = false
                                                    ui.run(function () {
                                                        ui.单灌注.setChecked(false)
                                                    });
                                                    // storage.put("单灌注", false)
                                                    // alert("完成灌注")

                                                    storage.put("自动灌注随机时间测试", random(24, 48).toString())
                                                    storage.put("自动灌注记录时间", (new Date().getTime() / (1000 * 60 * 60)).toString())
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                    return "完成"
                                                    // if (第几个 <= 2) {
                                                    //     toastLog("绿级材料不足")
                                                    //     var 结果 = 制作灌注材料("一级绿")
                                                    //     if (结果 == "掉线") {
                                                    //         return "掉线"
                                                    //     } else if (结果 == "材料不足") {
                                                    //         第几个 = 3
                                                    //     }
                                                    // } else if (第几个 <= 5) {
                                                    //     toastLog("蓝级材料不足")
                                                    //     var 结果 = 制作灌注材料("一级蓝")
                                                    //     if (结果 == "掉线") {
                                                    //         return "掉线"
                                                    //     } else if (结果 == "材料不足") {
                                                    //         第几个 = 6
                                                    //     }
                                                    // } else {
                                                    //     toastLog("紫级材料不足")
                                                    //     var 结果 = 制作灌注材料("一级紫")
                                                    //     if (结果 == "掉线") {
                                                    //         return "掉线"
                                                    //     } else if (结果 == "材料不足") {
                                                    //         第几个 = 9
                                                    //     }
                                                    // }

                                                    // if (第几个<=2) {
                                                    //     toastLog("绿级材料不足")
                                                    // }else if (第几个<=5) {
                                                    //     toastLog("蓝级材料不足")
                                                    // }else{
                                                    //     toastLog("紫级材料不足")
                                                    // }
                                                } else {
                                                    sleep(1000)
                                                    swipe(356, 273, 182, 266, 2000)
                                                }
                                            }
                                        }
                                    }
                                }

                                if (第几个 > 8) {
                                    第二栏 = false
                                    第几个 = 1
                                    参数[31] = false
                                    ui.run(function () {
                                        ui.单灌注.setChecked(false)
                                    });
                                    // storage.put("单灌注", false)
                                    // alert("完成灌注")
                                    storage.put("自动灌注随机时间测试", random(24, 48).toString())
                                    storage.put("自动灌注记录时间", (new Date().getTime() / (1000 * 60 * 60)).toString())
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                }
                            } else {
                                if (第几个 <= 2) {
                                    log("划到最前面")
                                    for (let index = 0; index < 3; index++) {
                                        swipe(157, 293, 807, 305, 1000)
                                    }
                                } else if (第几个 <= 5) {
                                    var qiagnhua = imgempt(true, 0.9, "第2个灌注", 127, 50, 1108, 96)
                                    if (qiagnhua != null) {
                                        log("向右微调")
                                        swipe(639, 275, 505, 275, 2000)
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "第6个灌注", 127, 50, 1108, 96)
                                        if (qiagnhua != null) {
                                            log("向左微调")
                                            swipe(505, 275, 639, 275, 2000)
                                        } else {

                                        }
                                    }
                                } else {
                                    log("划到最后面")
                                    swipe(807, 305, 157, 293, 1000)
                                }
                            }
                        } else {
                            log("点击第二栏")
                            随机点击2(47, 237)
                        }
                    }
                } else {
                    var qiagnhua = imgempt(true, 0.9, "菜单_灌注|菜单_灌注2", 956, 88, 318, 540)
                    if (qiagnhua != null) {
                        log("点击进入菜单_灌注");
                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击2(1238, 36, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

//
function 坐骑合成及领取() {
    var 合成 = true
    var 领取 = true
    var 穿戴 = true
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "合成结果", 530, 216, 257, 118)
            if (qiagnhua != null) {
                log("点击确认结果")
                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
            } else {

                var bbym = imgempt(true, 0.9, "触摸屏幕关闭|触摸屏幕关闭2", 485, 593, 323, 96)
                if (bbym != null) {
                    log("触摸屏幕关闭")
                    随机点击2(bbym.x, bbym.y)
                } else {

                    var bbym = imgempt(true, 0.9, "获得", 613, 385, 268, 138)
                    if (bbym != null) {
                        log("获得")
                        随机点击2(bbym.x, bbym.y)
                    } else {
                        var bbym = imgempt(true, 0.9, "继续开卡牌|继续开卡牌2", 615, 625, 247, 91)
                        if (bbym != null) {
                            log("继续开卡牌")
                            随机点击2(bbym.x, bbym.y)
                        } else {
                            var bbym = imgempt(true, 0.9, "直接看结果|直接看结果2", 470, 587, 353, 127)
                            if (bbym != null) {
                                log("直接看结果")
                                随机点击2(bbym.x, bbym.y)
                            } else {
                                var bbym = imgempt(true, 0.9, "都打开2", 529, 626, 240, 87)
                                if (bbym != null) {
                                    log("都打开")
                                    随机点击2(bbym.x, bbym.y)
                                } else {
                                    var bbym = imgempt(true, 0.9, "都打开", 537, 638, 242, 74)
                                    if (bbym != null) {
                                        log("都打开")
                                        随机点击2(bbym.x, bbym.y)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "跳过", 1096, 12, 181, 82)
                                        if (bbym != null) {
                                            log("跳过")
                                            随机点击2(bbym.x, bbym.y)
                                        } else {

                                            var lkzh = imgempt(true, 0.9, "离开召唤", 548, 640, 202, 74)
                                            if (lkzh != null) {
                                                log("离开召唤")
                                                var bbym = imgempt(true, 0.9, "跳过召唤动画", 1067, 645, 83, 64)
                                                if (bbym != null) {
                                                    log("跳过召唤动画")
                                                    随机点击2(bbym.x, bbym.y)
                                                } else {
                                                    随机点击2(lkzh.x, lkzh.y)
                                                }
                                            } else {
                                                var qiagnhua = imgempt(true, 0.9, "坐骑页", 3, 2, 198, 85)
                                                if (qiagnhua != null) {
                                                    if (合成) {
                                                        var qiagnhua = imgempt(true, 0.9, "获得合成次数补偿", 93,531,164,185)
                                                        if (qiagnhua != null) {
                                                            log("点击合成次数补偿")
                                                            随机点击2(qiagnhua.x, qiagnhua.y)
                                                        }else{


                                                        var qiagnhua = imgempt(true, 0.9, "坐骑合成|坐骑合成2", 239, 645, 224, 73)
                                                        if (qiagnhua != null) {
                                                            log("点击坐骑合成");
                                                            随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                            var qiagnhua = imgempt(true, 0.9, "无可合成|无可合成2", 271, 52, 521, 65)
                                                            if (qiagnhua != null) {
                                                                log("合成完毕")
                                                                合成 = false
                                                            } else {
                                                                随机点击2(525, 677, 10, 10)
                                                            }
                                                        } else {
                                                            log("点击合成页")
                                                            随机点击2(274, 98, 10, 10)
                                                        }}
                                                    } else if (领取) {//
                                                        var qiagnhua = imgempt(true, 0.9, "确定领取坐骑", 614, 370, 281, 171)
                                                        if (qiagnhua != null) {
                                                            log("点击确定领取坐骑");
                                                            随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                        } else {
                                                            var qiagnhua = imgempt(true, 0.9, "无可领取的坐骑", 533, 286, 221, 202)
                                                            if (qiagnhua != null) {
                                                                log("无可领取的坐骑");
                                                                领取 = false
                                                            } else {
                                                                var qiagnhua = imgempt(true, 0.9, "领取坐骑", 50, 560, 748, 80)
                                                                if (qiagnhua != null) {
                                                                    log("点击领取坐骑");
                                                                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                                } else {
                                                                    log("点击坐骑领取页")
                                                                    随机点击2(630, 94, 10, 10)
                                                                }
                                                            }
                                                        }
                                                    } else if (穿戴) {//
                                                        var qiagnhua = imgempt(true, 0.9, "安装效果|安装效果2", 14, 197, 225, 317)
                                                        if (qiagnhua != null) {
                                                            var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                                                            if (zhuxian != null) {
                                                                log("退出")
                                                                随机点击(1240, 29)
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "完成"
                                                                }
                                                            } else {
                                                                log("点击装备滑翔机或武器装扮")
                                                                随机点击(885, 236)
                                                                随机点击2(1156, 677)
                                                            }
                                                        } else {
                                                            log("点击坐骑穿戴页")
                                                            随机点击2(98, 100, 10, 10)
                                                        }
                                                    }
                                                } else {
                                                    var qiagnhua = imgempt(true, 0.9, "菜单_坐骑|菜单_坐骑2", 956, 88, 318, 540)
                                                    if (qiagnhua != null) {
                                                        log("点击进入菜单_坐骑");
                                                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                                    } else {
                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                                        if (手 != null) {
                                                            log("主页点击菜单");
                                                            随机点击2(1238, 36, 10, 10)
                                                        } else {

                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 检查委托红点() {
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "菜单_坐骑|菜单_坐骑2", 956, 88, 318, 540)
            if (qiagnhua != null) {
                var zhuxian = imgempt(true, 0.9, "委托红点", 1016, 289, 113, 126)
                if (zhuxian != null) {
                    log("委托红点")
                    var 结果 = 委托红点处理()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "已领取"
                } else {
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "无红点"
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击2(1238, 36, 10, 10)
                } else {

                }
            }

        }
        sleep(200)
    }
}


function 委托红点处理() {
    var 找不到可领取的委托 = 0
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {

            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(640, 429)
            } else {

                var zhuxian = imgempt(true, 0.9, "委托红点", 1016, 289, 113, 126)
                if (zhuxian != null) {
                    log("点击委托红点")
                    随机点击2(zhuxian.x, zhuxian.y + 20)
                } else {
                    var zhuxian = imgempt(true, 0.9, "装备委托页", 927, 199, 260, 132)
                    if (zhuxian != null) {
                        log("点击装备委托")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "领取委托奖励委托页", 89, 109, 156, 132)
                        if (zhuxian != null) {
                            log("整个")
                            随机点击2(286, 96)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "确定领取委托奖励", 549, 486, 214, 107)
                            if (zhuxian != null) {
                                log("确定领取委托奖励")
                                随机点击2(zhuxian.x, zhuxian.y)
                            } else {
                                var zhuxian = imgempt(true, 0.9, "回收委托", 873, 615, 193, 93)
                                if (zhuxian != null) {
                                    log("回收委托")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                    for (let index = 0; index < 3; index++) {
                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                        if (bbkjbztc != null) {
                                            log("背包空间不足弹窗")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                var 结果 = 清理背包()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    break
                                                }
                                            }
                                        }
                                        sleep(200)
                                    }
                                    纯回主页()
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "领取委托奖励", 930, 609, 265, 100)
                                    if (zhuxian != null) {
                                        log("领取委托奖励")
                                        随机点击2(zhuxian.x, zhuxian.y)
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("已经回到主页");
                                            return
                                        } else {
                                            找不到可领取的委托++
                                            if (找不到可领取的委托 >= 10) {
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 属性点提升() {
    var 结果 = 识别提升属性点()
    if (结果 == "掉线") {
        return "掉线"
    } else {
        var 结果 = 开始提升属性点(结果)
        if (结果 == "掉线") {
            return "掉线"
        } else {
            return "完成"
        }
    }

}
function 开始提升属性点(params) {
    var 未点击 = true
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "0属性点", 553, 110, 197, 125)
            if (qiagnhua != null) {
                if (未点击) {
                    log("无点可加")

                } else {
                    随机点击2(693, 609, 10, 10)
                }
                var 已有属性值 = findNumber("属性值", [451, 396, 89, 56])
                if (已有属性值 != null) {
                    var 当前等级 = 29 + parseInt(已有属性值)
                    var json = {
                        "设备id": 设备id,
                        "type": "等级",
                        "当前等级": 当前等级
                    }
                    发送数据至中控("fragmentaryState", json)
                    storage.put("识别的等级", 当前等级.toString())
                } else {
                    log("没识别到属性点")
                }
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "完成"
                }

            } else {
                var qiagnhua = imgempt(true, 0.9, "可右加点", 444, 234, 223, 305)
                if (qiagnhua != null) {
                    log("点击加点");
                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                } else {
                    var qiagnhua = imgempt(true, 0.9, "菜单_属性点|菜单_属性点2", 956, 88, 318, 540)
                    if (qiagnhua != null) {
                        log("点击进入菜单_属性点");
                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击2(1238, 36, 10, 10)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "信念传承页(中间)", 543, 391, 213, 198)
                            if (zhuxian != null) {
                                未点击 = false
                                log("点击加天赋")
                                if (params == "近战") {
                                    随机点击2(469, 292, 10, 10)
                                } else if (params == "远程") {
                                    随机点击2(486, 384, 10, 10)
                                } else if (params == "法师") {
                                    随机点击2(548, 477, 10, 10)
                                } else {
                                    log("没有该类型职业")
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 识别提升属性点() {
    var 职业 = ""
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "职业页", 2, 3, 230, 81)
            if (qiagnhua != null) {
                log("职业页");//
                var qiagnhua = imgempt(true, 0.9, "弓手职业", 132, 436, 164, 52)
                if (qiagnhua != null) {
                    log("弓手职业");//弓手职业
                    职业 = "远程"
                } else {
                    var qiagnhua = imgempt(true, 0.9, "法师职业", 7, 195, 114, 105)
                    if (qiagnhua != null) {
                        log("法师职业");//弓手职业
                        职业 = "法师"
                    } else {
                        职业 = "近战"
                    }
                }
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                }
                return 职业
            } else {
                var qiagnhua = imgempt(true, 0.9, "菜单_职业", 956, 88, 318, 540)//956,88,318,540
                if (qiagnhua != null) {
                    log("点击进入菜单_职业");
                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击2(1238, 36, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 搜索购买(购买物品信息集合) {//购买物品信息集合.物品名称  --- 购买物品信息集合.限制单价 ----购买物品信息集合.限制总价  ---- 购买物品信息集合.限购数量
    var 滑动次数 = 0
    var 购买数量 = 0
    var 已购买物资 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("点击交易所");
                随机点击(cdjys.x, cdjys.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var pmhss = imgempt(true, 0.9, "拍卖行购买物品弹窗|拍卖行购买物品弹窗2", 524, 67, 257, 115)//
                    if (pmhss != null) {
                        var 属于物资 = false
                        var pmhss = imgempt(true, 0.9, "拍卖行购买弹窗_每个", 731, 209, 239, 56)//
                        if (pmhss != null) {
                            属于物资 = true
                        }
                        log("点击购买");
                        随机点击(730, 588)
                        if (属于物资) {
                            log("购买类型为物资类")
                            for (let index = 0; index < 5; index++) {
                                var pmhss = imgempt(true, 0.9, "购买成功提升", 513, 51, 273, 71)//
                                if (pmhss != null) {
                                    已购买物资 = 已购买物资 + 购买数量
                                    if (已购买物资 >= 购买物品信息集合[0].限购数量) {
                                        log(购买物品信息集合[0].物品名称 + "购买完成")//
                                        购买数量 = 0
                                        已购买物资 = 0
                                        购买物品信息集合 = 购买物品信息集合.slice(1)
                                        var 结果 = 退出回到搜索页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    } else {
                                        toastLog("已购买" + 购买物品信息集合[0].物品名称 + "数量:" + 已购买物资)
                                    }
                                    break
                                }
                                sleep(200)
                            }
                        } else {
                            log("购买类型为装备类")
                            购买数量 = 0
                            已购买物资 = 0
                            购买物品信息集合 = 购买物品信息集合.slice(1)
                            var 结果 = 退出回到搜索页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        }
                    } else {
                        var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                        if (pmhss != null) {
                            log("主页搜索");
                            随机点击(pmhss.x, pmhss.y, 10, 10)
                        } else {
                            var pmhss = imgempt(true, 0.9, "请输入检索词|请输入检索词2|请输入检索词3", 40, 60, 169, 81)//请输入检索词
                            if (pmhss != null) {
                                log("点击输入检索词");
                                if (购买物品信息集合.length != 0) {
                                    随机点击(pmhss.x, pmhss.y, 10, 10)
                                    setText(购买物品信息集合[0].物品名称)
                                    sleep(1000)
                                    随机点击(198, 187)
                                } else {
                                    log("购买完成")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "购买完成"
                                    }
                                }
                            } else {
                                var pmhss = imgempt(true, 0.9, "拍卖行精工", 723, 134, 159, 68)//
                                if (pmhss != null) {
                                    log("装备类")
                                    var 单价 = findNumber("夜鸦拍卖行", [987, 189, 193, 75]);
                                    if (单价 != null) {
                                        if (parseFloat(单价) <= 购买物品信息集合[0].限制总价) {
                                            log("价格:" + 单价)
                                            随机点击(703, 228)
                                        } else {
                                            log("高于限制价格:" + 单价)
                                            购买物品信息集合 = 购买物品信息集合.slice(1);
                                            已购买物资 = 0
                                            var 结果 = 退出回到搜索页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }
                                    } else {
                                        log("未找到价格")
                                        swipe(797, 393, 789, 346, 2000)
                                    }
                                } else {
                                    var pmhss = imgempt(true, 0.9, "拍卖行每个售价", 633, 135, 341, 64)//
                                    if (pmhss != null) {
                                        log("识别价格")
                                        var pmhss1 = imgempt(true, 0.9, "拍卖价零数量", 1088, 184, 112, 75)//
                                        if (pmhss1 != null) {
                                            toastLog("拍卖行无货")
                                            随机点击(1237, 95)
                                            购买物品信息集合 = 购买物品信息集合.slice(1);
                                            已购买物资 = 0
                                            var 结果 = 退出回到搜索页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            var 初始Y = 189
                                            for (let index = 0; index < 6; index++) {
                                                购买数量 = 0
                                                var 单价 = findNumber("夜鸦拍卖行", [704, 初始Y, 145, 74]);
                                                if (单价 != null && 单价 >= 购买物品信息集合[0].限制单价) {
                                                    log("超出单价限制3,识别单价:" + 单价)
                                                    购买物品信息集合 = 购买物品信息集合.slice(1);
                                                    已购买物资 = 0
                                                    var 结果 = 退出回到搜索页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                } else {
                                                    var 总价 = findNumber("夜鸦拍卖行", [971, 初始Y, 145, 74]);
                                                    if (总价 != null) {
                                                        if (parseFloat(总价) <= 购买物品信息集合[0].限制总价) {
                                                            log("价格:" + 总价)
                                                            var 识别数量 = findNumber("钻石铜钱数", [312, 初始Y + 10, 39, 74])
                                                            if (识别数量 != null) {
                                                                log("识别到数量:" + 识别数量)
                                                                购买数量 = parseInt(识别数量)
                                                                随机点击(971, 初始Y + 37)
                                                            } else {
                                                                log('未找到数量,判定为1')
                                                                购买数量 = 1
                                                                随机点击(971, 初始Y + 37)
                                                            }
                                                            break
                                                        } else {
                                                            log("高于限制价格:" + 总价)
                                                            if (index == 5) {
                                                                if (滑动次数 >= 4) {
                                                                    log("未找到指定价格物品")
                                                                    滑动次数 = 0
                                                                    购买物品信息集合 = 购买物品信息集合.slice(1);
                                                                    已购买物资 = 0
                                                                    var 结果 = 退出回到搜索页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    }
                                                                }
                                                                滑动次数++
                                                                swipe(697, 508, 699, 300, 2000)
                                                                sleep(2000)
                                                            }
                                                        }
                                                    } else {
                                                        log("未找到价格")
                                                        swipe(797, 393, 789, 346, 2000)
                                                    }
                                                }
                                                初始Y = 初始Y + 74
                                            }
                                        }
                                    } else {
                                        var pmhss = imgempt(true, 0.9, "拍卖行信息钻石图标", 551, 187, 689, 79)//
                                        if (pmhss != null) {
                                            log("点进" + 购买物品信息集合[0].物品名称 + "详细")
                                            随机点击2(pmhss.x, pmhss.y)
                                        } else {
                                            // var pmhss = imgempt(true, 0.9, "拍卖行搜索", 925, 54, 161, 85)//
                                            // if (pmhss != null) {
                                            //     log("主页搜索");
                                            //     随机点击(pmhss.x, pmhss.y, 10, 10)
                                            // } else {
                                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                            if (jdmsz != null) {
                                                log("搜索购买,退出节电")
                                                swipe(566, 389, 968, 226, 500)
                                            } else {
                                                log("啥也没找到")
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 开始二转() {
    var 需要购买数量 = 0
    var 非弓箭手 = 0
    var 开启铜钱箱子 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 488, 240, 62, 244)
            if (dinwei != null) {
                log("物品信息(获取方式),点击跳转");
                随机点击(dinwei.x + 41, dinwei.y + 9, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制造拍卖行天平图标|制造拍卖行天平图标2", 619, 486, 625, 151)
                if (jizhandi != null) {
                    log("点击跳转到拍卖行")
                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    var 结果 = 跳转购买("普通红色徽章", 需要购买数量)
                    if (结果 == "掉线") {
                        return "掉线"
                    } else if (结果 == "钻石不足") {
                        return "材料不足"
                    } else if (结果 == "无货") {
                        return "材料不足"
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)
                    if (jizhandi != null) {
                        log("还在拍卖行页,点击退出")
                        随机点击(37, 32, 10, 10)
                    } else {
                        var jizhandi = imgempt(true, 0.9, "制作图标", 109, 77, 80, 57)
                        if (jizhandi != null) {
                            var laolian = imgempt(true, 0.9, "二转书详细(制造)", 666, 349, 210, 103)
                            if (laolian != null) {
                                var laolian = imgempt(true, 0.9, "紫级红色徽章(制造)", 590, 478, 166, 113)
                                if (laolian != null) {
                                    swipe(774, 605, 769, 523, 500)
                                    sleep(2000)
                                    log("识别紫色徽章数量");
                                    var 当前数量 = findNumber("钻石铜钱数第二套", [685, 519, 67, 36]);
                                    if (当前数量 != null) {
                                        已有数量 = parseInt(当前数量.slice(0, -1))
                                        log("紫色徽章数量:" + 已有数量)
                                        if (已有数量 >= 3) {
                                            log("紫级红色徽章充足,识别黄石头")
                                            var 当前数量 = findNumber("钻石铜钱数第二套", [688, 586, 65, 35]);
                                            if (当前数量 != null) {
                                                已有数量 = parseInt(当前数量.slice(0, -2))
                                                log("黄石头数量:" + 已有数量)
                                                if (已有数量 >= 50) {
                                                    log("黄石头充足")
                                                    var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                                    if (tongqian != null) {
                                                        var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                                        if (当前铜钱数量 != "false") {
                                                            if (当前铜钱数量 >= 3500000) {
                                                                var 当前数量 = findNumber("钻石铜钱数第二套", [986, 520, 91, 33]);
                                                                if (当前数量 != null) {
                                                                    已有数量 = parseInt(当前数量.slice(0, -2))
                                                                    log("普通红色徽章数量:" + 已有数量)
                                                                    if (已有数量 >= 70) {
                                                                        log("普通红色徽章充足")
                                                                        log("点击制造")
                                                                        随机点击(1043, 662)
                                                                        sleep(3000)
                                                                        var 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        }
                                                                    } else {
                                                                        log("普通红色徽章不足")
                                                                        var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                                                        if (dinbuzuanshi1 != null) {
                                                                            var 当前钻石数量 = findNumber("钻石铜钱数", [dinbuzuanshi1.x, 1, 98, 45]);
                                                                            if (当前钻石数量 != null) {
                                                                                if (当前钻石数量 != null && 当前钻石数量 >= 500) {
                                                                                    log("可用钻石为:" + 当前钻石数量)
                                                                                    log("点击跳转购买")
                                                                                    随机点击(1069, 522, 10, 10)
                                                                                    需要购买数量 = 70 - 已有数量
                                                                                } else {
                                                                                    log("购买条件不符合,当前钻石数量:" + 当前钻石数量)
                                                                                    var 结果 = 纯回主页()
                                                                                    if (结果 == "掉线") {
                                                                                        return "掉线"
                                                                                    } else {
                                                                                        return "材料不足"
                                                                                    }
                                                                                }
                                                                            } else {
                                                                                toastLog()("未找到当前已有钻石")
                                                                                sleep(3000)
                                                                            }
                                                                        }
                                                                    }
                                                                } else {
                                                                    log("未能识别到普通红色徽章数量")
                                                                }
                                                            } else {
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                }
                                                                var 结果 = 使用背包物品("钱箱子")
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                }
                                                                var 结果 = 纯回主城()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    var 结果 = 出售钱袋子("回主页")
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    }
                                                                    var 结果 = 判断金币数量()
                                                                    if (结果 != "掉线") {
                                                                        if (结果.铜钱 >= 3600000) {
                                                                            log("达到转职条件")
                                                                        } else if (结果.钻石 >= 400) {
                                                                            log("铜钱不足,前往购买钱袋子")
                                                                            var 需购数量 = Math.ceil((3600000 - 结果.铜钱) / 70000) //向上取整
                                                                            log("需要购买的钱袋子数量:" + 需购数量)
                                                                            var 结果 = 搜索购买([{ 物品名称: "사금 주머니", 限制单价: 10, 限制总价: 30, 限购数量: 需购数量 }])//사금 주머니  :钱袋子名称
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                            var 结果 = 出售钱袋子("回主页")
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                            // var 结果 = 判断金币数量()
                                                                            // if (结果 != "掉线") {
                                                                            //     if (结果.铜钱 <= 3600000) {
                                                                            //         log("还是达不到条件,放弃二转")
                                                                            //         var 结果 = 纯回主页()
                                                                            //         if (结果 == "掉线") {
                                                                            //             return "掉线"
                                                                            //         } else {
                                                                            //             return "完成"
                                                                            //         }
                                                                            //     }
                                                                            // } else {
                                                                            //     return "掉线"
                                                                            // }
                                                                        } else {
                                                                            log("铜钱及钻石不足,放弃二转")
                                                                            return "材料不足"
                                                                        }
                                                                    } else {
                                                                        return "掉线"
                                                                    }
                                                                }
                                                            }
                                                        } else {
                                                            log("未能识别到铜钱数量")
                                                        }
                                                    } else {
                                                        log("未能识别到铜钱图标")
                                                    }
                                                } else {
                                                    log("黄石头不足,且无法购买")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "完成"
                                                    }
                                                }
                                            } else {
                                                log("未识别到黄石头数量")
                                            }
                                        } else {
                                            log("紫级红色徽章不足,且无法购买")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                            // if (购买记录) {
                                            //     alert("紫级红色徽章不足,且无法购买")
                                            //     参数[37] = false
                                            //     ui.run(function () {
                                            //         ui.二转.setChecked(false)
                                            //     });
                                            //     // storage.put("二转", 二转)
                                            //     var 结果 = 纯回主页()
                                            //     if (结果 == "掉线") {
                                            //         return "掉线"
                                            //     } else {
                                            //         return "完成"
                                            //     }
                                            // } else {
                                            //     log("紫级红色徽章不足,前往换购")
                                            //     var 结果 = 前往激战地兑换材料箱("紫级徽章")
                                            //     if (结果 == "掉线") {
                                            //         return "掉线"
                                            //     } else {
                                            //         购买记录 = true
                                            //     }
                                            // }
                                        }
                                    } else {
                                        log("未能识别到紫级红色徽章数量")
                                    }
                                } else {
                                    log("紫级红色徽章(制造)")
                                    swipe(762, 528, 736, 614, 500)
                                }
                            } else {
                                var laolian = imgempt(true, 0.9, "二转书列表(制造)", 187, 97, 375, 447)
                                if (laolian != null) {
                                    log("点击二转书列表")
                                    随机点击2(laolian.x, laolian.y, 10, 10)
                                } else {
                                    log("没有找到二转书列表")
                                }
                            }
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "职业页", 2, 3, 230, 81)
                            if (qiagnhua != null) {
                                log("职业页");//
                                var qiagnhua = imgempt(true, 0.9, "确认二转", 649, 409, 171, 101)
                                if (qiagnhua != null) {
                                    log("确认二转")
                                    随机点击(qiagnhua.x, qiagnhua.y)
                                } else {
                                    var qiagnhua = imgempt(true, 0.9, "职业页E", 187, 137, 101, 210)
                                    if (qiagnhua != null) {
                                        log("已二转")
                                        storage.put("二转记录", "已二转")
                                        // 参数[37] = false
                                        // ui.run(function () {
                                        //     ui.二转.setChecked(false)
                                        // });
                                        // storage.put("二转", 二转)
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "成功"
                                        }
                                    } else {
                                        var qiagnhua = imgempt(true, 0.9, "弓箭手一转", 131, 375, 247, 80)
                                        if (qiagnhua != null) {
                                            log("弓箭手一转")
                                            log("点击二转并点击转职书")
                                            随机点击(242, 193)
                                            sleep(1500)
                                            var shibie = cor(true, 12, 1034, 555, 134, 64, "#c25b51", [[-1, 6, "#c25b51"], [11, -5, "#c25b51"], [11, 5, "#b6564d"]])////识别是否为红色45等级
                                            if (shibie != null) {
                                                log("等级不足")
                                                // 参数[37] = false
                                                // ui.run(function () {
                                                //     ui.二转.setChecked(false)
                                                // });
                                                // storage.put("二转", 二转)
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "成功"
                                                }
                                            } else {
                                                var qiagnhua = imgempt(true, 0.9, "转职页没有二转书", 1139, 614, 107, 69)
                                                if (qiagnhua != null) {
                                                    log("没有转职书,点击跳转")
                                                    随机点击(1012, 646)
                                                } else {
                                                    log("点击转职")
                                                    随机点击(149, 667)
                                                }
                                            }
                                        } else {
                                            非弓箭手++
                                            log("非弓箭手")
                                            if (非弓箭手 >= 3) {
                                                log("非弓箭手，不再二转")
                                                storage.put("二转记录", "已二转")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "成功"
                                                }
                                            }
                                        }
                                    }
                                }


                            } else {
                                var qiagnhua = imgempt(true, 0.9, "菜单_职业", 956, 88, 318, 540)//956,88,318,540
                                if (qiagnhua != null) {
                                    log("点击进入菜单_职业");
                                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击2(1238, 36, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



//零小血药

function 放置血药() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                log("主页点击背包");
                随机点击(1115, 31, 10, 10)
            } else {
                var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
                if (zhuangbei != null) {
                    log("全部栏或装备栏");
                    随机点击(1246, 308, 10, 10)
                } else {
                    var bbym = imgempt(true, 0.9, "小药详细|小药详细2|中药详细|中药详细2", 562, 96, 161, 136)
                    if (bbym != null) {
                        log("点击放入")
                        随机点击(684, 659, 10, 10)
                        return "成功"
                    } else {
                        var zhuangbei = imgempt(true, 0.9, "快捷放入(勾选)", 905, 533, 111, 88)
                        if (zhuangbei != null) {
                            var bbym = imgempt(true, 0.8, "小药水(背包)|小药水(背包)2|小药水(背包闪烁)|中药水(背包)|中药水(背包闪烁)|中药水(背包)2", 920, 114, 291, 376)//
                            if (bbym != null) {
                                log("点击药水")
                                随机点击(bbym.x, bbym.y)
                            } else {
                                var bbym = cor(true, 25, 918, 115, 292, 410, "#a8a3a0", [[-1, 20, "#e9e6e1"], [-1, 21, "#eae5e2"], [-1, 26, "#f5e0db"], [-1, 30, "#f1e2dd"], [0, 30, "#eee3df"], [3, 20, "#3f0708"], [5, 18, "#ca9da0"], [6, 11, "#b8ada9"]])
                                if (bbym != null) {
                                    log("点击中药水")
                                    随机点击(bbym.x, bbym.y)
                                } else {
                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                    if (bbym != null) {
                                        log("没有血药")
                                        var 结果 = 回城买药()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    } else {
                                        log("下滑背包")
                                        swipe(1062, 450, 1063, 300, 2000)
                                        sleep(2000)
                                    }
                                }
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                            if (bbym != null) {
                                log("点击快捷放入")
                                随机点击(947, 576)
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 传送到任务点() {
    var 未识别 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确定传送|确定传送2", 627, 427, 228, 127)
            if (zhuxian != null) {
                log("确定传送");
                随机点击2(zhuxian.x, zhuxian.y)
                return "已传送"
            } else {
                var zhuxian = imgempt(true, 0.9, "岩壁的土木屋详细|讨伐山崖入口详细", 888, 138, 265, 126)
                if (zhuxian != null) {//
                    log("岩壁的土木屋详细");
                    var zhuxian = imgempt(true, 0.9, "接受日任务", 844, 614, 209, 91)
                    if (zhuxian != null) {//接受日任务
                        log("接受日任务");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "任务瞬间移动|任务瞬间移动2", 1037, 623, 204, 80)
                        if (zhuxian != null) {//接受日任务
                            log("任务瞬间移动");
                            随机点击2(zhuxian.x, zhuxian.y)
                        } else {

                        }
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "岩壁的土木屋|讨伐山崖入口", 216, 245, 404, 188)
                    if (zhuxian != null) {
                        log("日任务巴斯锂");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "日任务巴斯锂", 3, 124, 195, 339)
                        if (zhuxian != null) {
                            log("日任务巴斯锂");
                            随机点击2(zhuxian.x, zhuxian.y)
                        } else {
                            // var pdsfcs = CoordinatesAndPictureName(true, 0.9, "前往巴斯锂|前往巴斯锂2|前往巴斯锂3", 943, 84, 114, 47)//判断是否传送
                            var pdsfcs = imgempt(true, 0.9, "巴斯锂任务(全称)|巴斯锂任务1(全称)|巴斯锂任务2(全称)|巴斯锂任务3(全称)|巴斯锂任务4(全称)", 945, 83, 145, 43)
                            if (pdsfcs != null) {
                                log("长按巴斯锂任务")
                                swipe(pdsfcs.x, pdsfcs.y, pdsfcs.x + 2, pdsfcs.y, 2000)
                            } else {
                                var zhuxian = imgempt(true, 0.9, "任务详细(巴斯锂)|任务详细(巴斯锂)2", 941, 152, 209, 79)
                                if (zhuxian != null) {
                                    log("点击日任务");
                                    随机点击2(637, 100)
                                    重复点击坐标次数 = 0
                                    sleep(3000)
                                } else {
                                    未识别++
                                    if (未识别 >= 3) {
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            log("误识别巴斯锂")
                                            return "误识别"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 地图传送(mode) {
    var 跳转成功 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            if (mode == "切拉诺") {
                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                if (qrtz != null) {
                    log("确认跳转");
                    随机点击(qrtz.x, qrtz.y, 10, 10)
                    跳转成功 = true
                } else {
                    var dtl = imgempt(true, 0.9, "切拉诺地图", 1003, 35, 220, 119)
                    if (dtl != null) {
                        var dtl = imgempt(true, 0.9, "地图_切拉诺村主城|地图_切拉诺村主城2", 930, 148, 274, 406)
                        if (dtl != null) {
                            log("点击进入地图_切拉诺村主城")
                            随机点击(dtl.x, dtl.y, 10, 10)
                        } else {
                            log("没找到地图_切拉诺村主城,滑动上去找找")
                            swipe(1072, 332, 1090, 622, 500)
                        }

                    } else {
                        var dtl = imgempt(true, 0.9, "大地图_切拉诺", 325, 128, 532, 370)
                        if (dtl != null) {
                            log("点击进入大地图_切拉诺")
                            随机点击(dtl.x + 10, dtl.y - 35, 10, 10)
                        } else {
                            var dtl = imgempt(true, 0.9, "大地图图标", 531, 638, 119, 77)
                            if (dtl != null) {
                                log("点击进入大地图")
                                随机点击(dtl.x, dtl.y, 10, 10)
                            } else {
                                var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                if (dtgbzt != null) {
                                    log("地图关闭状态,点击打开");
                                    随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                } else {
                                    var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                    if (dtdkzt != null) {
                                        if (跳转成功) {
                                            log("跳转成功了")
                                            return "成功"
                                        } else {
                                            log("点击地图");
                                            随机点击(139, 150, 10, 10)
                                            sleep(random(1000, 3000))
                                        }
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                发送异常("无此传送地点")
                alert("无此传送地点")
            }
        }
        sleep(200)
    }
}

function 发送异常(params) {
    var json = {
        "设备id": 设备id,
        "type": "异常",
        "异常信息": params
    }
    发送数据至中控("fragmentaryState", json)
}
// 

function 主城购买决心技能() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中")
                sleep(3000)
            } else {
                var dtdkzt = imgempt(true, 0.9, "基础技能商店_NPC", 10, 59, 293, 356)
                if (dtdkzt != null) {
                    log("点击基础技能商店")
                    随机点击2(dtdkzt.x, dtdkzt.y)
                } else {//
                    var dtdkzt = imgempt(true, 0.9, "购买_技能书", 632, 572, 225, 120)
                    if (dtdkzt != null) {
                        log("点击购买_技能书")
                        随机点击2(dtdkzt.x, dtdkzt.y)
                    } else {//
                        var dtdkzt = imgempt(true, 0.9, "危机感知_背包", 919, 114, 306, 534)
                        if (dtdkzt != null) {
                            log("购买成功")
                            购买决心技能 = false
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "成功"
                            }
                        } else {
                            var dtdkzt = imgempt(true, 0.9, "危机感知_商店", 10, 115, 348, 569)
                            if (dtdkzt != null) {
                                log("危机感知_商店")
                                var bbym = cor(true, 12, 7, 432, 335, 260, "#153740", [[-5, 7, "#c1ccbc"], [-5, 12, "#27576e"], [-5, 17, "#19434f"], [14, 1, "#2b4037"], [18, 10, "#284438"], [168, -1, "#73b4a0"], [144, 0, "#8cb5a7"], [187, 3, "#8cb4a9"]])
                                if (bbym != null) {
                                    log("危机感知_商店,点击技能");
                                    随机点击2(dtdkzt.x, dtdkzt.y)
                                } else {
                                    log("危机感知_已有");
                                    购买决心技能 = false
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "成功"
                                    }
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


// function 兑换礼包码() {
//     var 输入次数 = 0
//     while (true) {
//         if (异常捕获() == "掉线") {
//             return "掉线"
//         } else {//
//             var shezhi = imgempt(true, 0.9, "请输入优惠卷号码", 960,616,297,97)
//             if (shezhi != null) {
//                 log("点击输入兑换号码");
//                 随机点击(623,360)
//                 if (输入次数==0) {

//                 }else if (输入次数==1) {

//                 }else if (输入次数==2) {

//                 }else if (输入次数 ==3) {

//                 }else{

//                 }
//                 setText()
// }else{
//             var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
//             if (手 != null) {
//                 log("主页点击菜单");
//                 随机点击(1238, 36, 10, 10)
//             } else {
//                 var shezhi = imgempt(true, 0.9, "设置图标|设置图标2", 960,616,297,97)
//                 if (shezhi != null) {
//                     log("点击设置");
//                     随机点击(shezhi.x, shezhi.y, 10, 10)
//                 } else { 
//                     var shezhi = imgempt(true, 0.9, "设置页", 18, 2, 188, 80)
//                     if (shezhi != null) {
//                         var shezhi = imgempt(true, 0.9, "会员号码", 12,299,193,101)
//                         if (shezhi != null) {
//                             log("会员页,点击礼包兑换")
//                             随机点击(1160,436)
//                         }else{
//                             log("不在会员页")
//                         }
//                     }else{

//                     }
//                 }
//             }
//         }
//         sleep(200)
//     }
// }


function 主线前往周副本() {
    log("前往周本任务")
    var 伊丽塔神殿点击次数 = 0
    var 跳转成功 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
            if (qrtz != null) {
                log("确认跳转");
                随机点击(qrtz.x, qrtz.y, 10, 10)
                伊丽塔神殿点击次数 = 0
                跳转成功 = true
                sleep(random(5, 10) * 1000)
            } else {
                var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                if (fuben != null) {
                    log("点击副本");
                    随机点击(fuben.x, fuben.y, 10, 10)
                } else {
                    var fnzd = imgempt(true, 0.9, "伊丽塔神殿|伊丽塔神殿2", 338, 128, 247, 93)
                    if (fnzd != null) {
                        log("伊丽塔神殿");
                        var hysj = imgempt(true, 0.9, "还有时间", 551, 203, 205, 71)
                        if (hysj != null) {
                            log("周副本还有时间");
                            var fb35j = imgempt(true, 0.9, "副本30级|副本30级2", 884, 131, 263, 99)
                            if (fb35j != null) {
                                log("副本30级");
                                随机点击(fb35j.x, fb35j.y, 10, 10)
                                跳转成功 = false
                                伊丽塔神殿点击次数++
                                if (伊丽塔神殿点击次数 >= 6) {
                                    伊丽塔神殿点击次数 = 0
                                    随机点击(1241, 33, 10, 10)
                                    log("周副本跳转失败")
                                    return
                                }
                            } else {
                                log("没找到35级等级")
                            }
                        } else {
                            发送异常("注意,周本没时间了")
                            alert("注意,周本没时间了")
                        }
                    } else {
                        var rfbfnzd = imgempt(true, 0.9, "周副本_伊丽塔神殿选项|周副本_伊丽塔神殿选项2", 3, 122, 336, 576)
                        if (rfbfnzd != null) {
                            log("周副本_伊丽塔神殿选项");
                            随机点击(rfbfnzd.x, rfbfnzd.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                if (跳转成功) {
                                    log("已跳转")
                                    return
                                } else {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
    }
}

function 主线前往经验本() {
    log("前往周本任务")
    var 伊丽塔神殿点击次数 = 0
    var 跳转成功 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
            if (qrtz != null) {
                log("确认跳转");
                随机点击(qrtz.x, qrtz.y, 10, 10)
                伊丽塔神殿点击次数 = 0
                跳转成功 = true
                sleep(random(5, 10) * 1000)
            } else {
                var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                if (fuben != null) {
                    log("点击副本");
                    随机点击(fuben.x, fuben.y, 10, 10)
                } else {
                    var fnzd = imgempt(true, 0.9, "圣科纳遗址|圣科纳遗址2|圣科纳遗址3", 330, 131, 244, 93)
                    if (fnzd != null) {
                        log("圣科纳遗址");
                        var rfbfnzd = imgempt(true, 0.9, "经验本没时间了|经验本未解锁|日副本没时间了2", 24, 543, 213, 136)
                        if (rfbfnzd != null) {
                            alert("经验本没时间或者未解锁")
                            exit()
                        } else {
                            var fb35j = imgempt(true, 0.9, "副本40级2", 884, 131, 263, 99)
                            if (fb35j != null) {
                                log("副本40级");
                                随机点击(fb35j.x, fb35j.y, 10, 10)
                                跳转成功 = false
                                伊丽塔神殿点击次数++
                                if (伊丽塔神殿点击次数 >= 6) {
                                    伊丽塔神殿点击次数 = 0
                                    随机点击(1241, 33, 10, 10)
                                    log("经验本跳转失败")
                                    return
                                }
                            } else {
                                log("没找到35级等级")
                            }
                        }
                    } else {
                        var rfbfnzd = imgempt(true, 0.9, "圣科纳遗址选项|圣科纳遗址选项2|圣科纳遗址选项3", 23, 542, 292, 138)
                        if (rfbfnzd != null) {
                            log("经验本_圣科纳遗址选项");
                            随机点击(rfbfnzd.x, rfbfnzd.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                if (跳转成功) {
                                    log("已跳转")
                                    return
                                } else {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
    }
}

function 主线查看任务() {
    var 啥也没找到 = 0
    var 移动过一次 = false
    while (true) {
        if (异常捕获("练级") == "掉线") {
            return "掉线"
        } else {
            var fuben = imgempt(true, 0.9, "古老的神殿", 53, 189, 284, 117)
            if (fuben != null) {
                啥也没找到 = 0
                var fuben = imgempt(true, 0.9, "前往周副本任务", 857, 319, 259, 118)
                if (fuben != null) {
                    log("古老的神殿,周副本任务")
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        var 结果 = 主线前往周副本()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "完成"
                        }
                    }
                } else {
                    var fuben = imgempt(true, 0.9, "离开周副本任务", 857, 319, 259, 118)
                    if (fuben != null) {
                        log("古老的神殿,离开周副本任务")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            log("点击退出周副本")
                            随机点击(305, 75)
                            // var 结果 = 快速回城("卷轴")
                            // if (结果 == "掉线") {
                            //     return "掉线"
                            // } else {
                            //     return "完成"
                            // }
                        }
                    } else {
                        var zhuxian = imgempt(true, 0.9, "获得补偿|获得补偿2", 981, 624, 119, 82)
                        if (zhuxian != null) {
                            log("点击获得任务奖励")
                            随机点击2(zhuxian.x, zhuxian.y)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            return "完成"
                        } else {
                            log("古老的神殿")
                        }
                    }
                }

            } else {
                var fuben = imgempt(true, 0.9, "消失的矿工", 53, 189, 284, 117)
                if (fuben != null) {
                    啥也没找到 = 0
                    var fuben = imgempt(true, 0.9, "进入经验本", 857, 319, 259, 118)
                    if (fuben != null) {
                        log("进入经验本,任务")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 主线前往经验本()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        }
                    } else {
                        var fuben = imgempt(true, 0.9, "离开经验本", 857, 319, 259, 118)
                        if (fuben != null) {
                            log("离开经验本任务")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                log("点击退出经验本")
                                随机点击(305, 75)
                            }
                        } else {
                            log("消失的矿工")
                        }
                    }
                } else {
                    var fuben = imgempt(true, 0.9, "切拉诺任务_被阻碍的道路", 53, 189, 284, 117)
                    if (fuben != null) {
                        啥也没找到 = 0
                        log("切拉诺任务_被阻碍的道路")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 地图传送("切拉诺")
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        }
                    } else {
                        var fuben = imgempt(true, 0.9, "前往巴斯底任务", 53, 189, 284, 117)
                        if (fuben != null) {
                            啥也没找到 = 0
                            log("前往巴斯底任务")
                            var 结果 = 传送到任务点()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else if (结果 == "误识别") {
                                log("误识别出来了")
                                return "完成"
                            } else {
                                return "完成"
                            }
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var zhuxian = imgempt(true, 0.9, "任务列表瞬间移动", 1016, 605, 221, 105)
                                if (zhuxian != null) {
                                    log("任务已接取,点击瞬间移动")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                    移动过一次 = true
                                } else {
                                    var fuben = imgempt(true, 0.9, "菜单_任务", 958, 92, 320, 486)
                                    if (fuben != null) {
                                        啥也没找到 = 0
                                        log("点击任务");
                                        随机点击(fuben.x, fuben.y, 10, 10)
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            if (移动过一次) {
                                                log("移动过一次了,直接退出")
                                                return "完成"
                                            } else {
                                                log("点击菜单");
                                                随机点击(1238, 36, 10, 10)
                                                sleep(2000)
                                            }
                                        } else {
                                            啥也没找到++
                                            if (啥也没找到 >= 10) {
                                                log("毛任务都没找到")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "完成"
                                                }

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }

}



function 所有红点处理() {
    var 已在主页面 = true
    while (true) {
        if (异常捕获("练级") == "掉线") {
            return "掉线"
        } else {//

            var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
            if (bbym != null) {
                已在主页面 = 0
                log("领取活动")
                var 结果 = 活动领取()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                if (参数[39]) {

                } else {
                    var bbym = imgempt(true, 0.9, "背包红点", 1082, 1, 80, 74)
                    if (bbym != null) {
                        已在主页面 = 0
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y + 20)
                        var 结果 = 使用背包物品("练级")
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "技能红点", 1153, 6, 69, 61)
                        if (bbym != null) {
                            已在主页面 = 0
                            log("点击技能")
                            随机点击2(bbym.x, bbym.y + 20)
                            var 结果 = 技能二次配置()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "菜单红点", 1222, 7, 56, 56)
                            if (bbym != null) {
                                已在主页面 = 0
                                log("点击菜单")
                                随机点击2(bbym.x, bbym.y + 20)
                                var 结果 = 菜单红点处理()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else {
                                var xuyqd = imgempt(true, 0.9, "需要签到", 219, 4, 164, 45)
                                if (xuyqd != null) {
                                    已在主页面 = 0
                                    var 结果 = 签到()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        已在主页面++
                                        if (已在主页面 >= 5) {
                                            log("处理红点完毕")
                                            return
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 开始主线() {
    var 未进行任务 = 0
    var 需要检查任务 = 0
    var 随机走动时间小时 = new Date().getHours()
    var 三五boss提升 = true
    var 任务随机延时 = true
    var 找不到药水次数 = 0
    while (true) {
        if (异常捕获("练级") == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.9, "零小血药", 677, 657, 63, 49)
            if (guajizhon != null && !参数[39]) {
                toastLog("无药")
                var 结果 = 回城买药()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                var saomaiop = imgempt(true, 0.9, "扫描盘", 1005, 265, 99, 70)
                if (saomaiop != null) {
                    log("扫描盘,点击任务");
                    随机点击(1239, 100, 10, 10)
                } else {
                    var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                    if (guajizhon != null) {
                        log("死亡墓碑恢复经验，开始主线");
                        var 结果 = 死亡恢复经验()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                        if (mi != null) {
                            log("移动中...");
                            未进行任务 = 0
                            需要检查任务 = 0
                            var 记录距离 = 10000
                            var 原地移动计次 = 0
                            var 原地转圈 = false
                            var 未识别到距离 = 0
                            while (true) {
                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                if (mi != null) {
                                    var 剩余距离 = findNumber("距离", [584, 511, 115, 38])
                                    if (剩余距离 != null) {
                                        剩余距离 = parseInt(剩余距离)
                                        if (剩余距离 < 记录距离) {
                                            记录距离 = 剩余距离
                                            原地移动计次 = 0
                                            未识别到距离 = 0
                                        } else if (剩余距离 - 记录距离 >= 50) {
                                            log("误识别，重新记录距离")
                                            记录距离 = 剩余距离
                                        } else {
                                            原地移动计次++
                                            if (原地移动计次 >= 10) {
                                                log("原地打圈,看看任务")
                                                原地转圈 = true
                                                break
                                            } else {
                                                log("可能原地移动")
                                            }
                                        }
                                    } else {
                                        未识别到距离++
                                        if (未识别到距离 >= 3) {
                                            break
                                        }
                                    }
                                } else {
                                    未识别到距离++
                                    if (未识别到距离 >= 3) {
                                        break
                                    }
                                }
                                sleep(1000)
                            }

                            if (原地转圈) {
                                主线查看任务()
                            }
                            sleep(800)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "礼包推荐", 848, 535, 124, 81)
                            if (zhuxian != null) {
                                log("关闭推荐礼包");
                                随机点击2(1068, 135)
                            } else {
                                var zhuxian = imgempt(true, 0.8, "装备(提示弹窗)", 914, 345, 72, 56)//需要改善,变为多图
                                if (zhuxian != null) {
                                    log("点击穿上装备");
                                    随机点击2(zhuxian.x, zhuxian.y)
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                                    if (zhuxian != null) {
                                        log("确定瞬移");
                                        随机点击2(725, 496)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            if (storage.get("识别的等级") != null && parseInt(storage.get("识别的等级")) >= 35) {
                                                log("练级铜钱不足但有等级")
                                                var 结果 = 使用背包物品("钱箱子")
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                                参数[26] = false
                                                ui.run(function () {
                                                    ui.主线任务.setChecked(false)
                                                })
                                                storage.put("主线任务", false);
                                                任务状态 = "挂机"
                                                return "掉线"
                                            } else {
                                                log("练级铜钱不足且低于35级,野外刷铜钱")
                                                野外挂机刷金币()
                                                return "掉线"
                                            }
                                        }
                                    } else {
                                        var zhuxian = imgempt(true, 0.9, "任务已接受", 384, 537, 265, 107)
                                        if (zhuxian != null) {
                                            log("任务已接受,退出")
                                            随机点击(1237, 35)
                                        } else {
                                            var zhuxian = imgempt(true, 0.9, "接受工会任务", 384, 537, 265, 107)
                                            if (zhuxian != null) {
                                                log("接受工会任务")
                                                随机点击2(zhuxian.x, zhuxian.y)
                                            } else {
                                                var zhuxian = imgempt(true, 0.9, "更新车队指令", 992, 637, 277, 79)
                                                if (zhuxian != null) {
                                                    log("点击更新车队指令")
                                                    随机点击2(zhuxian.x, zhuxian.y)
                                                } else {
                                                    var zhuxian = imgempt(true, 0.9, "工会页", 27, 3, 155, 74)
                                                    if (zhuxian != null) {
                                                        log("工会页,退出")
                                                        随机点击(1237, 35)
                                                    } else {
                                                        var zhuxian = imgempt(true, 0.8, "任务执行中|执行任务中|执行任务中2|执行任务中4", 1194, 421, 85, 83)
                                                        if (zhuxian != null) {
                                                            var zhuxian = imgempt(true, 0.9, "紫任务", 896, 62, 72, 273)
                                                            if (zhuxian != null) {
                                                                log("接受紫色任务");
                                                                随机点击(zhuxian.x, zhuxian.y)
                                                                未进行任务 = 0
                                                                需要检查任务 = 0
                                                            } else {
                                                                var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                                                                if (zhuxian != null) {
                                                                    log("确定瞬移");
                                                                    随机点击2(725, 496)
                                                                } else {
                                                                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                                                    if (mi != null) {
                                                                        log("执行任务移动中...");
                                                                        未进行任务 = 0
                                                                        需要检查任务 = 0
                                                                    } else {
                                                                        var jdmsz = imgempt(true, 0.9, "锁定怪物|boss锁定", 622, 2, 289, 52)
                                                                        if (jdmsz != null) {
                                                                            log("锁定怪物,执行任务中...");
                                                                            未进行任务 = 0
                                                                            需要检查任务 = 0
                                                                            if (参数[39]) {
                                                                                var 结果 = findNumber("药水数量", [300, 664, 78, 37]);
                                                                                if (结果 == null) {
                                                                                    找不到药水次数++
                                                                                    if (找不到药水次数 > 5) {
                                                                                        找不到药水次数 = 0
                                                                                        log("连续判定5次没药，回城买药")
                                                                                        回城买药()
                                                                                    } else {
                                                                                        找不到药水次数 = 0
                                                                                    }
                                                                                }
                                                                            }
                                                                        } else {
                                                                            var pdsfcs = CoordinatesAndPictureName(true, 0.9, "离开周本任务|离开周本任务3|离开周本任务2", 1011, 90, 103, 34)//判断是否传送
                                                                            if (pdsfcs != null) {
                                                                                log("离开周本任务，点击回城")
                                                                                随机点击2(889, 659)
                                                                            } else {
                                                                                未进行任务++
                                                                                if (未进行任务 >= 8) {
                                                                                    未进行任务 = 0
                                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                                    if (zhuchengzahuo != null) {
                                                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                                        if (huicheng != null) {
                                                                                            log("任务中断继续主线");
                                                                                            重复点击坐标次数 = 0
                                                                                            var zhuchengzahuo = imgempt(true, 0.8, "任务执行中|执行任务中2|执行任务中4", 1199, 432, 73, 65)
                                                                                            if (zhuchengzahuo != null) {
                                                                                                log("任务执行中...")
                                                                                                sleep(3000)
                                                                                            } else {
                                                                                                控制点击(974, 88, 151, 31)
                                                                                            }
                                                                                        } else {
                                                                                            log("买卷轴及配置药水")
                                                                                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                                                                                            var 结果 = 买卷轴配置药水()
                                                                                            if (结果 == "放置完成") {
                                                                                                return
                                                                                            } else if (结果 == "掉线") {
                                                                                                return "掉线"
                                                                                            }
                                                                                        }
                                                                                    } else {
                                                                                        重复点击坐标次数 = 0
                                                                                        var zhuchengzahuo = imgempt(true, 0.8, "任务执行中|执行任务中2|执行任务中4", 1199, 432, 73, 65)
                                                                                        if (zhuchengzahuo != null) {
                                                                                            log("任务执行中...")
                                                                                            需要检查任务++
                                                                                            if (需要检查任务 >= 5) {
                                                                                                需要检查任务 = 0
                                                                                                log("任务中断，可能卡点，看看任务");
                                                                                                主线查看任务()
                                                                                            }
                                                                                            sleep(3000)
                                                                                        } else {
                                                                                            log("任务中断继续任务");
                                                                                            控制点击(974, 88, 151, 31)
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        } else {
                                                            var zhuxian = imgempt(true, 0.9, "完成任务", 896, 62, 72, 273)
                                                            if (zhuxian != null) {
                                                                未进行任务 = 0
                                                                var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                                                                if (信件 != null) {
                                                                    log("关闭菜单")
                                                                    随机点击(1243, 35, 10, 10)
                                                                } else {
                                                                    log("点击完成任务");
                                                                    随机点击(zhuxian.x, zhuxian.y)
                                                                    var zhuxian = imgempt(true, 0.8, "装备(提示弹窗)", 914, 345, 72, 56)//需要改善,变为多图
                                                                    if (zhuxian != null) {
                                                                        log("点击穿上装备");
                                                                        随机点击2(zhuxian.x, zhuxian.y)
                                                                    } else {
                                                                        if (任务随机延时) {
                                                                            var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                                            if (jdmsz != null) {
                                                                                log("锁定怪物中")
                                                                                var 随机执行红点处理 = random(1, 3)
                                                                                if (随机执行红点处理 == 1) {
                                                                                    log("随机到处理红点")
                                                                                    var 是否马上处理红点 = random(1, 3)
                                                                                    if (是否马上处理红点 == 1) {
                                                                                        var 结果 = 所有红点处理()
                                                                                        if (结果 == "掉线") {
                                                                                            return "掉线"
                                                                                        } else { }
                                                                                    } else {
                                                                                        var 等待时间 = random(1, 300)
                                                                                        log("等待随机时间")
                                                                                        while (等待时间 > 0) {
                                                                                            ui.run(function () {
                                                                                                window.计时器.setText(等待时间.toString())
                                                                                            });
                                                                                            if (异常捕获() == "掉线") {
                                                                                                return "掉线"
                                                                                            } else {
                                                                                                for (let index = 0; index < 4; index++) {
                                                                                                    var zhuxian = imgempt(true, 0.8, "装备(提示弹窗)", 914, 345, 72, 56)//需要改善,变为多图
                                                                                                    if (zhuxian != null) {
                                                                                                        log("点击穿上装备");
                                                                                                        随机点击2(zhuxian.x, zhuxian.y)
                                                                                                    } else {
                                                                                                    }
                                                                                                    sleep(150)
                                                                                                }
                                                                                                等待时间--
                                                                                            }
                                                                                        }
                                                                                        ui.run(function () {
                                                                                            window.计时器.setText("")
                                                                                        });
                                                                                        var 结果 = 所有红点处理()
                                                                                        if (结果 == "掉线") {
                                                                                            return "掉线"
                                                                                        } else { }
                                                                                    }
                                                                                } else {
                                                                                    log("随机到不处理红点,等待后继续执行")

                                                                                }
                                                                            }
                                                                        }
                                                                        var 随机延时时间 = random(1000, 3000)
                                                                        sleep(随机延时时间)
                                                                    }
                                                                }
                                                            } else {
                                                                var zhuxian = imgempt(true, 0.8, "主线任务图标(未接)|任务(未接)", 896, 62, 72, 273)
                                                                if (zhuxian != null) {
                                                                    未进行任务 = 0
                                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                    if (zhuchengzahuo != null) {
                                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                        if (huicheng != null) {
                                                                            log("点击接受主线");
                                                                            随机点击(zhuxian.x, zhuxian.y)
                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                        } else {
                                                                            log("买卷轴及配置药水")
                                                                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                                                                            var 结果 = 买卷轴配置药水()
                                                                            if (结果 == "放置完成") {
                                                                                return
                                                                            } else if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                        }
                                                                    } else {
                                                                        log("点击接受主线");
                                                                        控制点击(zhuxian.x, zhuxian.y, 151, 31)
                                                                        随机点击2(zhuxian.x, zhuxian.y)
                                                                    }
                                                                } else {
                                                                    var bossrw = imgempt(true, 0.9, "boss任务", 894, 66, 89, 231)
                                                                    if (bossrw != null) {
                                                                        未进行任务 = 0
                                                                        log("boss任务,检测红点");
                                                                        随机点击(bossrw.x, bossrw.y)
                                                                        随机点击2(bossrw.x, bossrw.y)
                                                                    } else {
                                                                        //待处理  跳过得多图多个
                                                                        var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                        if (zhuxian != null) {
                                                                            log("点击跳过");
                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                        } else {
                                                                            var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                                                            if (auto != null) {
                                                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                                if (zhuchengzahuo != null) {
                                                                                    var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                                    if (huicheng != null) {
                                                                                        var zhuchengzahuo = imgempt(true, 0.8, "任务执行中|执行任务中2|执行任务中4", 1199, 432, 73, 65)
                                                                                        if (zhuchengzahuo != null) {
                                                                                            log("任务执行中...")
                                                                                            sleep(3000)
                                                                                        } else {
                                                                                            log("任务中断继续主线");
                                                                                            重复点击坐标次数 = 0
                                                                                            控制点击(974, 88, 151, 31)
                                                                                        }

                                                                                    } else {
                                                                                        log("买卷轴及配置药水")
                                                                                        随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                                                                                        var 结果 = 买卷轴配置药水()
                                                                                        if (结果 == "放置完成") {
                                                                                            return
                                                                                        } else if (结果 == "掉线") {
                                                                                            return "掉线"
                                                                                        }
                                                                                    }
                                                                                } else {
                                                                                    var zhuchengzahuo = imgempt(true, 0.8, "任务执行中|执行任务中2|执行任务中4", 1199, 432, 73, 65)
                                                                                    if (zhuchengzahuo != null) {
                                                                                        log("任务执行中...")
                                                                                        sleep(3000)
                                                                                    } else {
                                                                                        log("任务中断继续主线");
                                                                                        重复点击坐标次数 = 0
                                                                                        控制点击(974, 88, 151, 31)
                                                                                    }
                                                                                }
                                                                            } else {
                                                                                var guajizhon = imgempt(true, 0.9, "滑翔机|坐骑", 6, 3, 202, 69)
                                                                                if (guajizhon != null) {
                                                                                    var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                                                                                    if (zhuxian != null) {
                                                                                        log("退出")
                                                                                        随机点击(1240, 29)
                                                                                    } else {
                                                                                        log("点击装备滑翔机或武器装扮")
                                                                                        随机点击(885, 236)
                                                                                        随机点击2(1156, 677)
                                                                                    }
                                                                                } else {
                                                                                    var guajizhon = imgempt(true, 0.9, "武器外观|武器外观2", 6, 3, 202, 69)
                                                                                    if (guajizhon != null) {
                                                                                        var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                                                                                        if (zhuxian != null) {
                                                                                            log("退出")
                                                                                            随机点击(1240, 29)
                                                                                        } else {
                                                                                            log("点击装备滑翔机或武器装扮")
                                                                                            随机点击(885, 236)
                                                                                            随机点击2(1156, 677)
                                                                                        }
                                                                                    } else {
                                                                                        var zhuxian = imgempt(true, 0.9, "马儿已安装", 103, 140, 227, 99)
                                                                                        if (zhuxian != null) {
                                                                                            log("马儿已安装,点击退出");
                                                                                            随机点击2(1243, 29)
                                                                                        } else {
                                                                                            var zhuxian = imgempt(true, 0.9, "马儿未安装", 111, 151, 165, 74)
                                                                                            if (zhuxian != null) {
                                                                                                log("点击安装马儿");
                                                                                                随机点击2(1164, 681)
                                                                                            } else {
                                                                                                var zhuxian = imgempt(true, 0.9, "普通飞行器", 16, 150, 221, 88)
                                                                                                if (zhuxian != null) {
                                                                                                    var zhuxian = imgempt(true, 0.9, "已安装", 16, 150, 221, 88)
                                                                                                    if (zhuxian != null) {
                                                                                                        log("已安装飞行器,点击退出")
                                                                                                        随机点击2(1238, 35)
                                                                                                    } else {
                                                                                                        随机点击2(965, 204)
                                                                                                        log("点击安装飞行器")
                                                                                                        随机点击2(1157, 678)
                                                                                                    }
                                                                                                } else {
                                                                                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                                    if (jdmsz != null) {
                                                                                                        log("主页,退出节电")
                                                                                                        swipe(566, 389, 968, 226, 500)
                                                                                                    } else {
                                                                                                        var jdmsz = imgempt(true, 0.9, "转职", 4, 2, 191, 73)
                                                                                                        if (jdmsz != null) {
                                                                                                            log("转职页")
                                                                                                            var 结果 = 转职后处理()
                                                                                                            if (结果 == "掉线") {
                                                                                                                return "掉线"
                                                                                                            }
                                                                                                        } else {
                                                                                                            var zhuxian = imgempt(true, 0.9, "任务_瞬间移动|任务_自动移动|任务_接取", 845, 615, 412, 91)
                                                                                                            if (zhuxian != null) {
                                                                                                                log("任务已接取,点击移动")
                                                                                                                随机点击2(zhuxian.x, zhuxian.y)
                                                                                                            } else {
                                                                                                                if (随机走动时间小时 != new Date().getHours()) {
                                                                                                                    var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                                                                                    if (jdmsz != null) {
                                                                                                                        log("战斗中,随机走动")
                                                                                                                        swipe(173, 502, 217, 453, 1500)
                                                                                                                        sleep(1500)
                                                                                                                        随机走动时间小时 = new Date().getHours()
                                                                                                                    } else {
                                                                                                                        log("@@#")
                                                                                                                    }
                                                                                                                } else {
                                                                                                                    log("@#￥@#")
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)//需要改善,变为500
    }
}


function 商城购买三倍经验() {
    var 点击三倍经验页次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)//
            if (bbym != null) {
                var bbym = imgempt(false, 0.9, "三倍经验箱售罄", 769, 465, 295, 246)
                if (bbym != null) {
                    log("三倍经验箱售罄")
                    购买三倍经验 = new Date().getDate()
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "购买完成"
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "购买结果", 530, 215, 253, 120)
                    if (bbym != null) {
                        log("购买结果")
                        随机点击2(642, 432)
                    } else {
                        var bbym = imgempt(true, 0.9, "确定购买三倍经验箱", 628, 530, 260, 85)
                        if (bbym != null) {
                            log("确定购买三倍经验箱")
                            随机点击2(bbym.x, bbym.y)
                        } else {
                            var bbym = imgempt(false, 0.9, "三倍经验箱(商店)", 769, 465, 295, 246)
                            if (bbym != null) {
                                log("点击三倍经验箱")
                                随机点击2(bbym.x, bbym.y)
                            } else {
                                var bbym = imgempt(true, 0.9, "三倍经验页", 7, 128, 235, 548)
                                if (bbym != null) {
                                    log("点击三倍经验页")
                                    随机点击(bbym.x, bbym.y)
                                    swipe(926, 432, 434, 429, 1000)
                                    sleep(1000)
                                } else {

                                }
                            }
                        }
                    }
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("点击活动商店");
                    随机点击2(998, 39)
                    sleep(2000)
                } else {

                }
            }
        }
        sleep(200)//需要改善,变为500
    }
}

function 转职后处理() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jdmsz = imgempt(true, 0.9, "转职", 4, 2, 191, 73)
            if (jdmsz != null) {
                var jdmsz = imgempt(true, 0.9, "确认转职", 654, 419, 148, 70)
                if (jdmsz != null) {
                    log("确认转职")
                    随机点击2(jdmsz.x, jdmsz.y)
                } else {
                    var bbym = cor(true, 15, 113, 130, 98, 83, "#e75756", [[2, 0, "#df4744"], [2, 2, "#d63734"], [0, 2, "#e44a4a"]])
                    if (bbym != null) {
                        log("弓手一转")
                        随机点击(bbym.x - 10, bbym.y + 10)
                        随机点击2(169, 667)
                    } else {
                        var jdmsz = imgempt(true, 0.9, "转职E|转职E2", 102, 144, 171, 48)
                        if (jdmsz != null) {
                            log("转职成功,退出页面")
                            随机点击2(42, 36)
                        } else {

                        }
                        // var jdmsz = imgempt(true, 0.9, "弓手一转", 116, 144, 115, 99)
                        // if (jdmsz != null) {

                        // } else {

                        // }
                    }
                }
            } else {
                var 结果 = 购买强化卷轴()
                if (结果 == "购买完成") {
                    var 结果 = 使用背包物品("练级")
                    if (结果 == "使用完毕") {
                        var 结果 = 前往强化("普通斗篷")
                        if (结果 == "完成强化") {
                            return "完成强化"
                        } else if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else if (结果 == "掉线") {
                        return "掉线"
                    }
                } else if (结果 == "掉线") {
                    return "掉线"
                }
            }
        }
        sleep(200)
    }
}


function 挂机强化(mode) {
    var 点击位置 = 1
    var 初始X = 911
    var 初始Y = 111
    var 强化完成 = false
    var 非强化装备 = 0
    var 无可用强化卷轴 = false
    var 需要购买的强化卷轴 = ""
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var qiagnhua = imgempt(true, 0.9, "强化(菜单)", 956, 88, 318, 540)
            if (qiagnhua != null) {
                log("点击进入强化");
                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    if (强化完成) {
                        if (参数[32] || (参数[26] && 参数[43] == false)) {
                            if (无可用强化卷轴) {
                                log("强化卷轴不足")
                                return "强化卷轴不足"
                            }
                        } else if (mode == "自动提升") {

                            // if (需要购买的强化卷轴.includes("首饰强化卷轴")) {
                            //     纯回主页()
                            //     var 结果 = 委托首饰强化卷轴()
                            //     if (结果 == "掉线") {
                            //         return "掉线"
                            //     }
                            //     纯回主页()
                            // }



                            // if (需要购买的强化卷轴.includes("武器强化卷轴") || 需要购买的强化卷轴.includes("防具强化卷轴")) {
                            //     纯回主页()
                            //     var 结果 = 购买强化卷轴无箱子(需要购买的强化卷轴)
                            //     if (结果 == "掉线") {
                            //         return "掉线"
                            //     }
                            //     纯回主页()
                            // }


                        }
                        return "完成强化"
                    } else {
                        log("主页点击菜单");
                        随机点击2(1238, 36, 10, 10)
                    }
                } else {
                    var qhzby = imgempt(true, 0.9, "强化装备页", 6, 3, 187, 71)
                    if (qhzby != null) {
                        var qhzby = imgempt(true, 0.8, "强化装备详细E|装备E|强化已装备E", 110, 178, 61, 55)
                        if (qhzby != null) {
                            var qhzby = imgempt(true, 0.8, "不安全区间|不安全区间2", 142, 544, 275, 108)
                            if (qhzby != null) {
                                log("已强化到顶")
                                点击位置++
                                随机点击2(164, 229, 10, 10)
                                随机点击2(378, 236, 10, 10)
                            } else {
                                var qhzby = imgempt(true, 0.8, "没有放置强化卷轴", 331, 183, 120, 109)
                                if (qhzby != null) {
                                    log("没有放置强化卷轴,点击放置")
                                    随机点击2(965, 650, 10, 10)
                                }

                                var bbym = cor(true, 12, 129, 667, 284, 50, "#141d1a",[[3,-1,"#141d1a"],[11,-1,"#151e1b"],[8,-2,"#171d19"],[11,-2,"#161c18"],[43,3,"#ceccbf"],[43,6,"#d1caba"],[48,8,"#b9b5aa"],[46,5,"#cfcbbf"],[52,5,"#cfcbc0"],[45,9,"#cecbc2"]])
                                if (bbym != null) {
                                    toastLog("点击选择最高强化值")
                                    随机点击2(279, 689, 10, 10)
                                }

                                var qhzby = imgempt(true, 0.9, "跳过确认", 169, 676, 64, 43)
                                if (qhzby != null) {
                                    log("跳过确认")
                                    随机点击2(195, 700, 10, 10)
                                } else {
                                    var bbym = cor(true, 12, 167, 627, 253, 91, "#949087", [[-9, 1, "#949087"], [-6, -7, "#939087"], [-4, 6, "#949085"], [31, -5, "#968f85"], [12, -41, "#39433a"], [-7, -42, "#455145"], [-27, -42, "#3c493f"], [34, 1, "#948f89"], [35, 3, "#949087"], [71, -1, "#968f85"]])
                                    if (bbym != null) {//勾选强化到安全区间
                                        toastLog("点击勾选一次性强化")
                                        随机点击2(282, 700, 10, 10)
                                    } else {

                                    }
                                }

                                var qhzby = imgempt(true, 0.9, "没有材料", 468, 56, 107, 67)
                                if (qhzby != null) {
                                    log("没有强化材料")
                                    var qhzby = CoordinatesAndPictureName(true, 0.9, "强化_武器强化卷轴|强化_防具强化卷轴|强化_首饰强化卷轴", 913, 608, 271, 85)
                                    if (qhzby != null) {
                                        需要购买的强化卷轴 = 需要购买的强化卷轴 + qhzby.图名
                                    }
                                    点击位置++
                                    if (!总提示.includes("强化卷轴不足")) {
                                        总提示 = 总提示 + "强化卷轴不足"
                                    }
                                    无可用强化卷轴 = true
                                    随机点击2(164, 229, 10, 10)
                                } else {
                                    sleep(500)
                                    var qhzby = imgempt(true, 0.8, "不安全区间|不安全区间2", 142, 544, 275, 108)
                                    if (qhzby != null) {
                                        log("已强化到顶")
                                        点击位置++
                                        随机点击2(164, 229, 10, 10)
                                        随机点击2(378, 236, 10, 10)
                                    } else {
                                        随机点击2(280, 641, 10, 10)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            随机点击2(38, 30, 10, 10)
                                            if (参数[32] || 参数[43]) {
                                                if (!总提示.includes("铜钱不足")) {
                                                    总提示 = 总提示 + "铜钱不足"
                                                }
                                            } else {
                                                野外挂机刷金币()
                                                return "掉线"
                                            }
                                            强化完成 = true
                                        }
                                        重复点击坐标次数 = 0
                                    }
                                }
                            }
                        } else {
                            if (点击位置 > 27) {
                                log("物品栏点击上限退出强化")
                                随机点击2(38, 30, 10, 10)
                                强化完成 = true
                            } else {
                                var 行 = Math.ceil(点击位置 / 4)
                                var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                识别X = 初始X + 69 * 列 - 69
                                识别Y = 初始Y + 69 * 行 - 69
                                var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                                // var ssdyw = imgempt(true, 0.8, "装备E", 识别X, 识别Y, 69, 69)
                                if (ssdyw != null) {
                                    var 截图 = captureScreen();
                                    var clip = images.clip(截图, 识别X, 识别Y, 69, 69);
                                    var bb = images.interval(clip, "#25493B", 20)
                                    var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
                                    bb.recycle()
                                    if (获取的所有点.length >= 100) {
                                        clip.recycle()
                                        console.log("第" + 行 + "行，第" + 列 + "列，高级以上")
                                        var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                        if (点击位置 <= 2) {
                                            if (等级 == "false" || 等级 < 7) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+7")
                                                点击位置++
                                                continue
                                            }
                                        } else if (点击位置 <= 8) {
                                            if (等级 == "false" || 等级 < 5) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+5")
                                                点击位置++
                                                continue
                                            }
                                        } else {
                                            if (等级 == "false" || 等级 < 3) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+3")
                                                点击位置++
                                                continue
                                            }
                                        }
                                    } else {
                                        var bb = images.interval(clip, "#315972", 20)
                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                        bb.recycle()
                                        if (获取的所有点.length >= 100) {
                                            clip.recycle()
                                            console.log("第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                            var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                            if (点击位置 <= 2) {
                                                if (等级 == "false" || 等级 < 7) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+7")
                                                    点击位置++
                                                    continue
                                                }
                                            } else if (点击位置 <= 8) {
                                                if (等级 == "false" || 等级 < 5) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+5")
                                                    点击位置++
                                                    continue
                                                }
                                            } else {
                                                if (等级 == "false" || 等级 < 3) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+3")
                                                    点击位置++
                                                    continue
                                                }
                                            }
                                        } else {
                                            var aa = images.interval(clip, "#997C30", 20)
                                            var 获取的橙色所有点 = images.findAllPointsForColor(aa, "#FFFFFF", { similarity: 0.9 })
                                            aa.recycle()
                                            clip.recycle()
                                            if (获取的橙色所有点.length >= 100) {
                                                var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                                if (等级 == "false" || 等级 < 1) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，橙色装备")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+1")
                                                    点击位置++
                                                    continue
                                                }
                                            } else {
                                                var ssdyw = imgempt(true, 0.9, "神圣的遗物", 识别X, 识别Y, 69, 69)
                                                if (ssdyw != null) {
                                                    var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                                    if (等级 == "false" || 等级 < 1) {
                                                        log("点击第" + 行 + "行，第" + 列 + "列，橙色装备")
                                                        随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                    } else {
                                                        log("第" + 行 + "行，第" + 列 + "列已强化+1")
                                                        点击位置++
                                                        continue
                                                    }
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列不是高品级装备，识别的位置是:" + 识别X + "," + 识别Y)
                                                    点击位置++
                                                    continue
                                                }
                                            }
                                        }
                                    }
                                    clip.recycle()
                                } else {
                                    log("非已装备的装备,跳过，识别的位置是:" + 识别X + "," + 识别Y)
                                    点击位置++
                                    非强化装备++
                                    if (非强化装备 >= 3) {
                                        log("没有穿戴装备可强化,退出")
                                        随机点击2(38, 30, 10, 10)
                                        强化完成 = true
                                    }
                                    continue
                                }
                            }
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}


function 前往强化(mode) {
    var 点击位置 = 1
    var 初始X = 911
    var 初始Y = 111
    var 强化完成 = false
    var 非强化装备 = 0
    var 无可用强化卷轴 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var qiagnhua = imgempt(true, 0.9, "强化(菜单)", 956, 88, 318, 540)
            if (qiagnhua != null) {
                log("点击进入强化");
                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    if (强化完成) {
                        return "完成强化"
                    } else {
                        log("主页点击菜单");
                        随机点击2(1238, 36, 10, 10)
                    }
                } else {
                    var qhzby = imgempt(true, 0.9, "强化装备页", 6, 3, 187, 71)
                    if (qhzby != null) {
                        var qhzby = imgempt(true, 0.8, "强化装备详细E|装备E|强化已装备E", 110, 178, 61, 55)
                        if (qhzby != null) {
                            var qhzby = imgempt(true, 0.8, "不安全区间|不安全区间2|不安全区间3", 142, 544, 275, 108)
                            if (qhzby != null) {
                                log("已强化到顶")
                                点击位置++
                                随机点击2(164, 229, 10, 10)
                                随机点击2(378, 236, 10, 10)
                            } else {
                                var qhzby = imgempt(true, 0.8, "没有放置强化卷轴", 331, 183, 120, 109)
                                if (qhzby != null) {
                                    log("没有放置强化卷轴,点击放置")
                                    随机点击2(965, 650, 10, 10)
                                }

                                var bbym = cor(true, 12, 129, 667, 284, 50, "#0e1714", [[-38, 1, "#131c19"], [-38, -6, "#121b18"], [-37, 8, "#111a17"], [-1, 9, "#0f1815"], [-2, -4, "#0d1613"], [84, -2, "#d2cabd"], [84, 2, "#d1cbbf"]])
                                if (bbym != null) {
                                    toastLog("点击选择最高强化值")
                                    随机点击2(279, 689, 10, 10)
                                }

                                var qhzby = imgempt(true, 0.9, "跳过确认", 169, 676, 64, 43)
                                if (qhzby != null) {
                                    log("跳过确认")
                                    随机点击2(195, 700, 10, 10)
                                } else {
                                    var bbym = cor(true, 12, 167, 627, 253, 91, "#949087", [[-9, 1, "#949087"], [-6, -7, "#939087"], [-4, 6, "#949085"], [31, -5, "#968f85"], [12, -41, "#39433a"], [-7, -42, "#455145"], [-27, -42, "#3c493f"], [34, 1, "#948f89"], [35, 3, "#949087"], [71, -1, "#968f85"]])
                                    if (bbym != null) {//勾选强化到安全区间
                                        toastLog("点击勾选一次性强化")
                                        随机点击2(282, 700, 10, 10)
                                    } else {

                                    }
                                }

                                var qhzby = imgempt(true, 0.9, "没有材料", 468, 56, 107, 67)
                                if (qhzby != null) {
                                    log("没有强化材料")
                                    点击位置++
                                    无可用强化卷轴 = true
                                    随机点击2(164, 229, 10, 10)
                                } else {
                                    sleep(500)
                                    var qhzby = imgempt(true, 0.8, "不安全区间|不安全区间2|不安全区间3", 142, 544, 275, 108)
                                    if (qhzby != null) {
                                        log("已强化到顶")
                                        点击位置++
                                        随机点击2(164, 229, 10, 10)
                                        随机点击2(378, 236, 10, 10)
                                    } else {
                                        随机点击2(280, 641, 10, 10)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            随机点击2(38, 30, 10, 10)
                                            if (参数[32] || 参数[43]) {
                                                if (!总提示.includes("铜钱不足")) {
                                                    总提示 = 总提示 + "铜钱不足"
                                                }
                                            } else {
                                                野外挂机刷金币()
                                                return "掉线"
                                            }
                                            强化完成 = true
                                        }
                                        重复点击坐标次数 = 0
                                    }
                                }
                            }
                        } else {
                            if (点击位置 > 27) {
                                log("物品栏点击上限退出强化")
                                随机点击2(38, 30, 10, 10)
                                强化完成 = true
                            } else {
                                var 行 = Math.ceil(点击位置 / 4)
                                var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                识别X = 初始X + 69 * 列 - 69
                                识别Y = 初始Y + 69 * 行 - 69
                                var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                                // var ssdyw = imgempt(true, 0.8, "装备E", 识别X, 识别Y, 69, 69)
                                if (ssdyw != null) {
                                    var 截图 = captureScreen();
                                    var clip = images.clip(截图, 识别X, 识别Y, 69, 69);
                                    var bb = images.interval(clip, "#25493B", 20)
                                    var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
                                    bb.recycle()
                                    if (获取的所有点.length >= 100) {
                                        clip.recycle()
                                        console.log("第" + 行 + "行，第" + 列 + "列，高级以上")
                                        var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                        if (点击位置 <= 2) {
                                            if (等级 == "false" || 等级 < 7) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+7")
                                                点击位置++
                                                continue
                                            }
                                        } else if (点击位置 <= 8) {
                                            if (等级 == "false" || 等级 < 5) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+5")
                                                点击位置++
                                                continue
                                            }
                                        } else {
                                            if (等级 == "false" || 等级 < 3) {
                                                log("点击第" + 行 + "行，第" + 列 + "列，高级以上")
                                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                            } else {
                                                log("第" + 行 + "行，第" + 列 + "列已强化+3")
                                                点击位置++
                                                continue
                                            }
                                        }
                                    } else {

                                        var bb = images.interval(clip, "#315972", 20)
                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                        bb.recycle()
                                        if (获取的所有点.length >= 100) {
                                            clip.recycle()
                                            console.log("第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                            var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                            if (点击位置 <= 2) {
                                                if (等级 == "false" || 等级 < 7) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+7")
                                                    点击位置++
                                                    continue
                                                }
                                            } else if (点击位置 <= 8) {
                                                if (等级 == "false" || 等级 < 5) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+5")
                                                    点击位置++
                                                    continue
                                                }
                                            } else {
                                                if (等级 == "false" || 等级 < 3) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，蓝级以上")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+3")
                                                    点击位置++
                                                    continue
                                                }
                                            }
                                        } else {
                                            var aa = images.interval(clip, "#997C30", 20)
                                            var 获取的橙色所有点 = images.findAllPointsForColor(aa, "#FFFFFF", { similarity: 0.9 })
                                            aa.recycle()
                                            clip.recycle()
                                            if (获取的橙色所有点.length >= 100) {
                                                var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                                if (等级 == "false" || 等级 < 1) {
                                                    log("点击第" + 行 + "行，第" + 列 + "列，橙色装备")
                                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                } else {
                                                    log("第" + 行 + "行，第" + 列 + "列已强化+1")
                                                    点击位置++
                                                    continue
                                                }
                                            } else {
                                                var ssdyw = imgempt(true, 0.9, "神圣的遗物", 识别X, 识别Y, 69, 69)
                                                if (ssdyw != null) {
                                                    var 等级 = 找数字("数字", "钻石铜钱数", 6, 0.9, 识别X, 识别Y, 69, 69);
                                                    if (等级 == "false" || 等级 < 1) {
                                                        log("点击第" + 行 + "行，第" + 列 + "列，橙色装备")
                                                        随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                    } else {
                                                        log("第" + 行 + "行，第" + 列 + "列已强化+1")
                                                        点击位置++
                                                        continue
                                                    }
                                                } else {
                                                    if (mode == "普通斗篷") {
                                                        var ssdyw = imgempt(true, 0.9, "普通斗篷", 识别X, 识别Y, 69, 69)
                                                        if (ssdyw != null) {
                                                            log("点击第" + 行 + "行，第" + 列 + "普通斗篷")
                                                            随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                                        } else {
                                                            log("第" + 行 + "行，第" + 列 + "列不是高品级装备，识别的位置是:" + 识别X + "," + 识别Y)
                                                            点击位置++
                                                            continue
                                                        }
                                                    } else {
                                                        log("第" + 行 + "行，第" + 列 + "列不是高品级装备，识别的位置是:" + 识别X + "," + 识别Y)
                                                        点击位置++
                                                        continue
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    clip.recycle()
                                } else {
                                    log("非已装备的装备,跳过，识别的位置是:" + 识别X + "," + 识别Y)
                                    点击位置++
                                    非强化装备++
                                    if (非强化装备 >= 3) {
                                        log("没有穿戴装备可强化,退出")
                                        随机点击2(38, 30, 10, 10)
                                        强化完成 = true
                                    }
                                    continue
                                }
                            }
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}



function 进阶洗练() {
    var 点击位置 = 1
    var 初始X = 911
    var 初始Y = 111
    var 洗练栏 = ["武器", "防具", "首饰", "手工艺品"]
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "自动洗练中", 231, 598, 310, 87)
            if (qiagnhua != null) {
                log("自动洗练中...")
                sleep(3000)
            } else {
                var qiagnhua = imgempt(true, 0.9, "自动洗练弹窗|自动洗练弹窗2", 439, 56, 396, 112)
                if (qiagnhua != null) {
                    var qiagnhua = imgempt(true, 0.9, "设定洗练最大值停止未勾选|设定洗练最大值停止未勾选2", 147, 479, 479, 100)
                    if (qiagnhua != null) {
                        log("设定洗练最大值停止未勾选")
                        随机点击(qiagnhua.x, qiagnhua.y)
                    } else {
                        var qiagnhua = imgempt(true, 0.95, "每栏设定值出现停止|每栏设定值出现停止2", 147, 479, 479, 100)
                        if (qiagnhua != null) {
                            log("每栏设定值出现停止")
                            随机点击(qiagnhua.x, qiagnhua.y)
                        } else {
                            log("自动洗练弹窗选择需要洗练的属性")
                            var 选中的次数 = 0
                            for (let index = 0; index < 4; index++) {
                                var qiagnhua = imgempt(true, 0.9, "基础攻击未勾选|命中未勾选|暴击未勾选|防御未勾选|基础攻击未勾选2", 156, 148, 859, 320)
                                if (qiagnhua != null) {
                                    log("选择想要的属性")
                                    随机点击2(qiagnhua.x, qiagnhua.y)
                                    选中的次数++
                                }
                            }
                            if (选中的次数 == 0) {
                                log("完成选择，点击洗练")
                                随机点击2(727, 600)
                                for (let index = 0; index < 3; index++) {
                                    var qiagnhua = imgempt(true, 0.9, "已完成洗练属性", 478, 55, 247, 65)
                                    if (qiagnhua != null) {
                                        log("已完成洗练属性,点击关闭")
                                        随机点击2(qiagnhua.x, qiagnhua.y)
                                        var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                                        if (关闭XX != null) {
                                            log("关闭XX");
                                            随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                        }
                                        break
                                    }
                                }
                                点击位置++
                            }
                        }
                    }
                } else {
                    var qiagnhua = imgempt(true, 0.9, "洗练页", 51, 60, 131, 65)
                    if (qiagnhua != null) {
                        log("洗练页");
                        var qhzby = imgempt(true, 0.8, "强化装备详细E|装备E|强化已装备E", 110, 178, 61, 55)
                        if (qhzby != null) {
                            var qiagnhua = imgempt(true, 0.9, "没有洗练过|没有洗练过2", 147, 401, 255, 118)
                            if (qiagnhua != null) {
                                log("没有洗练过,点击洗练石")
                                var qiagnhua = imgempt(true, 0.9, "请登记材料|请登记材料2", 181, 556, 221, 87)
                                if (qiagnhua != null) {
                                    log("点击登记材料")
                                    随机点击2(962, 647)
                                    var qiagnhua = imgempt(true, 0.9, "没有洗练材料1|没有洗练材料2|没有洗练材料3", 443, 55, 409, 63)
                                    if (qiagnhua != null) {
                                        log(洗练栏[0] + "没有洗练材料,下一个")
                                        随机点击2(164, 229, 10, 10)
                                        随机点击2(378, 236, 10, 10)
                                        点击位置 = 1
                                        初始X = 911
                                        初始Y = 111
                                        洗练栏 = 洗练栏.slice(1)
                                        continue
                                    } else {
                                        log("点击自动洗练")
                                        随机点击2(370, 647)
                                    }
                                } else {
                                    log("点击自动洗练")
                                    随机点击2(370, 647)
                                }
                                sleep(1000)
                            } else {
                                sleep(1000)
                                var qiagnhua = imgempt(true, 0.9, "防未满_洗练|防未满_洗练2|防满_洗练|防满_洗练2|攻满_洗练|攻未满_洗练|攻未满_洗练2|命中未满_洗练|命中未满_洗练2|命中满_洗练|命中满_洗练2|爆满_洗练|爆未满_洗练", 71, 325, 255, 226)
                                if (qiagnhua != null) {
                                    log("想要属性,下一个")
                                    随机点击2(164, 229, 10, 10)
                                    随机点击2(378, 236, 10, 10)
                                    点击位置++
                                } else {//
                                    var qiagnhua = imgempt(true, 0.9, "请登记材料|请登记材料2", 181, 556, 221, 87)
                                    if (qiagnhua != null) {
                                        log("点击登记材料")
                                        随机点击2(962, 647)
                                        var qiagnhua = imgempt(true, 0.9, "没有洗练材料1|没有洗练材料2|没有洗练材料3", 443, 55, 409, 63)
                                        if (qiagnhua != null) {
                                            log(洗练栏[0] + "没有洗练材料,下一个")
                                            随机点击2(164, 229, 10, 10)
                                            随机点击2(378, 236, 10, 10)
                                            点击位置 = 1
                                            初始X = 911
                                            初始Y = 111
                                            洗练栏 = 洗练栏.slice(1)
                                        } else {
                                            log("点击自动洗练")
                                            随机点击(370, 647)
                                        }
                                    } else {
                                        log("点击自动洗练")
                                        随机点击(370, 647)
                                    }
                                    sleep(1000)
                                }
                            }
                        } else {
                            if (洗练栏.length >= 1) {
                                var 行 = Math.ceil(点击位置 / 4)
                                var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                识别X = 初始X + 69 * 列 - 69
                                识别Y = 初始Y + 69 * 行 - 69
                                if (洗练栏[0] == "武器") {
                                    随机点击(1245, 228)
                                } else if (洗练栏[0] == "防具") {
                                    随机点击(1244, 304)
                                } else if (洗练栏[0] == "首饰") {
                                    随机点击(1245, 384)
                                } else if (洗练栏[0] == "手工艺品") {
                                    随机点击(1245, 469)
                                }
                                var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                                if (ssdyw != null) {
                                    log("点击装备:" + 洗练栏[0] + "→第" + 点击位置 + "件")
                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                } else {
                                    log("没有可洗练装备：" + 洗练栏[0])
                                    点击位置 = 1
                                    初始X = 911
                                    初始Y = 111
                                    洗练栏 = 洗练栏.slice(1)
                                }
                            } else {
                                log("洗练完成")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                return "完成"
                            }
                        }
                    } else {
                        var qiagnhua = imgempt(true, 0.9, "单一强化页", 51, 60, 131, 65)
                        if (qiagnhua != null) {
                            log("单一强化页,点击洗练页");
                            随机点击2(33, 307)
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "菜单_强化", 956, 88, 318, 540)
                            if (qiagnhua != null) {
                                log("点击进入菜单_强化");
                                随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击2(1238, 36, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 开始洗练() {
    var 首次洗练 = true
    var 点击位置 = 1
    var 初始X = 911
    var 初始Y = 111
    while (true) {
        if (异常捕获() == "掉线") {//
            return "掉线"
        } else {
            var qiagnhua = imgempt(true, 0.9, "洗练页", 51, 60, 131, 65)
            if (qiagnhua != null) {
                log("洗练页");
                if (首次洗练) {
                    var qhzby = imgempt(true, 0.8, "强化装备详细E|装备E|强化已装备E", 110, 178, 61, 55)
                    if (qhzby != null) {
                        var qiagnhua = imgempt(true, 0.9, "没有洗练过|没有洗练过2", 147, 401, 255, 118)
                        if (qiagnhua != null) {
                            log("没有洗练过,点击洗练石")
                            随机点击2(959, 647)
                            var qiagnhua = imgempt(true, 0.9, "没有洗练材料1|没有洗练材料2|没有洗练材料3", 443, 55, 409, 63)
                            if (qiagnhua != null) {
                                log("没有洗练材料,下一个")
                                随机点击2(164, 229, 10, 10)
                                随机点击2(378, 236, 10, 10)
                                点击位置++
                            } else {
                                随机点击2(192, 648)
                                // 点击位置++
                            }
                        } else {
                            log("洗练过了,取消")
                            随机点击2(164, 229, 10, 10)
                            随机点击2(378, 236, 10, 10)
                            点击位置++
                        }
                    } else {
                        if (点击位置 > 27) {
                            log("点击位置大于27个装备")
                            发送异常("点击位置大于27个装备")
                            alert("点击位置大于27个装备")
                            首次洗练 = false
                            点击位置 = 1
                        } else {
                            var 行 = Math.ceil(点击位置 / 4)
                            var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                            识别X = 初始X + 69 * 列 - 69
                            识别Y = 初始Y + 69 * 行 - 69
                            var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                            if (ssdyw != null) {
                                log("点击装备")
                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                            } else {
                                log("没有可洗练装备")
                                log("一阶段完成")
                                首次洗练 = false
                                点击位置 = 1
                            }
                        }
                    }
                } else {//二次洗练
                    var 结果 = 纯回主页()//屏蔽二次洗练
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "完成"
                    var qhzby = imgempt(true, 0.8, "强化装备详细E|装备E|强化已装备E", 110, 178, 61, 55)
                    if (qhzby != null) {
                        var qiagnhua = imgempt(true, 0.9, "没有洗练过|没有洗练过2", 147, 401, 255, 118)
                        if (qiagnhua != null) {
                            log("没有洗练过,点击洗练石")
                            var qiagnhua = imgempt(true, 0.9, "请登记材料|请登记材料2", 181, 556, 221, 87)
                            if (qiagnhua != null) {
                                log("点击登记材料")
                                随机点击2(962, 647)
                                var qiagnhua = imgempt(true, 0.9, "没有洗练材料1|没有洗练材料2|没有洗练材料3", 443, 55, 409, 63)
                                if (qiagnhua != null) {
                                    log("没有洗练材料,下一个")
                                    随机点击2(164, 229, 10, 10)
                                    随机点击2(378, 236, 10, 10)
                                    点击位置++
                                    continue
                                } else {
                                    log("点击洗练")
                                    随机点击2(169, 641)
                                }
                            } else {
                                log("点击洗练")
                                随机点击2(169, 641)
                            }
                            sleep(1000)
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "防未满_洗练|防满_洗练|攻满_洗练|攻未满_洗练|命中未满_洗练|命中满_洗练", 71, 325, 255, 226)
                            if (qiagnhua != null) {
                                log("想要属性,下一个")
                                随机点击2(164, 229, 10, 10)
                                随机点击2(378, 236, 10, 10)
                                点击位置++
                            } else {//
                                var qiagnhua = imgempt(true, 0.9, "请登记材料|请登记材料2", 181, 556, 221, 87)
                                if (qiagnhua != null) {
                                    log("点击登记材料")
                                    随机点击2(962, 647)
                                    var qiagnhua = imgempt(true, 0.9, "没有洗练材料1|没有洗练材料2|没有洗练材料3", 443, 55, 409, 63)
                                    if (qiagnhua != null) {
                                        log("没有洗练材料,下一个")
                                        随机点击2(164, 229, 10, 10)
                                        随机点击2(378, 236, 10, 10)
                                        点击位置++
                                    } else {
                                        log("点击洗练")
                                        随机点击(169, 641)
                                    }
                                } else {
                                    log("点击洗练")
                                    随机点击(169, 641)
                                }
                                sleep(1000)
                            }
                        }
                    } else {
                        if (点击位置 > 27) {
                            log("点击位置大于27个装备")
                            发送异常("点击位置大于27个装备")
                            alert("洗练完成")
                            参数[36] = false
                            ui.run(function () {
                                ui.单洗练.setChecked(false)
                            });
                            // storage.put("单洗练", false)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            return "完成"
                        } else {
                            var 行 = Math.ceil(点击位置 / 4)
                            var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                            识别X = 初始X + 69 * 列 - 69
                            识别Y = 初始Y + 69 * 行 - 69
                            var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                            if (ssdyw != null) {
                                log("点击装备")
                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                            } else {
                                log("没有可洗练装备")
                                alert("洗练完成")
                                参数[36] = false
                                ui.run(function () {
                                    ui.单洗练.setChecked(false)
                                });
                                // storage.put("单洗练", false)
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                return "完成"
                            }
                        }
                    }
                }
            } else {
                var qiagnhua = imgempt(true, 0.9, "单一强化页", 51, 60, 131, 65)
                if (qiagnhua != null) {
                    log("单一强化页,点击洗练页");
                    随机点击2(33, 307)
                } else {
                    var qiagnhua = imgempt(true, 0.9, "菜单_强化", 956, 88, 318, 540)
                    if (qiagnhua != null) {
                        log("点击进入菜单_强化");
                        随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击2(1238, 36, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 购买强化卷轴(mode) {
    log("购买强化卷轴")
    var 未识别次数 = 0
    var 未购买属性药 = true
    var 购买次数 = 0
    var 记录购买次数 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "活动商店页", 6, 4, 194, 67)
            if (bbym != null) {
                log("活动商店页")
                var bbym = imgempt(true, 0.9, "礼包领取图标", 1003, 4, 118, 88)
                if (bbym != null) {
                    log("点击活动商店")
                    随机点击2(993, 39)
                    sleep(2000)
                } else {
                    var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                    if (bbym != null) {
                        log("获得道具点击画面")
                        随机点击2(640, 429)
                    } else {
                        var bbym = imgempt(true, 0.9, "活动商店购买MAX", 509, 465, 145, 65)
                        if (bbym != null) {
                            log("点击活动商店购买MAX")
                            随机点击2(bbym.x, bbym.y)
                            随机点击2(747, 568)
                            购买次数++
                            if (购买次数 >= 10) {
                                发送异常("购买出错,请检查")
                                alert("购买出错,请检查")
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "购买成功", 537, 204, 208, 143)
                            if (bbym != null) {
                                log("购买成功")
                                随机点击2(635, 435)
                            } else {
                                var bbym = imgempt(true, 0.8, "商城属性药水|商城属性药水2|商城属性药水3|商城属性药水4|商城属性药水5", 207, 120, 1042, 584)
                                if (bbym != null&&未购买属性药) {
                                    未识别次数 = 0
                                    log("点击商城属性药水")
                                    随机点击2(bbym.x, bbym.y)
                                    sleep(1000)
                                    随机点击2(716, 561)
                                    未购买属性药 = false
                                } else {
                                    var bbym = imgempt(true, 0.8, "武器强化卷轴(商店)|武器强化卷轴2(商店)|武器强化卷轴3(商店)", 207, 120, 1042, 584)
                                    if (bbym != null&&(storage.get("武器强化卷轴购买次数")==null||storage.get("武器强化卷轴购买次数")<2)) {
                                        未识别次数 = 0
                                        log("点击武器强化卷轴")
                                        随机点击2(bbym.x, bbym.y)
                                        记录购买次数 = true
                                    } else {
                                        var bbym = imgempt(true, 0.8, "装备强化卷轴(商店)|装备强化卷轴2(商店)|装备强化卷轴3(商店)", 207, 120, 1042, 584)
                                        if (bbym != null) {
                                            未识别次数 = 0
                                            log("点击装备强化卷轴") 
                                            随机点击2(bbym.x, bbym.y)
                                        } else {
                                            // var bbym = imgempt(true, 0.9, "装备强化卷轴箱(商店)|武器强化卷轴箱(商店)|装备强化卷轴箱(商店)2|武器强化卷轴箱(商店)2", 207, 120, 1042, 584)
                                            // if (bbym != null) {
                                            //     未识别次数 = 0
                                            //     log("点击装备强化卷轴箱")
                                            //     随机点击2(bbym.x, bbym.y)
                                            // } else {
                                            var bbym = imgempt(true, 0.9, "一次性购买", 7, 175, 162, 95)
                                            if (bbym != null) {
                                                未识别次数++
                                                if (未识别次数 >= 5) {
                                                    if (记录购买次数) {
                                                        var bbym = imgempt(false, 0.9, "武器强化卷轴售罄", 207, 120, 1042, 584)
                                                        if (bbym != null) {
                                                            log("本次购买了武器强化卷轴")
                                                            if (storage.get("武器强化卷轴购买次数")!=null) {
                                                                storage.put("武器强化卷轴购买次数",(parseInt(storage.get("武器强化卷轴购买次数"))+1).toString())
                                                            }else{
                                                                storage.put("武器强化卷轴购买次数","1")
                                                            }
                                                        }
                                                    }
                                                    log("退出商店")
                                                    随机点击2(40, 30)
                                                    纯回主页()
                                                    return "购买完成"
                                                }
                                            } else {//一次性购买
                                                log("点击铜钱购买卷轴页")
                                                随机点击2(277, 96)
                                            }
                                            // }
                                        }
                                    }
                                }

                            }
                        }
                    }
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("点击活动商店");
                    随机点击2(998, 39)
                    sleep(2000)
                } else {

                }
            }
        }
        sleep(200)
    }
}


function 宝鉴前判断装备() {
    var 点击位置 = 1
    var 初始X = 927
    var 初始Y = 125
    var 整理 = true
    var 点击相同位置判定 = 0
    var 相同次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                if (整理) {
                    log("点击整理背包")
                    随机点击(1178, 577)
                    sleep(2000)
                    log("点击装备栏")
                    for (let index = 0; index < 3; index++) {
                        随机点击2(1248, 222)
                        sleep(300)
                    }
                    整理 = false
                } else {
                    var mi = imgempt(true, 0.8, "物品分享图标|物品分享图标2", 676, 162, 243, 71)
                    if (mi != null) {
                        log("开始判定装备")
                        var mi = imgempt(true, 0.8, "物品分享图标|物品分享图标2", 338, 153, 246, 89)
                        if (mi != null) {
                            var 截图 = captureScreen();
                            var clip = images.clip(截图, 285, 128, 83, 77);
                            var bb = images.interval(clip, "#25493B", 20)
                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
                            bb.recycle()
                            clip.recycle()
                            if (获取的所有点.length >= 100) {
                                log("已经是高级装备了")
                                随机点击2(1248, 222)
                                点击位置++
                            } else {
                                log("穿戴的普通装备")
                                随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                点击位置++
                                随机点击2(1248, 222)
                            }
                        } else {
                            var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 264, 213, 78, 235)
                            if (dinwei != null) {
                                var 截图 = captureScreen();
                                var clip = images.clip(截图, 285, 128, 83, 77);
                                var bb = images.interval(clip, "#25493B", 20)
                                var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
                                bb.recycle()
                                clip.recycle()
                                if (获取的所有点.length >= 100) {
                                    log("已经是高级装备了")
                                    随机点击2(1248, 222)
                                    点击位置++
                                } else {
                                    log("穿戴的普通装备")
                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                    点击位置++
                                    随机点击2(1248, 222)
                                }
                            } else {
                                var mi = imgempt(true, 0.8, "穿戴中|穿戴中2", 914, 111, 298, 403)
                                if (mi != null) {
                                    log("已穿戴装备")
                                    随机点击2(1248, 222)
                                    点击位置++
                                } else {
                                    log("未穿戴")
                                    随机点击2(识别X + 20, 识别Y + 20, 10, 10)
                                    点击位置++
                                    随机点击2(1248, 222)
                                }
                            }
                        }
                    } else {
                        var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 264, 213, 78, 235)
                        if (dinwei != null) {
                            log("已点开有穿戴，但未识别到,取消点击物品")
                            随机点击2(1248, 222)
                        } else {
                            var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 587, 219, 62, 233)
                            if (dinwei != null) {
                                log("已点开无穿戴，但未识别到,取消点击物品")
                                随机点击2(1248, 222)
                            } else {
                                if (点击位置 > 24) {
                                    log("物品栏点击上限背包")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        log("完成穿戴")
                                        return "完成"
                                    }
                                } else {
                                    var 行 = Math.ceil(点击位置 / 4)
                                    var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                    识别X = 初始X + 69 * 列 - 69
                                    识别Y = 初始Y + 69 * 行 - 69
                                    var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 识别X, 识别Y, 69, 69)
                                    if (ssdyw != null) {
                                        var 遍历次数 = 24 - 点击位置
                                        log("已穿戴装备")
                                        点击位置++
                                        var imgMAX = captureScreen();
                                        for (let index = 0; index < 遍历次数; index++) {
                                            var 行 = Math.ceil(点击位置 / 4)
                                            var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                            识别X = 初始X + 69 * 列 - 69
                                            识别Y = 初始Y + 69 * 行 - 69
                                            var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "装备E", 识别X, 识别Y, 69, 69)
                                            if (pmhss != null) {
                                                log("已穿戴装备")
                                                点击位置++
                                            } else {
                                                var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "强化已装备E", 识别X, 识别Y, 69, 69)
                                                if (pmhss != null) {
                                                    log("已穿戴装备")
                                                    点击位置++
                                                } else {
                                                    break
                                                }
                                            }
                                        }
                                        imgMAX.recycle()
                                    } else {
                                        log("点击第" + 点击位置 + "个装备")
                                        随机点击(识别X + 20, 识别Y + 20, 10, 10)
                                        var dinwei = imgempt(true, 0.9, "解除装备", 920, 104, 296, 408)
                                        if (dinwei != null) {
                                            log("已经是穿戴的装备了")
                                            随机点击2(1245, 222)
                                            点击位置++
                                        } else {

                                        }
                                        if (点击位置 == 点击相同位置判定) {
                                            相同次数++
                                            if (相同次数 >= 3) {
                                                log("已完成穿戴")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    log("完成穿戴")
                                                    return "完成"
                                                }
                                            }
                                        } else {
                                            相同次数 = 0
                                        }

                                        点击相同位置判定 = 点击位置
                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                    整理 = true
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        整理 = true
                        随机点击(1115, 34, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 菜单红点处理() {
    var 未找到可处理红点 = 0
    var 强化 = true
    log("处理菜单红点")
    var 副本未完成 = true
    while (true) {
        if (异常捕获("练级") == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "装备(提示弹窗)", 914, 345, 72, 56)
            if (zhuxian != null) {
                log("点击穿上装备");
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                if (信件 != null) {
                    var bbym = cor(true, 15, 956, 613, 118, 99, "#d02e2c", [[0, 2, "#d42c2b"]])
                    if (bbym != null) {
                        var 结果 = 领取邮件内容()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        var zhuxian = imgempt(true, 0.9, "翅膀红点|滑翔机红点", 956, 88, 323, 370)
                        if (zhuxian != null) {
                            log("点击翅膀红点")
                            随机点击2(zhuxian.x, zhuxian.y + 8)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "马儿红点", 1085, 260, 92, 99)
                            if (zhuxian != null) {
                                log("点击马儿红点")
                                var 结果 = 坐骑合成及领取()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                // 随机点击2(zhuxian.x, zhuxian.y + 8)
                            } else {
                                var zhuxian = imgempt(true, 0.9, "武器装扮红点|武器装扮红点2", 1204, 246, 73, 93)
                                if (zhuxian != null) {
                                    log("点击武器装扮红点")
                                    随机点击2(zhuxian.x, zhuxian.y + 8)
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "成就领取", 1024, 165, 98, 97)
                                    if (zhuxian != null) {
                                        log("点击成就领取红点")
                                        随机点击2(zhuxian.x, zhuxian.y + 8)
                                        var 结果 = 领取成就()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    } else {
                                        var zhuxian = imgempt(true, 0.9, "宝鉴红点|宝鉴红点2", 1208, 96, 69, 76)
                                        if (zhuxian != null) {
                                            log("宝鉴前判断装备")
                                            var 结果 = 装备蓝装遍历版()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                var 结果 = 清理背包()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    log("开始宝鉴放置")
                                                    var 结果 = 宝鉴放置()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                }
                                            }
                                            // 随机点击2(zhuxian.x, zhuxian.y + 8)
                                        } else {
                                            var zhuxian = imgempt(true, 0.9, "武器熟练红点", 1034, 100, 75, 75)
                                            if (zhuxian != null) {
                                                log("点击武器熟练红点")
                                                随机点击2(zhuxian.x, zhuxian.y + 8)
                                                var 结果 = 学习武器熟练度技能()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                            } else {
                                                var zhuxian = imgempt(true, 0.9, "天赋红点", 1153, 174, 89, 81)
                                                if (zhuxian != null) {
                                                    log("点击天赋红点")
                                                    随机点击2(zhuxian.x, zhuxian.y + 8)
                                                } else {
                                                    var zhuxian = cor(true, 12, 1156, 630, 41, 32, "#e85857", [[3, 1, "#d42a2a"], [0, 2, "#e74f4c"]])
                                                    if (zhuxian != null) {
                                                        log("处理问好红点")
                                                        随机点击2(1158, 662)
                                                        var 结果 = 处理问好红点()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        }
                                                    } else {
                                                        var zhuxian = imgempt(true, 0.9, "任务红点|任务红点2", 955, 165, 101, 110)
                                                        if (zhuxian != null) {
                                                            log("点击取消任务红点")
                                                            随机点击2(zhuxian.x, zhuxian.y + 8)
                                                            var 结果 = 处理任务红点()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                        } else {
                                                            var zhuxian = imgempt(true, 0.9, "公会红点", 971, 92, 307, 528)
                                                            if (zhuxian != null) {
                                                                log("处理公会红点")
                                                                随机点击2(zhuxian.x, zhuxian.y + 8)
                                                                var 结果 = 处理公会红点()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                }
                                                            } else {
                                                                未找到可处理红点++
                                                                if (未找到可处理红点 >= 10) {
                                                                    纯回主页()
                                                                    return "完成红点"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var guajizhon = imgempt(true, 0.9, "滑翔机|坐骑", 6, 3, 202, 69)
                    if (guajizhon != null) {
                        var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                        if (zhuxian != null) {
                            log("退出")
                            随机点击(1240, 29)
                        } else {
                            log("点击装备滑翔机或武器装扮")
                            随机点击(885, 236)
                            随机点击2(1156, 677)
                        }
                    } else {
                        var guajizhon = imgempt(true, 0.9, "武器外观|武器外观2", 6, 3, 202, 69)
                        if (guajizhon != null) {
                            // 随机点击(1236, 439)
                            var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                            if (zhuxian != null) {
                                log("退出")
                                随机点击(1240, 29)
                            } else {
                                log("点击装备滑翔机或武器装扮")
                                随机点击(885, 236)
                                随机点击2(1156, 677)
                            }
                        } else {

                            // var guajizhon = imgempt(true, 0.9, "滑翔机|武器外观|武器外观2|坐骑", 6, 3, 202, 69)
                            // if (guajizhon != null) {
                            //     var zhuxian = imgempt(true, 0.8, "翅膀E", 791, 126, 156, 77)
                            //     if (zhuxian != null) {
                            //         log("退出")
                            //         随机点击(1240, 29)
                            //         // 纯回主页()
                            //         // return
                            //     } else {
                            //         log("点击装备滑翔机或武器装扮")
                            //         随机点击(885,236)
                            //         随机点击2(1156, 677)
                            //     }
                            // } else {
                            var zhuxian = imgempt(true, 0.9, "接受任务", 981, 624, 119, 82)
                            if (zhuxian != null) {
                                log("点击接受任务")
                                随机点击2(zhuxian.x, zhuxian.y)
                                随机点击(1240, 29)
                                // 纯回主页()
                                // return
                            } else {
                                var zhuxian = imgempt(true, 0.9, "获得补偿", 981, 624, 119, 82)
                                if (zhuxian != null) {
                                    log("点击获得任务奖励")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        var zhuxian = cor(true, 12, 1222, 7, 56, 56, "#e85857", [[3, 1, "#d42a2a"], [0, 2, "#e74f4c"]])
                                        if (zhuxian != null) {//菜单红点
                                            console.log("继续点击菜单");
                                            随机点击2(zhuxian.x - 20, zhuxian.y + 20)
                                        } else {
                                            if (强化) {
                                                var bbym = cor(true, 15, 1028, 111, 70, 69, "#c7baaa", [[0, 4, "#dacfbb"], [0, 8, "#d7ccb6"], [0, 13, "#d2c4aa"], [-3, 13, "#d9cab5"], [-1, 21, "#c0af9b"]])
                                                if (bbym != null) {
                                                    var 结果 = 前往强化("普通斗篷")
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                    强化 = false
                                                } else {
                                                    强化 = false
                                                }
                                            } else {
                                                log("没有菜单红点了")
                                                return
                                            }
                                        }
                                    } else {
                                        var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                        if (zhuxian != null) {
                                            log("点击跳过");
                                            随机点击2(zhuxian.x, zhuxian.y)
                                        } else {
                                            var zhuxian = imgempt(true, 0.9, "信念传承页(中间)", 543, 391, 213, 198)
                                            if (zhuxian != null) {
                                                log("点击加天赋")
                                                随机点击(491, 391)
                                                for (let index = 0; index < 3; index++) {
                                                    随机点击2(535, 386)
                                                }
                                                随机点击2(693, 608)
                                                随机点击2(41, 33)
                                                var 已有属性值 = findNumber("属性值", [451, 396, 89, 56])
                                                if (已有属性值 != null) {
                                                    var 当前等级 = 29 + parseInt(已有属性值)
                                                    var json = {
                                                        "设备id": 设备id,
                                                        "type": "等级",
                                                        "当前等级": 当前等级
                                                    }
                                                    发送数据至中控("fragmentaryState", json)
                                                    storage.put("识别的等级", 当前等级.toString())
                                                } else {
                                                    log("没识别到属性点")
                                                }
                                            } else {
                                                var jdmsz = imgempt(true, 0.9, "转职", 4, 2, 191, 73)
                                                if (jdmsz != null) {
                                                    log("转职页,退出红点处理")
                                                    return
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 处理公会红点() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(603, 635)
            } else {

                var renwuy = imgempt(true, 0.9, "公会页", 11, 5, 238, 68)
                if (renwuy != null) {
                    sleep(200)
                    var zhuxian = imgempt(true, 0.9, "公会签到红点", 486, 542, 291, 108)
                    if (zhuxian != null) {
                        log("点击公会签到红点")
                        随机点击2(zhuxian.x, zhuxian.y + 10)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "公会宝箱领取红点", 1034, 551, 190, 118)
                        if (zhuxian != null) {
                            log("点击完成工会任务")
                            随机点击2(zhuxian.x, zhuxian.y + 10)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "完成工会任务|公会宝箱领取红点", 369, 543, 885, 93)
                            if (zhuxian != null) {
                                log("点击完成工会任务")
                                随机点击2(zhuxian.x, zhuxian.y)
                            } else {
                                var zhuxian = imgempt(true, 0.9, "完成工会任务|公会宝箱领取红点", 166, 601, 161, 111)
                                if (zhuxian != null) {
                                    log("点击领取公会积分")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "公会任务页红点", 384, 46, 258, 139)
                                    if (zhuxian != null) {
                                        log("点击公会任务页红点")
                                        随机点击2(zhuxian.x, zhuxian.y + 10)
                                    } else {
                                        log("没有公会红点")
                                        随机点击2(42, 35)
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                    if (zhuxian != null) {
                        log("点击跳过");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "公会红点", 971, 92, 307, 528)
                        if (zhuxian != null) {
                            log("点击公会红点")
                            随机点击2(zhuxian.x, zhuxian.y + 8)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("已回到主页");
                                return
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 处理任务红点() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var renwuy = imgempt(true, 0.9, "任务页", 11, 5, 238, 68)
            if (renwuy != null) {
                sleep(200)
                var zhuxian = imgempt(true, 0.9, "接受任务", 981, 624, 119, 82)
                if (zhuxian != null) {
                    log("点击接受任务")
                    随机点击2(zhuxian.x, zhuxian.y)
                    随机点击(1240, 29)
                } else {
                    var zhuxian = imgempt(true, 0.9, "获得补偿|获得补偿2", 981, 624, 119, 82)
                    if (zhuxian != null) {
                        log("点击获得任务奖励")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = cor(true, 12, 259, 69, 475, 39, "#e85857", [[3, 1, "#d42a2a"], [0, 2, "#e74f4c"]])
                        if (zhuxian != null) {//菜单红点
                            console.log("点击查看任务红点");
                            随机点击2(zhuxian.x - 20, zhuxian.y + 20)
                            随机点击2(42, 35)
                        } else {
                            log("没有任务红点")
                            随机点击2(42, 35)
                        }
                    }
                }
            } else {
                var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                if (zhuxian != null) {
                    log("点击跳过");
                    随机点击2(zhuxian.x, zhuxian.y)
                } else {
                    var zhuxian = imgempt(true, 0.9, "任务红点", 955, 165, 101, 110)
                    if (zhuxian != null) {
                        log("点击任务红点")
                        随机点击2(zhuxian.x, zhuxian.y + 8)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("已回到主页");
                            return
                        } else {
                            var jdmsz = imgempt(true, 0.9, "转职", 4, 2, 191, 73)
                            if (jdmsz != null) {
                                log("转职页，退出任务红点")
                                return
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 处理问好红点() {
    var 找不到红点 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = cor(true, 12, 123, 125, 38, 514, "#e85857", [[3, 1, "#d42a2a"], [0, 2, "#e74f4c"]])
            if (zhuxian != null) {
                log("点击阅读问号")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                if (zhuxian != null) {
                    log("点击跳过");
                    随机点击2(zhuxian.x, zhuxian.y)
                } else {
                    找不到红点++
                    if (找不到红点 >= 3) {
                        纯回主页()
                        return
                    }
                }
            }
        }
        sleep(200)
    }
}
function 纯回主页(mode) {
    while (true) {
        if (异常捕获(mode) == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(603, 635)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "左上角关闭XX", 2, 43, 92, 136)
                if (zhuchengzahuo != null) {
                    log("关闭左上角关闭XX");
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                } else {
                    var 关闭XX = imgempt(false, 0.9, "关闭XX|签到XX", 0, 0, 0, 0)
                    if (关闭XX != null) {
                        log("关闭XX");
                        随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                    } else {

                    var 结果 = imgempt(true, 0.9, "制裁期限|制裁期限2", 426, 272, 275, 162)
                    if (结果 != null) {
                        toastLog("封号")
                        sleep(9999999999)
                    } else {
                        var 结果 = imgempt(true, 0.9, "取消等待", 456, 412, 354, 157)
                        if (结果 != null) {
                            log("排队中");
                            登录点击计次 = 0
                            sleep(3000)
                        } else {
                            var 结果 = imgempt(true, 0.9, "服务器连接失败", 420, 225, 446, 192)
                            if (结果 != null) {
                                log("服务器连接失败");
                                    var 随机时间 = random(5, 10) * 60
                                while (随机时间 > 0) {
                                    var 时间 = convertSecondsToHMS(随机时间)
                                    sleep(1000)
                                    ui.run(function () {
                                        window.计时器.setText(时间)
                                    })
                                    随机时间--
                                    var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                    if (ksyx != null) {
                                        toastLog("检测到已进入角色页面,不再等待")
                                        break
                                    }
                                }
                                ui.run(function () {
                                    window.计时器.setText("")
                                })
                                // alert("无网络环境")
                                // exit()
                                随机点击(643, 450, 10, 10)
                                return "掉线"
                            } else {
                                var 结果 = imgempt(true, 0.9, "长时间未操作", 462, 264, 135, 88)
                                if (结果 != null) {
                                    log("长时间未操作");
                                    随机点击(639, 450, 10, 10)
                                } else {
                                    var 结果 = imgempt(true, 0.9, "画面标题", 429, 196, 420, 325)
                                    if (结果 != null) {
                                        log("画面标题");
                                        // 随机点击(结果.x, 结果.y, 10, 10)
                                        log("移动到标题画面");
                                            var 随机时间 = random(5, 10) * 60
                                        var 重启 = true
                                        while (随机时间 > 0) {
                                            var 时间 = convertSecondsToHMS(随机时间)
                                            sleep(1000)
                                            ui.run(function () {
                                                window.计时器.setText(时间)
                                            })
                                            随机时间--
                                            var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                            if (ksyx != null) {
                                                toastLog("检测到已进入角色页面,不再等待")
                                                重启 = false
                                                ui.run(function () {
                                                    window.计时器.setText("")
                                                })
                                                return "掉线"
                                            }
                                        }
                                        ui.run(function () {
                                            window.计时器.setText("")
                                        })
                                        // alert("移动到标题画面")
                                        // exit()
                                        if (重启) {
                                            关闭应用("com.wemade.nightcrows");
                                          
                                            log("拉起游戏")
                                            app.launch("com.wemade.nightcrows")
                                            sleep(5000)
                                        }
                                        return "掉线"
                                    } else {
                                        var jinribts = imgempt(true, 0.9, "今天不提示|今天不提示2", 102, 561, 280, 77)
                                        if (jinribts != null) {
                                            log("今天不提示");
                                            随机点击(144, 590, 10, 10)
                                        } else {
                                            var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                            if (ksyx != null) {
                                                log("开始游戏");
                                                随机点击(ksyx.x, ksyx.y, 10, 10)
                                                重复点击坐标次数 = 0
                                                sleep(5000)
                                            } else {
                                                var ljjs = imgempt(true, 0.9, "连接角色", 943, 154, 208, 75)
                                                if (ljjs != null) {
                                                    log("连接角色");
                                                    随机点击(ljjs.x, ljjs.y, 10, 10)
                                                } else {
                                                    var xzwdjs = imgempt(true, 0.9, "寻找我的角色", 510, 69, 211, 84)
                                                    if (xzwdjs != null) {
                                                        log("选择服务器");
                                                        随机点击(xzwdjs.x, xzwdjs.y, 10, 10)
                                                        重复点击坐标次数 = 0
                                                    } else {
                                                        var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                                                        if (关闭XX != null) {
                                                            log("关闭XX");
                                                            随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                                        } else {
                                                            var 关闭背包 = imgempt(true, 0.9, "关闭背包", 1209, 42, 70, 87)
                                                            if (关闭背包 != null) {
                                                                log("关闭背包");
                                                                随机点击(关闭背包.x, 关闭背包.y, 10, 10)
                                                            } else {
                                                                var 取消 = imgempt(false, 0.9, "取消", 1209, 42, 70, 87)
                                                                if (取消 != null) {
                                                                    log("取消");
                                                                    随机点击(取消.x, 取消.y, 10, 10)
                                                                } else {

                                                                    var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                                    if (退出 != null) {
                                                                        log("退出");
                                                                        随机点击(退出.x, 退出.y, 10, 10)
                                                                    } else {
                                                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 5, 2, 80, 68)
                                                                        if (dtgbzt != null) {
                                                                            log("地图关闭状态,点击打开");
                                                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                        } else {

                                                                            var djryhm = imgempt(true, 0.9, "点击任意画面", 540, 488, 92, 53)
                                                                            if (djryhm != null) {
                                                                                log("点击任意画面");
                                                                                随机点击(djryhm.x, djryhm.y, 10, 10)
                                                                                登录点击计次++
                                                                                log("登录点击计次:" + 登录点击计次)
                                                                                if (登录点击计次 >= 6) {
                                                                                    登录点击计次 = 0
                                                                                    关闭应用("com.wemade.nightcrows");
                                                                                    sleep(10000)
                                                                                    log("拉起游戏")
                                                                                    app.launch("com.wemade.nightcrows")
                                                                                }
                                                                                sleep(10000)
                                                                            } else {
                                                                                var xzfwq = imgempt(true, 0.9, "选择服务器", 760, 606, 62, 61)
                                                                                if (xzfwq != null) {
                                                                                    log("选择服务器");
                                                                                    随机点击(xzfwq.x, xzfwq.y, 10, 10)
                                                                                    重复点击坐标次数 = 0
                                                                                } else {
                                                                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                    if (jdmsz != null) {
                                                                                        log("主页,退出节电")
                                                                                        swipe(566, 389, 968, 226, 500)
                                                                                    } else {
                                                                                        var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                                                                                        if (信件 != null) {
                                                                                            log("关闭菜单")
                                                                                            随机点击(1243, 35, 10, 10)
                                                                                        } else {
                                                                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                                            if (手 != null) {
                                                                                                console.log("已到主页");
                                                                                                return
                                                                                            } else {
                                                                                                var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                                                if (zhuxian != null) {
                                                                                                    log("点击跳过");
                                                                                                    随机点击2(zhuxian.x, zhuxian.y)
                                                                                                } else {
                                                                                                    var xzfwq = imgempt(false, 0.9, "Google登录图标|Google登录图标2", 257, 281, 214, 125)
                                                                                                    if (xzfwq != null) {
                                                                                                        log("纯回主页，账号掉出");
                                                                                                        return "掉线"

                                                                                                    } else {
                                                                                                        var zhuxian = imgempt(true, 0.9, "登录页点击任意", 1150, 605, 126, 112)
                                                                                                        if (zhuxian != null) {
                                                                                                            log("登录页点击任意(纯回主页)");
                                                                                                            随机点击2(630, 514)
                                                                                                            登录点击计次++
                                                                                                            log("登录点击计次:" + 登录点击计次)
                                                                                                            if (登录点击计次 >= 6) {
                                                                                                                登录点击计次 = 0
                                                                                                                关闭应用("com.wemade.nightcrows");
                                                                                                                sleep(10000)
                                                                                                                log("拉起游戏")
                                                                                                                app.launch("com.wemade.nightcrows")
                                                                                                            }
                                                                                                            sleep(10000)
                                                                                                        } else {
                                                                                                            var zhuxian = imgempt(true, 0.9, "信念传承页(中间)", 543, 391, 213, 198)
                                                                                                            if (zhuxian != null) {
                                                                                                                log("退出加点");
                                                                                                                随机点击2(1235, 30)
                                                                                                            }
                                                                                                        }
                                                                                                    }

                                                                                                }//
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }}
                }
            }
        }
        sleep(200)
    }
}


function 学习武器熟练度技能() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确定升级熟练度", 646, 426, 181, 56)
            if (zhuxian != null) {
                log("确定升级")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var zhuxian = imgempt(true, 0.9, "增加弓的熟练度|增加弓的熟练度2", 510, 46, 288, 105)
                if (zhuxian != null) {
                    var zhuxian = imgempt(true, 0.9, "未升级熟练度技能|未升级熟练度技能2|未升级熟练度技能3|未升级熟练度技能4|未升级熟练度技能5", 240, 145, 103, 469)
                    if (zhuxian != null) {
                        log("点击未升级熟练度技能")
                        if (zhuxian.y < 222) {
                            随机点击2(zhuxian.x, zhuxian.y + 8)
                        } else if (zhuxian.y < 520) {
                            随机点击2(zhuxian.x, zhuxian.y - 8)
                        } else {
                            随机点击2(zhuxian.x, zhuxian.y)
                        }
                    } else {

                        var bbym = cor(true, 12, 249, 156, 75, 432, "#3b3328", [[-5, 0, "#3f362d"], [-9, 2, "#1a150f"], [-6, 4, "#342b24"], [0, 6, "#443a30"], [5, 11, "#302825"], [6, -5, "#403933"], [-9, -8, "#463e3b"], [-15, 0, "#3f3a34"], [-10, 9, "#38302d"], [-30, 100, "#24201d"], [-29, 81, "#1e1d1b"]])
                        if (bbym != null) {
                            log("点击未升级熟练度技能颜色识别")
                            if (bbym.y < 222) {
                                随机点击2(bbym.x, bbym.y + 8)
                            } else if (bbym.y < 520) {
                                随机点击2(bbym.x, bbym.y - 8)
                            } else {
                                随机点击2(bbym.x, bbym.y)
                            }
                        } else {

                            var guajizhon = imgempt(true, 0.9, "武器熟练度铜钱标识|武器熟练度铜钱标识2|武器熟练度铜钱标识3", 810, 574, 145, 77)
                            if (guajizhon != null) {
                                log("点击升级熟练度技能")
                                随机点击2(1039, 608)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                } else { }
                            } else {
                                log("关闭熟练技能弹窗")
                                随机点击2(1128, 92)
                            }
                        }
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "武器熟练度页|武器熟练度页2", 4, 2, 181, 74)
                    if (zhuxian != null) {
                        var bbym = cor(true, 12, 28, 514, 305, 187, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                        if (bbym != null) {
                            log("点击熟练度等级")
                            随机点击2(bbym.x - 16, bbym.y + 16)
                        } else {
                            log("关闭武器熟练度页")
                            随机点击2(40, 32)
                        }
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("已回到主页");
                            return
                        } else {
                            var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                            if (zhuxian != null) {
                                log("点击跳过");
                                随机点击2(zhuxian.x, zhuxian.y)
                            } else {

                            }
                        }
                    }
                }
            }

        }
        sleep(200)
    }
}


function 武器熟练度() {
    var 武器熟练度未识别次数 = 0
    var 武器熟练弹窗度关闭次数 = 0
    var 熟练度等级查看 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确定升级熟练度", 646, 426, 181, 56)
            if (zhuxian != null) {
                log("确定升级")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                // var zhuxian = imgempt(true, 0.9, "增加弓的熟练度|增加弓的熟练度2", 510, 46, 288, 105)
                var zhuxian = imgempt(true, 0.9, "熟练度级别|熟练度级别2", 124, 121, 179, 64)
                if (zhuxian != null) {
                    熟练度等级查看 = false
                    var guajizhon = imgempt(true, 0.9, "武器熟练度升级黄石头标识", 857, 581, 135, 70)
                    if (guajizhon != null) {
                        log("武器熟练度升级黄石头标识,放弃升级")
                        随机点击2(1128, 92)
                        // var 结果 = 纯回主页()
                        // if (结果 == "掉线") {
                        //     return "掉线"
                        // } else {
                        //     return "完成"
                        // }
                    } else {
                        var guajizhon = imgempt(true, 0.9, "武器熟练度铜钱标识|武器熟练度铜钱标识2|武器熟练度铜钱标识3", 810, 574, 145, 77)
                        if (guajizhon != null) {
                            log("点击升级熟练度技能")
                            随机点击2(1039, 608)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            } else { }
                        } else {
                            var zhuxian = matchImg(true, "最上边", 0.85, "未升级熟练度技能|未升级熟练度技能2|未升级熟练度技能3|未升级熟练度技能4|未升级熟练度技能5|未升级熟练度技能6", 240, 145, 103, 469)
                            // var zhuxian = imgempt(true, 0.9, "未升级熟练度技能|未升级熟练度技能2|未升级熟练度技能3|未升级熟练度技能4|未升级熟练度技能5", 240, 145, 103, 469)
                            if (zhuxian != null) {
                                log("点击未升级熟练度技能")
                                if (zhuxian.resultSet.y < 222) {
                                    随机点击2(zhuxian.resultSet.x, zhuxian.resultSet.y + 8)
                                } else if (zhuxian.resultSet.y < 520) {
                                    随机点击2(zhuxian.resultSet.x, zhuxian.resultSet.y - 8)
                                } else {
                                    随机点击2(zhuxian.resultSet.x, zhuxian.resultSet.y)
                                }
                                // if (zhuxian.y < 222) {
                                //     随机点击2(zhuxian.x, zhuxian.y + 8)
                                // } else if (zhuxian.y < 520) {
                                //     随机点击2(zhuxian.x, zhuxian.y - 8)
                                // } else {
                                //     随机点击2(zhuxian.x, zhuxian.y)
                                // }
                            } else {
                                var bbym = cor(true, 12, 249, 156, 75, 432, "#3b3328", [[-5, 0, "#3f362d"], [-9, 2, "#1a150f"], [-6, 4, "#342b24"], [0, 6, "#443a30"], [5, 11, "#302825"], [6, -5, "#403933"], [-9, -8, "#463e3b"], [-15, 0, "#3f3a34"], [-10, 9, "#38302d"], [-30, 100, "#24201d"], [-29, 81, "#1e1d1b"]])
                                if (bbym != null) {
                                    log("点击未升级熟练度技能颜色识别")
                                    if (bbym.y < 222) {
                                        随机点击2(bbym.x, bbym.y + 8)
                                    } else if (bbym.y < 520) {
                                        随机点击2(bbym.x, bbym.y - 8)
                                    } else {
                                        随机点击2(bbym.x, bbym.y)
                                    }
                                } else {
                                    swipe(217, 493, 206, 350, 2000)
                                    武器熟练弹窗度关闭次数++
                                    if (武器熟练弹窗度关闭次数 >= 3) {
                                        随机点击2(1128, 92)
                                        log("武器熟练弹窗度关闭次数过多")
                                        // 随机点击2(40, 32)
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "武器熟练度页|武器熟练度页2", 4, 2, 181, 74)
                    if (zhuxian != null) {
                        if (熟练度等级查看) {
                            log("点击查看等级详细")
                            随机点击2(77, 576)
                        } else {
                            if (storage.get("二转记录") == "已二转") {
                                log("已二转,看看技能")
                                var 结果 = 武器熟练度技能学习()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "完成"
                                }
                            } else {
                                log("关闭武器熟练度页")
                                // 随机点击2(40, 32)
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "完成"
                                }
                            }

                        }

                    } else {
                        var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                        if (zhuxian != null) {
                            log("点击跳过");
                            随机点击2(zhuxian.x, zhuxian.y)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "武器熟练红点", 1034, 100, 75, 75)
                            if (zhuxian != null) {
                                log("点击武器熟练红点")
                                随机点击2(zhuxian.x, zhuxian.y + 8)
                            } else {
                                var zhuxian = imgempt(true, 0.9, "菜单_武器熟练度", 1021, 88, 88, 86)
                                if (zhuxian != null) {
                                    log("点击武器熟练")
                                    随机点击2(zhuxian.x, zhuxian.y)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {
                                        武器熟练度未识别次数++
                                        if (武器熟练度未识别次数 >= 3) {
                                            log("未找到可提升武器熟练度")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }

        }
        sleep(200)
    }
}

function 武器熟练度技能学习() {
    var 武器熟练度未识别次数 = 0
    var 需要学习的武器技能 = "定向轰击|开始狩猎|弱点感知|致命一击|烈风|风暴之诗"
    var 武器技能翻页次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确定升级熟练度", 646, 426, 181, 56)
            if (zhuxian != null) {
                log("确定升级")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var zhuxian = imgempt(true, 0.9, "武器熟练度页|武器熟练度页2", 4, 2, 181, 74)
                if (zhuxian != null) {
                    var zhizrenwu = CoordinatesAndPictureName(true, 0.85, 需要学习的武器技能, 369, 166, 710, 507)
                    if (zhizrenwu != null) {
                        log("点击制造活动:" + zhizrenwu.图名)
                        随机点击(zhizrenwu.x, zhizrenwu.y)
                        sleep(1000)
                        var zhuxian = matchImg(true, "最上边", 0.9, "5点熟练度技能", 643, 268, 137, 258)
                        if (zhuxian != null) {
                            log("点击最上方5点熟练度技能")
                            随机点击2(zhuxian.resultSet.x, zhuxian.resultSet.y)
                        } else {
                            var zhuxian = matchImg(true, "最上边", 0.9, "4点熟练度技能", 643, 268, 137, 258)
                            if (zhuxian != null) {
                                log("点击最上方4点熟练度技能")
                                随机点击2(zhuxian.resultSet.x, zhuxian.resultSet.y)
                            } else {

                            }
                        }
                        var zhuxian = imgempt(true, 0.9, "熟练度技能升级铜钱图标", 644, 502, 318, 109)
                        if (zhuxian != null) {
                            log("确定升级")
                            随机点击(zhuxian.x, zhuxian.y)
                            随机点击(178, 232)
                        } else {

                        }

                        if (需要学习的武器技能.includes("|")) {
                            var regex = new RegExp(zhizrenwu.图名 + "\\|");
                            if (需要学习的武器技能.match(regex)) {
                                需要学习的武器技能 = 需要学习的武器技能.replace(zhizrenwu.图名 + "|", '');
                            } else {
                                需要学习的武器技能 = 需要学习的武器技能.replace("|" + zhizrenwu.图名, '');
                            }
                        } else {
                            需要学习的武器技能 = 需要学习的武器技能.replace(zhizrenwu.图名, '');
                        }
                    } else {
                        log("武器熟练度页啥也没找到,翻页")
                        swipe(609, 567, 1033, 474, 2000)
                        武器技能翻页次数++
                        if (武器技能翻页次数 >= 3) {
                            log("翻页次数过多，退出学习")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "完成"
                            }
                        }
                    }
                } else {
                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                    if (zhuxian != null) {
                        log("点击跳过");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "武器熟练红点", 1034, 100, 75, 75)
                        if (zhuxian != null) {
                            log("点击武器熟练红点")
                            随机点击2(zhuxian.x, zhuxian.y + 8)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "菜单_武器熟练度", 1021, 88, 88, 86)
                            if (zhuxian != null) {
                                log("点击武器熟练")
                                随机点击2(zhuxian.x, zhuxian.y)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {
                                    if (武器熟练度未识别次数 >= 3) {
                                        log("未找到可提升武器熟练度")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    } else {
                                        武器熟练度未识别次数++
                                    }
                                }
                            }
                        }
                    }
                }
            }

        }
        sleep(200)
    }
}

function 宝鉴放置() {
    var 宝鉴红点未找到 = 0
    var 可宝鉴页点击次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确认宝鉴", 643, 451, 204, 75)
            if (zhuxian != null) {
                log("确认宝鉴")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var zhuxian = imgempt(true, 0.9, "宝鉴页", 4, 2, 181, 74)
                if (zhuxian != null) {
                    var zhuxian = imgempt(true, 0.9, "确定登记", 648, 417, 161, 62)
                    if (zhuxian != null) {
                        log("确定登记")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "未勾选优先显示宝鉴", 987, 646, 108, 68)
                        if (zhuxian != null) {
                            log("勾选优先可宝鉴")
                            随机点击2(zhuxian.x, zhuxian.y)
                        } else {
                            var bbym = cor(true, 12, 429, 124, 403, 538, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                            if (bbym != null) {
                                log("点击可宝鉴物品")
                                随机点击(bbym.x - 280, bbym.y)
                                随机点击2(1048, 601)
                                宝鉴红点未找到 = 0
                            } else {
                                var bbym = cor(true, 12, 58, 68, 876, 42, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                if (bbym != null) {
                                    if (bbym.x >= 328 && bbym.x <= 482) {
                                        log("装备图鉴红点,分解处理")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            var 结果 = 清理背包()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {

                                            }
                                        }
                                    } else {
                                        log("点击可宝鉴页")
                                        随机点击(bbym.x, bbym.y)
                                        宝鉴红点未找到 = 0
                                        可宝鉴页点击次数++
                                        if (可宝鉴页点击次数 >= 5) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return
                                            }
                                        }
                                    }

                                } else {
                                    宝鉴红点未找到++
                                    if (宝鉴红点未找到 >= 5) {
                                        宝鉴红点未找到 = 0
                                        log("退出宝鉴")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_图鉴|菜单_图鉴2", 958, 87, 321, 499)//
                    if (jizhandi != null) {
                        log("点击菜单_图鉴");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 成就图鉴() {
    var 成就图鉴未识别到次数 = 0
    var 宝鉴红点未找到 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "确认宝鉴", 643, 451, 204, 75)
            if (zhuxian != null) {
                log("确认宝鉴")
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var zhuxian = imgempt(true, 0.9, "宝鉴页", 4, 2, 181, 74)
                if (zhuxian != null) {
                    var zhuxian = imgempt(true, 0.9, "确定登记", 648, 417, 161, 62)
                    if (zhuxian != null) {
                        log("确定登记")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "未勾选优先显示宝鉴", 987, 646, 108, 68)
                        if (zhuxian != null) {
                            log("勾选优先可宝鉴")
                            随机点击2(zhuxian.x, zhuxian.y)//
                        } else {
                            var zhuxian = imgempt(true, 0.9, "成就宝鉴页|宝鉴装备页|宝鉴徽章页|宝鉴制造页|宝鉴制造页2|宝鉴活动徽章页", 615, 652, 198, 63)
                            if (zhuxian != null) {
                                log("成就宝鉴页")
                                var bbym = cor(true, 12, 429, 124, 403, 538, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                if (bbym != null) {
                                    成就图鉴未识别到次数 = 0
                                    log("点击可宝鉴物品")
                                    随机点击(189, bbym.y)
                                    随机点击2(1037, 603)
                                } else {
                                    var bbym = cor(true, 12, 210,63,165,66, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                    if (bbym != null) {
                                        log("点击可宝鉴页")
                                        随机点击(bbym.x, bbym.y)
                                        成就图鉴未识别到次数 = 0
                                    } else {
                                        var bbym = cor(true, 12, 480,60,340,84, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                        if (bbym != null) {
                                            成就图鉴未识别到次数 = 0
                                            log("点击可宝鉴页")
                                            随机点击(bbym.x, bbym.y)
                                        } else {

                                        成就图鉴未识别到次数++
                                        if (成就图鉴未识别到次数 >= 6) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                        }}
                                    }
                                }
                            } else {
                                var bbym = cor(true, 12, 210, 63, 165, 66, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                if (bbym != null) {
                                    成就图鉴未识别到次数 = 0
                                    log("点击可宝鉴页")
                                    随机点击(bbym.x, bbym.y)
                                } else {
                                    var bbym = cor(true, 12, 480, 60, 340, 84, "#ce302f", [[0, 3, "#d32e2c"], [-2, 3, "#e14141"], [-2, 0, "#eb5755"]])
                                    if (bbym != null) {
                                        成就图鉴未识别到次数 = 0
                                        log("点击可宝鉴页")
                                        随机点击(bbym.x, bbym.y)
                                    } else {
                                        宝鉴红点未找到++
                                        if (宝鉴红点未找到 >= 5) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_图鉴|菜单_图鉴2", 958, 87, 321, 499)//
                    if (jizhandi != null) {
                        log("点击菜单_图鉴");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (jdmsz != null) {
                                log("宝鉴,退出节电")
                                swipe(566, 389, 968, 226, 500)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 领取成就(mode) {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuxian = imgempt(true, 0.9, "获得业绩奖励", 513, 216, 270, 154)
            if (zhuxian != null) {
                log("获得业绩奖励")
                随机点击2(631, 575)
            } else {
                var zhuxian = imgempt(true, 0.9, "中间成就获得", 528, 457, 249, 102)
                if (zhuxian != null) {
                    log("获得大成就奖励")
                    随机点击2(zhuxian.x, zhuxian.y)
                    for (let index = 0; index < 3; index++) {
                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                        if (bbkjbztc != null) {
                            log("背包空间不足弹窗")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                // var 结果 = 成就图鉴()
                                // if (结果 == "掉线") {
                                //     return "掉线"
                                // } else {
                                var 结果 = 清理背包()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    break
                                }
                                // }
                            }
                        }
                        sleep(200)
                    }
                } else {
                    var zhuxian = imgempt(false, 0.8, "可以领成就|可以领成就2", 0, 0, 0, 0)
                    if (zhuxian != null) {
                        log("点击进入成就详细页")
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "成就页", 17, 3, 173, 78)
                        if (zhuxian != null) {
                            var bbym = imgempt(true, 0.9, "成就得到|成就得到2", 992, 200, 205, 99)
                            if (bbym != null) {
                                log("点击全部领取")
                                随机点击2(1127, 128)
                                for (let index = 0; index < 3; index++) {
                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                    if (bbkjbztc != null) {
                                        log("背包空间不足弹窗")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            // var 结果 = 成就图鉴()
                                            // if (结果 == "掉线") {
                                            //     return "掉线"
                                            // } else {
                                            var 结果 = 清理背包()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                break
                                            }
                                            // }
                                        }
                                    }
                                    sleep(200)
                                }
                                ///
                            } else {
                                var zhuxian = imgempt(true, 0.9, "未完成成就", 990, 209, 209, 79)
                                if (zhuxian != null) {
                                    log("未完成成就")
                                    随机点击2(37, 34)
                                } else {
                                    if (mode == "提升") {
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    } else {
                                        log("退出成就")
                                        随机点击2(37, 34)
                                    }
                                }
                            }
                        } else {
                            if (mode == "提升") {
                                var jizhandi = imgempt(true, 0.9, "菜单_成就|菜单_成就2", 958, 87, 321, 499)//
                                if (jizhandi != null) {
                                    log("点击菜单_成就");
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {

                                    }
                                }
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("已回到主页");
                                    return
                                } else {
                                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                    if (zhuxian != null) {
                                        log("点击跳过");
                                        随机点击2(zhuxian.x, zhuxian.y)
                                    } else { }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 技能布置() {
    var 剪刀技能 = true
    var 加强技能 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var guajizhon = imgempt(true, 0.9, "开启自动使用技能|开启自动使用技能2", 186, 510, 153, 151)
            if (guajizhon != null) {
                log("开启自动使用技能")
                随机点击2(guajizhon.x + 10, guajizhon.y)
            } else {
                var guajizhon = imgempt(true, 0.9, "开启右侧技能", 1091, 133, 139, 444)
                var suosi = imgempt(true, 0.9, "右侧技能锁住", 873, 134, 194, 433)
                if (guajizhon != null && suosi == null) {
                    log("开启自动使用技能")
                    随机点击2(guajizhon.x, guajizhon.y)
                } else {
                    var bbym = imgempt(true, 0.9, "放置技能", 944, 546, 82, 69)
                    if (bbym != null) {
                        log("点击放置技能")
                        if (剪刀技能) {
                            var bbym = imgempt(true, 0.9, "剪刀技能左侧", 23, 111, 135, 491)
                            if (bbym != null) {
                                log("剪刀技能已放置")
                                剪刀技能 = false
                            } else {
                                var bbym = imgempt(true, 0.9, "剪刀技能(右侧)", 875, 84, 179, 493)
                                if (bbym != null) {
                                    log("点击放置技能")
                                    for (let index = 0; index < 2; index++) {
                                        随机点击2(bbym.x, bbym.y)
                                    }
                                    剪刀技能 = false
                                } else {

                                }
                            }
                        } else if (加强技能) {
                            var bbym = imgempt(true, 0.9, "加强技能左侧", 23, 111, 135, 491)
                            if (bbym != null) {
                                log("加强技能已放置")
                                加强技能 = false
                            } else {
                                var bbym = imgempt(true, 0.9, "加强技能右侧", 875, 84, 179, 493)
                                if (bbym != null) {
                                    log("点击放置技能")
                                    for (let index = 0; index < 2; index++) {
                                        随机点击2(bbym.x, bbym.y)
                                    }
                                    加强技能 = false
                                } else {
                                    加强技能 = false
                                }
                            }
                        } else {
                            var bbym2 = imgempt(true, 0.9, "技能开启状态", 210, 525, 142, 75)//
                            if (bbym2 != null) {
                                var bbym = imgempt(true, 0.9, "勾选频繁使用|勾选禁用跳过", 7, 563, 159, 104)
                                if (bbym != null) {
                                    log("点击勾选起来")
                                    随机点击2(bbym.x, bbym.y)
                                } else {//
                                    var suosi = imgempt(true, 0.9, "右侧技能锁住", 873, 134, 194, 433)
                                    var bbym = imgempt(true, 0.9, "决心_关闭状态", 1091, 133, 139, 444)
                                    if (bbym != null && suosi == null) {
                                        log("点击开启决心")
                                        随机点击2(bbym.x, bbym.y)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "未解锁的技能", 881, 358, 153, 166)
                                        if (bbym != null) {
                                            log("放置完成,关闭技能栏")
                                            随机点击2(1247, 147)
                                            随机点击2(1247, 228)
                                            纯回主页()
                                            return
                                        } else {
                                            log("放置完成,关闭技能栏")
                                            随机点击2(1247, 147)
                                            随机点击2(1247, 228)
                                            纯回主页()
                                            return
                                        }
                                    }
                                }
                            } else {
                                log("啥也木有")
                            }
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "技能(打开)|技能(打开)2", 1040, 51, 163, 79)
                        if (bbym != null) {
                            log("点击放置技能")
                            随机点击2(981, 578)
                        } else {
                            var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                            if (zhuxian != null) {
                                log("点击跳过");
                                随机点击2(zhuxian.x, zhuxian.y)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("点击技能")
                                    随机点击(1176, 34, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 清理过期物品() {
    log("清理过期物品")
    var 整理 = true
    var 未找到 = 0

    清理背包("清理过期物品")

    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(603, 635)
            } else {
                var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                if (bbym != null) {
                    log("使用最大物品数")
                    随机点击2(bbym.x, bbym.y)
                    随机点击2(bbym.x, bbym.y + 100)
                } else {
                    //活动箱子
                    var bbym = imgempt(true, 0.9, "活动箱子", 636, 212, 175, 65)//加速服活动箱子  到期可去掉 11.12
                    if (bbym != null) {
                        log("活动箱子非过期")
                        storage.put("清理过期物品时间点", new Date().getTime())
                        纯回主页()
                        return "使用完毕"
                    } else {
                        var bbym = imgempt(true, 0.9, "过期物品|过期物品2", 617, 248, 118, 182)
                        if (bbym != null) {
                            log("点击删除")
                            随机点击(838, 537)
                        } else {
                            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                            if (bbym != null) {
                                log("背包里")
                                if (整理) {
                                    log("点击整理背包")
                                    随机点击2(1178, 577)
                                    sleep(2000)
                                    整理 = false
                                } else {
                                    log("点击宝箱栏")
                                    随机点击2(1249, 309)
                                    var 结果 = cor(true, 8, 913, 111, 321, 405, "#41261d", [[-1, 2, "#382217"], [0, 57, "#291715"], [-1, 59, "#2c1714"], [3, 59, "#2a110d"], [57, 59, "#2d0f0d"], [57, 0, "#301710"], [57, 3, "#311814"], [58, 3, "#311813"], [0, 1, "#3b2317"], [2, 0, "#3a1d15"]])
                                    if (结果 != null) {
                                        log("点击过期物品")
                                        随机点击2(结果.x + 20, 结果.y + 20)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                        if (bbym != null) {
                                            log("使用完毕,关闭背包")
                                            // storage.put("清理过期物品日期", new Date().getDate())
                                            storage.put("清理过期物品时间点", new Date().getTime())
                                            纯回主页()
                                            return "使用完毕"
                                        } else {
                                            未找到++
                                            if (未找到 >= 9) {
                                                log("使用完毕,关闭背包")
                                                // storage.put("清理过期物品日期", new Date().getDate())
                                                storage.put("清理过期物品时间点", new Date().getTime())
                                                纯回主页()
                                                return "使用完毕"
                                            }
                                            log("未找到可使用物品")
                                            swipe(1037, 432, 1036, 278, 2000)
                                        }
                                    }
                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                                if (bbym != null) {
                                    log("点击背包")
                                    整理 = true
                                    随机点击2(bbym.x, bbym.y)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("点击背包")
                                        随机点击(1115, 34, 10, 10)
                                        整理 = true
                                    } else {
                                        var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (bbym != null) {
                                            log("清理过期物品,退出节电");
                                            swipe(566, 389, 968, 226, 500)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 整理背包() {
    log("使用背包物品")
    var 整理 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            // var bbym = imgempt(true, 0.9, "药水关", 782, 458, 122, 72)
            // if (bbym != null) {
            //     log("点击开启")
            //     随机点击2(bbym.x, bbym.y)
            // } else {

            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                if (整理 <= 3) {
                    log("点击整理背包")
                    随机点击2(1178, 577)
                    sleep(2000)
                    整理++
                    sleep(1000)
                } else {//
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        log("整理完成")
                        return "完成"
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                    if (zhuxian != null) {
                        log("点击跳过");
                        随机点击2(zhuxian.x, zhuxian.y)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                        } else {

                        }
                    }
                }
            }

            // }
        }
        sleep(200)
    }
}


function 简易制造橙装() {
    var 需要开启的橙装箱子 = ""
    var 需要制造的橙装 = ""
    var 未识别 = true
    var 整理 = true
    var 开始使用 = false
    var 穿戴 = false
    var 需要开启的加4橙装箱 = "橙装胸针箱|橙装利爪箱"
    var 未穿戴橙装 = ""
    var 结果 = 纯回主页()
    if (结果 == "掉线") {
        return "掉线"
    }
    装备蓝装遍历版()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            if (未识别) {
                var xzfwq = imgempt(true, 0.9, "橙装1未穿戴|橙装2未穿戴|橙装3未穿戴|橙装4未穿戴|橙装1已穿戴|橙装1已穿戴", 89, 196, 307, 183)
                if (xzfwq != null) {
                    log("开始识别需要开启的橙装箱子")
                    var xzfwq = imgempt(true, 0.9, "橙装加4", 127, 238, 59, 57)
                    if (xzfwq != null) {
                        log("点击橙装页")
                        随机点击(341, 471)
                    } else {
                        需要开启的橙装箱子 = 需要开启的橙装箱子 + "橙装1"
                        需要制造的橙装 = 需要制造的橙装 + "橙装1"
                    }

                    var xzfwq = imgempt(true, 0.9, "橙装加4", 336, 250, 49, 39)
                    if (xzfwq != null) {
                        log("点击橙装页")
                        随机点击(341, 471)
                    } else {
                        需要开启的橙装箱子 = 需要开启的橙装箱子 + "橙装2"
                        需要制造的橙装 = 需要制造的橙装 + "橙装2"
                    }

                    var xzfwq = imgempt(true, 0.9, "橙装2未穿戴", 294, 204, 95, 85)
                    if (xzfwq != null) {
                        log("橙装2未穿戴")
                        未穿戴橙装 = 未穿戴橙装 + "橙装胸针箱"
                    } else {

                    }

                    var xzfwq = imgempt(true, 0.9, "橙装1未穿戴", 90, 202, 115, 90)
                    if (xzfwq != null) {
                        log("橙装1未穿戴")
                        if (未穿戴橙装 != "") {
                            未穿戴橙装 = 未穿戴橙装 + "|橙装利爪箱"
                        } else {
                            未穿戴橙装 = 未穿戴橙装 + "橙装利爪箱"
                        }
                    } else {

                    }

                    if (未穿戴橙装 != "") {
                        var 结果 = 开启指定箱子(未穿戴橙装)
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        log("没有未穿戴的橙装")
                    }

                    log(需要开启的橙装箱子)
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        if (需要开启的橙装箱子 == "") {
                            log("都加4了")
                            return "完成"
                        } else {
                            未识别 = false
                        }
                    }
                } else {
                    var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
                    if (xzfwq != null) {
                        log("点击橙装页")
                        随机点击(341, 471)
                    } else {
                        var xzfwq = imgempt(true, 0.9, "装备图标", 60, 1, 102, 70)
                        if (xzfwq != null) {
                            log("装备图标");
                            随机点击(xzfwq.x, xzfwq.y, 10, 10)
                        } else {

                        }
                    }
                }
            } else {
                var zhuxian = imgempt(true, 0.9, "装备(提示弹窗)", 914, 345, 72, 56)
                if (zhuxian != null) {
                    log("点击穿上装备");
                    随机点击2(zhuxian.x, zhuxian.y)
                } else {
                    var bbym = imgempt(true, 0.9, "装备橙装", 762, 347, 123, 93)
                    if (bbym != null) {
                        log("装备橙装")
                        随机点击2(bbym.x, bbym.y)
                    } else {
                        var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                        if (bbym != null) {
                            log("获得道具点击画面")
                            随机点击2(603, 635)
                        } else {
                            var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                            if (bbym != null) {
                                if (需要开启的橙装箱子.includes("橙装1")) {
                                    var zhuxian = imgempt(true, 0.9, "11个利爪集合箱", 416, 116, 450, 352)
                                    if (zhuxian != null) {
                                        log("点击选择11个利爪集合箱");
                                        随机点击2(zhuxian.x, zhuxian.y)
                                        // 需要制造的橙装 = 需要制造的橙装+"橙装1"
                                        需要开启的橙装箱子 = 需要开启的橙装箱子.replace("橙装1", "");
                                    }
                                } else if (需要开启的橙装箱子.includes("橙装2")) {
                                    var zhuxian = imgempt(true, 0.9, "11个羽毛胸针集合箱", 416, 116, 450, 352)
                                    if (zhuxian != null) {
                                        log("点击选择11个羽毛胸针集合箱");
                                        随机点击2(zhuxian.x, zhuxian.y)
                                        // 需要制造的橙装 = 需要制造的橙装+"橙装2"
                                        需要开启的橙装箱子 = 需要开启的橙装箱子.replace("橙装2", "");
                                    }
                                }
                                随机点击2(bbym.x, bbym.y + 100)
                            } else {
                                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                                if (bbym != null) {
                                    log("背包里")
                                    if (整理) {
                                        log("点击整理背包")
                                        随机点击(1178, 577)
                                        sleep(2000)
                                        if (穿戴) {
                                            log("点击装备栏")
                                            随机点击2(1246, 227)
                                        } else {
                                            log("点击宝箱栏")
                                            随机点击2(1249, 309)
                                        }
                                        整理 = false
                                    } else if (开始使用) {
                                        var resoult = matchImg(true, "全部", 0.9, 需要开启的加4橙装箱, 918, 104, 305, 433)
                                        if (resoult != null) {
                                            for (let index = 0; index < resoult.resultSet.length; index++) {
                                                log("点击物品");
                                                随机点击2(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                var shibie = imgempt(true, 0.9, "是加4的橙装箱", 621, 216, 58, 40)
                                                if (shibie != null) {
                                                    log("使用")
                                                    随机点击2(resoult.resultSet[index].x, resoult.resultSet[index].y)
                                                } else {
                                                    log("非加4不打开")
                                                }
                                                sleep(200)
                                            }
                                            var regex = new RegExp(resoult.picture + "\\|");
                                            if (需要开启的加4橙装箱.match(regex)) {
                                                需要开启的加4橙装箱 = 需要开启的加4橙装箱.replace(resoult.picture + "|", '');
                                            } else {
                                                需要开启的加4橙装箱 = 需要开启的加4橙装箱.replace("|" + resoult.picture, '');
                                            }
                                        } else {
                                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                            if (bbym != null) {
                                                log("执行完毕,开始穿戴")
                                                纯回主页()
                                                var 结果 = 装备蓝装遍历版()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                    return "完成"
                                                }
                                            } else {
                                                log("未找到可使用物品")
                                                swipe(1037, 432, 1036, 228, 2000)
                                            }
                                        }
                                    } else {//
                                        var guajizhon = imgempt(true, 0.9, "11个橙装12混合选择箱|11个利爪集合箱|11个羽毛胸针集合箱", 918, 104, 305, 433)
                                        if (guajizhon != null) {
                                            log("点击使用装备箱集合")
                                            for (let index = 0; index < 2; index++) {
                                                随机点击2(guajizhon.x, guajizhon.y)
                                            }
                                        } else {
                                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                            if (bbym != null) {
                                                log("没有可以使用的物品了,开始制造")
                                                纯回主页()
                                                var 结果 = 制造橙装(需要制造的橙装)
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    开始使用 = true
                                                    整理 = true
                                                }
                                            } else {
                                                log("未找到可使用物品")
                                                swipe(1037, 432, 1036, 228, 2000)
                                            }
                                        }
                                    }
                                } else {
                                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                                    if (bbym != null) {
                                        log("点击背包")
                                        随机点击2(bbym.x, bbym.y)
                                        整理 = true
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("点击背包")
                                            随机点击(1115, 34, 10, 10)
                                            整理 = true
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 开启指定箱子(物品) {
    var 整理 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var zhuxian = imgempt(true, 0.9, "装备(提示弹窗)", 914, 345, 72, 56)
            if (zhuxian != null) {
                log("点击穿上装备");
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var bbym = imgempt(true, 0.9, "装备橙装", 762, 347, 123, 93)
                if (bbym != null) {
                    log("装备橙装")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                    if (bbym != null) {
                        log("获得道具点击画面")
                        随机点击2(603, 635)
                    } else {
                        var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                        if (bbym != null) {
                            log("开启一个")
                            随机点击2(bbym.x, bbym.y + 100)
                        } else {
                            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                            if (bbym != null) {
                                log("背包里")
                                if (整理) {
                                    log("点击整理背包")
                                    随机点击(1178, 577)
                                    sleep(2000)
                                    log("点击宝箱栏")
                                    随机点击2(1249, 309)
                                    整理 = false
                                } else {//
                                    var resoult = matchImg(true, "全部", 0.9, 物品, 918, 104, 305, 433)
                                    if (resoult != null) {
                                        log(resoult)
                                        log("点击使用装备箱集合")
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(resoult.resultSet[0].x, resoult.resultSet[0].y)
                                        }
                                        var regex = new RegExp(resoult.picture + "\\|");
                                        if (物品.match(regex)) {
                                            物品 = 物品.replace(resoult.picture + "|", '');
                                        } else {
                                            物品 = 物品.replace("|" + resoult.picture, '');
                                        }
                                    } else {
                                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                        if (bbym != null) {
                                            log("没有可以使用的物品了,开始制造")
                                            纯回主页()
                                            return "完成"
                                        } else {
                                            log("未找到可使用物品")
                                            swipe(1037, 432, 1036, 228, 2000)
                                        }
                                    }

                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                                if (bbym != null) {
                                    log("点击背包")
                                    随机点击2(bbym.x, bbym.y)
                                    整理 = true
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("点击背包")
                                        随机点击(1115, 34, 10, 10)
                                        整理 = true
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
function getColor(x, y, w, h) {
    var params = captureScreen()
    var clip = images.clip(params, x, y, w, h);
    var colorss = []
    var color = ""
    for (let index = 0; index < 4; index++) {
        if (index == 0)
            color = "#38332D"//灰色
        if (index == 1)
            color = "#16392E"//绿色
        if (index == 2)
            color = "#17354C"//蓝色
        if (index == 3)
            color = "#322745"//紫色
        var bb = images.interval(clip, color, 12)
        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
        bb.recycle()
        colorss.push(获取的所有点.length)
    }
    clip.recycle()
    // 初始化最大值为数组的第一个元素  
    let max = colorss[0];
    // 初始化最大值的下标为0  
    let maxIndex = 0;

    // 遍历数组  
    for (let i = 1; i < colorss.length; i++) {
        // 如果找到更大的值，则更新最大值和最大值的下标  
        if (colorss[i] > max) {
            max = colorss[i];
            maxIndex = i;
        }
    }

    // 输出最大值的下标  
    return maxIndex
}

function 装备蓝装遍历版() {
    var 整理 = true
    var 未找到 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                // if (整理) {
                //     log("点击整理背包")
                //     随机点击2(1178, 577)
                //     log("点击装备栏")
                //     随机点击2(1245, 222)
                //     整理 = false
                // } else {
                var 结果 = cor(true, 12, 1210, 66, 69, 455, "#65553d", [[-7, 0, "#62543d"], [3, -4, "#61513b"], [0, -123, "#967e5b"], [-12, -21, "#1e1a17"], [-19, 2, "#221e1c"]])
                if (结果 != null) {
                    log("点击整理背包")
                    随机点击(1178, 577)
                    sleep(2000)
                    log("点击装备栏")
                    随机点击2(结果.x, 结果.y)
                } else {
                    var bbym = matchImg(true, "左上", 0.9, "矫正|矫正2", 919, 118, 302, 350)
                    if (bbym != null) {
                        console.log(bbym);
                        log("矫正")
                        var 起始值Y = bbym.y + 19
                        for (let index = 0; index < 10; index++) {//68
                            //这里先取一半试试
                            toastLog("第:" + index + "行")
                            if (起始值Y > 483) {
                                toastLog("当前页遍历完成")
                                swipe(1027, 430, 1035, 294, 2000)
                                sleep(1000)
                                break
                            }
                            var 起始值X = 926
                            var j = 0
                            while (j < 4) {
                                var 加壹 = true
                                var ssdyw = imgempt(true, 0.9, "装备E|强化已装备E", 起始值X, 起始值Y, 69, 69)
                                if (ssdyw != null) {
                                    log("已穿戴")
                                } else {
                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 起始值X, 起始值Y, 68, 68)
                                    if (bbym != null) {
                                        log("装备完毕,关闭背包")
                                        纯回主页()
                                        return "装备完毕"
                                    } else {
                                        log("点击装备")
                                        随机点击(起始值X + 20, 起始值Y + 20)
                                        sleep(1000)
                                        var bbym = imgempt(true, 0.9, "解除装备", 920, 104, 296, 408)
                                        if (bbym != null) {
                                            log("已经是穿戴的装备了")
                                            随机点击2(1245, 222)
                                        } else {
                                            var bbym = imgempt(true, 0.9, "安装中|安装中2", 319, 478, 216, 146)
                                            if (bbym != null) {
                                                log("已有穿戴装备,判断是否替换")
                                                var bbym = imgempt(true, 0.9, "限时装备", 382, 334, 195, 177)
                                                if (bbym != null) {
                                                    log("穿戴为限时装备,替换")
                                                    随机点击(起始值X + 20, 起始值Y + 20)
                                                } else {
                                                    var bbym = imgempt(true, 0.9, "限时装备", 677, 251, 226, 254)
                                                    if (bbym != null) {
                                                        log("当前为限时装备,跳过")
                                                        随机点击2(1245, 222)
                                                    } else {
                                                        var bbym = imgempt(true, 0.9, "过期装备", 274, 216, 148, 301)
                                                        if (bbym != null) {
                                                            log("穿戴为过期装备,替换")
                                                            随机点击(起始值X + 20, 起始值Y + 20)
                                                        } else {
                                                            var bbym = imgempt(true, 0.9, "过期装备", 594, 228, 150, 343)
                                                            if (bbym != null) {
                                                                log("当前为过期装备,点击丢弃")
                                                                随机点击(837, 540)
                                                                随机点击(730, 449)
                                                                加壹 = false
                                                                起始值X = 起始值X - 68
                                                            } else {
                                                                var bbym = imgempt(true, 0.9, "属性下降箭头|属性下降箭头2", 801, 196, 105, 262)
                                                                if (bbym != null) {
                                                                    log("属性下降箭头,跳过")
                                                                    var 身上装备 = getColor(302, 195, 76, 15)
                                                                    var 背包装备 = getColor(618, 192, 77, 18)
                                                                    if (背包装备 > 身上装备) {
                                                                        log("此装备更牛逼,穿上它")
                                                                        随机点击(起始值X + 20, 起始值Y + 20)
                                                                    } else {
                                                                        var bbym = imgempt(true, 0.9, "还有下一个装备|还有下一个装备2|还有下一个装备3", 347, 494, 147, 102)
                                                                        if (bbym != null) {
                                                                            log("还有一个装备得识别,下一个")
                                                                            随机点击(524, 540)
                                                                            sleep(1000)
                                                                            var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                            if (res == "可穿") {
                                                                                随机点击(起始值X + 20, 起始值Y + 20)
                                                                            }
                                                                        } else {
                                                                            log("身上的装备更牛逼")
                                                                            随机点击2(1245, 222)
                                                                        }

                                                                        // var bbym = cor(true, 12, 368, 503, 196, 71, "#e6d7ac", [[0, 6, "#e3d5a4"], [-97, 13, "#3f3830"], [-94, 14, "#3f3830"], [-116, 14, "#b8ab8b"], [-118, 12, "#b2a885"], [-74, 12, "#040406"], [-69, 17, "#0d0d0d"], [-85, -13, "#d8cdb9"], [-85, -5, "#d8cdb9"], [-84, 2, "#d6cdbc"]])
                                                                        // if (bbym != null) {
                                                                        //     log("还有一个装备得识别,下一个")
                                                                        //     随机点击(bbym.x, bbym.y)
                                                                        //     var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                        //     if (res == "可穿") {
                                                                        //         随机点击(起始值X + 20, 起始值Y + 20)
                                                                        //     }
                                                                        // } else {
                                                                        //     log("身上的装备更牛逼")
                                                                        //     随机点击2(1245, 222)
                                                                        // }
                                                                    }
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "属性上涨箭头|属性上涨箭头2", 801, 196, 105, 262)
                                                                    if (bbym != null) {
                                                                        log("属性上升装备,替换")
                                                                        var params = captureScreen()
                                                                        var clip = images.clip(params, 619, 196, 73, 15);
                                                                        var bb = images.interval(clip, "#674613", 12)
                                                                        clip.recycle()
                                                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })//"#0d1613",[[0,10,"#101916"],[-38,-1,"#131c19"],[-38,8,"#111a17"],[16,6,"#646158"]]
                                                                        bb.recycle()
                                                                        log("金色点位:" + 获取的所有点.length)
                                                                        if (获取的所有点.length >= 50) {
                                                                            log("金色装备无脑穿")
                                                                            随机点击(起始值X + 20, 起始值Y + 20)
                                                                        } else {
                                                                            // 随机点击(起始值X + 20, 起始值Y + 20)
                                                                            var 身上装备 = getColor(302, 195, 76, 15)
                                                                            var 背包装备 = getColor(618, 192, 77, 18)
                                                                            if (背包装备 > 身上装备) {
                                                                                log("此装备更牛逼,穿上它")
                                                                                随机点击(起始值X + 20, 起始值Y + 20)
                                                                            } else {
                                                                                var bbym = imgempt(true, 0.9, "还有下一个装备|还有下一个装备2|还有下一个装备3", 347, 494, 147, 102)
                                                                                if (bbym != null) {
                                                                                    log("还有一个装备得识别,下一个")
                                                                                    随机点击(524, 540)
                                                                                    sleep(1000)
                                                                                    var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                                    if (res == "可穿") {
                                                                                        随机点击(起始值X + 20, 起始值Y + 20)
                                                                                    }
                                                                                } else {
                                                                                    log("身上的装备更牛逼")
                                                                                    随机点击2(1245, 222)
                                                                                }

                                                                                // var bbym = cor(true, 12, 368, 503, 196, 71, "#e6d7ac", [[0, 6, "#e3d5a4"], [-97, 13, "#3f3830"], [-94, 14, "#3f3830"], [-116, 14, "#b8ab8b"], [-118, 12, "#b2a885"], [-74, 12, "#040406"], [-69, 17, "#0d0d0d"], [-85, -13, "#d8cdb9"], [-85, -5, "#d8cdb9"], [-84, 2, "#d6cdbc"]])
                                                                                // if (bbym != null) {
                                                                                //     log("还有一个装备得识别,下一个")
                                                                                //     随机点击(bbym.x, bbym.y)
                                                                                //     var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                                //     if (res == "可穿") {
                                                                                //         随机点击(起始值X + 20, 起始值Y + 20)
                                                                                //     }
                                                                                // } else {
                                                                                //     log("身上的装备更牛逼")
                                                                                //     随机点击2(1245, 222)
                                                                                // }
                                                                            }
                                                                        }

                                                                    } else {

                                                                        var bbym = imgempt(true, 0.9, "还有下一个装备|还有下一个装备2|还有下一个装备3", 347, 494, 147, 102)
                                                                        if (bbym != null) {
                                                                            log("还有一个装备得识别,下一个")
                                                                            随机点击(524, 540)
                                                                            sleep(1000)
                                                                            var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                            if (res == "可穿") {
                                                                                随机点击(起始值X + 20, 起始值Y + 20)
                                                                            }
                                                                        } else {
                                                                            var 身上装备 = getColor(302, 195, 76, 15)
                                                                            var 背包装备 = getColor(618, 192, 77, 18)
                                                                            if (背包装备 > 身上装备) {
                                                                                log("此装备更牛逼,穿上它")
                                                                                随机点击(起始值X + 20, 起始值Y + 20)
                                                                            } else {
                                                                                log("无需替换")
                                                                                随机点击2(1245, 222)
                                                                            }
                                                                        }


                                                                        // var bbym = cor(true, 12, 326, 480, 253, 119, "#e8d9a8", [[-7, -6, "#ab9169"], [-10, 1, "#473e37"], [-95, 10, "#3e3830"], [-118, 12, "#b2a385"], [-98, 12, "#3d3930"], [-105, -11, "#decdaa"]])
                                                                        // if (bbym != null) {
                                                                        //     log("还有一个装备得识别,下一个")
                                                                        //     随机点击(bbym.x, bbym.y)
                                                                        //     var res = 判断第二个装备是否需要穿戴(起始值X, 起始值Y)
                                                                        //     if (res == "可穿") {
                                                                        //         随机点击(起始值X + 20, 起始值Y + 20)
                                                                        //     }
                                                                        // } else {
                                                                        //     var 身上装备 = getColor(302, 195, 76, 15)
                                                                        //     var 背包装备 = getColor(618, 192, 77, 18)
                                                                        //     if (背包装备 > 身上装备) {
                                                                        //         log("此装备更牛逼,穿上它")
                                                                        //         随机点击(起始值X + 20, 起始值Y + 20)
                                                                        //     } else {
                                                                        //         log("无需替换")
                                                                        //         随机点击2(1245, 222)
                                                                        //     }
                                                                        // }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            } else {
                                                log("未穿戴装备,穿戴")
                                                随机点击(起始值X + 20, 起始值Y + 20)
                                            }
                                        }
                                    }
                                }
                                if (加壹) {
                                    j++
                                }
                                log("寻找坐标:" + 起始值X + "," + 起始值Y)
                                起始值X = 起始值X + 68
                            }
                            起始值Y = 起始值Y + 68
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                        if (bbym != null) {
                            log("装备完毕,关闭背包")
                            纯回主页()
                            return "装备完毕"
                        } else {
                            未找到++
                            if (未找到 >= 9) {
                                log("装备完毕,关闭背包")
                                纯回主页()
                                return "装备完毕"
                            }
                            log("未找到可使用物品")
                            swipe(1037, 432, 1036, 260, 2000)
                        }
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var 手 = imgempt(true, 0.9, "手|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        随机点击(1115, 34, 10, 10)
                    } else {

                    }
                }
            }

        }
        sleep(200)
    }
}


function 判断第二个装备是否需要穿戴(起始值X, 起始值Y) {
    sleep(2000)
    var bbym = imgempt(true, 0.9, "限时装备", 382, 334, 195, 177)
    if (bbym != null) {
        log("穿戴为限时装备,替换")
        随机点击(起始值X + 20, 起始值Y + 20)
    } else {
        var bbym = imgempt(true, 0.9, "限时装备", 677, 251, 226, 254)
        if (bbym != null) {
            log("当前为限时装备,跳过")
            随机点击2(1245, 222)
        } else {
            var bbym = imgempt(true, 0.9, "过期装备", 274, 216, 148, 301)
            if (bbym != null) {
                log("穿戴为过期装备,替换")
                随机点击(起始值X + 20, 起始值Y + 20)
            } else {
                var bbym = imgempt(true, 0.9, "过期装备", 594, 228, 150, 343)
                if (bbym != null) {
                    log("当前为过期装备,点击丢弃")
                    随机点击(837, 540)
                    随机点击(730, 449)
                    起始值X = 起始值X - 68
                } else {
                    var bbym = imgempt(true, 0.9, "属性下降箭头|属性下降箭头2", 801, 196, 105, 262)
                    if (bbym != null) {
                        log("属性下降箭头,跳过")
                        var 身上装备 = getColor(302, 195, 76, 15)
                        var 背包装备 = getColor(618, 192, 77, 18)
                        if (背包装备 > 身上装备) {
                            log("此装备更牛逼,可以穿上")
                            return "可穿"
                        } else {
                            log("身上的装备更牛逼")
                            随机点击2(1245, 222)
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "属性上涨箭头|属性上涨箭头2", 801, 196, 105, 262)
                        if (bbym != null) {
                            log("属性上升装备,替换")
                            // 随机点击(起始值X + 20, 起始值Y + 20)
                            var 身上装备 = getColor(302, 195, 76, 15)
                            var 背包装备 = getColor(618, 192, 77, 18)
                            if (背包装备 > 身上装备) {
                                log("此装备更牛逼,可以穿上")
                                return "可穿"
                            } else {
                                log("身上的装备更牛逼")
                                随机点击2(1245, 222)
                            }
                        } else {
                            var 身上装备 = getColor(302, 195, 76, 15)
                            var 背包装备 = getColor(618, 192, 77, 18)
                            if (背包装备 > 身上装备) {
                                log("此装备更牛逼,穿上它")
                                return "可穿"
                            } else {
                                log("无需替换")
                                随机点击2(1245, 222)
                            }
                        }
                    }
                }
            }
        }
    }
}

function 制造橙装(需要制造的橙装) {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标", 109, 77, 80, 57)
                if (jizhandi != null) {
                    if (需要制造的橙装.includes("橙装1")) {
                        var laolian = imgempt(true, 0.9, "制造橙装利爪详细", 652, 216, 234, 199)
                        if (laolian != null) {
                            log("点击制造橙装利爪详细")
                            随机点击(1042, 663)
                            sleep(3000)
                            需要制造的橙装 = 需要制造的橙装.replace("橙装1", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造橙装利爪物品栏", 219, 131, 147, 532)
                            if (laolian != null) {
                                log("点击制造橙装利爪物品栏");
                                随机点击(laolian.x + 100, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "夜鸦装备栏", 9, 132, 226, 576)
                                if (laolian != null) {
                                    log("点击夜鸦装备栏");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    log("没有找到制造橙装相关信息,下滑")
                                    for (let index = 0; index < 2; index++) {
                                        swipe(98, 588, 105, 273, 500)
                                    }
                                }
                            }
                        }
                    } else if (需要制造的橙装.includes("橙装2")) {
                        var laolian = imgempt(true, 0.9, "制造橙装胸针详细", 652, 216, 234, 199)
                        if (laolian != null) {
                            log("点击制造橙装胸针")
                            随机点击(1042, 663)
                            sleep(3000)
                            需要制造的橙装 = 需要制造的橙装.replace("橙装2", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造橙装胸针物品栏", 219, 131, 147, 532)
                            if (laolian != null) {
                                log("点击橙装胸针装备栏");
                                随机点击(laolian.x + 100, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "夜鸦装备栏", 9, 132, 226, 576)
                                if (laolian != null) {
                                    log("点击夜鸦装备栏");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    log("没有找到制造橙装相关信息,下滑")
                                    for (let index = 0; index < 2; index++) {
                                        swipe(98, 588, 105, 273, 500)
                                    }
                                }
                            }
                        }
                    } else {
                        log("制造完成")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "制造完成"
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                    if (jizhandi != null) {
                        log("点击菜单_制造");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                            if (zhunmen != null) {
                                log("专门制作,点击普通制作");//
                                随机点击(zhunmen.x - 630, zhunmen.y, 10, 10)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 丢弃物品() {
    log("使用背包物品")
    var 整理 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "使用物品垃圾桶", 785,488,135,106)
            if (bbym != null) {
                log("使用物品垃圾桶")
                随机点击2(bbym.x, bbym.y)
            } else {
            var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
            if (bbym != null) {
                log("使用最大物品数")
                随机点击2(bbym.x, bbym.y)
                随机点击2(bbym.x, bbym.y + 100)
            } else {
                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                if (bbym != null) {
                    log("背包里")
                    if (整理) {
                        log("点击整理背包")
                        随机点击(1178, 577)
                        sleep(2000)
                        log("点击宝箱栏")
                        随机点击2(1249, 309)
                        整理 = false
                    } else {//
                        //丢弃物品//夜鸦雪花冰片25.1.2过期|精灵蛋|
                        var guajizhon = imgempt(true, 0.9, "菜篮子|雪人25.1.2过期|蛇鳞_25.1.23过期|花瓣_守护精灵使用|枫叶活动_背包2|盾牌活动_背包|100天制造材料|玫瑰制造材料|过期枫叶", 918, 104, 305, 433)
                        if (guajizhon != null) {
                            log("点击可丢弃物品")
                            随机点击2(guajizhon.x, guajizhon.y)
                        } else {
                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                            if (bbym != null) {
                                随机点击(1246,149)
                                return "丢弃完毕"
                            } else {
                                log("未找到可丢弃物品")
                                swipe(1037, 432, 1036, 228, 2000)
                            }
                        }
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                        整理 = true
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                            整理 = true
                        } else {
                            var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (bbym != null) {
                                log("丢弃背包物品,退出节电");
                                swipe(566, 389, 968, 226, 500)
                            } else {

                            }
                        }
                    }
                }
            }}
            // }
        }
        sleep(200)
    }
}

function 使用背包物品(mode) {
    log("使用背包物品")
    var 整理 = true
    var 未找到 = 0
    var 未找到红点 = 0
    var 飞行器 = false
    var 未清理背包 = true
    var 活动装备箱使用 = false
    var 只开单次 = true
    var 使用技能 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            // var bbym = imgempt(true, 0.9, "药水关", 782, 458, 122, 72)
            // if (bbym != null) {
            //     log("点击开启")
            //     随机点击2(bbym.x, bbym.y)
            // } else {
            var zhuxian = imgempt(true, 0.9, "装备(提示弹窗)", 914, 345, 72, 56)
            if (zhuxian != null) {
                log("点击穿上装备");
                随机点击2(zhuxian.x, zhuxian.y)
            } else {
                var bbym = imgempt(true, 0.9, "装备橙装", 762, 347, 123, 93)
                if (bbym != null) {
                    log("装备橙装")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var bbym = imgempt(true, 0.9, "选择弓手蓝召唤卡", 740, 195, 101, 98)
                    if (bbym != null) {
                        log("装备橙装")
                        随机点击2(bbym.x, bbym.y)
                        随机点击2(789, 466)
                        随机点击2(730, 557)
                    } else {
                        var bbym = imgempt(true, 0.9, "触摸屏幕关闭|触摸屏幕关闭2", 485, 593, 323, 96)
                        if (bbym != null) {
                            log("触摸屏幕关闭")
                            随机点击2(bbym.x, bbym.y)
                        } else {
                            var bbym = imgempt(true, 0.9, "获得", 613, 385, 268, 138)
                            if (bbym != null) {
                                log("获得")
                                随机点击2(bbym.x, bbym.y)
                            } else {

                                var bbym = imgempt(true, 0.9, "继续开卡牌|继续开卡牌2", 615, 625, 247, 91)
                                if (bbym != null) {
                                    log("继续开卡牌")
                                    随机点击2(bbym.x, bbym.y)
                                } else {
                                    var bbym = imgempt(true, 0.9, "直接看结果|直接看结果2", 470, 587, 353, 127)
                                    if (bbym != null) {
                                        log("直接看结果")
                                        随机点击2(bbym.x, bbym.y)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "都打开|都打开2|都打开3", 537, 638, 242, 74)
                                        if (bbym != null) {
                                            log("都打开")
                                            随机点击2(bbym.x, bbym.y)
                                        } else {

                                            var bbym = imgempt(true, 0.9, "跳过", 1096, 12, 181, 82)
                                            if (bbym != null) {
                                                log("跳过")
                                                随机点击2(bbym.x, bbym.y)
                                            } else {
                                                var lkzh = imgempt(true, 0.9, "离开召唤", 548, 640, 202, 74)
                                                if (lkzh != null) {
                                                    log("离开召唤")
                                                    var bbym = imgempt(true, 0.9, "跳过召唤动画", 1067, 645, 83, 64)
                                                    if (bbym != null) {
                                                        log("跳过召唤动画")
                                                        随机点击2(bbym.x, bbym.y)
                                                    } else {
                                                        随机点击2(lkzh.x, lkzh.y)
                                                    }
                                                } else {
                                                    var jizhandi = imgempt(true, 0.9, "制作按钮", 925, 625, 324, 81)
                                                    if (jizhandi != null) {
                                                        log("点击制造")
                                                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                                        sleep(2000)
                                                        var 结果 = 纯回主页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        }
                                                    } else {
                                                        var qiagnhua = imgempt(true, 0.9, "制造跳转弹窗", 271, 157, 131, 99)
                                                        if (qiagnhua != null) {
                                                            log("制造跳转弹窗");
                                                            随机点击2(490, 234, 10, 10)
                                                        } else {
                                                            var qiagnhua = imgempt(true, 0.9, "物品详细制造图标", 579, 206, 72, 302)
                                                            if (qiagnhua != null) {
                                                                log("物品详细制造图标");
                                                                随机点击2(qiagnhua.x + 40, qiagnhua.y + 5, 10, 10)
                                                            } else {
                                                                var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                                                                if (bbym != null) {
                                                                    log("获得道具点击画面")
                                                                    随机点击2(603, 635)
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "可丢弃物品|可丢弃物品2", 603, 212, 123, 261)
                                                                    if (bbym != null) {
                                                                        log("可丢弃物品,点击垃圾桶")
                                                                        随机点击2(839, 540)
                                                                    } else {
                                                                        var bbym = imgempt(true, 0.9, "学习过的技能", 577, 206, 295, 359)
                                                                        if (bbym != null) {
                                                                            log("学习过的技能,点击垃圾桶")
                                                                            随机点击2(839, 540)
                                                                        } else {
                                                                            var bbym = imgempt(true, 0.9, "未学习前置技能", 577, 206, 295, 359)
                                                                            if (bbym != null) {
                                                                                log("未学习前置技能,不再学习技能")
                                                                                随机点击2(1245, 308)
                                                                                使用技能 = false
                                                                            } else {
                                                                                var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                                                                                if (bbym != null) {
                                                                                    log("使用最大物品数")
                                                                                    var zhuxian = imgempt(true, 0.9, "技能强化书", 737, 199, 101, 104)
                                                                                    if (zhuxian != null) {
                                                                                        log("点击选择");
                                                                                        随机点击2(zhuxian.x, zhuxian.y)
                                                                                    } else {
                                                                                        var zhuxian = imgempt(true, 0.9, "黄昏坐骑选择|紫弓召唤卡|紫熊坐骑|紫猪坐骑|紫鸟坐骑|紫骆驼坐骑|紫狗坐骑|紫马坐骑|伤害药水|紫色武器外观|无名药|百分之四十经验药|坐骑选择卡|施展速度药水|蓝弓选择|蓝级弓手副武器|选择蓝弓|选择橙色坐骑11连2|选择橙色坐骑11连|橙色坐骑11连2|紫色副本加速器|宝箱绿副1|宝箱绿弓2|宝箱绿弓1|选择首饰强化卷轴|首饰强化卷轴箱|选择首饰洗点箱|选择远程菜品|护身符选择|已获得绿弓|选择防具洗点卷|选择必绿以上11连坐骑", 416, 116, 450, 352)
                                                                                        if (zhuxian != null) {
                                                                                            log("点击选择");
                                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                                        } else {

                                                                                        }

                                                                                        //日期1107开发选择内容
                                                                                        var zhuxian = imgempt(true, 0.9, "蓝色弓箭武器外形|绿级高强弓手套装箱|满强蓝弓选择|满强箭袋选择", 416, 116, 450, 352)//
                                                                                        if (zhuxian != null) {
                                                                                            log("点击选择");
                                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                                        } else {

                                                                                        }

                                                                                        //加速服11.20
                                                                                        var zhuxian = imgempt(true, 0.9, "紫弓武器|紫色弓箭技能箱|蓝色弓手技能|蓝色弓手技能集合箱|绿色弓手技能|首饰洗练材料箱|蓝色灌注材料|蓝色灌注材料2|蓝色地球仪|黄金刻刀|战士技能", 416, 116, 450, 352)//
                                                                                        if (zhuxian != null) {
                                                                                            log("点击选择");
                                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                                        } else {

                                                                                        }
                                                                                    }

                                                                                    随机点击2(bbym.x, bbym.y)
                                                                                    随机点击2(bbym.x, bbym.y + 100)
                                                                                    for (let index = 0; index < 3; index++) {
                                                                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                        if (bbkjbztc != null) {
                                                                                            log("背包空间不足弹窗")
                                                                                            if (未清理背包) {
                                                                                                未清理背包 = false
                                                                                                var 结果 = 清理背包("直接返回")
                                                                                                if (结果 == "掉线") {
                                                                                                    return "掉线"
                                                                                                } else {
                                                                                                    break
                                                                                                }
                                                                                            } else {
                                                                                                log("已经清理过一次了，直接去仓库")
                                                                                                最终仓库调整(false)
                                                                                                return "掉线"
                                                                                            }

                                                                                        }
                                                                                        sleep(200)
                                                                                    }

                                                                                    if (mode == "练级") {
                                                                                        for (let index = 0; index < 6; index++) {
                                                                                            随机点击2(839, 395)
                                                                                            sleep(300)
                                                                                        }
                                                                                    }
                                                                                } else {
                                                                                    var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                                                                                    if (bbym != null) {
                                                                                        log("背包里")
                                                                                        if (整理) {
                                                                                            log("点击整理背包")
                                                                                            随机点击(1178, 577)
                                                                                            sleep(2000)
                                                                                            log("点击宝箱栏")
                                                                                            随机点击2(1249, 309)
                                                                                            整理 = false
                                                                                        } else {//
                                                                                            var bbfj = imgempt(true, 0.9, "都已勾选|都已勾选2", 537, 413, 232, 66)//반짝이는
                                                                                            if (bbfj != null) {
                                                                                                log("关闭分解选项")
                                                                                                随机点击2(588, 555)
                                                                                            } else {
                                                                                                if (mode == "练级") {
                                                                                                    var bbym = imgempt(true, 0.9, "橙装箱子4|橙装箱子|橙装箱子2|橙装箱子3", 918, 104, 305, 433)
                                                                                                    if (bbym != null) {
                                                                                                        log("橙装箱子")
                                                                                                        for (let index = 0; index < 2; index++) {
                                                                                                            随机点击2(bbym.x, bbym.y)
                                                                                                        }
                                                                                                        var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                                                                                                        if (bbym != null) {
                                                                                                            随机点击2(bbym.x, bbym.y)
                                                                                                            随机点击2(bbym.x, bbym.y + 100)
                                                                                                        }
                                                                                                        for (let index = 0; index < 3; index++) {
                                                                                                            随机点击(820, 390)
                                                                                                        }
                                                                                                    } else {
                                                                                                        var bbym = imgempt(true, 0.9, "菜篮子", 918, 104, 305, 433)
                                                                                                        if (bbym != null) {
                                                                                                            log("菜篮子")
                                                                                                            for (let index = 0; index < 2; index++) {
                                                                                                                随机点击2(bbym.x, bbym.y)
                                                                                                            }
                                                                                                            continue
                                                                                                        } else {

                                                                                                        }
                                                                                                    }
                                                                                                }

                                                                                                if (mode == "钱箱子") {
                                                                                                    var guajizhon = imgempt(true, 0.9, "概率铜钱箱", 918, 104, 305, 433)//|
                                                                                                    if (guajizhon != null) {
                                                                                                        log("点击使用概率铜钱箱")
                                                                                                        未找到 = 0
                                                                                                        for (let index = 0; index < 2; index++) {
                                                                                                            随机点击2(guajizhon.x, guajizhon.y)
                                                                                                        }
                                                                                                        for (let index = 0; index < 3; index++) {
                                                                                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                            if (bbkjbztc != null) {
                                                                                                                log("背包空间不足弹窗")
                                                                                                                if (未清理背包) {
                                                                                                                    未清理背包 = false
                                                                                                                    var 结果 = 清理背包("直接返回")
                                                                                                                    if (结果 == "掉线") {
                                                                                                                        return "掉线"
                                                                                                                    } else {
                                                                                                                        break
                                                                                                                    }
                                                                                                                } else {
                                                                                                                    log("已经清理过一次了，直接去仓库")
                                                                                                                    最终仓库调整(false)
                                                                                                                    return "掉线"
                                                                                                                }
                                                                                                            } else {

                                                                                                            }
                                                                                                            sleep(200)
                                                                                                        }
                                                                                                    } else {
                                                                                                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                                                                                        if (bbym != null) {
                                                                                                            log("使用完毕,关闭背包")
                                                                                                            纯回主页()
                                                                                                            return "使用完毕"
                                                                                                        } else {
                                                                                                            log("未找到可使用物品")
                                                                                                            swipe(1037, 432, 1036, 228, 2000)
                                                                                                        }
                                                                                                    }
                                                                                                } else {
                                                                                                    var guajizhon = imgempt(true, 0.9, "紫色装备随机箱3(背包)|紫色装备随机箱2(背包)", 918, 104, 305, 433)
                                                                                                    if (guajizhon != null) {
                                                                                                        log("点击使用所有装备箱集合")
                                                                                                        未找到 = 0
                                                                                                        for (let index = 0; index < 2; index++) {
                                                                                                            随机点击2(guajizhon.x, guajizhon.y)
                                                                                                        }

                                                                                                        var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                                                                                                        if (bbym != null) {
                                                                                                            log("使用最大物品数")
                                                                                                            var zhuxian = imgempt(true, 0.9, "蓝弓选择|蓝级弓手副武器|选择蓝弓|选择橙色坐骑11连2|选择橙色坐骑11连|橙色坐骑11连2|紫色副本加速器|宝箱绿副1|宝箱绿弓2|宝箱绿弓1|选择首饰强化卷轴|首饰强化卷轴箱|选择首饰洗点箱|选择防具洗点卷", 416, 116, 450, 352)
                                                                                                            if (zhuxian != null) {
                                                                                                                log("点击选择");
                                                                                                                随机点击2(zhuxian.x, zhuxian.y)
                                                                                                            } else {

                                                                                                            }
                                                                                                            随机点击2(bbym.x, bbym.y)
                                                                                                            随机点击2(bbym.x, bbym.y + 100)
                                                                                                            for (let index = 0; index < 3; index++) {
                                                                                                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                                if (bbkjbztc != null) {
                                                                                                                    log("背包空间不足弹窗")
                                                                                                                    if (未清理背包) {
                                                                                                                        未清理背包 = false
                                                                                                                        var 结果 = 清理背包("直接返回")
                                                                                                                        if (结果 == "掉线") {
                                                                                                                            return "掉线"
                                                                                                                        } else {
                                                                                                                            break
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        log("已经清理过一次了，直接去仓库")
                                                                                                                        最终仓库调整(false)
                                                                                                                        return "掉线"
                                                                                                                    }

                                                                                                                } else {

                                                                                                                }
                                                                                                                sleep(200)
                                                                                                            }

                                                                                                        } else {

                                                                                                        }

                                                                                                        var 结果 = 清理背包("直接返回")
                                                                                                        if (结果 == "掉线") {
                                                                                                            return "掉线"
                                                                                                        }

                                                                                                    } else {

                                                                                                        //使用无消耗格子物品
                                                                                                        var guajizhon = imgempt(true, 0.9, "黄昏坐骑选择|融合元素提取11连|融合元素提取单次|11连武器外形红色召唤卷|和谐元素提取11连|和谐灿烂元素提取11连|和谐灿烂元素提取单次", 918, 104, 305, 433)
                                                                                                        if (guajizhon != null) {
                                                                                                            log("点击各种可使用")
                                                                                                            未找到 = 0
                                                                                                            for (let index = 0; index < 2; index++) {
                                                                                                                随机点击2(guajizhon.x, guajizhon.y)
                                                                                                            }
                                                                                                        }else{


                                                                                                        if (!使用技能) {
                                                                                                            var 临时物资 = "光辉工艺石选择箱子|手工艺品强化卷轴箱|背包_活动制造_国王的铜色赏赐品|背包_活动制造_国王的银色赏赐品|开服35活动箱|开服活动飞行器|蓝弓选择箱|蓝副武器选择箱|蓝弓选择箱2|蓝副武器选择箱2|装备箱集合|工会币袋子|紫色单抽武器装扮卡|蓝色坐骑召唤卡|蓝色武器装扮选择召唤卡|弓手蓝武器装扮召唤卡|武器强化卷轴箱(背包)|装备强化卷轴箱(背包)|绿级武器装扮箱|积分袋子|白色副本加速器选择箱|紫色坐骑11连|武器强化卷轴箱2(背包)|装备强化卷轴箱2(背包)"//|菜篮子
                                                                                                        } else {
                                                                                                            var 临时物资 = "技能强化书|被动技能书|光辉工艺石选择箱子|手工艺品强化卷轴箱|背包_活动制造_国王的铜色赏赐品|背包_活动制造_国王的银色赏赐品|开服35活动箱|开服活动飞行器|蓝弓选择箱|蓝副武器选择箱|蓝弓选择箱2|蓝副武器选择箱2|装备箱集合|工会币袋子|紫色单抽武器装扮卡|技能书|蓝色技能书|蓝色坐骑召唤卡|蓝色武器装扮选择召唤卡|弓手蓝武器装扮召唤卡|武器强化卷轴箱(背包)|装备强化卷轴箱(背包)|绿级武器装扮箱|积分袋子|白色副本加速器选择箱|紫色坐骑11连|蓝色旋风技能书|武器强化卷轴箱2(背包)|装备强化卷轴箱2(背包)"//|菜篮子
                                                                                                        }

                                                                                                        var guajizhon = imgempt(true, 0.9, 临时物资, 918, 104, 305, 433)
                                                                                                        if (guajizhon != null) {
                                                                                                            log("点击各种可使用")
                                                                                                            未找到 = 0
                                                                                                            for (let index = 0; index < 2; index++) {
                                                                                                                随机点击2(guajizhon.x, guajizhon.y)
                                                                                                            }
                                                                                                            for (let index = 0; index < 3; index++) {
                                                                                                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                                if (bbkjbztc != null) {
                                                                                                                    log("背包空间不足弹窗")
                                                                                                                    if (未清理背包) {
                                                                                                                        未清理背包 = false
                                                                                                                        var 结果 = 清理背包("直接返回")
                                                                                                                        if (结果 == "掉线") {
                                                                                                                            return "掉线"
                                                                                                                        } else {
                                                                                                                            break
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        log("已经清理过一次了，直接去仓库")
                                                                                                                        最终仓库调整(false)
                                                                                                                        return "掉线"
                                                                                                                    }

                                                                                                                } else {

                                                                                                                }
                                                                                                                sleep(200)
                                                                                                            }
                                                                                                        } else {
                                                                                                            var guajizhon = imgempt(true, 0.9, "混乱碎片袋|诞生之源袋|黄昏坐骑武器外形选择箱|背包_五行橙普通|背包_五行紫10连|8月28活动物资箱子|橙装强化箱子|坐骑武器外观11抽选择箱|药水选择箱|强化卷轴选择箱集合|20W铜钱药箱|橙色武器装扮11连基础版|紫色单抽坐骑卡|紫色11连坐骑卡|橙色坐骑11连|橙色武器装扮11连|紫色武器装扮11连|戒指强化箱|橙色坐骑11连基础版|橙色坐骑单抽卡基础版|普通强化卷轴选择箱|强化卷轴随机箱", 918, 104, 305, 433)//|概率铜钱箱   1022南瓜飞行器|1022飞行器|200天纪念飞行器|中秋礼盒|活动药水材料选择箱|
                                                                                                            if (guajizhon != null) {
                                                                                                                log("点击各种可使用")
                                                                                                                未找到 = 0
                                                                                                                for (let index = 0; index < 2; index++) {
                                                                                                                    随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                }
                                                                                                                for (let index = 0; index < 3; index++) {
                                                                                                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                                    if (bbkjbztc != null) {
                                                                                                                        log("背包空间不足弹窗")
                                                                                                                        if (未清理背包) {
                                                                                                                            未清理背包 = false
                                                                                                                            var 结果 = 清理背包("直接返回")
                                                                                                                            if (结果 == "掉线") {
                                                                                                                                return "掉线"
                                                                                                                            } else {
                                                                                                                                break
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            log("已经清理过一次了，直接去仓库")
                                                                                                                            最终仓库调整(false)
                                                                                                                            return "掉线"
                                                                                                                        }
                                                                                                                    } else {

                                                                                                                    }
                                                                                                                    sleep(200)
                                                                                                                }
                                                                                                            } else {
                                                                                                                var guajizhon = imgempt(true, 0.9, "多洛万支援箱子1107", 918, 104, 305, 433)
                                                                                                                if (guajizhon != null && 只开单次) {
                                                                                                                    log("多洛万支援箱子1107")
                                                                                                                    未找到 = 0
                                                                                                                    for (let index = 0; index < 2; index++) {
                                                                                                                        随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                    }

                                                                                                                    for (let index = 0; index < 3; index++) {
                                                                                                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                                        if (bbkjbztc != null) {
                                                                                                                            只开单次 = true
                                                                                                                            log("背包空间不足弹窗")
                                                                                                                            if (未清理背包) {
                                                                                                                                未清理背包 = false
                                                                                                                                var 结果 = 清理背包("直接返回")
                                                                                                                                if (结果 == "掉线") {
                                                                                                                                    return "掉线"
                                                                                                                                } else {
                                                                                                                                    break
                                                                                                                                }
                                                                                                                            } else {
                                                                                                                                log("已经清理过一次了，直接去仓库")
                                                                                                                                最终仓库调整(false)
                                                                                                                                return "掉线"
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            只开单次 = false
                                                                                                                            var bbkjbztc = imgempt(true, 0.9, "不满足使用条件", 533, 54, 276, 75)
                                                                                                                            if (bbkjbztc != null) {
                                                                                                                                log("不满足使用条件")
                                                                                                                                活动装备箱使用 = false
                                                                                                                                break
                                                                                                                            } else {
                                                                                                                                活动装备箱使用 = true
                                                                                                                            }
                                                                                                                        }

                                                                                                                        sleep(200)
                                                                                                                    }
                                                                                                                } else {
                                                                                                                    var guajizhon = imgempt(true, 0.9, "队伍副本材料箱2|队伍副本材料箱|队伍副本活动南瓜|橙装_喙头冠单个箱|橙装_飞羽珠宝单个箱|4.16商城活动箱|国际服强化卷轴选择箱|装备随机箱|工会任务装备箱|100天气球|紫级抽卡选择箱|洗练材料箱|洗练材料选择箱|红色抽卡选择箱|活动奖励箱|红色武器装扮单抽卡|选择必绿以上11连坐骑", 918, 104, 305, 433)
                                                                                                                    if (guajizhon != null) {
                                                                                                                        log("点击各种可使用")
                                                                                                                        未找到 = 0
                                                                                                                        for (let index = 0; index < 2; index++) {
                                                                                                                            随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                        }
                                                                                                                        for (let index = 0; index < 3; index++) {
                                                                                                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                                                                            if (bbkjbztc != null) {
                                                                                                                                log("背包空间不足弹窗")
                                                                                                                                if (未清理背包) {
                                                                                                                                    未清理背包 = false
                                                                                                                                    var 结果 = 清理背包("直接返回")
                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                        return "掉线"
                                                                                                                                    } else {
                                                                                                                                        break
                                                                                                                                    }
                                                                                                                                } else {
                                                                                                                                    log("已经清理过一次了，直接去仓库")
                                                                                                                                    最终仓库调整(false)
                                                                                                                                    return "掉线"
                                                                                                                                }
                                                                                                                            } else {

                                                                                                                            }
                                                                                                                            sleep(200)
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        var guajizhon = imgempt(true, 0.9, "英雄武器选择箱|蓝级武器外形箱1107|激战之风飞行器|蓝级满强主武选择箱|满强防具套装箱|蓝级满强副武选择箱|绿级高强武器箱1107|绿级高强弓手套装箱_背包|蓝满首饰套", 918, 104, 305, 433)//加速服专用    
                                                                                                                        if (guajizhon != null) {
                                                                                                                            log("点击各种可使用")
                                                                                                                            未找到 = 0
                                                                                                                            for (let index = 0; index < 2; index++) {
                                                                                                                                随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                            }
                                                                                                                            活动装备箱使用 = true
                                                                                                                        } else {
                                                                                                                            if (参数[26]) {
                                                                                                                                var 临时物资 = "蓝色武器外形选择|绿级首饰洗练箱|风的归属抽奖箱|灿烂的遗物抽取箱|洗练材料抽取箱|灌注材料箱|灌注材料箱2|洗练材料选择抽取箱|地球仪选择箱|天枰匕首选择箱|随机装备箱"
                                                                                                                            } else {
                                                                                                                                var 临时物资 = "蓝色武器外形选择|紫色技能书职业选择箱|技能书选择箱|技能书集合选择箱|绿级首饰洗练箱|风的归属抽奖箱|灿烂的遗物抽取箱|洗练材料抽取箱|灌注材料箱|灌注材料箱2|洗练材料选择抽取箱|地球仪选择箱|天枰匕首选择箱|随机装备箱"
                                                                                                                            }
                                                                                                                            //加速服物资
                                                                                                                            var guajizhon = imgempt(true, 0.9, 临时物资, 918, 104, 305, 433)//加速服专用    
                                                                                                                            if (guajizhon != null) {
                                                                                                                                log("点击各种可使用")
                                                                                                                                for (let index = 0; index < 2; index++) {
                                                                                                                                    随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                                }
                                                                                                                            } else {
                                                                                                                                //丢弃物品
                                                                                                                                var guajizhon = imgempt(true, 0.9, "枫叶活动_背包2|盾牌活动_背包|100天制造材料|玫瑰制造材料|过期枫叶", 918, 104, 305, 433)
                                                                                                                                if (guajizhon != null) {
                                                                                                                                    log("点击可丢弃物品")
                                                                                                                                    随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                                } else {
                                                                                                                                    //制造物品
                                                                                                                                    var guajizhon = imgempt(true, 0.9, "坐骑合成反值卡|武器装扮合成反值卡", 918, 104, 305, 433)
                                                                                                                                    if (guajizhon != null) {
                                                                                                                                        log("点击可制造物品")
                                                                                                                                        随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                                    } else {
                                                                                                                                        //直接丢弃物品
                                                                                                                                        var guajizhon = imgempt(true, 0.9, "职业转换币|队伍副本次数增加卷|绿级武器熟练度书|普通武器熟练度书|时装染色卷|雪花_背包", 918, 104, 305, 433)//紫色防具洗练|紫色手工艺品洗练|紫色武器洗练|
                                                                                                                                        if (guajizhon != null) {
                                                                                                                                            log("点击物品并丢弃")
                                                                                                                                            随机点击(guajizhon.x, guajizhon.y)
                                                                                                                                            随机点击(839, 543)
                                                                                                                                        } else {
                                                                                                                                            // var guajizhon = imgempt(true, 0.9, "铜线获得量加50药水|三倍经验药水", 918, 104, 305, 433)
                                                                                                                                            // if (guajizhon != null) {
                                                                                                                                            //     log("点击三倍经验药水")
                                                                                                                                            //     未找到 = 0
                                                                                                                                            //     随机点击2(guajizhon.x, guajizhon.y)
                                                                                                                                            // } else {
                                                                                                                                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                                                                                                                            if (bbym != null) {
                                                                                                                                                if (活动装备箱使用) {
                                                                                                                                                    var 结果 = 装备蓝装遍历版()
                                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                                        return "掉线"
                                                                                                                                                    } else {
                                                                                                                                                        var 结果 = 纯回主页()
                                                                                                                                                        if (结果 == "掉线") {
                                                                                                                                                            return "掉线"
                                                                                                                                                        }
                                                                                                                                                        return "使用完毕"
                                                                                                                                                    }
                                                                                                                                                } else if (飞行器) {
                                                                                                                                                    纯回主页()
                                                                                                                                                    注册飞行器()
                                                                                                                                                    纯回主页()
                                                                                                                                                    清理背包()
                                                                                                                                                    使用背包物品日期 = new Date().getDate()
                                                                                                                                                    return "使用完毕"
                                                                                                                                                } else {
                                                                                                                                                    if (mode == "练级") {
                                                                                                                                                        随机点击(1241, 463)
                                                                                                                                                    }
                                                                                                                                                    log("使用完毕,关闭背包")
                                                                                                                                                    纯回主页()
                                                                                                                                                    使用背包物品日期 = new Date().getDate()
                                                                                                                                                    return "使用完毕"
                                                                                                                                                }
                                                                                                                                            } else {
                                                                                                                                                未找到++
                                                                                                                                                if (未找到 >= 9) {
                                                                                                                                                    if (飞行器) {
                                                                                                                                                        纯回主页()
                                                                                                                                                        注册飞行器()
                                                                                                                                                        纯回主页()
                                                                                                                                                        清理背包()
                                                                                                                                                        使用背包物品日期 = new Date().getDate()
                                                                                                                                                        return "使用完毕"
                                                                                                                                                    } else {
                                                                                                                                                        log("使用完毕,关闭背包")
                                                                                                                                                        纯回主页()
                                                                                                                                                        使用背包物品日期 = new Date().getDate()
                                                                                                                                                        return "使用完毕"
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                log("未找到可使用物品")
                                                                                                                                                swipe(1037, 432, 1036, 228, 2000)
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }}
                                                                                                                // }
                                                                                                            }
                                                                                                        }
                                                                                                        // }
                                                                                                    }
                                                                                                }
                                                                                                // var guajizhon = imgempt(true, 0.9, "装备箱(所有防具)|装备箱(所有饰品)|装备箱(所有防具)2|装备箱(所有饰品)2", 918, 104, 305, 433)
                                                                                                // if (guajizhon != null) {
                                                                                                //     log("点击各种装备箱")
                                                                                                //     for (let index = 0; index < 2; index++) {
                                                                                                //         随机点击2(guajizhon.x, guajizhon.y)
                                                                                                //     }
                                                                                                //     for (let index = 0; index < 13; index++) {
                                                                                                //         随机点击2(839, 395)
                                                                                                //         sleep(300)
                                                                                                //     }
                                                                                                // } else {

                                                                                                // }
                                                                                            }
                                                                                        }
                                                                                    } else {
                                                                                        var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                                                                                        if (bbym != null) {
                                                                                            log("点击背包")
                                                                                            随机点击2(bbym.x, bbym.y)
                                                                                            整理 = true
                                                                                        } else {
                                                                                            var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                                            if (zhuxian != null) {
                                                                                                log("点击跳过");
                                                                                                随机点击2(zhuxian.x, zhuxian.y)
                                                                                            } else {
                                                                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                                                if (手 != null) {
                                                                                                    log("点击背包")
                                                                                                    随机点击(1115, 34, 10, 10)
                                                                                                    整理 = true
                                                                                                } else {
                                                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                                    if (bbym != null) {
                                                                                                        log("使用背包物品,退出节电");
                                                                                                        swipe(566, 389, 968, 226, 500)
                                                                                                    } else {

                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            // }
        }
        sleep(200)
    }
}

function 注册飞行器() {
    var 未找到可注册飞行器 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var feuxq = imgempt(true, 0.9, "飞行器页", 21, 2, 233, 76)
            if (feuxq != null) {
                var feuxq = imgempt(true, 0.9, "注册飞行器", 874, 136, 399, 287)
                if (feuxq != null) {
                    log("点击注册飞行器");
                    随机点击(feuxq.x, feuxq.y, 10, 10)
                    随机点击(1156, 678, 10, 10)
                } else {
                    未找到可注册飞行器++
                    if (未找到可注册飞行器 >= 3) {
                        return "成功"
                    }
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var feuxq = imgempt(true, 0.9, "飞行器(菜单)", 961, 92, 318, 495)
                    if (feuxq != null) {
                        log("点击进入飞行器");
                        随机点击(feuxq.x, feuxq.y, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 买卷轴配置药水() {
    var 攻速药 = true
    var 命中防御药 = true
    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "购买药水加10", 547, 432, 114, 73)
                if (zhuchengzahuo != null) {
                    log("点击加10,购买")
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                    随机点击2(725, 636)
                } else {
                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                    if (zhuchengzahuo != null) {
                        log("点击前往杂货商店")
                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y)
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        }
                    } else {
                        if (攻速药) {
                            var zhuchengzahuo = imgempt(true, 0.9, "攻速药", 17, 79, 150, 590)
                            if (zhuchengzahuo != null) {
                                log("点击攻速药水")
                                随机点击2(zhuchengzahuo.x + 90, zhuchengzahuo.y)
                                攻速药 = false
                            } else {
                                var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                if (yssrhy != null) {
                                    log("下滑")
                                    swipe(134, 552, 130, 150, 500)
                                } else {

                                }
                            }
                        } else if (命中防御药) {
                            var zhuchengzahuo = imgempt(true, 0.9, "命中防御药水", 17, 79, 150, 590)
                            if (zhuchengzahuo != null) {
                                log("点击命中防御药水")
                                随机点击2(zhuchengzahuo.x + 90, zhuchengzahuo.y)
                                命中防御药 = false
                            } else {
                                var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                if (yssrhy != null) {
                                    log("下滑")
                                    swipe(134, 552, 130, 150, 500)
                                } else {

                                }
                            }
                        } else if (回城卷轴) {
                            var yssrhy = imgempt(true, 0.9, "回城卷轴(NPC)", 15, 54, 329, 625)
                            if (yssrhy != null) {
                                log("回城卷轴(NPC)");
                                随机点击(yssrhy.x + 100, yssrhy.y, 10, 10)
                                回城卷轴 = false
                            } else {
                                var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                if (yssrhy != null) {
                                    log("下滑")
                                    swipe(134, 552, 130, 150, 500)
                                } else {

                                }
                            }
                        } else {
                            log("购买完成")
                            var 结果 = 开始配置卷轴药水()
                            if (结果 == "放置完成") {
                                return "放置完成"
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 开始配置卷轴药水() {
    var 回城卷轴 = true
    var 攻速药 = true
    var 命中防御药 = true
    var 整理 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var yssrhy = imgempt(true, 0.9, "回城卷轴(NPC)", 15, 54, 329, 625)
            if (yssrhy != null) {
                log("回城卷轴(NPC),关闭商店");
                随机点击(1237, 36, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击背包");
                    随机点击(1115, 31, 10, 10)
                } else {
                    var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
                    if (zhuangbei != null) {
                        log("全部栏或装备栏");
                        随机点击(1246, 308, 10, 10)
                    } else {
                        var zhuangbei = imgempt(true, 0.9, "回城卷轴(详细)", 577, 114, 166, 124)
                        if (zhuangbei != null) {
                            log("点击放入")
                            随机点击(890, 659, 10, 10)
                            回城卷轴 = false
                        } else {
                            var zhuangbei = imgempt(true, 0.9, "攻速药详细", 585, 112, 134, 110)
                            if (zhuangbei != null) {
                                log("点击放入")
                                随机点击(595, 655, 10, 10)
                                swipe(596, 641, 597, 680, 500)
                                攻速药 = false
                            } else {
                                var zhuangbei = imgempt(true, 0.9, "防御命中药详细", 585, 112, 134, 110)
                                if (zhuangbei != null) {
                                    log("点击放入")
                                    随机点击(525, 653, 10, 10)
                                    swipe(523, 643, 526, 680, 500)
                                    命中防御药 = false
                                } else {
                                    var zhuangbei = imgempt(true, 0.9, "快捷放入(勾选)", 905, 533, 111, 88)
                                    if (zhuangbei != null) {
                                        if (回城卷轴) {
                                            var zhuangbei = imgempt(true, 0.9, "回城卷轴(背包)", 917, 106, 307, 503)
                                            if (zhuangbei != null) {
                                                随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                            } else {
                                                log("没有找到回城卷轴")
                                            }
                                        } else if (攻速药) {
                                            var zhuangbei = imgempt(true, 0.9, "攻速药(背包)", 917, 106, 307, 503)
                                            if (zhuangbei != null) {
                                                随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                            } else {
                                                log("没有找到攻速药")
                                            }
                                        } else if (命中防御药) {
                                            var zhuangbei = imgempt(true, 0.9, "命中防御药(背包)", 917, 106, 307, 503)
                                            if (zhuangbei != null) {
                                                随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                            } else {
                                                log("没有找到命中防御药")
                                            }
                                        } else {
                                            log("放置完成")
                                            return "放置完成"
                                        }
                                    } else {
                                        var zhuangbei = imgempt(true, 0.9, "回城卷轴(背包)", 917, 106, 307, 503)
                                        if (zhuangbei != null) {
                                            log("背包里的回城卷轴,点击快捷放入");
                                            随机点击(946, 576, 10, 10)
                                        } else {
                                            var zhuangbei = imgempt(true, 0.9, "整理", 1126, 533, 116, 100)
                                            if (zhuangbei != null) {
                                                整理++
                                                if (整理 >= 4) {
                                                    return "没有回城卷轴"
                                                } else if (整理 >= 2) {
                                                    swipe(1020, 479, 1030, 150, 2000)
                                                } else {
                                                    log("点击整理");
                                                    随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                                }
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 工会币兑换蓝书() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    随机点击2(605, 464, 10, 10)
                    随机点击(729, 639, 10, 10)
                    纯回主页()
                    return "购买成功"
                } else {
                    var yssrhy = imgempt(true, 0.9, "已购买蓝书", 6, 132, 166, 580)
                    if (yssrhy != null) {
                        log("已购买蓝书")
                        纯回主页()
                        return "购买成功"
                    } else {
                        var yssrhy = imgempt(true, 0.9, "工会商店蓝书", 6, 132, 166, 580)
                        if (yssrhy != null) {
                            log("工会商店蓝书")
                            随机点击2(yssrhy.x + 100, yssrhy.y, 10, 10)
                            var yssrhy = imgempt(true, 0.9, "工会币不足", 623, 60, 129, 61)
                            if (yssrhy != null) {
                                log("工会币不足")
                                纯回主页()
                                return "购买成功"
                            } else {

                            }
                        } else {
                            var yssrhy = imgempt(true, 0.9, "工会商店紫色药剂", 6, 132, 166, 580)
                            if (yssrhy != null) {
                                log("工会商店紫色药剂,下滑")//
                                swipe(70, 513, 64, 328, 1500)
                            } else {
                                var yssrhy = imgempt(true, 0.9, "工会商店红色徽章", 6, 132, 166, 580)
                                if (yssrhy != null) {
                                    log("工会商店红色徽章,滑过了")//工会商店红色徽章
                                    swipe(64, 328, 70, 513, 1500)
                                } else {//

                                    var yssrhy = imgempt(true, 0.9, "兑换未解锁", 4, 368, 315, 351)
                                    if (yssrhy != null) {
                                        log("兑换未解锁,")//工会商店红色徽章
                                        纯回主页()
                                        return "购买成功"
                                    } else {//兑换未解锁
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城工会商店图标", 8, 52, 97, 350)
                                        if (zhuchengzahuo != null) {
                                            log("点击主城工会商店图标");
                                            随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                log("主城杂货商人图标,下滑");
                                                swipe(107, 324, 120, 136, 2000)
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                                if (zhuchengzahuo != null) {
                                                    log("主城主城技能商店图标");
                                                    swipe(122, 138, 114, 274, 500)
                                                } else {
                                                    var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                                    if (shezhi != null) {
                                                        log("确定退出副本");
                                                        随机点击(shezhi.x, shezhi.y, 10, 10)
                                                    } else {
                                                        var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                        if (guajizhon != null) {
                                                            log("点击退出副本");
                                                            随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                        } else {
                                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                            if (zhuchengzahuo != null) {
                                                                log("主城委托图标");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(153, 87, 150, 282, 500)
                                                                }
                                                            } else {
                                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                if (huicheng != null) {
                                                                    log("点击回城卷轴")
                                                                    随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                    sleep(3000)
                                                                } else {

                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 工会捐献() {
    var 未加入工会 = false
    var 未签到 = true
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.8, "立即加入工会|立即加入工会2|立即加入工会3", 1032, 167, 236, 505)//
            if (jizhandi != null) {
                log("点击立即加入工会");
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                未加入工会 = true
            } else {
                var jizhandi = imgempt(true, 0.9, "申请加入工会|申请加入工会2|申请加入工会3", 1032, 167, 236, 505)//
                if (jizhandi != null) {
                    log("申请加入工会2");
                    swipe(1048, 575, 1050, 224, 1500)//
                    滑动次数++
                    if (滑动次数 >= 8) {
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                        storage.put("工会每日捐献日期", new Date().getDate())
                        return "刚加入"
                    }
                } else {//
                    var jizhandi = imgempt(true, 0.9, "工会申请中|工会申请中2", 1032, 167, 236, 505)//
                    if (jizhandi != null) {
                        log("工会申请中");
                        swipe(1048, 575, 1050, 224, 1500)//
                        滑动次数++
                        if (滑动次数 >= 8) {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            storage.put("工会每日捐献日期", new Date().getDate())
                            return "刚加入"
                        }
                    } else {//
                        var jizhandi = imgempt(true, 0.9, "工会铜钱捐献|工会铜钱捐献2", 282, 140, 163, 112)//
                        if (jizhandi != null) {
                            log("点击捐献铜钱")
                            for (let index = 0; index < 4; index++) {
                                随机点击2(360, 524, 10, 10)
                            }
                            log("捐献完成")
                            var 结果 = 公会特性()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "完成"
                                }
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "工会捐献", 609, 527, 248, 147)//
                            if (jizhandi != null) {
                                log("已进入工会")
                                if (未加入工会) {
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    storage.put("工会每日捐献日期", new Date().getDate())
                                    return
                                } else if (未签到) {
                                    log("点击领取工会奖励")
                                    for (let index = 0; index < 2; index++) {
                                        随机点击2(1068, 628, 10, 10)
                                    }
                                    log("点击工会签到")
                                    for (let index = 0; index < 2; index++) {
                                        随机点击2(567, 595, 10, 10)
                                    }
                                    未签到 = false
                                } else {
                                    log("点击工会捐献")
                                    随机点击2(722, 594, 10, 10)
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "工会图标(菜单)", 958, 87, 321, 499)//
                                if (jizhandi != null) {
                                    log("点击工会图标");
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {
                                        var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (bbym != null) {
                                            log("公会捐献,退出节电");
                                            swipe(566, 389, 968, 226, 500)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 公会特性() {
    var 首次进入特性 = true
    var 解锁权限 = true
    log("解锁公会商店权限")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "工会铜钱捐献|工会铜钱捐献2", 282, 140, 163, 112)//
            if (jizhandi != null) {
                log("关闭捐献")
                随机点击2(1062, 91)
            } else {
                var jizhandi = imgempt(true, 0.9, "工会捐献", 609, 527, 248, 147)//
                if (jizhandi != null) {
                    log("工会捐献页,点击研究所页")
                    随机点击2(638, 102)
                } else {
                    var jizhandi = imgempt(true, 0.9, "赤狼日志_特性", 97, 132, 269, 111)//
                    if (jizhandi != null) {
                        log("赤狼日志_特性")
                        if (首次进入特性) {
                            log("首次进入特性,进入公会商店权限页")
                            随机点击2(44, 550)
                            首次进入特性 = false
                        } else {
                            if (解锁权限) {
                                var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 158, 255, 111, 77)//
                                if (jizhandi != null) {
                                    log("已解锁一阶赤狼日志")
                                    var 结果 = 捐献赤狼日志()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "完成"
                                    }
                                } else {
                                    // var jizhandi = imgempt(true, 0.9, "一阶赤狼日志未解锁|一阶赤狼日志未解锁2", 158,255,111,77)//
                                    // if (jizhandi != null) {
                                    log("一阶赤狼日志未解锁,尝试点击并解锁")
                                    随机点击(215, 243)
                                    var jizhandi = imgempt(true, 0.9, "激活特性按钮", 968, 604, 246, 99)//
                                    if (jizhandi != null) {
                                        log("点击激活一阶赤狼日志")
                                        随机点击2(jizhandi.x, jizhandi.y)
                                        for (let index = 0; index < 5; index++) {
                                            var jizhandi = imgempt(true, 0.9, "没有解锁特性权限", 475, 48, 355, 83)//
                                            if (jizhandi != null) {
                                                log("没有权限")
                                                var 结果 = 捐献赤狼日志()
                                                if (结果 != "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "完成"
                                                }
                                            } else {
                                                var jizhandi = imgempt(true, 0.9, "公会积分不足", 503, 46, 287, 95)//
                                                if (jizhandi != null) {
                                                    log("公会资产不足")
                                                    var 结果 = 捐献赤狼日志()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "完成"
                                                    }

                                                } else {

                                                }
                                            }
                                            sleep(200)
                                        }
                                    } else {
                                        log("尝试失败")
                                        var 结果 = 捐献赤狼日志()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    }
                                    // } else {
                                    //     log("没找到一阶赤狼日志未解锁")
                                    // }
                                }
                            } else {
                                log("没有权限，直接去捐献赤狼日志")
                                var 结果 = 捐献赤狼日志()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "完成"
                                }
                            }
                        }

                    } else {
                        var jizhandi = imgempt(true, 0.9, "工会商店权限页", 107, 143, 252, 82)//
                        if (jizhandi != null) {
                            log("公会商店权限页,开始识别权限")
                            var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 463, 235, 97, 67)//
                            if (jizhandi == null) {
                                log("公会商店菜品权限未解开")
                                随机点击2(505, 225)
                            } else {
                                var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 468, 383, 82, 46)//
                                if (jizhandi == null) {
                                    log("公会商店炼金术权限未解开")
                                    随机点击2(506, 358)
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 450, 519, 121, 62)//
                                    if (jizhandi == null) {
                                        log("公会商店蓝书权限未解开")
                                        随机点击2(507, 506)
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 644, 525, 87, 49)//
                                        if (jizhandi == null) {
                                            log("公会商店天枰权限未解开")
                                            随机点击2(685, 506)
                                        } else {
                                            var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 639, 642, 87, 72)//
                                            if (jizhandi == null) {
                                                log("公会商店紫徽章权限未解开")
                                                随机点击2(682, 633)
                                            } else {
                                                var jizhandi = imgempt(true, 0.9, "商店权限已解锁|商店权限已解锁2", 286, 517, 97, 62)//
                                                if (jizhandi == null) {
                                                    log("公会商店技能书权限未解开")
                                                    随机点击2(331, 502)
                                                } else {
                                                    log("已全部解开,看赤狼日志_特性")
                                                    随机点击(49, 205)
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            sleep(2000)
                            if (jizhandi == null) {
                                var jizhandi = imgempt(true, 0.9, "激活特性按钮", 968, 604, 246, 99)//
                                if (jizhandi != null) {
                                    log("点击激活特性按钮")
                                    随机点击2(jizhandi.x, jizhandi.y)
                                    for (let index = 0; index < 5; index++) {
                                        var jizhandi = imgempt(true, 0.9, "没有解锁特性权限", 475, 48, 355, 83)//
                                        if (jizhandi != null) {
                                            log("没有权限")
                                            随机点击(49, 205)
                                            解锁权限 = false
                                            break
                                        } else {
                                            var jizhandi = imgempt(true, 0.9, "公会积分不足", 475, 48, 355, 83)//
                                            if (jizhandi != null) {
                                                log("公会资产不足")
                                                随机点击(49, 205)
                                                break
                                            } else {

                                            }
                                        }
                                        sleep(200)
                                    }
                                } else {
                                    log("没找到激活按钮，跳过")
                                    随机点击(49, 205)
                                }
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "公会特性|公会特性2", 467, 518, 338, 161)//
                            if (jizhandi != null) {
                                log("点击进入公会特性")
                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                            } else {
                                var jizhandi = imgempt(true, 0.9, "工会图标(菜单)", 958, 87, 321, 499)//
                                if (jizhandi != null) {
                                    log("点击工会图标");
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }

            }
        }
        sleep(200)
    }
}
function 捐献赤狼日志() {
    var 冒险日志 = true
    var 探险日志 = true
    var 战斗日志 = true
    log("捐献赤狼日志")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "加斯帕冒险日志|加斯帕探险日志|加斯帕战斗日志", 554, 122, 326, 136)//
            if (jizhandi != null) {
                if (冒险日志) {
                    冒险日志 = false
                    随机点击(51, 204)
                } else if (探险日志) {
                    探险日志 = false
                    随机点击(48, 290)
                } else if (战斗日志) {
                    战斗日志 = false
                    随机点击(48, 373)
                } else {
                    log("完成捐献")
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "完成"
                    }
                }

                var jizhandi = imgempt(true, 0.9, "赤狼日志恢复按钮", 537, 631, 321, 88)//
                if (jizhandi != null) {
                    log("点击复原")
                    随机点击(jizhandi.x, jizhandi.y)
                    随机点击(734, 517)
                    随机点击(630, 80)
                } else {
                    log("当前复原未解锁")
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "工会铜钱捐献|工会铜钱捐献2", 282, 140, 163, 112)//
                if (jizhandi != null) {
                    log("关闭捐献")
                    随机点击2(1062, 91)
                } else {
                    var jizhandi = imgempt(true, 0.9, "工会捐献", 609, 527, 248, 147)//
                    if (jizhandi != null) {
                        log("工会捐献页,点击研究所页")
                        随机点击2(638, 102)
                    } else {
                        var jizhandi = imgempt(true, 0.9, "赤狼日志_特性", 97, 132, 269, 111)//
                        if (jizhandi != null) {
                            log("赤狼日志_特性页跳转到捐献页")
                            随机点击2(102, 96)
                        } else {
                            var jizhandi = imgempt(true, 0.9, "公会赤狼日志", 902, 559, 300, 117)//
                            if (jizhandi != null) {
                                log("点击进入公会赤狼日志")
                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                            } else {
                                var jizhandi = imgempt(true, 0.9, "工会图标(菜单)", 958, 87, 321, 499)//
                                if (jizhandi != null) {
                                    log("点击工会图标");
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 清空背包红药() {
    var 滑动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "出售MAX", 705, 378, 120, 81)
                if (zhuchengzahuo != null) {
                    log("点击出售MAX");
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    随机点击2(727, 634, 10, 10)
                } else {
                    var zhuchengzahuo = imgempt(true, 0.9, "确定出售", 639, 475, 206, 92)
                    if (zhuchengzahuo != null) {
                        log("确定出售");
                        随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    } else {
                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                        if (yssrhy != null) {
                            log("点击背包材料栏")
                            随机点击(1244, 309, 10, 10)
                            var bbym = imgempt(true, 0.9, "中药水(背包)|小药水(背包)|小药水(背包)2|中药水(背包)2", 917, 114, 291, 506)
                            if (bbym != null) {
                                log("点击红药水")
                                随机点击(bbym.x, bbym.y)
                            } else {
                                swipe(1061, 510, 1063, 293, 2000)
                                滑动次数++
                                if (滑动次数 >= 7) {
                                    log("清理完成,关闭背包")
                                    清空药水 = false
                                    ui.run(function () {
                                        ui.清空药水.setChecked(false)
                                    });
                                    纯回主页()
                                    return "清理完成"
                                }
                            }
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                    if (zhuchengzahuo != null) {
                                                        log("主城委托图标");
                                                        for (let index = 0; index < 3; index++) {
                                                            swipe(153, 87, 150, 282, 500)
                                                        }
                                                    } else {
                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                        if (huicheng != null) {
                                                            log("点击回城卷轴")
                                                            随机点击(huicheng.x, huicheng.y, 10, 10)
                                                            sleep(3000)
                                                        } else {

                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 每日制造绿级材料() {
    log("制作材料")
    var 职业 = 学习制造术("每日制造")
    if (职业 == "掉线") {
        return "掉线"
    } else if (职业 == "铜钱不足") {
        return "铜钱不足"
    }

    职业 = "近战职业"

    var 可制造数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                if (jizhandi != null) {
                    log("点击max")
                    随机点击2(753, 360, 10, 10)
                    var jizhandi = imgempt(true, 0.9, "输入1", 553, 192, 184, 73)
                    if (jizhandi != null) {
                        log("材料不足")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "材料不足"
                        }
                    } else {
                        随机点击2(720, 497, 10, 10)
                        var laolian = imgempt(true, 0.9, "老练的制作术", 10, 618, 194, 97)
                        if (laolian != null) {
                            log("点击老练的")
                            随机点击2(913, 160, 10, 10)
                        } else {
                            var shulian = imgempt(true, 0.9, "熟练的制作术", 10, 618, 194, 97)
                            if (shulian != null) {
                                log("点击熟练的")
                                随机点击2(1025, 162, 10, 10)
                            } else {

                            }
                        }
                        随机点击(957, 662, 10, 10)
                        for (let index = 0; index < 3; index++) {
                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                            if (bbkjbztc != null) {
                                log("背包空间不足弹窗")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    // var 结果 = 成就图鉴()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // } else {
                                    var 结果 = 清理背包()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        break
                                    }
                                    // }
                                }
                            } else {

                            }
                            sleep(200)
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "制作图标", 109, 74, 668, 63)
                    if (jizhandi != null) {
                        var jizhandi = imgempt(true, 0.9, "材料制作栏(关闭状态)|材料制作栏(关闭状态)2", 9, 127, 255, 529)
                        if (jizhandi != null) {//
                            log("点击打开材料栏")
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var guajizhon = imgempt(true, 0.9, "制作栏绿色矿物(点出来后)|制作栏绿色毛发(点出来后)|制作栏绿色皮革(点出来后)|制作栏绿色铁矿(点出来后)", 658, 208, 221, 201)////这里判定制作页面材料
                            if (guajizhon != null) {
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                        if (当前铜钱数量 <= 12000000) {//3000000
                                            log("铜钱不足1200w")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "铜钱不足"
                                            }
                                        } else {
                                            可制造数量 = parseInt((当前铜钱数量 - 1000000) / 25000)
                                            if (可制造数量 <= 0) {
                                                log("铜钱不足300w")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "铜钱不足"
                                                }
                                            } else if (可制造数量 >= 100) {
                                                log("点击输入制作数量")
                                                随机点击(789, 662, 10, 10)
                                            } else {
                                                var 结果 = 输入制造数(可制造数量)
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else if (结果 == "材料不足") {
                                                    return "材料不足"
                                                }
                                            }
                                        }
                                    } else {
                                        log("没有找到铜钱")
                                        sleep(3000)
                                    }
                                }
                            } else {
                                var guajizhon = imgempt(true, 0.9, "制作栏绿色矿物|制作栏绿色毛发|制作栏绿色皮革|制作栏绿色铁矿", 218, 132, 338, 445)//这里判定点击种类
                                if (guajizhon != null) {
                                    log("点击材料栏材料")
                                    随机点击(guajizhon.x + 100, guajizhon.y, 10, 10)
                                } else {
                                    log("没找到材料栏")
                                    swipe(120, 560, 113, 161, 500)
                                }
                            }
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                        if (jizhandi != null) {
                            log("点击菜单_制造");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击(1238, 36, 10, 10)
                            } else {
                                var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                                if (zhunmen != null) {
                                    log("专门制作");
                                    随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                } else {
                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (bbym != null) {
                                        log("每日制造,退出节电");
                                        swipe(566, 389, 968, 226, 500)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 输入制造数(可制造数量) {
    var 需输入 = 可制造数量.toString()
    var 制作成功 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                if (jizhandi != null) {
                    log("输入数字")
                    随机点击2(755, 402, 10, 10)
                    for (let index = 0; index < 需输入.length; index++) {
                        if (需输入[index] == "0")
                            随机点击2(524, 404);
                        if (需输入[index] == "1")
                            随机点击2(522, 360);
                        if (需输入[index] == "2")
                            随机点击2(522, 313);
                        if (需输入[index] == "3")
                            随机点击2(677, 358);
                        if (需输入[index] == "4")
                            随机点击2(522, 313);
                        if (需输入[index] == "5")
                            随机点击2(599, 315);
                        if (需输入[index] == "6")
                            随机点击2(678, 314);
                        if (需输入[index] == "7")
                            随机点击2(520, 266);
                        if (需输入[index] == "8")
                            随机点击2(597, 269);
                        if (需输入[index] == "9")
                            随机点击2(677, 268);
                    }

                    var jizhandi = imgempt(true, 0.9, "输入1", 553, 192, 184, 73)
                    if (jizhandi != null) {
                        log("材料不足")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "材料不足"
                        }
                    } else {
                        随机点击2(720, 497, 10, 10)
                        var laolian = imgempt(true, 0.9, "老练的制作术", 10, 618, 194, 97)
                        if (laolian != null) {
                            log("点击老练的")
                            随机点击2(913, 160, 10, 10)
                        } else {
                            var shulian = imgempt(true, 0.9, "熟练的制作术", 10, 618, 194, 97)
                            if (shulian != null) {
                                log("点击熟练的")
                                随机点击2(1025, 162, 10, 10)
                            } else {

                            }
                        }
                        随机点击2(957, 662, 10, 10)
                        制作成功 = true
                    }
                } else {
                    var guajizhon = imgempt(true, 0.9, "制作栏绿色矿物(点出来后)|制作栏绿色毛发(点出来后)|制作栏绿色皮革(点出来后)|制作栏绿色铁矿(点出来后)", 658, 208, 221, 201)////这里判定制作页面材料
                    if (guajizhon != null) {
                        if (制作成功) {
                            log("已制作")
                            return "成功"
                        } else {
                            log("点击输入制作数量")
                            随机点击(789, 662, 10, 10)
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}


function 退出回到搜索页改() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//


            var pmhss = imgempt(true, 0.9, "关闭价格详细", 976, 82, 111, 79)//请输入检索词
            if (pmhss != null) {
                log("关闭价格详细")
                随机点击2(pmhss.x, pmhss.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("卡出交易所");
                    return
                } else {
                    var pmhss = imgempt(true, 0.9, "关闭无物品信息栏", 791, 146, 88, 80)//请输入检索词
                    if (pmhss != null) {
                        log("关闭无物品信息栏")
                        随机点击2(pmhss.x, pmhss.y, 10, 10)
                    } else {
                        var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                        if (pmhss != null) {
                            log("请输入检索词右侧,已关闭")
                            return
                        } else {
                            log("点击重置搜索")
                            随机点击(1235, 94)
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

//
function 退出回到搜索页() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var cdjys = imgempt(true, 0.9, "交易行放大镜", 12, 59, 85, 75)
            if (cdjys != null) {
                log("已到搜索页")
                return
            } else {
                var pmhss = imgempt(true, 0.9, "请输入检索词", 40, 60, 169, 81)//请输入检索词
                if (pmhss != null) {
                    log("已到搜索页")
                    return
                } else {
                    var jdmsz = imgempt(true, 0.9, "药材粉末详细2|新鲜水果详细2|损坏的纸条详细2|毒蜘蛛液体详细2|骷髅头详细2|钥匙详细2|动物的肩章详细2|动物的血详细2|异教徒补给物资详细2|链球详细2|药草详细2|狼头巾详细2|巫术仗详细2|水果酒详细2|恶灵粉末详细2|冰牙原石详细2|冰霜宝石详细2|书吏精华详细2|书吏原石详细2|书吏结晶详细2|冰河精华详细2|冰河宝石详细2|绿级红色火花详细2|绿级蓝色火花详细2|普通红色火花详细2|普通蓝色火花详细2|绿级蓝色结晶详细2|绿级白色结晶详细2|绿级红色结晶详细2|绿级绿色结晶详细2|普通蓝色结晶详细2|普通白色结晶详细2|普通红色结晶详细2|普通绿色结晶详细2|白甲详细字|绿甲详细字|黄甲详细字|白甲详细字2|绿甲详细字2|黄甲详细字2|白戟详细|白戟详细2|绿戟详细2|黄戟详细2|绿戟详细|黄戟详细|药材粉末详细|新鲜水果详细|损坏的纸条详细|毒蜘蛛液体详细|骷髅头详细|钥匙详细|动物的肩章详细|动物的血详细|异教徒补给物资详细|链球详细|药草详细|狼头巾详细|巫术仗详细|水果酒详细|绿级蓝色结晶详细|绿级白色结晶详细|绿级红色结晶详细|绿级绿色结晶详细|普通蓝色结晶详细|普通白色结晶详细|普通红色结晶详细|普通绿色结晶详细|绿级蓝色结晶详细2|绿级白色结晶详细2|绿级红色结晶详细2|绿级绿色结晶详细2|普通蓝色结晶详细2|普通白色结晶详细2|普通红色结晶详细2|普通绿色结晶详细2|绿级红色火花详细|绿级蓝色火花详细|普通红色火花详细|普通蓝色火花详细|冰牙原石详细|冰霜宝石详细|书吏精华详细|书吏原石详细|书吏结晶详细|冰河精华详细|恶灵粉末详细|冰河宝石详细", 298, 189, 393, 82)//
                    if (jdmsz != null) {
                        log("点击搜索框")
                        随机点击2(1077, 92, 10, 10)
                    } else {
                        var pmhss = imgempt(true, 0.9, "关闭价格详细", 976, 82, 111, 79)//请输入检索词
                        if (pmhss != null) {
                            log("关闭价格详细")
                            随机点击2(pmhss.x, pmhss.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("卡出交易所");
                                return
                            } else {
                                var pmhss = imgempt(true, 0.9, "关闭无物品信息栏", 791, 146, 88, 80)//请输入检索词
                                if (pmhss != null) {
                                    log("关闭无物品信息栏")
                                    随机点击2(pmhss.x, pmhss.y, 10, 10)
                                } else {
                                    var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                                    if (pmhss != null) {
                                        log("点击搜索框")
                                        随机点击2(1077, 92, 10, 10)
                                    } else {
                                        log("点击重置搜索")
                                        随机点击(1242, 98)
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

// 定义一个函数，用于打印“333”并记录时间戳  
function printThreeThreeThree() {
    // 在添加新时间戳之前，先清理数组  
    cleanTimestamps();
    记录重复点击次数.push(new Date().getTime());
}

// 定义一个函数，用于清理超出一个小时的时间戳  
function cleanTimestamps() {
    let now = new Date().getTime();
    while (记录重复点击次数.length > 0 && now - 记录重复点击次数[0] >= 3600000) {
        记录重复点击次数.shift(); // 删除数组中的第一个元素  
    }
}

// 定义一个函数，用于统计前一个小时内打印“333”的次数  
function countPrintsLastHour() {
    cleanTimestamps(); // 在统计之前也清理一下数组  
    return 记录重复点击次数.length;
}


function 传图异常捕获(params) {
    var 结果 = NoScreenshotsImgempt(params, true, 0.9, "检查状态", 529, 275, 159, 69)
    if (结果 != null) {
        log("检查状态");
        发送异常("检查状态，维护")
        alert("检查状态，维护")
        exit()
    } else {
        var 结果 = NoScreenshotsImgempt(params, true, 0.9, "长时间未操作", 462, 264, 135, 88)
        if (结果 != null) {
            log("长时间未操作");
            随机点击(639, 450, 10, 10)
            return "掉线"
        } else {
            var 结果 = NoScreenshotsImgempt(params, true, 0.9, "服务器连接失败", 420, 225, 446, 192)
            if (结果 != null) {
                log("服务器连接失败");
                    var 随机时间 = random(5, 10) * 60
                while (随机时间 > 0) {
                    var 时间 = convertSecondsToHMS(随机时间)
                    sleep(1000)
                    ui.run(function () {
                        window.计时器.setText(时间)
                    })
                    随机时间--
                    var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                    if (ksyx != null) {
                        toastLog("检测到已进入角色页面,不再等待")
                        break
                    }
                }
                ui.run(function () {
                    window.计时器.setText("")
                })
                // alert("无网络环境")
                // exit()
                随机点击(643, 450, 10, 10)
                return "掉线"
            } else {
                var 结果 = NoScreenshotsImgempt(params, true, 0.9, "长时间未操作2", 420, 223, 449, 255)
                if (结果 != null) {
                    log("长时间未操作2");
                    随机点击(639, 450, 10, 10)
                    return "掉线"
                } else {
                    var 结果 = NoScreenshotsImgempt(params, true, 0.9, "获取环境失败", 414, 220, 457, 285)
                    if (结果 != null) {
                        log("获取环境失败");
                        关闭应用("com.wemade.nightcrows");
                        sleep(10000)
                        log("拉起游戏")
                        app.launch("com.wemade.nightcrows")
                        sleep(5000)
                        return "掉线"
                    } else {
                        if (packageName("com.wemade.nightcrows").exists()) {
                            if (重复点击坐标次数 >= 20) {
                                重复点击坐标次数 = 0
                                log("重复点击同一位置过多,判定为游戏网络掉线了")
                                var img = captureScreen();
                                images.save(img, "/sdcard/重复点击帧.png", "png", 100);
                                confirm("重复点击过多，请检查!!!")
                            }
                            var bfzl = NoScreenshotsImgempt(params, true, 0.9, "节电模式在主城", 485, 462, 365, 113)
                            if (bfzl != null) {
                                log("异常捕获,退出节电")
                                swipe(566, 389, 968, 226, 500)
                            } else {
                                var bfzl = NoScreenshotsImgempt(params, true, 0.9, "节电模式在主城2", 485, 462, 365, 113)
                                if (bfzl != null) {
                                    log("异常捕获,退出节电")
                                    swipe(566, 389, 968, 226, 500)
                                } else {

                                    var jdmsz = NoScreenshotsImgempt(params, true, 0.9, "节电模式中|节电模式中2", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        // log("节电模式中不判定卡死");
                                        啥也没找到 = 0
                                    } else {
                                        var 退出 = NoScreenshotsImgempt(params, true, 0.9, "退出", 1201, 3, 76, 72)
                                        if (退出 != null) {
                                            // log("操作中不判定卡死");
                                            啥也没找到 = 0
                                        } else {
                                            var 手 = NoScreenshotsImgempt(params, true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                啥也没找到 = 0
                                            } else {
                                                var 手 = NoScreenshotsImgempt(params, true, 0.9, "对话图标", 2, 446, 81, 224)
                                                if (手 != null) {
                                                    啥也没找到 = 0
                                                } else {
                                                    啥也没找到++
                                                    if (啥也没找到 >= 150) {
                                                        啥也没找到 = 0
                                                        log("卡死了,重进")
                                                        log("游戏网络掉线了")
                                                        关闭应用("com.wemade.nightcrows");
                                                        sleep(10000)
                                                        log("拉起游戏")
                                                        app.launch("com.wemade.nightcrows")
                                                        sleep(5000)
                                                        return "掉线"
                                                    }
                                                }
                                            }


                                        }
                                    }
                                }
                            }
                        } else {
                            sleep(10000)
                            log("没检测到游戏10秒后再次检测")
                            if (packageName("com.wemade.nightcrows").exists()) {

                            } else {
                                log("再次检测还是不在游戏")
                                关闭应用("com.wemade.nightcrows");
                                sleep(10000)
                                log("拉起游戏")
                                app.launch("com.wemade.nightcrows")
                                sleep(5000)
                                return "掉线"

                            }
                        }
                    }
                }
            }
        }
    }
}


//버드 //사슬 갑옷
function 查看材料价格改() {
    log("查看材料价格")
    var 物品信息 = [
        ["草莓", "야생 산딸기"], ["兔肉", "토끼 고기"], ["五色翅膀", "오색 날개 조각"], ["螳螂腿", "사마귀 갈고리 발톱"], ["坚硬的外壳", "딱딱한 껍데기"],
        ["鬣狗的胡须", "늙은 놀 수염"], ["大肉块", "육중한 고기"], ["不明碎片", "정체불명의 파편"], ["白戟", "필승의 할버드"], ["绿戟", "전의의 할버드"],
        ["黄戟", "투합의 할버드"], ["白甲", "필승의 사슬 갑옷"], ["绿甲", "전의의 사슬 갑옷"], ["黄甲", "투합의 사슬 갑옷"], ["药材粉末", "약재 가루"],
        ["新鲜水果", "싱싱한 과일"], ["损坏的纸条", "훼손된 쪽지"], ["毒蜘蛛液", "독거미"], ["骷髅头", "에 물든 망자의 가면"], ["钥匙", "망자의 비밀 열쇠"],
        ["动物肩章", "동물 뼈 견장"], ["动物的血", "동물의 피"], ["链球", "악에 물든 철퇴"], ["巫术杖", "사티로스 주술봉"], ["水果酒", "달달한 과실주"],
        ["蓝花", "푸른 꽃"], ["新鲜的鱼", "신선한 생선"], ["不祥的骷髅", "불길한 해골"], ["龟壳", "거북 등딱지"], ["蘑菇", "식용 버섯"], ["啤酒", "숨겨둔 맥주"],
        ["兽角", "단단한 짐승 뿔"], ["骨头项链", "조잡한 뼈 목걸이"], ["白骨石", "사악한 백골석"], ["特制汤", "오크 특제 수프"], ["棍棒", "놀의 곤봉"],
        ["锋利的爪子", "날카로운 발톱"], ["草陷阱", "수풀 끈으로 만든 덫"], ["奶酪", "브리 치즈"], ["虫子树胶", "벌레 수액"], ["便携式水袋", "휴대용 물주머니"],
        ["角笛", "기사의 뿔피리"], ["十字军的教义", "십자군의 교리"], ["弩弓树", "나무 석궁"], ["十字军旗帜", "십자군 깃발"]
    ]

    var 识别结果 = {
        "type": "物价",
        "设备id": 设备id.toString()
    }
    while (true) {
        var imgMAX = captureScreen();
        if (传图异常捕获(imgMAX) == "掉线") {
            return "掉线"
        } else {//
            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "无日均记录|无日均记录2", 367, 251, 231, 81)
            if (cdjys != null) {
                log("无日均记录")
                for (let index = 0; index < 物品信息.length; index++) {
                    if (物品信息[index].length <= 2) {
                        物品信息[index].push("无价")
                        log(物品信息[index] + "无价")
                        break
                    }
                }
                var 结果 = 退出回到搜索页改()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "购买物品弹窗", 513, 71, 277, 111)
                if (cdjys != null) {
                    log("购买物品弹窗,识别价格详细")
                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 422, 273, 136, 47);
                    if (单价 != "false") {
                        for (let index = 0; index < 物品信息.length; index++) {
                            if (物品信息[index].length <= 2) {
                                物品信息[index].push(单价.toString())
                                log(物品信息[index][0] + ":" + 单价.toString())
                                break
                            }
                        }
                        var 结果 = 退出回到搜索页改()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        for (let index = 0; index < 物品信息.length; index++) {
                            if (物品信息[index].length <= 2) {
                                log("没找到:" + 物品信息[index][0] + "价格")//
                                break
                            }
                        }
                    }
                } else {
                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "行情信息|行情信息2", 551,343,185,75)
                    if (cdjys != null) {
                        log("行情信息弹窗,识别价格详细")
                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 620,398,164,43);
                        if (单价 != "false") {
                            for (let index = 0; index < 物品信息.length; index++) {
                                if (物品信息[index].length <= 2) {
                                    物品信息[index].push(单价.toString())
                                    log(物品信息[index][0] + ":" + 单价.toString())
                                    break
                                }
                            }
                            var 结果 = 退出回到搜索页改()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            for (let index = 0; index < 物品信息.length; index++) {
                                if (物品信息[index].length <= 2) {
                                    log("没找到:" + 物品信息[index][0] + "价格")//
                                    break
                                }
                            }
                        }
                    } else {
                        var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                        if (pmhss != null) {
                            log("主页搜索");
                            随机点击(pmhss.x, pmhss.y, 10, 10)
                        } else {
                            var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "左侧请输入检索词|请输入检索词|请输入检索词2|请输入检索词3", 25, 53, 217, 110)//请输入检索词
                            if (pmhss != null) {
                                log("点击输入检索词");
                                随机点击(pmhss.x, pmhss.y, 10, 10)
                                for (let index = 0; index < 物品信息.length; index++) {
                                    if (物品信息[index].length <= 2) {
                                        log("搜索:" + 物品信息[index][1])
                                        setText(物品信息[index][1])
                                        sleep(1000)
                                        随机点击(184, 183)
                                        break
                                    } else {
                                        if (index == 物品信息.length - 1) {
                                            log("查看物价完毕")
                                            for (let index = 0; index < 物品信息.length; index++) {
                                                物品信息[index].splice(1, 1);
                                            }
                                            识别结果.物价 = 物品信息
                                            console.log(识别结果);
                                            // alert("搜索完毕")
                                            storage.put("查看物价时间记录", new Date().getTime() / (1000 * 60 * 60).toString())
                                            发送数据至中控("fragmentaryState", 识别结果)
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "完成"
                                            }
                                        }
                                    }
                                }
                            } else {
                                var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索出的图鉴材料|搜索出的图鉴材料2", 22, 110, 102, 86)//
                                if (pmhss != null) {
                                    log("点击搜索出的物品");
                                    随机点击(pmhss.x + 100, pmhss.y + 20, 10, 10)
                                } else {
                                    // var pmhss = imgempt(true, 0.9, "图鉴材料标识", 247, 117, 106, 226)//
                                    // if (pmhss != null) {
                                    //     log("点击搜索出的物品详细");
                                    //     随机点击(pmhss.x + 340, pmhss.y+20, 10, 10)
                                    // } else {
                                    var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "拍卖行钻石标", 544, 184, 390, 79)//
                                    if (pmhss != null) {
                                        log("点击搜索出的物品详细");
                                        随机点击(pmhss.x + 30, pmhss.y, 10, 10)
                                    } else {
                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "菜单_交易所", 960, 87, 316, 460)
                                        if (cdjys != null) {
                                            log("点击交易所");
                                            随机点击(cdjys.x, cdjys.y, 10, 10)
                                        } else {
                                            var 手 = NoScreenshotsImgempt(imgMAX, true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                log("主页点击菜单");
                                                随机点击(1238, 36, 10, 10)
                                            } else {
                                                var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "拍卖行搜索", 925, 54, 161, 85)//
                                                if (pmhss != null) {
                                                    log("主页搜索");
                                                    随机点击(pmhss.x, pmhss.y, 10, 10)
                                                } else {
                                                    var jdmsz = NoScreenshotsImgempt(imgMAX, true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                    if (jdmsz != null) {
                                                        log("查看物价,退出节电")
                                                        swipe(566, 389, 968, 226, 500)
                                                    } else {
                                                        var jdmsz = NoScreenshotsImgempt(imgMAX, true, 0.9, "左侧搜索放大镜", 6, 52, 101, 100)
                                                        if (jdmsz != null) {
                                                            log("左侧搜索放大镜,尝试点击")
                                                            随机点击(184, 183)
                                                        } else {
                                                            log("啥也没找到")
                                                        }
                                                        //
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(250)
    }
}






//버드 //사슬 갑옷
function 查看材料价格() {
    log("查看材料价格")
    var 白戟 = true
    var 绿戟 = true
    var 黄戟 = true
    var 白甲 = true
    var 绿甲 = true
    var 黄甲 = true
    var 药材粉末 = true
    var 新鲜水果 = true
    var 损坏的纸条 = true
    var 毒蜘蛛液 = true
    var 骷髅头 = true
    var 钥匙 = true
    var 动物肩章 = true
    var 动物的血 = true
    var 异教徒补给物资 = true
    var 链球 = true
    var 药草 = true
    var 狼头巾 = true
    var 巫术杖 = true
    var 水果酒 = true
    var 恶灵粉末 = true

    var 绿级蓝色结晶 = true
    var 绿级白色结晶 = true
    var 绿级红色结晶 = true
    var 绿级绿色结晶 = true
    var 普通蓝色结晶 = true
    var 普通白色结晶 = true
    var 普通红色结晶 = true
    var 普通绿色结晶 = true

    var 绿级红色火花 = true
    var 绿级蓝色火花 = true
    var 普通红色火花 = true
    var 普通蓝色火花 = true
    //결정
    //불꽃  火花
    var 冰牙原石 = true
    var 冰霜宝石 = true
    var 书吏精华 = true
    var 书吏原石 = true
    var 书吏结晶 = true
    var 冰河精华 = true
    var 冰河宝石 = true
    //分解后
    var 识别结果 = {
        "type": "物价",
        "设备id": 设备id.toString()
    }
    while (true) {
        var imgMAX = captureScreen();
        if (传图异常捕获(imgMAX) == "掉线") {
            return "掉线"
        } else {//
            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "无日均记录|无日均记录2", 394, 345, 192, 61)
            if (cdjys != null) {
                log("拍卖行无此物品")
                if (白戟) {
                    白戟 = false
                    识别结果.白戟 = "9999"
                    log("白戟:无价")
                } else if (绿戟) {
                    绿戟 = false
                    识别结果.绿戟 = "9999"
                    log("绿戟:无价")
                } else if (黄戟) {
                    黄戟 = false
                    识别结果.黄戟 = "9999"
                    log("黄戟:无价")
                } else if (白甲) {
                    白甲 = false
                    识别结果.白甲 = "9999"
                    log("白甲:无价")
                } else if (绿甲) {
                    绿甲 = false
                    识别结果.绿甲 = "9999"
                    log("绿甲:无价")
                } else if (黄甲) {
                    黄甲 = false
                    识别结果.黄甲 = "9999"
                    log("黄甲:无价")
                }
                else if (绿级蓝色结晶) {
                    绿级蓝色结晶 = false
                    识别结果.绿级蓝色结晶 = "0"
                    log("绿级蓝色结晶:无价")
                } else if (绿级白色结晶) {
                    绿级白色结晶 = false
                    识别结果.绿级白色结晶 = "0"
                    log("绿级白色结晶:无价")
                } else if (绿级红色结晶) {
                    绿级红色结晶 = false
                    识别结果.绿级红色结晶 = "0"
                    log("绿级红色结晶:无价")
                } else if (绿级绿色结晶) {
                    绿级绿色结晶 = false
                    识别结果.绿级绿色结晶 = "0"
                    log("绿级绿色结晶:无价")
                } else if (普通蓝色结晶) {
                    普通蓝色结晶 = false
                    识别结果.普通蓝色结晶 = "0"
                    log("普通蓝色结晶:无价")
                } else if (普通白色结晶) {
                    普通白色结晶 = false
                    识别结果.普通白色结晶 = "0"
                    log("普通白色结晶:无价")
                } else if (普通红色结晶) {
                    普通红色结晶 = false
                    识别结果.普通红色结晶 = "0"
                    log("普通红色结晶:无价")
                } else if (普通绿色结晶) {
                    普通绿色结晶 = false
                    识别结果.普通绿色结晶 = "0"
                    log("普通绿色结晶:无价")
                } else if (绿级红色火花) {
                    绿级红色火花 = false
                    识别结果.绿级红色火花 = "0"
                    log("绿级红色火花:无价")
                } else if (绿级蓝色火花) {
                    绿级蓝色火花 = false
                    识别结果.绿级蓝色火花 = "0"
                    log("绿级蓝色火花:无价")
                } else if (普通红色火花) {
                    普通红色火花 = false
                    识别结果.普通红色火花 = "0"
                    log("普通红色火花:无价")
                } else if (普通蓝色火花) {
                    普通蓝色火花 = false
                    识别结果.普通蓝色火花 = "0"
                    log("普通蓝色火花:无价")
                } else if (冰牙原石) {
                    冰牙原石 = false
                    识别结果.冰牙原石 = "9999"
                    log("冰牙原石:无价")
                } else if (冰霜宝石) {
                    冰霜宝石 = false
                    识别结果.冰霜宝石 = "9999"
                    log("冰霜宝石:无价")
                } else if (书吏精华) {
                    书吏精华 = false
                    识别结果.书吏精华 = "9999"
                    log("书吏精华:无价")
                } else if (书吏原石) {
                    书吏原石 = false
                    识别结果.书吏原石 = "9999"
                    log("书吏原石:无价")
                } else if (书吏结晶) {
                    书吏结晶 = false
                    识别结果.书吏结晶 = "9999"
                    log("书吏结晶:无价")
                } else if (冰河精华) {
                    冰河精华 = false
                    识别结果.冰河精华 = "9999"
                    log("冰河精华:无价")
                } else if (冰河宝石) {
                    冰河宝石 = false
                    识别结果.冰河宝石 = "9999"
                    log("冰河宝石:无价")
                } else if (药材粉末) {
                    药材粉末 = false
                    识别结果.药材粉末 = "9999"
                    log("药材粉末:无价")
                } else if (新鲜水果) {
                    新鲜水果 = false
                    识别结果.新鲜水果 = "9999"
                    log("新鲜水果:无价")
                } else if (损坏的纸条) {
                    损坏的纸条 = false
                    识别结果.损坏的纸条 = "9999"
                    log("损坏的纸条:无价")
                } else if (毒蜘蛛液) {
                    毒蜘蛛液 = false
                    识别结果.毒蜘蛛液 = "9999"
                    log("毒蜘蛛液:无价")
                } else if (骷髅头) {
                    骷髅头 = false
                    识别结果.骷髅头 = "9999"
                    log("骷髅头:无价")
                } else if (钥匙) {
                    钥匙 = false
                    识别结果.钥匙 = "9999"
                    log("钥匙:无价")
                } else if (动物肩章) {
                    动物肩章 = false
                    识别结果.动物肩章 = "9999"
                    log("动物肩章:无价")
                } else if (动物的血) {
                    动物的血 = false
                    识别结果.动物的血 = "9999"
                    log("动物的血:无价")
                } else if (异教徒补给物资) {
                    异教徒补给物资 = false
                    识别结果.异教徒补给物资 = "9999"
                    log("异教徒补给物资:无价")
                } else if (链球) {
                    链球 = false
                    识别结果.链球 = "9999"
                    log("链球:无价")
                } else if (药草) {
                    药草 = false
                    识别结果.药草 = "9999"
                    log("药草:无价")
                } else if (狼头巾) {
                    狼头巾 = false
                    识别结果.狼头巾 = "9999"
                    log("狼头巾:无价")
                } else if (巫术杖) {
                    巫术杖 = false
                    识别结果.巫术杖 = "9999"
                    log("巫术杖:无价")
                } else if (水果酒) {
                    水果酒 = false
                    识别结果.水果酒 = "9999"
                    log("水果酒:无价")
                } else if (恶灵粉末) {
                    恶灵粉末 = false
                    识别结果.恶灵粉末 = "9999"
                    log("恶灵粉末:无价")
                }
                var 结果 = 退出回到搜索页()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "无交易记录(拍卖行详细)|无日均记录2", 380, 342, 209, 71)
                if (cdjys != null) {
                    log("拍卖行无此物品")
                    if (白戟) {
                        白戟 = false
                        识别结果.白戟 = "9999"
                        log("白戟:无价")
                    } else if (绿戟) {
                        绿戟 = false
                        识别结果.绿戟 = "9999"
                        log("绿戟:无价")
                    } else if (黄戟) {
                        黄戟 = false
                        识别结果.黄戟 = "9999"
                        log("黄戟:无价")
                    } else if (白甲) {
                        白甲 = false
                        识别结果.白甲 = "9999"
                        log("白甲:无价")
                    } else if (绿甲) {
                        绿甲 = false
                        识别结果.绿甲 = "9999"
                        log("绿甲:无价")
                    } else if (黄甲) {
                        黄甲 = false
                        识别结果.黄甲 = "9999"
                        log("黄甲:无价")
                    } else if (绿级蓝色结晶) {
                        绿级蓝色结晶 = false
                        识别结果.绿级蓝色结晶 = "0"
                        log("绿级蓝色结晶:无价")
                    } else if (绿级白色结晶) {
                        绿级白色结晶 = false
                        识别结果.绿级白色结晶 = "0"
                        log("绿级白色结晶:无价")
                    } else if (绿级红色结晶) {
                        绿级红色结晶 = false
                        识别结果.绿级红色结晶 = "0"
                        log("绿级红色结晶:无价")
                    } else if (绿级绿色结晶) {
                        绿级绿色结晶 = false
                        识别结果.绿级绿色结晶 = "0"
                        log("绿级绿色结晶:无价")
                    } else if (普通蓝色结晶) {
                        普通蓝色结晶 = false
                        识别结果.普通蓝色结晶 = "0"
                        log("普通蓝色结晶:无价")
                    } else if (普通白色结晶) {
                        普通白色结晶 = false
                        识别结果.普通白色结晶 = "0"
                        log("普通白色结晶:无价")
                    } else if (普通红色结晶) {
                        普通红色结晶 = false
                        识别结果.普通红色结晶 = "0"
                        log("普通红色结晶:无价")
                    } else if (普通绿色结晶) {
                        普通绿色结晶 = false
                        识别结果.普通绿色结晶 = "0"
                        log("普通绿色结晶:无价")
                    } else if (绿级红色火花) {
                        绿级红色火花 = false
                        识别结果.绿级红色火花 = "0"
                        log("绿级红色火花:无价")
                    } else if (绿级蓝色火花) {
                        绿级蓝色火花 = false
                        识别结果.绿级蓝色火花 = "0"
                        log("绿级蓝色火花:无价")
                    } else if (普通红色火花) {
                        普通红色火花 = false
                        识别结果.普通红色火花 = "0"
                        log("普通红色火花:无价")
                    } else if (普通蓝色火花) {
                        普通蓝色火花 = false
                        识别结果.普通蓝色火花 = "0"
                        log("普通蓝色火花:无价")
                    } else if (冰牙原石) {
                        冰牙原石 = false
                        识别结果.冰牙原石 = "9999"
                        log("冰牙原石:无价")
                    } else if (冰霜宝石) {
                        冰霜宝石 = false
                        识别结果.冰霜宝石 = "9999"
                        log("冰霜宝石:无价")
                    } else if (书吏精华) {
                        书吏精华 = false
                        识别结果.书吏精华 = "9999"
                        log("书吏精华:无价")
                    } else if (书吏原石) {
                        书吏原石 = false
                        识别结果.书吏原石 = "9999"
                        log("书吏原石:无价")
                    } else if (书吏结晶) {
                        书吏结晶 = false
                        识别结果.书吏结晶 = "9999"
                        log("书吏结晶:无价")
                    } else if (冰河精华) {
                        冰河精华 = false
                        识别结果.冰河精华 = "9999"
                        log("冰河精华:无价")
                    } else if (冰河宝石) {
                        冰河宝石 = false
                        识别结果.冰河宝石 = "9999"
                        log("冰河宝石:无价")
                    } else if (药材粉末) {
                        药材粉末 = false
                        识别结果.药材粉末 = "9999"
                        log("药材粉末:无价")
                    } else if (新鲜水果) {
                        新鲜水果 = false
                        识别结果.新鲜水果 = "9999"
                        log("新鲜水果:无价")
                    } else if (损坏的纸条) {
                        损坏的纸条 = false
                        识别结果.损坏的纸条 = "9999"
                        log("损坏的纸条:无价")
                    } else if (毒蜘蛛液) {
                        毒蜘蛛液 = false
                        识别结果.毒蜘蛛液 = "9999"
                        log("毒蜘蛛液:无价")
                    } else if (骷髅头) {
                        骷髅头 = false
                        识别结果.骷髅头 = "9999"
                        log("骷髅头:无价")
                    } else if (钥匙) {
                        钥匙 = false
                        识别结果.钥匙 = "9999"
                        log("钥匙:无价")
                    } else if (动物肩章) {
                        动物肩章 = false
                        识别结果.动物肩章 = "9999"
                        log("动物肩章:无价")
                    } else if (动物的血) {
                        动物的血 = false
                        识别结果.动物的血 = "9999"
                        log("动物的血:无价")
                    } else if (异教徒补给物资) {
                        异教徒补给物资 = false
                        识别结果.异教徒补给物资 = "9999"
                        log("异教徒补给物资:无价")
                    } else if (链球) {
                        链球 = false
                        识别结果.链球 = "9999"
                        log("链球:无价")
                    } else if (药草) {
                        药草 = false
                        识别结果.药草 = "9999"
                        log("药草:无价")
                    } else if (狼头巾) {
                        狼头巾 = false
                        识别结果.狼头巾 = "9999"
                        log("狼头巾:无价")
                    } else if (巫术杖) {
                        巫术杖 = false
                        识别结果.巫术杖 = "9999"
                        log("巫术杖:无价")
                    } else if (水果酒) {
                        水果酒 = false
                        识别结果.水果酒 = "9999"
                        log("水果酒:无价")
                    } else if (恶灵粉末) {
                        恶灵粉末 = false
                        识别结果.恶灵粉末 = "9999"
                        log("恶灵粉末:无价")
                    }
                    var 结果 = 退出回到搜索页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "白甲价格详细|白甲价格详细2", 683, 166, 279, 69)
                    if (cdjys != null) {
                        log("白甲价格详细")
                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                        if (单价 != "false") {
                            白甲 = false
                            识别结果.白甲 = 单价.toString()
                            log("白甲:" + 单价.toString())
                            var 结果 = 退出回到搜索页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            log("没找到白甲价格")
                        }

                    } else {
                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿甲价格详细|绿甲价格详细2", 683, 166, 279, 69)
                        if (cdjys != null) {
                            log("绿甲价格详细")

                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                            if (单价 != "false") {
                                绿甲 = false
                                识别结果.绿甲 = 单价.toString()
                                log("绿甲:" + 单价.toString())
                                var 结果 = 退出回到搜索页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else {
                                log("没找到绿甲价格")
                            }
                        } else {
                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "黄甲价格详细|黄甲价格详细2", 683, 166, 279, 69)
                            if (cdjys != null) {
                                log("黄甲价格详细")

                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                if (单价 != "false") {
                                    黄甲 = false
                                    识别结果.黄甲 = 单价.toString()
                                    log("黄甲:" + 单价.toString())
                                    var 结果 = 退出回到搜索页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else {
                                    log("没找到黄甲价格")
                                }
                            } else {
                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "白戟价格详细|白戟价格详细2", 683, 166, 279, 69)
                                if (cdjys != null) {
                                    log("白戟价格详细")
                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                    if (单价 != "false") {
                                        白戟 = false
                                        识别结果.白戟 = 单价.toString()
                                        log("白戟:" + 单价.toString())
                                        var 结果 = 退出回到搜索页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    } else {
                                        log("没找到白戟价格")
                                    }
                                } else {
                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿戟价格详细|绿戟价格详细2", 683, 166, 279, 69)
                                    if (cdjys != null) {
                                        log("绿戟价格详细")
                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                        if (单价 != "false") {
                                            绿戟 = false
                                            识别结果.绿戟 = 单价.toString()
                                            log("绿戟:" + 单价.toString())
                                            var 结果 = 退出回到搜索页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            log("没找到绿戟价格")
                                        }
                                    } else {
                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "黄戟价格详细|黄戟价格详细2", 683, 166, 279, 69)
                                        if (cdjys != null) {
                                            log("黄戟价格详细")

                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                            if (单价 != "false") {
                                                黄戟 = false
                                                识别结果.黄戟 = 单价.toString()
                                                log("黄戟:" + 单价.toString())
                                                var 结果 = 退出回到搜索页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                            } else {
                                                log("没找到黄戟价格")
                                            }
                                        } else {
                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "药材粉末价格详细|药材粉末价格详细2", 683, 166, 279, 69)
                                            if (cdjys != null) {
                                                log("药材粉末价格详细")

                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                if (单价 != "false") {
                                                    药材粉末 = false
                                                    识别结果.药材粉末 = 单价.toString()
                                                    log("药材粉末:" + 单价.toString())
                                                    var 结果 = 退出回到搜索页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    }
                                                } else {
                                                    log("没找到药材粉末价格")
                                                }
                                            } else {
                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "新鲜水果价格详细|新鲜水果价格详细2", 683, 166, 279, 69)
                                                if (cdjys != null) {
                                                    log("新鲜水果价格详细")

                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                    if (单价 != "false") {
                                                        新鲜水果 = false
                                                        识别结果.新鲜水果 = 单价.toString()
                                                        log("新鲜水果:" + 单价.toString())
                                                        var 结果 = 退出回到搜索页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        }
                                                    } else {
                                                        log("没找到新鲜水果价格")//
                                                    }
                                                } else {
                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "损坏的纸条价格详细|损坏的纸条价格详细2", 683, 166, 279, 69)
                                                    if (cdjys != null) {
                                                        log("损坏的纸条价格详细")

                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                        if (单价 != "false") {
                                                            损坏的纸条 = false
                                                            识别结果.损坏的纸条 = 单价.toString()
                                                            log("损坏的纸条:" + 单价.toString())
                                                            var 结果 = 退出回到搜索页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                        } else {
                                                            log("没找到损坏的纸条价格")//
                                                        }
                                                    } else {//
                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "毒蜘蛛液体价格详细|毒蜘蛛液体价格详细2", 683, 166, 279, 69)
                                                        if (cdjys != null) {
                                                            log("毒蜘蛛液体价格详细")

                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                            if (单价 != "false") {
                                                                毒蜘蛛液 = false
                                                                识别结果.毒蜘蛛液 = 单价.toString()
                                                                log("毒蜘蛛液:" + 单价.toString())
                                                                var 结果 = 退出回到搜索页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                }
                                                            } else {
                                                                log("没找到毒蜘蛛液价格")//
                                                            }
                                                        } else {//
                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "骷髅头价格详细|骷髅头价格详细2", 683, 166, 279, 69)
                                                            if (cdjys != null) {
                                                                log("骷髅头价格详细")
                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                if (单价 != "false") {
                                                                    骷髅头 = false
                                                                    识别结果.骷髅头 = 单价.toString()
                                                                    log("骷髅头:" + 单价.toString())
                                                                    var 结果 = 退出回到搜索页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    }
                                                                } else {
                                                                    log("没找到骷髅头价格")//
                                                                }
                                                            } else {//
                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "钥匙价格详细|钥匙价格详细2", 683, 166, 279, 69)
                                                                if (cdjys != null) {
                                                                    log("钥匙详细")

                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                    if (单价 != "false") {
                                                                        钥匙 = false
                                                                        识别结果.钥匙 = 单价.toString()
                                                                        log("钥匙:" + 单价.toString())
                                                                        var 结果 = 退出回到搜索页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        }
                                                                    } else {
                                                                        log("没找到钥匙价格")//
                                                                    }
                                                                } else {//
                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "动物的肩章价格详细|动物的肩章价格详细2", 683, 166, 279, 69)
                                                                    if (cdjys != null) {
                                                                        log("动物的肩章详细")

                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                        if (单价 != "false") {
                                                                            动物肩章 = false
                                                                            识别结果.动物肩章 = 单价.toString()
                                                                            log("动物肩章:" + 单价.toString())
                                                                            var 结果 = 退出回到搜索页()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                        } else {
                                                                            log("没找到动物肩章价格")//
                                                                        }
                                                                    } else {
                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "动物的血价格详细|动物的血价格详细2", 683, 166, 279, 69)
                                                                        if (cdjys != null) {
                                                                            log("动物的血详细")

                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                            if (单价 != "false") {
                                                                                动物的血 = false
                                                                                识别结果.动物的血 = 单价.toString()
                                                                                log("动物的血:" + 单价.toString())
                                                                                var 结果 = 退出回到搜索页()
                                                                                if (结果 == "掉线") {
                                                                                    return "掉线"
                                                                                }
                                                                            } else {
                                                                                log("没找到动物的血价格")//
                                                                            }
                                                                        } else {//
                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "异教徒补给物资价格详细|异教徒补给物资价格详细2", 683, 166, 279, 69)
                                                                            if (cdjys != null) {
                                                                                log("异教徒补给物资详细")

                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                if (单价 != "false") {
                                                                                    异教徒补给物资 = false
                                                                                    识别结果.异教徒补给物资 = 单价.toString()
                                                                                    log("异教徒补给物资:" + 单价.toString())
                                                                                    var 结果 = 退出回到搜索页()
                                                                                    if (结果 == "掉线") {
                                                                                        return "掉线"
                                                                                    }
                                                                                } else {
                                                                                    log("没找到异教徒补给物资价格")//
                                                                                }
                                                                            } else {//
                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "链球价格详细|链球价格详细2", 683, 166, 279, 69)//为截图
                                                                                if (cdjys != null) {
                                                                                    log("链球详细")

                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                    if (单价 != "false") {
                                                                                        链球 = false
                                                                                        识别结果.链球 = 单价.toString()
                                                                                        log("链球:" + 单价.toString())
                                                                                        var 结果 = 退出回到搜索页()
                                                                                        if (结果 == "掉线") {
                                                                                            return "掉线"
                                                                                        }
                                                                                    } else {
                                                                                        log("没找到链球价格")//
                                                                                    }
                                                                                } else {//
                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "药草价格详细|药草价格详细2", 683, 166, 279, 69)
                                                                                    if (cdjys != null) {
                                                                                        log("药草详细")

                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                        if (单价 != "false") {
                                                                                            药草 = false
                                                                                            识别结果.药草 = 单价.toString()
                                                                                            log("药草:" + 单价.toString())
                                                                                            var 结果 = 退出回到搜索页()
                                                                                            if (结果 == "掉线") {
                                                                                                return "掉线"
                                                                                            }
                                                                                        } else {
                                                                                            log("没找到药草价格")//
                                                                                        }
                                                                                    } else {//
                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "狼头巾价格详细|狼头巾价格详细2", 683, 166, 279, 69)
                                                                                        if (cdjys != null) {
                                                                                            log("狼头巾详细")

                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                            if (单价 != "false") {
                                                                                                狼头巾 = false
                                                                                                识别结果.狼头巾 = 单价.toString()
                                                                                                log("狼头巾:" + 单价.toString())
                                                                                                var 结果 = 退出回到搜索页()
                                                                                                if (结果 == "掉线") {
                                                                                                    return "掉线"
                                                                                                }
                                                                                            } else {
                                                                                                log("没找到狼头巾价格")//
                                                                                            }
                                                                                        } else {//
                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "巫术仗价格详细|巫术仗价格详细2", 683, 166, 279, 69)
                                                                                            if (cdjys != null) {
                                                                                                log("巫术仗详细")

                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                if (单价 != "false") {
                                                                                                    巫术杖 = false
                                                                                                    识别结果.巫术杖 = 单价.toString()
                                                                                                    log("巫术杖:" + 单价.toString())
                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                    if (结果 == "掉线") {
                                                                                                        return "掉线"
                                                                                                    }
                                                                                                } else {
                                                                                                    log("没找到巫术杖价格")//
                                                                                                }
                                                                                            } else {//
                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "水果酒价格详细|水果酒价格详细2", 683, 166, 279, 69)
                                                                                                if (cdjys != null) {
                                                                                                    log("水果酒详细")

                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                    if (单价 != "false") {
                                                                                                        水果酒 = false
                                                                                                        识别结果.水果酒 = 单价.toString()
                                                                                                        log("水果酒:" + 单价.toString())
                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                        if (结果 == "掉线") {
                                                                                                            return "掉线"
                                                                                                        }
                                                                                                    } else {
                                                                                                        log("没找到水果酒价格")//
                                                                                                    }
                                                                                                } else {
                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级蓝色结晶价格详细|绿级蓝色结晶价格详细2", 683, 166, 279, 69)
                                                                                                    if (cdjys != null) {
                                                                                                        log("绿级蓝色结晶价格详细")
                                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                        if (单价 != "false") {
                                                                                                            绿级蓝色结晶 = false
                                                                                                            识别结果.绿级蓝色结晶 = 单价.toString()
                                                                                                            log("绿级蓝色结晶:" + 单价.toString())
                                                                                                            var 结果 = 退出回到搜索页()
                                                                                                            if (结果 == "掉线") {
                                                                                                                return "掉线"
                                                                                                            }
                                                                                                        } else {
                                                                                                            log("没找到绿级蓝色结晶价格")//
                                                                                                        }
                                                                                                    } else {
                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级白色结晶价格详细|绿级白色结晶价格详细2", 683, 166, 279, 69)
                                                                                                        if (cdjys != null) {
                                                                                                            log("绿级白色结晶价格详细")
                                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                            if (单价 != "false") {
                                                                                                                绿级白色结晶 = false
                                                                                                                识别结果.绿级白色结晶 = 单价.toString()
                                                                                                                log("绿级白色结晶:" + 单价.toString())
                                                                                                                var 结果 = 退出回到搜索页()
                                                                                                                if (结果 == "掉线") {
                                                                                                                    return "掉线"
                                                                                                                }
                                                                                                            } else {
                                                                                                                log("没找到绿级白色结晶价格")//
                                                                                                            }
                                                                                                        } else {
                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级红色结晶价格详细|绿级红色结晶价格详细2", 683, 166, 279, 69)
                                                                                                            if (cdjys != null) {
                                                                                                                log("绿级红色结晶价格详细")

                                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                if (单价 != "false") {
                                                                                                                    绿级红色结晶 = false
                                                                                                                    识别结果.绿级红色结晶 = 单价.toString()
                                                                                                                    log("绿级红色结晶:" + 单价.toString())
                                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                                    if (结果 == "掉线") {
                                                                                                                        return "掉线"
                                                                                                                    }
                                                                                                                } else {
                                                                                                                    log("没找到绿级红色结晶价格")//
                                                                                                                }
                                                                                                            } else {
                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级绿色结晶价格详细|绿级绿色结晶价格详细2", 683, 166, 279, 69)
                                                                                                                if (cdjys != null) {
                                                                                                                    log("绿级绿色结晶价格详细")

                                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                    if (单价 != "false") {
                                                                                                                        绿级绿色结晶 = false
                                                                                                                        识别结果.绿级绿色结晶 = 单价.toString()
                                                                                                                        log("绿级绿色结晶:" + 单价.toString())
                                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                                        if (结果 == "掉线") {
                                                                                                                            return "掉线"
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        log("没找到绿级绿色结晶价格")//
                                                                                                                    }
                                                                                                                } else {
                                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通蓝色结晶价格详细|普通蓝色结晶价格详细2", 683, 166, 279, 69)
                                                                                                                    if (cdjys != null) {
                                                                                                                        log("普通蓝色结晶价格详细")
                                                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                        if (单价 != "false") {
                                                                                                                            普通蓝色结晶 = false
                                                                                                                            识别结果.普通蓝色结晶 = 单价.toString()
                                                                                                                            log("普通蓝色结晶:" + 单价.toString())
                                                                                                                            var 结果 = 退出回到搜索页()
                                                                                                                            if (结果 == "掉线") {
                                                                                                                                return "掉线"
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            log("没找到普通蓝色结晶价格")//
                                                                                                                        }
                                                                                                                    } else {
                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通白色结晶价格详细|普通白色结晶价格详细2", 683, 166, 279, 69)
                                                                                                                        if (cdjys != null) {
                                                                                                                            log("普通白色结晶价格详细")

                                                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                            if (单价 != "false") {
                                                                                                                                普通白色结晶 = false
                                                                                                                                识别结果.普通白色结晶 = 单价.toString()
                                                                                                                                log("普通白色结晶:" + 单价.toString())
                                                                                                                                var 结果 = 退出回到搜索页()
                                                                                                                                if (结果 == "掉线") {
                                                                                                                                    return "掉线"
                                                                                                                                }
                                                                                                                            } else {
                                                                                                                                log("没找到普通白色结晶价格")//
                                                                                                                            }
                                                                                                                        } else {
                                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通红色结晶价格详细|普通红色结晶价格详细2", 683, 166, 279, 69)
                                                                                                                            if (cdjys != null) {
                                                                                                                                log("普通红色结晶价格详细")

                                                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                if (单价 != "false") {
                                                                                                                                    普通红色结晶 = false
                                                                                                                                    识别结果.普通红色结晶 = 单价.toString()
                                                                                                                                    log("普通红色结晶:" + 单价.toString())
                                                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                        return "掉线"
                                                                                                                                    }
                                                                                                                                } else {
                                                                                                                                    log("没找到普通红色结晶价格")//
                                                                                                                                }
                                                                                                                            } else {
                                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通绿色结晶价格详细|普通绿色结晶价格详细2", 683, 166, 279, 69)
                                                                                                                                if (cdjys != null) {
                                                                                                                                    log("普通绿色结晶价格详细")

                                                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                    if (单价 != "false") {
                                                                                                                                        普通绿色结晶 = false
                                                                                                                                        识别结果.普通绿色结晶 = 单价.toString()
                                                                                                                                        log("普通绿色结晶:" + 单价.toString())
                                                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                                                        if (结果 == "掉线") {
                                                                                                                                            return "掉线"
                                                                                                                                        }
                                                                                                                                    } else {
                                                                                                                                        log("没找到普通绿色结晶价格")//
                                                                                                                                    }
                                                                                                                                } else {
                                                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级红色火花价格详细|绿级红色火花价格详细2", 683, 166, 279, 69)
                                                                                                                                    if (cdjys != null) {
                                                                                                                                        log("绿级红色火花价格详细")

                                                                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                        if (单价 != "false") {
                                                                                                                                            绿级红色火花 = false
                                                                                                                                            识别结果.绿级红色火花 = 单价.toString()
                                                                                                                                            log("绿级红色火花:" + 单价.toString())
                                                                                                                                            var 结果 = 退出回到搜索页()
                                                                                                                                            if (结果 == "掉线") {
                                                                                                                                                return "掉线"
                                                                                                                                            }
                                                                                                                                        } else {
                                                                                                                                            log("没找到绿级红色火花价格")//
                                                                                                                                        }
                                                                                                                                    } else {
                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级蓝色火花价格详细|绿级蓝色火花价格详细2", 683, 166, 279, 69)
                                                                                                                                        if (cdjys != null) {
                                                                                                                                            log("绿级蓝色火花价格详细")

                                                                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                            if (单价 != "false") {
                                                                                                                                                绿级蓝色火花 = false
                                                                                                                                                识别结果.绿级蓝色火花 = 单价.toString()
                                                                                                                                                log("绿级蓝色火花:" + 单价.toString())
                                                                                                                                                var 结果 = 退出回到搜索页()
                                                                                                                                                if (结果 == "掉线") {
                                                                                                                                                    return "掉线"
                                                                                                                                                }
                                                                                                                                            } else {
                                                                                                                                                log("没找到绿级蓝色火花价格")//
                                                                                                                                            }
                                                                                                                                        } else {
                                                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通红色火花价格详细|普通红色火花价格详细2", 683, 166, 279, 69)
                                                                                                                                            if (cdjys != null) {
                                                                                                                                                log("普通红色火花价格详细")

                                                                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                if (单价 != "false") {
                                                                                                                                                    普通红色火花 = false
                                                                                                                                                    识别结果.普通红色火花 = 单价.toString()
                                                                                                                                                    log("普通红色火花:" + 单价.toString())
                                                                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                                        return "掉线"
                                                                                                                                                    }
                                                                                                                                                } else {
                                                                                                                                                    log("没找到普通红色火花价格")//
                                                                                                                                                }
                                                                                                                                            } else {
                                                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通蓝色火花价格详细|普通蓝色火花价格详细2", 683, 166, 279, 69)
                                                                                                                                                if (cdjys != null) {
                                                                                                                                                    log("普通蓝色火花价格详细")

                                                                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                    if (单价 != "false") {
                                                                                                                                                        普通蓝色火花 = false
                                                                                                                                                        识别结果.普通蓝色火花 = 单价.toString()
                                                                                                                                                        log("普通蓝色火花:" + 单价.toString())
                                                                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                                                                        if (结果 == "掉线") {
                                                                                                                                                            return "掉线"
                                                                                                                                                        }
                                                                                                                                                    } else {
                                                                                                                                                        log("没找到普通蓝色火花价格")//
                                                                                                                                                    }
                                                                                                                                                } else {
                                                                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰牙原石价格详细|冰牙原石价格详细2", 683, 166, 279, 69)
                                                                                                                                                    if (cdjys != null) {
                                                                                                                                                        log("冰牙原石价格详细")

                                                                                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                        if (单价 != "false") {
                                                                                                                                                            冰牙原石 = false
                                                                                                                                                            识别结果.冰牙原石 = 单价.toString()
                                                                                                                                                            log("冰牙原石:" + 单价.toString())
                                                                                                                                                            var 结果 = 退出回到搜索页()
                                                                                                                                                            if (结果 == "掉线") {
                                                                                                                                                                return "掉线"
                                                                                                                                                            }
                                                                                                                                                        } else {
                                                                                                                                                            log("没找到冰牙原石价格")//
                                                                                                                                                        }
                                                                                                                                                    } else {
                                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰霜宝石价格详细|冰霜宝石价格详细2", 683, 166, 279, 69)
                                                                                                                                                        if (cdjys != null) {
                                                                                                                                                            log("冰霜宝石价格详细")

                                                                                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                            if (单价 != "false") {
                                                                                                                                                                冰霜宝石 = false
                                                                                                                                                                识别结果.冰霜宝石 = 单价.toString()
                                                                                                                                                                log("冰霜宝石:" + 单价.toString())
                                                                                                                                                                var 结果 = 退出回到搜索页()
                                                                                                                                                                if (结果 == "掉线") {
                                                                                                                                                                    return "掉线"
                                                                                                                                                                }
                                                                                                                                                            } else {
                                                                                                                                                                log("没找到冰霜宝石价格")//
                                                                                                                                                            }
                                                                                                                                                        } else {
                                                                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏精华价格详细|书吏精华价格详细2", 683, 166, 279, 69)
                                                                                                                                                            if (cdjys != null) {
                                                                                                                                                                log("普通书吏精华价格详细")

                                                                                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                if (单价 != "false") {
                                                                                                                                                                    书吏精华 = false
                                                                                                                                                                    识别结果.书吏精华 = 单价.toString()
                                                                                                                                                                    log("书吏精华:" + 单价.toString())
                                                                                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                                                        return "掉线"
                                                                                                                                                                    }
                                                                                                                                                                } else {
                                                                                                                                                                    log("没找到书吏精华价格")//
                                                                                                                                                                }
                                                                                                                                                            } else {
                                                                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏原石价格详细|书吏原石价格详细2", 683, 166, 279, 69)
                                                                                                                                                                if (cdjys != null) {
                                                                                                                                                                    log("书吏原石价格详细")

                                                                                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                    if (单价 != "false") {
                                                                                                                                                                        书吏原石 = false
                                                                                                                                                                        识别结果.书吏原石 = 单价.toString()
                                                                                                                                                                        log("书吏原石:" + 单价.toString())
                                                                                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                                                                                        if (结果 == "掉线") {
                                                                                                                                                                            return "掉线"
                                                                                                                                                                        }
                                                                                                                                                                    } else {
                                                                                                                                                                        log("没找到书吏原石价格")//
                                                                                                                                                                    }
                                                                                                                                                                } else {
                                                                                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏结晶价格详细|书吏结晶价格详细2", 683, 166, 279, 69)
                                                                                                                                                                    if (cdjys != null) {
                                                                                                                                                                        log("书吏结晶价格详细")

                                                                                                                                                                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                        if (单价 != "false") {
                                                                                                                                                                            书吏结晶 = false
                                                                                                                                                                            识别结果.书吏结晶 = 单价.toString()
                                                                                                                                                                            log("书吏结晶:" + 单价.toString())
                                                                                                                                                                            var 结果 = 退出回到搜索页()
                                                                                                                                                                            if (结果 == "掉线") {
                                                                                                                                                                                return "掉线"
                                                                                                                                                                            }
                                                                                                                                                                        } else {
                                                                                                                                                                            log("没找到书吏结晶价格")//
                                                                                                                                                                        }
                                                                                                                                                                    } else {
                                                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰河精华价格详细|冰河精华价格详细2", 683, 166, 279, 69)
                                                                                                                                                                        if (cdjys != null) {
                                                                                                                                                                            log("冰河精华价格详细")

                                                                                                                                                                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                            if (单价 != "false") {
                                                                                                                                                                                冰河精华 = false
                                                                                                                                                                                识别结果.冰河精华 = 单价.toString()
                                                                                                                                                                                log("冰河精华:" + 单价.toString())
                                                                                                                                                                                var 结果 = 退出回到搜索页()
                                                                                                                                                                                if (结果 == "掉线") {
                                                                                                                                                                                    return "掉线"
                                                                                                                                                                                }
                                                                                                                                                                            } else {
                                                                                                                                                                                log("没找到冰河精华价格")//
                                                                                                                                                                            }
                                                                                                                                                                        } else {
                                                                                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "恶灵粉末价格详细|恶灵粉末价格详细2", 683, 166, 279, 69)
                                                                                                                                                                            if (cdjys != null) {
                                                                                                                                                                                log("恶灵粉末价格详细")

                                                                                                                                                                                var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                                if (单价 != "false") {
                                                                                                                                                                                    恶灵粉末 = false
                                                                                                                                                                                    识别结果.恶灵粉末 = 单价.toString()
                                                                                                                                                                                    log("恶灵粉末:" + 单价.toString())
                                                                                                                                                                                    var 结果 = 退出回到搜索页()
                                                                                                                                                                                    if (结果 == "掉线") {
                                                                                                                                                                                        return "掉线"
                                                                                                                                                                                    }
                                                                                                                                                                                } else {
                                                                                                                                                                                    log("没找到恶灵粉末价格")//
                                                                                                                                                                                }
                                                                                                                                                                            } else {
                                                                                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰河宝石价格详细|冰河宝石价格详细2", 683, 166, 279, 69)
                                                                                                                                                                                if (cdjys != null) {
                                                                                                                                                                                    log("冰河宝石价格详细")
                                                                                                                                                                                    var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 388, 351, 191, 44);
                                                                                                                                                                                    if (单价 != "false") {
                                                                                                                                                                                        冰河宝石 = false
                                                                                                                                                                                        识别结果.冰河宝石 = 单价.toString()
                                                                                                                                                                                        log("冰河宝石:" + 单价.toString())
                                                                                                                                                                                        var 结果 = 退出回到搜索页()
                                                                                                                                                                                        if (结果 == "掉线") {
                                                                                                                                                                                            return "掉线"
                                                                                                                                                                                        }
                                                                                                                                                                                    } else {
                                                                                                                                                                                        log("没找到冰河宝石价格")//
                                                                                                                                                                                    }
                                                                                                                                                                                } else {
                                                                                                                                                                                    var jdmsz = NoScreenshotsImgempt(imgMAX, true, 0.9, "药材粉末详细2|新鲜水果详细2|损坏的纸条详细2|毒蜘蛛液体详细2|骷髅头详细2|钥匙详细2|动物的肩章详细2|动物的血详细2|异教徒补给物资详细2|链球详细2|药草详细2|狼头巾详细2|巫术仗详细2|水果酒详细2|恶灵粉末详细2|冰牙原石详细2|冰霜宝石详细2|书吏精华详细2|书吏原石详细2|书吏结晶详细2|冰河精华详细2|冰河宝石详细2|绿级红色火花详细2|绿级蓝色火花详细2|普通红色火花详细2|普通蓝色火花详细2|绿级蓝色结晶详细2|绿级白色结晶详细2|绿级红色结晶详细2|绿级绿色结晶详细2|普通蓝色结晶详细2|普通白色结晶详细2|普通红色结晶详细2|普通绿色结晶详细2|白甲详细字|绿甲详细字|黄甲详细字|白甲详细字2|绿甲详细字2|黄甲详细字2|白戟详细|白戟详细2|绿戟详细2|黄戟详细2|绿戟详细|黄戟详细|药材粉末详细|新鲜水果详细|损坏的纸条详细|毒蜘蛛液体详细|骷髅头详细|钥匙详细|动物的肩章详细|动物的血详细|异教徒补给物资详细|链球详细|药草详细|狼头巾详细|巫术仗详细|水果酒详细|绿级蓝色结晶详细|绿级白色结晶详细|绿级红色结晶详细|绿级绿色结晶详细|普通蓝色结晶详细|普通白色结晶详细|普通红色结晶详细|普通绿色结晶详细|绿级蓝色结晶详细2|绿级白色结晶详细2|绿级红色结晶详细2|绿级绿色结晶详细2|普通蓝色结晶详细2|普通白色结晶详细2|普通红色结晶详细2|普通绿色结晶详细2|绿级红色火花详细|绿级蓝色火花详细|普通红色火花详细|普通蓝色火花详细|冰牙原石详细|冰霜宝石详细|书吏精华详细|书吏原石详细|书吏结晶详细|冰河精华详细|恶灵粉末详细|冰河宝石详细", 298, 189, 393, 82)//
                                                                                                                                                                                    if (jdmsz != null) {
                                                                                                                                                                                        log("点进材料查看详细")
                                                                                                                                                                                        随机点击2(jdmsz.x + 40, jdmsz.y, 10, 10)
                                                                                                                                                                                    } else {
                                                                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索戟字|搜索戟字2", 36, 60, 150, 81)
                                                                                                                                                                                        if (cdjys != null) {
                                                                                                                                                                                            if (白戟) {
                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "白戟搜索字|白戟搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                    log("点击搜索白戟")
                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                } else {
                                                                                                                                                                                                    log("未找到白戟")
                                                                                                                                                                                                }
                                                                                                                                                                                            } else if (绿戟) {
                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿戟搜索字|绿戟搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                    log("点击搜索绿戟")
                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                } else {
                                                                                                                                                                                                    log("未找到绿戟")
                                                                                                                                                                                                }
                                                                                                                                                                                            } else if (黄戟) {
                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "黄戟搜索字|黄戟搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                    log("点击搜索黄戟")
                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                } else {
                                                                                                                                                                                                    log("未找到黄戟")
                                                                                                                                                                                                }
                                                                                                                                                                                            } else {
                                                                                                                                                                                                随机点击(cdjys.x, cdjys.y, 10, 10)
                                                                                                                                                                                                if (白甲 || 绿甲 || 黄甲) {
                                                                                                                                                                                                    setText("사슬 갑옷")
                                                                                                                                                                                                    sleep(1000)
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        } else {
                                                                                                                                                                                            var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索甲字|搜索甲字2", 36, 55, 196, 78)
                                                                                                                                                                                            if (cdjys != null) {
                                                                                                                                                                                                if (白甲) {
                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "白甲搜索字|白甲搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                        log("点击搜索白甲")
                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                    } else {
                                                                                                                                                                                                        log("未找到白甲")
                                                                                                                                                                                                    }
                                                                                                                                                                                                } else if (绿甲) {
                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿甲搜索字|绿甲搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                        log("点击搜索绿甲")
                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                    } else {
                                                                                                                                                                                                        log("未找到绿甲")
                                                                                                                                                                                                    }
                                                                                                                                                                                                } else if (黄甲) {
                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "黄甲搜索字|黄甲搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                        log("点击搜索黄甲")
                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                    } else {
                                                                                                                                                                                                        log("未找到黄甲")
                                                                                                                                                                                                    }
                                                                                                                                                                                                } else {
                                                                                                                                                                                                    随机点击(cdjys.x, cdjys.y, 10, 10)
                                                                                                                                                                                                    if (绿级蓝色结晶 || 绿级白色结晶 || 绿级红色结晶 || 绿级绿色结晶 || 普通蓝色结晶 || 普通白色结晶 || 普通红色结晶 || 普通绿色结晶) {
                                                                                                                                                                                                        setText("결정")//输入结晶
                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            } else {
                                                                                                                                                                                                var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索结晶|搜索结晶2", 36, 55, 196, 78)//결정
                                                                                                                                                                                                if (cdjys != null) {
                                                                                                                                                                                                    if (绿级蓝色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级蓝色结晶搜索字|绿级蓝色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索绿级蓝色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到绿级蓝色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (绿级白色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级白色结晶搜索字|绿级白色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索绿级白色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到绿级白色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (绿级红色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级红色结晶搜索字|绿级红色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索绿级红色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到绿级红色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (绿级绿色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级绿色结晶搜索字|绿级绿色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索绿级绿色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到绿级绿色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (普通蓝色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通蓝色结晶搜索字|普通蓝色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索普通蓝色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到普通蓝色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (普通白色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通白色结晶搜索字|普通白色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索普通白色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到普通白色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (普通红色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通红色结晶搜索字|普通红色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索普通红色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到普通红色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else if (普通绿色结晶) {
                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通绿色结晶搜索字|普通绿色结晶搜索字2", 15, 124, 1253, 586)
                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                            log("点击搜索普通绿色结晶")
                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            log("未找到普通绿色结晶")
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else {
                                                                                                                                                                                                        随机点击(cdjys.x + 40, cdjys.y, 10, 10)
                                                                                                                                                                                                        if (绿级红色火花 || 绿级蓝色火花 || 普通红色火花 || 普通蓝色火花) {
                                                                                                                                                                                                            setText("불꽃")//搜索火花
                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                } else {
                                                                                                                                                                                                    var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索火花|搜索火花2", 36, 55, 196, 78)//결정
                                                                                                                                                                                                    if (cdjys != null) {
                                                                                                                                                                                                        if (绿级红色火花) {
                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级红色火花搜索字|绿级红色火花搜索字2", 24, 116, 1241, 294)
                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                log("点击搜索绿级红色火花")
                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                log("未找到绿级红色火花")
                                                                                                                                                                                                            }
                                                                                                                                                                                                        } else if (绿级蓝色火花) {
                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "绿级蓝色火花搜索字|绿级蓝色火花搜索字2", 24, 116, 1241, 294)
                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                log("点击搜索绿级蓝色火花")
                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                log("未找到绿级蓝色火花")
                                                                                                                                                                                                            }
                                                                                                                                                                                                        } else if (普通红色火花) {
                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通红色火花搜索字|普通红色火花搜索字2", 24, 116, 1241, 294)
                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                log("点击搜索普通红色火花")
                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                log("未找到普通红色火花")
                                                                                                                                                                                                            }
                                                                                                                                                                                                        } else if (普通蓝色火花) {
                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "普通蓝色火花搜索字|普通蓝色火花搜索字2", 24, 116, 1241, 294)
                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                log("点击搜索普通蓝色火花")
                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                log("未找到普通蓝色火花")
                                                                                                                                                                                                            }
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            随机点击(cdjys.x + 40, cdjys.y, 10, 10)
                                                                                                                                                                                                            if (冰牙原石 || 冰霜宝石 || 书吏精华 || 书吏原石 || 书吏结晶 || 冰河精华 || 冰河宝石) {
                                                                                                                                                                                                                setText("반짝이는")//搜索闪亮的
                                                                                                                                                                                                                sleep(1000)
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    } else {
                                                                                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "搜索闪亮的|搜索闪亮的2", 36, 55, 196, 78)
                                                                                                                                                                                                        if (cdjys != null) {
                                                                                                                                                                                                            if (冰牙原石) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰牙原石搜索字|冰牙原石搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索冰牙原石")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到冰牙原石")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (冰霜宝石) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰霜宝石搜索字|冰霜宝石搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索冰霜宝石")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到冰霜宝石")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (书吏精华) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏精华搜索字|书吏精华搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索书吏精华")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到书吏精华")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (书吏原石) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏原石搜索字|书吏原石搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索书吏原石")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到书吏原石")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (书吏结晶) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "书吏结晶搜索字|书吏结晶搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索书吏结晶")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到书吏结晶")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (冰河精华) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰河精华搜索字|冰河精华搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索冰河精华")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到冰河精华")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else if (冰河宝石) {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "冰河宝石搜索字|冰河宝石搜索字2", 17, 119, 1248, 581)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    log("点击搜索冰河宝石")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    log("未找到冰河宝石")
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                随机点击(cdjys.x + 40, cdjys.y, 10, 10)
                                                                                                                                                                                                                if (药材粉末) {
                                                                                                                                                                                                                    setText("약재 가루")
                                                                                                                                                                                                                    sleep(1000)
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        } else {
                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "药材粉末搜索字|药材粉末搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                if (药材粉末) {
                                                                                                                                                                                                                    log("点击药材粉末")
                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    if (新鲜水果) {
                                                                                                                                                                                                                        随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                        setText("싱싱한 과일")//输入水果
                                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "水果搜索字|新鲜水果搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                    if (新鲜水果) {
                                                                                                                                                                                                                        log("点击水果")
                                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                        if (损坏的纸条) {
                                                                                                                                                                                                                            随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                            setText("훼손된 쪽지")////输入纸条
                                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "损坏的纸条搜索字|损坏的纸条搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                                        if (损坏的纸条) {
                                                                                                                                                                                                                            log("点击损坏的纸条")
                                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                            if (毒蜘蛛液) {
                                                                                                                                                                                                                                随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                setText("독거미")//输入毒蜘蛛
                                                                                                                                                                                                                                sleep(1000)
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "毒蜘蛛搜索字|毒蜘蛛液体搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                                            if (毒蜘蛛液) {
                                                                                                                                                                                                                                log("点击毒蜘蛛液体")
                                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                if (骷髅头) {
                                                                                                                                                                                                                                    随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                    setText("에 물든 망자의 가면")//输入骷髅头
                                                                                                                                                                                                                                    sleep(1000)
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "骷髅头搜索字|骷髅头搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                                if (骷髅头) {
                                                                                                                                                                                                                                    log("点击骷髅头")
                                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                    if (钥匙) {
                                                                                                                                                                                                                                        随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                        setText("망자의 비밀 열쇠")//输入亡者的密钥
                                                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            } else {//
                                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "钥匙搜索字|钥匙搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                                    if (钥匙) {
                                                                                                                                                                                                                                        log("点击钥匙")
                                                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                        if (动物肩章) {
                                                                                                                                                                                                                                            随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                            setText("동물 뼈 견장")//输入动物的肩章
                                                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                } else {//
                                                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "动物的肩章搜索字|动物的肩章搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                                                        if (动物肩章) {
                                                                                                                                                                                                                                            log("动物的肩章")
                                                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                            if (动物的血) {
                                                                                                                                                                                                                                                随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                setText("동물의 피")//输入动物的血
                                                                                                                                                                                                                                                sleep(1000)
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    } else {//
                                                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "动物的血搜索字|动物的血搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                                                            if (动物的血) {
                                                                                                                                                                                                                                                log("动物的肩章")
                                                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                                if (异教徒补给物资) {
                                                                                                                                                                                                                                                    随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                    setText("이교도 보급 물자")//输入异教徒补给物资
                                                                                                                                                                                                                                                    sleep(1000)
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                        } else {//
                                                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "异教徒补给物资搜索字|异教徒补给物资搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                                                if (异教徒补给物资) {
                                                                                                                                                                                                                                                    log("异教徒补给物资")
                                                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                                    if (链球) {
                                                                                                                                                                                                                                                        随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                        setText("악에 물든 철퇴")//输入链球
                                                                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                            } else {//
                                                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "链球搜索字|链球搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                if (sousz != null) {
                                                                                                                                                                                                                                                    if (链球) {
                                                                                                                                                                                                                                                        log("链球")
                                                                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                        if (药草) {
                                                                                                                                                                                                                                                            随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                            setText("동토의 약초")//输入药草
                                                                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                } else {//
                                                                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "药草搜索字|药草搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                    if (sousz != null) {
                                                                                                                                                                                                                                                        if (药草) {
                                                                                                                                                                                                                                                            log("药草")
                                                                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                                            if (狼头巾) {
                                                                                                                                                                                                                                                                随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                                setText("눈 덮인 늑대 두건")//输入狼头巾
                                                                                                                                                                                                                                                                sleep(1000)
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    } else {//
                                                                                                                                                                                                                                                        var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "狼头巾搜索字|狼头巾搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                        if (sousz != null) {
                                                                                                                                                                                                                                                            if (狼头巾) {
                                                                                                                                                                                                                                                                log("狼头巾")
                                                                                                                                                                                                                                                                随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                                                if (巫术杖) {
                                                                                                                                                                                                                                                                    随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                                    setText("사티로스 주술봉")//输入巫术杖
                                                                                                                                                                                                                                                                    sleep(1000)
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                        } else {//
                                                                                                                                                                                                                                                            var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "巫术仗搜索字|巫术仗搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                            if (sousz != null) {
                                                                                                                                                                                                                                                                if (巫术杖) {
                                                                                                                                                                                                                                                                    log("巫术杖")
                                                                                                                                                                                                                                                                    随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                                                    if (水果酒) {
                                                                                                                                                                                                                                                                        随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                                        setText("달달한 과실주")//输入水果酒
                                                                                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                                                var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "水果酒搜索字|水果酒搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                                if (sousz != null) {//恶灵粉末
                                                                                                                                                                                                                                                                    if (水果酒) {
                                                                                                                                                                                                                                                                        log("水果酒")
                                                                                                                                                                                                                                                                        随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                                        if (恶灵粉末) {
                                                                                                                                                                                                                                                                            随机点击(1033, 95, 10, 10)
                                                                                                                                                                                                                                                                            setText("악에 물든 가루")//输入恶灵粉末
                                                                                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                                                    var sousz = NoScreenshotsImgempt(imgMAX, true, 0.9, "恶灵粉末搜索字|恶灵粉末搜索字2", 18, 129, 1249, 124)
                                                                                                                                                                                                                                                                    if (sousz != null) {//恶灵粉末
                                                                                                                                                                                                                                                                        if (恶灵粉末) {
                                                                                                                                                                                                                                                                            log("恶灵粉末")
                                                                                                                                                                                                                                                                            随机点击(sousz.x + 40, sousz.y, 10, 10)
                                                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                                                            //完成
                                                                                                                                                                                                                                                                            log("完成搜索")
                                                                                                                                                                                                                                                                            查看物价时间 = new Date().getDate()
                                                                                                                                                                                                                                                                            发送数据至中控("fragmentaryState", 识别结果)
                                                                                                                                                                                                                                                                            log(识别结果)
                                                                                                                                                                                                                                                                            纯回主页()
                                                                                                                                                                                                                                                                            return "完成"
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                    } else {
                                                                                                                                                                                                                                                                        var cdjys = NoScreenshotsImgempt(imgMAX, true, 0.9, "菜单_交易所", 960, 87, 316, 460)
                                                                                                                                                                                                                                                                        if (cdjys != null) {
                                                                                                                                                                                                                                                                            log("点击交易所");
                                                                                                                                                                                                                                                                            随机点击(cdjys.x, cdjys.y, 10, 10)
                                                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                                                            var 手 = NoScreenshotsImgempt(imgMAX, true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                                                                                                                                                                                                                            if (手 != null) {
                                                                                                                                                                                                                                                                                log("主页点击菜单");
                                                                                                                                                                                                                                                                                随机点击(1238, 36, 10, 10)
                                                                                                                                                                                                                                                                            } else {
                                                                                                                                                                                                                                                                                var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "拍卖行搜索", 925, 54, 161, 85)//
                                                                                                                                                                                                                                                                                if (pmhss != null) {
                                                                                                                                                                                                                                                                                    log("主页搜索");
                                                                                                                                                                                                                                                                                    随机点击(pmhss.x, pmhss.y, 10, 10)
                                                                                                                                                                                                                                                                                } else {
                                                                                                                                                                                                                                                                                    var pmhss = NoScreenshotsImgempt(imgMAX, true, 0.9, "请输入检索词|请输入检索词2|请输入检索词3", 40, 60, 169, 81)//请输入检索词
                                                                                                                                                                                                                                                                                    if (pmhss != null) {
                                                                                                                                                                                                                                                                                        log("点击输入检索词");
                                                                                                                                                                                                                                                                                        随机点击(pmhss.x, pmhss.y, 10, 10)
                                                                                                                                                                                                                                                                                        if (白戟 || 绿戟 || 黄戟) {
                                                                                                                                                                                                                                                                                            setText("버드")
                                                                                                                                                                                                                                                                                        } else if (白甲 || 绿甲 || 黄甲) {
                                                                                                                                                                                                                                                                                            setText("사슬 갑옷")
                                                                                                                                                                                                                                                                                        } else if (绿级蓝色结晶 || 绿级白色结晶 || 绿级红色结晶 || 绿级绿色结晶 || 普通蓝色结晶 || 普通白色结晶 || 普通红色结晶 || 普通绿色结晶) {
                                                                                                                                                                                                                                                                                            setText("결정")//输入结晶
                                                                                                                                                                                                                                                                                        } else if (绿级红色火花 || 绿级蓝色火花 || 普通红色火花 || 普通蓝色火花) {
                                                                                                                                                                                                                                                                                            setText("불꽃")//搜索火花
                                                                                                                                                                                                                                                                                        } else if (冰牙原石 || 冰霜宝石 || 书吏精华 || 书吏原石 || 书吏结晶 || 冰河精华 || 冰河宝石) {
                                                                                                                                                                                                                                                                                            setText("반짝이는")//搜索闪亮的
                                                                                                                                                                                                                                                                                            sleep(1000)
                                                                                                                                                                                                                                                                                        } else if (药材粉末) {
                                                                                                                                                                                                                                                                                            setText("약재 가루")
                                                                                                                                                                                                                                                                                        } else if (新鲜水果) {
                                                                                                                                                                                                                                                                                            setText("싱싱한 과일")//输入水果
                                                                                                                                                                                                                                                                                        } else if (损坏的纸条) {
                                                                                                                                                                                                                                                                                            setText("훼손된 쪽지")////输入纸条
                                                                                                                                                                                                                                                                                        } else if (毒蜘蛛液) {
                                                                                                                                                                                                                                                                                            setText("독거미")//输入毒蜘蛛
                                                                                                                                                                                                                                                                                        } else if (骷髅头) {
                                                                                                                                                                                                                                                                                            setText("에 물든 망자의 가면")//输入骷髅头
                                                                                                                                                                                                                                                                                        } else if (钥匙) {
                                                                                                                                                                                                                                                                                            setText("망자의 비밀 열쇠")//输入亡者的密钥
                                                                                                                                                                                                                                                                                        } else if (动物肩章) {
                                                                                                                                                                                                                                                                                            setText("동물 뼈 견장")//输入动物的肩章
                                                                                                                                                                                                                                                                                        } else if (动物的血) {
                                                                                                                                                                                                                                                                                            setText("동물의 피")//输入动物的血
                                                                                                                                                                                                                                                                                        } else if (异教徒补给物资) {
                                                                                                                                                                                                                                                                                            setText("이교도 보급 물자")//输入异教徒补给物资
                                                                                                                                                                                                                                                                                        } else if (链球) {
                                                                                                                                                                                                                                                                                            setText("악에 물든 철퇴")
                                                                                                                                                                                                                                                                                        } else if (药草) {
                                                                                                                                                                                                                                                                                            setText("동토의 약초")//输入药草
                                                                                                                                                                                                                                                                                        } else if (狼头巾) {
                                                                                                                                                                                                                                                                                            setText("눈 덮인 늑대 두건")//输入狼头巾
                                                                                                                                                                                                                                                                                        } else if (巫术杖) {
                                                                                                                                                                                                                                                                                            setText("사티로스 주술봉")//输入巫术杖
                                                                                                                                                                                                                                                                                        } else if (水果酒) {
                                                                                                                                                                                                                                                                                            setText("달달한 과실주")//输入水果酒
                                                                                                                                                                                                                                                                                        } else if (恶灵粉末) {
                                                                                                                                                                                                                                                                                            setText("악에 물든 가루")//输入恶灵粉末
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        sleep(1000)
                                                                                                                                                                                                                                                                                    } else {

                                                                                                                                                                                                                                                                                        var jdmsz = NoScreenshotsImgempt(imgMAX, true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                                                                                                                                                                                                                        if (jdmsz != null) {
                                                                                                                                                                                                                                                                                            log("查看物价,退出节电")
                                                                                                                                                                                                                                                                                            swipe(566, 389, 968, 226, 500)
                                                                                                                                                                                                                                                                                        } else {
                                                                                                                                                                                                                                                                                            log("啥也没找到")
                                                                                                                                                                                                                                                                                        }


                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(250)
    }
}

function 开启药水自动() {
    log("开启药水自动")
    var 整理 = true
    var 点击位置 = 1
    var 初始X = 927
    var 初始Y = 114
    var 点击X = 0
    var 点击Y = 0

    // var 点出来了 = false
    var 重复点击相同位置 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
            if (zhuangbei != null) {
                log("点击药水栏");
                随机点击2(1242, 391)
            } else {
                var bbym = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                if (bbym != null) {
                    log("使用最大物品数")
                    随机点击2(bbym.x, bbym.y)
                    随机点击2(bbym.x, bbym.y + 100)
                } else {
                    var bbym = imgempt(true, 0.9, "过期物品|过期物品2", 617, 248, 118, 182)
                    if (bbym != null) {
                        log("点击删除")
                        随机点击(838, 537)
                    } else {
                        var bbym = imgempt(true, 0.9, "中秋年糕", 602, 213, 142, 53)
                        if (bbym != null) {
                            log("中秋年糕,关闭弹窗")
                            随机点击2(1241, 385)
                            // 点击位置++
                            重复点击相同位置 = 0
                        } else {
                            var bbym = imgempt(true, 0.9, "药水关2|药水关", 782, 458, 122, 72)
                            if (bbym != null) {
                                log("点击开启")
                                随机点击2(bbym.x, bbym.y)
                                // 点出来了 = true
                                重复点击相同位置 = 0
                            } else {
                                var bbym = imgempt(true, 0.9, "药水开2|药水开", 782, 458, 122, 72)
                                if (bbym != null) {
                                    var bbym = imgempt(true, 0.9, "自动使用药水数量0", 589,202,156,258)
                                    if (bbym != null) {
                                        log("使用完毕")
                                        storage.put("自动使用药水时间戳", new Date().getTime())
                                        纯回主页()
                                        return "成功"
                                    }else{
                                        log("药水已开启,点击关闭弹窗")
                                        随机点击2(1241, 385)
                                    }
                                    // 点击位置++
                                    // 点出来了 = true
                                    重复点击相同位置 = 0
                                } else {
                                    var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                                    if (bbym != null) {
                                        log("背包里")
                                        if (整理) {
                                            log("点击整理背包")
                                            随机点击(1178, 577)
                                            sleep(2000)
                                            log("点击药水栏")
                                            随机点击2(1242, 391)
                                            整理 = false
                                        } else {
                                            var 行 = Math.ceil(点击位置 / 4)
                                            var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                            点击X = 初始X + (列 * 69 - 69)
                                            点击Y = 初始Y + (行 * 69 - 69)
                                            log("第:" + 点击位置 + "个物品,位置" + 点击X + "," + 点击Y + "," + (点击X + 69) + "," + (点击Y + 69))
                                            随机点击(点击X + 5, 点击Y + 20, 10, 10)
                                            var bbym = imgempt(true, 0.9, "未开启自动使用", 点击X, 点击Y, 69, 69)
                                            if (bbym != null) {
                                                var zhonqiung = imgempt(true, 0.9, "中秋年糕", 602, 213, 142, 53)
                                                if (zhonqiung != null) {
                                                    log("中秋年糕,关闭弹窗")
                                                    随机点击2(1241, 385)
                                                    点击位置++
                                                    重复点击相同位置 = 0
                                                } else {
                                                    log("点击未开启自动使用药品")
                                                    随机点击2(bbym.x, bbym.y + 20)
                                                }
                                                // 点出来了 = false
                                            } else {
                                                var bbym = imgempt(true, 0.9, "背包(啥也没有)", 点击X, 点击Y, 69, 69)
                                                if (bbym != null) {
                                                    log("无使用物品")
                                                    storage.put("自动使用药水时间戳", new Date().getTime())
                                                    纯回主页()
                                                    return "成功"
                                                } else {
                                                    点击位置++
                                                }
                                            }

                                            if (点击位置 > 20) {
                                                storage.put("自动使用药水时间戳", new Date().getTime())
                                                log("重复点击过多,退出")
                                                纯回主页()
                                                return "成功"
                                            }
                                        }
                                    } else {
                                        var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                                        if (bbym != null) {
                                            log("点击背包")
                                            随机点击2(bbym.x, bbym.y)
                                            整理 = true
                                        } else {
                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                log("点击背包")
                                                随机点击(1115, 34, 10, 10)
                                                整理 = true
                                            } else {
                                                var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                if (bbym != null) {
                                                    log("开启药水自动,退出节电");
                                                    swipe(566, 389, 968, 226, 500)
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 设置扫描() {
    // return "设置完毕"
    if (设置扫描时间 != new Date().getDate()) {
        var 扫描勾选 = 0
        while (true) {
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {//
                var saomaiop = imgempt(true, 0.9, "怪物筛选|怪物筛选2", 872, 225, 123, 177)
                if (saomaiop != null) {
                    log("对象过滤页");
                    var saomaiop = imgempt(true, 0.8, "未勾选状态(扫描)|未勾选状态(扫描)2", 882, 158, 317, 311)
                    if (saomaiop != null) {
                        扫描勾选 = 0
                        log("勾选开始");//勾选状态(扫描)//未勾选状态(扫描)
                        for (let index = 0; index < 17; index++) {
                            var saomaiop = imgempt(true, 0.8, "未勾选状态(扫描)|未勾选状态(扫描)2", 882, 158, 317, 311)
                            if (saomaiop != null) {
                                log("勾选")
                                随机点击2(saomaiop.x, saomaiop.y, 10, 10)
                            } else {
                                sleep(200)
                            }
                        }
                    } else {
                        log("没有可勾选配置")
                        扫描勾选++
                        if (扫描勾选 >= 2) {
                            log("设置完毕")
                            随机点击(1184, 95, 10, 10)
                            设置扫描时间 = new Date().getDate()
                            return "设置完毕"
                        }
                    }
                } else {
                    var saomaiop = imgempt(true, 0.9, "搜索周边对象页|搜索周边对象页2", 858, 140, 153, 75)
                    if (saomaiop != null) {
                        var saomaiop1 = imgempt(true, 0.9, "显示人物图标关闭状态|显示人物图标关闭状态2", 1102, 305, 99, 40)
                        if (saomaiop1 != null) {
                            log("显示人物图标关闭状态,点击开启");
                            随机点击(saomaiop1.x, saomaiop1.y, 10, 10)
                        } else {
                            var saomaiop1 = imgempt(true, 0.9, "显示人物图标开启状态|显示人物图标开启状态2", 1093, 346, 117, 52)
                            if (saomaiop1 != null) {
                                log("显示人物图标开启状态,点击关闭");
                                随机点击(saomaiop1.x, saomaiop1.y, 10, 10)
                            } else {
                                var saomaiop1 = imgempt(true, 0.9, "3秒扫描一次", 945, 178, 119, 63)
                                if (saomaiop1 != null) {
                                    log("开启3秒扫描一次");
                                    随机点击(saomaiop1.x, saomaiop1.y, 10, 10)
                                } else {
                                    log("点击对象过滤页");
                                    随机点击(1107, 134, 10, 10)
                                }
                            }

                        }
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("在主界面");
                            var saomaiop = imgempt(true, 0.8, "扫描齿轮", 1150, 261, 103, 83)
                            if (saomaiop != null) {
                                log("点击扫描设置");
                                随机点击(1196, 294)
                            } else {
                                log("点出扫描")
                                随机点击(1239, 241, 10, 10)
                            }
                        } else {

                        }
                    }
                }
            }
            sleep(200)
        }
    } else {
        return "设置完毕"
    }

}

function 回城购买瞬间移动卷轴(mode) {
    var 模式 = mode
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    随机点击(674, 463, 10, 10)
                    随机点击(730, 643, 10, 10)
                    购买成功 = true
                    随机点击2(1239, 35, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,处理")
                        // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }
                    return
                } else {
                    var yssrhy = imgempt(true, 0.9, "瞬间移动卷轴(NPC)", 15, 54, 329, 625)
                    if (yssrhy != null) {
                        log("瞬间移动卷轴(NPC)");
                        随机点击2(yssrhy.x + 100, yssrhy.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                        if (yssrhy != null) {
                            log("下滑")
                            swipe(134, 552, 130, 150, 500)
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 140)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (模式 == "铜钱回城") {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("回城买瞬移卷轴,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    } else {
                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                        if (huicheng != null) {
                                                            log("点击回城卷轴");
                                                            随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                            var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                            if (guajizhon != null) {
                                                                log("没有卷轴了")
                                                                模式 = "铜钱回城"
                                                            }
                                                            sleep(3000)
                                                        } else {
                                                            log("没有找到回城卷轴")
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
//主武器 나이트 크로우 활
//副武器 나이트 크로우 화살통
//头盔 나이트 크로우 중갑 투구  射手:나이트 크로우 가죽 투구
//护甲 나이트 크로우 중갑 갑주  射手:나이트 크로우 가죽 흉갑
//护腿 나이트 크로우 중갑 각반  射手:나이트 크로우 가죽 각반
//护手 나이트 크로우 중갑 장갑  射手:나이트 크로우 가죽 장갑
//靴子 나이트 크로우 중갑 신발  射手:나이트 크로우 가죽 장화
//斗篷 나이트 크로우 철벽 망토  射手:나이트 크로우 가죽 망토 
//项链 모험가의 목걸이
//耳环 모험가의 귀걸이
//戒指 모험가의 반지





function 购买蓝装(需要购买的蓝装) {
    var 装备数组 = 需要购买的蓝装
    var 限制价格 = 300
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("点击交易所");
                随机点击(cdjys.x, cdjys.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                    if (pmhss != null) {
                        log("主页搜索");
                        var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                        if (dinbuzuanshi1 != null) {
                            var 当前钻石数量 = findNumber("钻石铜钱数", [dinbuzuanshi1.x, 1, 98, 45]);
                            if (当前钻石数量 != null) {
                                if (当前钻石数量 != null && 当前钻石数量 >= 500) {//500
                                    log("可用钻石为:" + 当前钻石数量)
                                    if (装备数组.length != 0) {
                                        随机点击(pmhss.x, pmhss.y, 10, 10)
                                    } else {
                                        log("已完成所有装备购买")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "购买完成"
                                        }
                                    }
                                } else {
                                    log("购买条件不符合,当前钻石数量:" + 当前钻石数量)
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "购买完成"
                                    }
                                }
                            } else {
                                toastLog()("未找到当前已有钻石")
                                sleep(3000)
                            }
                        }
                    } else {
                        var pmhss = imgempt(true, 0.9, "请输入检索词|请输入检索词2|请输入检索词3", 25, 53, 217, 110)//请输入检索词
                        if (pmhss != null) {
                            log("需要购买的装备:" + 装备数组[0])
                            if (装备数组.length != 0) {
                                log("点击输入检索词" + 装备数组[0]);
                                随机点击(pmhss.x, pmhss.y)
                                setText(装备数组[0])
                                sleep(1000)
                                随机点击(198, 187)
                            } else {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "购买完成"
                                }
                            }
                        } else {
                            var pmhss = imgempt(true, 0.9, "拍卖行购买物品弹窗|拍卖行购买物品弹窗2", 524, 67, 257, 115)//
                            if (pmhss != null) {
                                log("点击购买");
                                随机点击(730, 588)

                                // 随机点击(500,584)
                                sleep(1000)
                                var pmhss = imgempt(true, 0.9, "购买钻石不够", 431, 217, 433, 201)//
                                if (pmhss != null) {
                                    log("钻石不足以购买")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "购买完成"
                                    }
                                } else {
                                    while (true) {
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {//
                                            var pmhss = imgempt(true, 0.9, "请输入检索词右侧|请输入检索词右侧2", 962, 59, 252, 87)//
                                            if (pmhss != null) {
                                                log("已重置搜索");
                                                break
                                            } else {
                                                log("点击重置搜索")
                                                随机点击(1237, 95)
                                            }
                                        }
                                        sleep(1000)
                                    }
                                    装备数组 = 装备数组.slice(1);
                                }
                            } else {
                                if (装备数组[0].includes("목걸이") || 装备数组[0].includes("귀걸이") || 装备数组[0].includes("반지")) {
                                    限制价格 = 180
                                } else {
                                    限制价格 = 120
                                }
                                var pmhss = imgempt(true, 0.9, "拍卖行信息钻石图标", 856, 194, 112, 58)//
                                if (pmhss != null) {
                                    log("拍卖行信息钻石图标")
                                    // var pmhss1 = imgempt(true, 0.9, "拍卖价零数量", 1088, 184, 112, 75)//
                                    // if (pmhss1 != null) {
                                    //     toastLog("拍卖行无货")
                                    //     随机点击(1237, 95)
                                    //     装备数组 = 装备数组.slice(1);
                                    // } else {
                                    var 装备价格 = findNumber("夜鸦拍卖行", [894, 194, 144, 61]);
                                    if (装备价格 != null && 装备价格 <= 限制价格) {
                                        log("确认装备价格为:" + 装备价格)
                                        随机点击2(pmhss.x, pmhss.y)
                                    } else {
                                        log("不符合条件,装备价格为:" + 装备价格)
                                        装备数组 = 装备数组.slice(1);
                                        随机点击(1237, 95)
                                    }
                                    // }
                                } else {
                                    var pmhss = imgempt(true, 0.9, "拍卖行信息钻石图标", 961, 195, 175, 59)//
                                    if (pmhss != null) {
                                        log("三次确认装备价格")
                                        if (装备价格 != null && 装备价格 <= 限制价格) {
                                            log("三次确认装备价格为:" + 装备价格)
                                            随机点击2(pmhss.x, pmhss.y)
                                        } else {
                                            log("三次确认不符合条件,装备价格为:" + 装备价格)
                                            装备数组 = 装备数组.slice(1);
                                            随机点击(1237, 95)
                                        }
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}


function 判断需要购买的蓝装() {
    var 需要提升的装备 = ""
    var 需要购买的装备 = []
    var 识别装备 = true
    var 识别首饰 = true
    var 蓝装数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                if (识别装备) {//
                    var bbym = cor(true, 12, 65, 353, 157, 58, "#c9bba5", [[-1, -3, "#ecdbb9"], [5, 2, "#534a3d"], [7, -1, "#564c3e"], [7, -5, "#69604f"], [11, -6, "#ccbb99"], [16, 5, "#312b22"], [-41, -2, "#3f372f"]])
                    if (bbym != null) {//此为装备栏
                        log("角色信息装备栏，识别需要换的装备");
                        var 识别主副武器 = true
                        var xzfwq = imgempt(true, 0.9, "装备信息_弓手", 186, 312, 124, 66)
                        if (xzfwq != null) {
                            识别主副武器 = true
                        } else {
                            识别主副武器 = false
                        }
                        var 截图 = captureScreen();
                        if (识别主副武器) {
                            var clip = images.clip(截图, 100, 415, 55, 53);
                            var bb = images.interval(clip, "#2A5A71", 20)
                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                            clip.recycle()
                            bb.recycle()
                            if (获取的所有点.length <= 100) {
                                需要提升的装备 = 需要提升的装备 + "主武器"
                                需要购买的装备.push("나이트 크로우 활")
                            } else {
                                蓝装数量++
                            }

                            var clip = images.clip(截图, 176, 418, 57, 54);
                            var bb = images.interval(clip, "#2A5A71", 20)
                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                            clip.recycle()
                            bb.recycle()
                            if (获取的所有点.length <= 100) {
                                需要提升的装备 = 需要提升的装备 + "副武器"
                                需要购买的装备.push("나이트 크로우 화살통")
                            } else {
                                蓝装数量++
                            }
                        }

                        var clip = images.clip(截图, 256, 416, 50, 52);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "头盔"
                            // 需要购买的装备.push("나이트 크로우 중갑 투구")
                            需要购买的装备.push("나이트 크로우 가죽 투구")

                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 328, 418, 56, 49);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "护甲"
                            // 需要购买的装备.push("나이트 크로우 중갑 갑주")
                            需要购买的装备.push("나이트 크로우 가죽 흉갑")
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 325, 489, 62, 60);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "斗篷"
                            // 需要购买的装备.push("나이트 크로우 철벽 망토")
                            需要购买的装备.push("나이트 크로우 가죽 망토")
                        } else {
                            蓝装数量++
                        }
                        //
                        var clip = images.clip(截图, 167, 485, 78, 68);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "手套"
                            // 需要购买的装备.push("나이트 크로우 중갑 장갑")
                            需要购买的装备.push("나이트 크로우 가죽 장갑")
                        } else {
                            蓝装数量++
                        }


                        var clip = images.clip(截图, 251, 491, 58, 53);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "靴子"
                            // 需要购买的装备.push("나이트 크로우 중갑 신발")
                            需要购买的装备.push("나이트 크로우 가죽 장화")
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 102, 491, 54, 53);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "甲绑"
                            // 需要购买的装备.push("나이트 크로우 중갑 각반")
                            需要购买的装备.push("나이트 크로우 가죽 각반")

                        } else {
                            蓝装数量++
                        }
                        识别装备 = false
                    } else {
                        log("不是装备栏,点击装备栏")
                        随机点击2(141, 381)
                    }
                } else if (识别首饰) {
                    var bbym = cor(true, 12, 149, 350, 121, 61, "#e3cea5", [[4, -5, "#ba9b6b"], [4, 5, "#4b4235"], [19, -3, "#564b3c"], [23, 8, "#3a3429"], [-33, -2, "#1d1b17"], [-36, 9, "#171511"], [41, 13, "#1b1814"]])
                    if (bbym != null) {//此为首饰栏
                        log("角色信息首饰栏，识别需要换的首饰");
                        var 截图 = captureScreen();
                        var clip = images.clip(截图, 176, 414, 58, 54);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                            需要购买的装备.push("모험가의 귀걸이")
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 329, 412, 56, 59);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                            需要购买的装备.push("모험가의 반지")
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 245, 409, 67, 63);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                            需要购买的装备.push("모험가의 귀걸이")
                        } else {
                            蓝装数量++
                        }
                        //
                        var clip = images.clip(截图, 97, 492, 62, 55);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                            需要购买的装备.push("모험가의 반지")
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 100, 415, 58, 54);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "项链"
                            需要购买的装备.push("모험가의 목걸이")
                        } else {
                            蓝装数量++
                        }

                        // var clip = images.clip(截图, 154, 360, 77, 75);
                        // var bb = images.interval(clip, "#2A5A71", 20)
                        // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        // clip.recycle()
                        // bb.recycle()
                        // if (获取的所有点.length <= 100) {
                        //     需要提升的装备 = 需要提升的装备 + "腰带"
                        //     需要购买的装备.push("")
                        // } else {
                        //     蓝装数量++
                        // }


                        // var temp = images.read("./picture/肩甲为空.png");
                        // var imgxy = AreaSeekImg(0.9, 截图, temp, 245, 354, 88, 82);
                        // temp.recycle()
                        // if (imgxy != null) {
                        //     需要提升的装备 = 需要提升的装备 + "肩甲"
                        // }

                        // var clip = images.clip(截图, 247, 364, 79, 71);
                        // var bb = images.interval(clip, "#2A5A71", 20)
                        // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        // clip.recycle()
                        // bb.recycle()
                        // if (获取的所有点.length <= 100) {
                        //     需要提升的装备 = 需要提升的装备 + "肩甲"
                        // }
                        //预留，因为手环一开始只能做绿色的

                        // var clip = images.clip(截图, 302, 298, 90, 70);
                        // var bb = images.interval(clip, "#25493B", 20)
                        // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        // clip.recycle()
                        // bb.recycle()
                        // if (获取的所有点.length <= 100) {
                        //     var clip = images.clip(截图, 302, 298, 90, 70);
                        //     var bb = images.interval(clip, "#2A5A71", 20)
                        //     var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        //     clip.recycle()
                        //     bb.recycle()
                        //     if (获取的所有点.length <= 100) {
                        //         需要提升的装备 = 需要提升的装备 + "手镯"
                        //     } else {
                        //         蓝装数量++
                        //     }
                        // }
                        识别首饰 = false
                    } else {
                        log("不是首饰栏,点击首饰栏")
                        随机点击2(207, 379)
                    }
                } else {
                    log("装备:" + 需要提升的装备)
                    log("装备名称:" + 需要购买的装备)
                    if (需要购买的装备.length >= 1) {
                        var json = {
                            "设备id": 设备id,
                            "type": "蓝装数量",
                            "蓝装数量": 蓝装数量
                        }
                        发送数据至中控("fragmentaryState", json)
                        // if (需要提升的装备.includes("肩甲")) {
                        //     log("前往购买肩甲")
                        //     前往购买绿装(["肩甲"])
                        //     if (结果 == "掉线") {
                        //         return "掉线"
                        //     }
                        // }
                        var 结果 = 购买蓝装(需要购买的装备)
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 装备蓝装遍历版()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 挂机强化("自动提升")
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "提升完成"
                                }
                            }
                        }
                    } else {
                        return "提升完成"
                    }
                }
            } else {
                var xzfwq = imgempt(true, 0.9, "装备图标", 60, 1, 102, 70)
                if (xzfwq != null) {
                    log("装备图标");
                    随机点击(xzfwq.x, xzfwq.y, 10, 10)
                } else {

                }
            }
        }
        sleep(200)
    }
}

function 判断需要强化的装备(mode) {
    var 需要提升的装备 = ""
    var 识别装备 = true
    var 识别首饰 = true
    var 蓝装数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                if (识别装备) {//
                    var bbym = cor(true, 12, 65, 353, 157, 58, "#c9bba5", [[-1, -3, "#ecdbb9"], [5, 2, "#534a3d"], [7, -1, "#564c3e"], [7, -5, "#69604f"], [11, -6, "#ccbb99"], [16, 5, "#312b22"], [-41, -2, "#3f372f"]])
                    if (bbym != null) {//此为装备栏
                        log("角色信息装备栏，识别需要换的装备");
                        var 截图 = captureScreen();
                        var clip = images.clip(截图, 256, 416, 50, 52);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "头盔"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 328, 418, 56, 49);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "护甲"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 325, 489, 62, 60);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "斗篷"
                        } else {
                            蓝装数量++
                        }
                        //
                        var clip = images.clip(截图, 167, 485, 78, 68);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "手套"
                        } else {
                            蓝装数量++
                        }

                        //暂时不考虑,因为需要做别的职业

                        var clip = images.clip(截图, 100, 415, 55, 53);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "主武器"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 176, 418, 57, 54);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "副武器"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 251, 491, 58, 53);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "靴子"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 102, 491, 54, 53);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "甲绑"
                        } else {
                            蓝装数量++
                        }
                        识别装备 = false
                    } else {
                        log("不是装备栏,点击装备栏")
                        随机点击2(130, 469)
                    }
                } else if (识别首饰) {
                    var bbym = cor(true, 12, 149, 350, 121, 61, "#e3cea5", [[4, -5, "#ba9b6b"], [4, 5, "#4b4235"], [19, -3, "#564b3c"], [23, 8, "#3a3429"], [-33, -2, "#1d1b17"], [-36, 9, "#171511"], [41, 13, "#1b1814"]])
                    if (bbym != null) {//此为首饰栏
                        log("角色信息首饰栏，识别需要换的首饰");
                        var 截图 = captureScreen();
                        var clip = images.clip(截图, 245, 409, 67, 63);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 97, 492, 62, 55);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 176, 414, 58, 54);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                        } else {
                            蓝装数量++
                        }
                        //
                        var clip = images.clip(截图, 329, 412, 56, 59);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 100, 415, 58, 54);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "项链"
                        } else {
                            蓝装数量++
                        }

                        var clip = images.clip(截图, 175, 487, 62, 63);
                        var bb = images.interval(clip, "#2A5A71", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "腰带"
                        } else {
                            蓝装数量++
                        }


                        // var temp = images.read("./picture/肩甲为空.png");
                        // var imgxy = images.findImage(截图, temp, { region: [311, 479, 93, 74] })  //AreaSeekImg(0.9, 截图, temp, 245, 354, 88, 82);
                        // temp.recycle()
                        // if (imgxy != null) {
                        //     需要提升的装备 = 需要提升的装备 + "肩甲"
                        // }

                        // var clip = images.clip(截图, 247, 364, 79, 71);
                        // var bb = images.interval(clip, "#2A5A71", 20)
                        // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        // clip.recycle()
                        // bb.recycle()
                        // if (获取的所有点.length <= 100) {
                        //     需要提升的装备 = 需要提升的装备 + "肩甲"
                        // }

                        //预留，因为手环一开始只能做绿色的

                        var clip = images.clip(截图, 302, 298, 90, 70);
                        var bb = images.interval(clip, "#25493B", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            var clip = images.clip(截图, 302, 298, 90, 70);
                            var bb = images.interval(clip, "#2A5A71", 20)
                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                            clip.recycle()
                            bb.recycle()
                            if (获取的所有点.length <= 100) {
                                需要提升的装备 = 需要提升的装备 + "手镯"
                            } else {
                                蓝装数量++
                            }
                        }
                        识别首饰 = false
                    } else {
                        log("不是首饰栏,点击首饰栏")
                        随机点击2(207, 379)
                    }
                } else {
                    log("装备:" + 需要提升的装备)
                    if (需要提升的装备 != "") {
                        var json = {
                            "设备id": 设备id,
                            "type": "蓝装数量",
                            "蓝装数量": 蓝装数量
                        }
                        发送数据至中控("fragmentaryState", json)

                        // var 结果 = 放入拿出仓库("拿出")
                        // if (结果 == "掉线") {
                        //     return "掉线"
                        // } else {
                        // var 装备制造 = "装备制造"
                        // if (需要提升的装备.includes("主武器")) {
                        //     装备制造 = "装备制造,主武器"
                        // }
                        // var 结果 = 使用材料箱(装备制造)
                        // if (结果 == "掉线") {
                        //     return "掉线"
                        // } else {

                        // if (需要提升的装备.includes("副武器")) {///
                        //     //购买副武器
                        //     var 结果 = 购买副武器()
                        //     if (结果 == "掉线") {
                        //         return "掉线"
                        //     }
                        // }

                        // if (需要提升的装备.includes("肩甲")) {
                        //     log("前往购买肩甲")
                        //     前往购买绿装(["肩甲"])
                        //     if (结果 == "掉线") {
                        //         return "掉线"
                        //     }
                        // }

                        var 结果 = 制造蓝装(需要提升的装备)
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 装备蓝装遍历版()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 挂机强化(mode)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "提升完成"
                                }
                            }

                            // var 结果 = 装备蓝装()
                            // if (结果 == "掉线") {
                            //     return "掉线"
                            // } else {
                            //     var 结果 = 挂机强化(mode)
                            //     if (结果 == "掉线") {
                            //         return "掉线"
                            //     } else {
                            //         return "提升完成"
                            //     }
                            // }
                        }
                        // }
                        // }
                    } else {
                        if (mode == "自动" || mode == "自动提升") {
                            toastLog("未检测到可提升蓝装")
                            return "提升完成"
                        } else {
                            alert("无可提升装备")
                        }
                    }
                }
            } else {
                var xzfwq = imgempt(true, 0.9, "装备图标", 60, 1, 102, 70)
                if (xzfwq != null) {
                    log("装备图标");
                    随机点击(xzfwq.x, xzfwq.y, 10, 10)
                } else {

                }
            }
        }
        sleep(200)
    }
}




function 购买护身符() {
    var 购买成功 = false
    var 点击购买次数 = 0
    var 回城卷轴 = true
    var 下滑次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    随机点击2(738, 641, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,不买了")
                        // 无铜钱处理()

                        return "铜钱不足"
                    }
                    纯回主页()
                    return "购买成功"
                } else {
                    var yssrhy = imgempt(true, 0.9, "手工艺品商店页", 4, 2, 295, 75)
                    if (yssrhy != null) {
                        var yssrhy = imgempt(true, 0.9, "手工艺品商店金币版", 59, 63, 227, 646)
                        if (yssrhy != null) {
                            log("点击手工艺品商店金币版")
                            随机点击2(yssrhy.x + 100, yssrhy.y)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,不买了")
                                return "铜钱不足"
                            }
                        } else {
                            下滑次数++
                            if (下滑次数 >= 3) {
                                log("找不到,走了")
                                纯回主页()
                                return "未找到"
                            }
                            log("没找到手工艺品铜钱版,下滑")
                            swipe(134, 534, 149, 209, 2000)
                            sleep(1000)

                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                            if (dyzczhsrtb != null) {
                                log("点击地图主城杂货商人图标");
                                随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "主城手工艺品图标", 15, 66, 115, 353)
                                if (zhuchengzahuo != null) {
                                    log("点击主城手工艺品图标");
                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                    if (zhuchengzahuo != null) {
                                        log("主城主城技能商店图标");
                                        swipe(122, 138, 114, 274, 500)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                        if (zhuchengzahuo != null) {
                                            log("主城杂货商人图标,下滑");
                                            swipe(123, 277, 120, 165, 2000)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (回城卷轴) {
                                                        var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                        if (zhuchengzahuo != null) {
                                                            log("主城委托图标");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(153, 87, 150, 282, 500)
                                                            }
                                                        } else {
                                                            var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                            if (huicheng != null) {
                                                                var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                                                                if (信件 != null) {
                                                                    log("关闭菜单")
                                                                    随机点击(1243, 35, 10, 10)
                                                                } else {
                                                                    log("点击回城卷轴")
                                                                    随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                    for (let index = 0; index < 5; index++) {
                                                                        var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                        if (guajizhon != null) {
                                                                            log("没有卷轴了")
                                                                            回城卷轴 = false
                                                                            break
                                                                        }
                                                                    }
                                                                }
                                                                sleep(3000)
                                                            } else {
                                                                回城卷轴 = false
                                                            }
                                                        }
                                                    } else {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("购买护身符,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }


                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 制造弱点感知() {
    var 职业 = 学习制造术("每日制造")
    if (职业 == "掉线") {
        return "掉线"
    } else if (职业 == "铜钱不足") {
        return "铜钱不足"
    }
    var 可制造数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "委托登记弹窗", 552, 50, 192, 90)
            if (jizhandi != null) {
                log("委托登记弹窗")
                随机点击(320, 166)
                随机点击(1050, 607)
                let 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "制造完成"
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
                if (jizhandi != null) {
                    log("制作成功")
                    随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                } else {
                    var jizhandi = imgempt(true, 0.9, "制作图标", 109, 74, 668, 63)
                    if (jizhandi != null) {
                        var jizhandi = imgempt(true, 0.9, "专业制造栏_弓|专业制造栏_弓2", 17, 127, 146, 494)
                        if (jizhandi != null) {//
                            var jizhandi = imgempt(true, 0.9, "专业制造技能_通用", 17, 127, 146, 494)
                            if (jizhandi != null) {//
                                var ruodianganzhi = imgempt(true, 0.9, "专业制造_弱点感知技能书", 277, 136, 215, 425)
                                if (ruodianganzhi != null) {//
                                    var jizhandi = imgempt(true, 0.9, "弱点感知详细", 663, 353, 215, 100)
                                    if (jizhandi != null) {//
                                        log("判断弱点感知是否可以学习")
                                        var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                        if (tongqian != null) {
                                            var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                            if (当前铜钱数量 != "false") {
                                                var json = {
                                                    "设备id": 设备id,
                                                    "type": "铜钱数",
                                                    "铜钱数量": 当前铜钱数量
                                                }
                                                发送数据至中控("fragmentaryState", json)
                                                log("铜钱:" + 当前铜钱数量)
                                                if (当前铜钱数量 <= 300000) {
                                                    log("铜钱不足,放弃制造")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "制造完成"
                                                    }
                                                } else {
                                                    var 当前数量 = findNumber("钻石铜钱数第二套", [686, 533, 72, 34]);
                                                    if (当前数量 != null) {
                                                        已有数量 = parseInt(当前数量.toString().slice(0, -2))
                                                        log("蓝色旋涡数量:" + 已有数量)
                                                        if (已有数量 < 40) {
                                                            log("蓝色旋涡不足,退出制造")
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                return "制造完成"
                                                            }
                                                        } else {
                                                            var 当前数量 = findNumber("钻石铜钱数第二套", [987, 533, 79, 37]);
                                                            if (当前数量 != null) {
                                                                已有数量 = parseInt(当前数量.toString().slice(0, -2))
                                                                log("黄石头数量:" + 已有数量)
                                                                if (已有数量 < 20) {
                                                                    log("黄石头不足,退出制造")
                                                                    var 结果 = 纯回主页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    } else {
                                                                        return "制造完成"
                                                                    }
                                                                } else {
                                                                    log("制造条件符合")
                                                                    log("点击查看弱点感知是否已学习")
                                                                    随机点击(764, 300)
                                                                    var ercqr = imgempt(true, 0.9, "学过的技能", 488, 256, 232, 88)
                                                                    if (ercqr != null) {
                                                                        log("已经学习过弱点感知")
                                                                        storage.put("弱点感知", "已学习")
                                                                        let 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            return "制造完成"
                                                                        }
                                                                    } else {
                                                                        随机点击(963, 664)
                                                                    }
                                                                    var jizhandi = imgempt(true, 0.9, "制造按钮", 871, 616, 190, 90)
                                                                    if (jizhandi != null) {//
                                                                        log("点击制造")
                                                                        随机点击(jizhandi.x, jizhandi.y)
                                                                        sleep(1000)
                                                                        let 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            return "制造完成"
                                                                        }
                                                                    } else {
                                                                        log("点击委托")
                                                                        随机点击(1135, 665)
                                                                    }
                                                                }
                                                            } else {
                                                                log("没找到黄石头数量")
                                                            }
                                                        }
                                                    } else {
                                                        log("没找到蓝色旋涡数量")
                                                    }
                                                }
                                            } else {
                                                log("没有找到铜钱")
                                                sleep(3000)
                                            }
                                        } else {
                                            log("没找到铜钱图标")
                                        }
                                    } else {
                                        log("点击弱点感知技能")
                                        随机点击(ruodianganzhi.x, ruodianganzhi.y)
                                    }
                                } else {
                                    log("未找到弱点感知技能书")
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "专业制造_技能书栏", 13, 134, 211, 497)
                                if (jizhandi != null) {//
                                    log("点击弓箭手技能栏")
                                    随机点击2(jizhandi.x, jizhandi.y)
                                } else {

                                }
                            }
                        } else {
                            log("点击弓箭手制造页")
                            随机点击(271, 98)
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                        if (jizhandi != null) {
                            log("点击菜单_制造");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击(1238, 36, 10, 10)
                            } else {
                                var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                                if (zhunmen != null) {
                                    log("专门制作");
                                    随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 委托或制造地球仪() {
    var 职业 = 学习制造术("每日制造")
    if (职业 == "掉线") {
        return "掉线"
    } else if (职业 == "铜钱不足") {
        return "铜钱不足"
    }
    var 可制造数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "委托登记弹窗", 552, 50, 192, 90)
            if (jizhandi != null) {
                log("委托登记弹窗")
                随机点击(320, 166)
                随机点击(1050, 607)
                let 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "制造完成"
                }
            } else {

            }
            var jizhandi = imgempt(true, 0.9, "制造拍卖行天平图标", 824, 474, 424, 167)
            if (jizhandi != null) {
                log("点击跳转到拍卖行")
                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                var 结果 = 跳转购买("天枰", 5)
                if (结果 == "掉线") {
                    return "掉线"
                } else if (结果 == "钻石不足") {
                    let 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "材料不足"
                } else if (结果 == "无货") {
                    let 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "材料不足"
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)
                if (jizhandi != null) {
                    log("还在拍卖行页,点击退出")
                    随机点击(37, 32, 10, 10)
                } else {
                    var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
                    if (jizhandi != null) {
                        log("制作成功")
                        随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var jizhandi = imgempt(true, 0.9, "制作图标", 109, 74, 668, 63)
                        if (jizhandi != null) {
                            var jizhandi = imgempt(true, 0.9, "首饰制造技能页|首饰制造技能页2", 15, 121, 224, 518)
                            if (jizhandi != null) {//
                                var jizhandi = imgempt(true, 0.9, "制造地球仪详细|制造地球仪详细2", 651, 348, 251, 113)
                                if (jizhandi != null) {//
                                    var 当前数量 = findNumber("钻石铜钱数第二套", [982, 529, 119, 45]);
                                    if (当前数量 != null) {
                                        已有数量 = parseInt(当前数量.toString().slice(0, -1))
                                        if (已有数量 < 2) {
                                            log("黄石头不足,退出制造")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "材料不足"
                                            }
                                            // exit()
                                        } else {
                                            var 当前数量 = findNumber("钻石铜钱数第二套", [683, 535, 89, 30]);
                                            if (当前数量 != null) {
                                                已有数量 = parseInt(当前数量.toString().slice(0, -1))
                                                if (已有数量 < 5) {
                                                    var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                                    if (dinbuzuanshi1 != null) {
                                                        var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                                        if (当前钻石数量 != "false") {
                                                            if (当前钻石数量 < 20) {
                                                                log("钻石不足,退出制造")
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "材料不足"
                                                                }
                                                            } else {
                                                                log("天枰不足,点击购买")
                                                                随机点击(772, 540)
                                                            }
                                                        }
                                                    } else {
                                                        log("没有找到钻石图标")
                                                    }
                                                    // exit()
                                                } else {
                                                    log("材料充足")
                                                    var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                                    if (dinbuzuanshi1 != null) {
                                                        var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                                        if (当前钻石数量 != "false") {
                                                            if (当前钻石数量 < 10) {
                                                                log("钻石不足,退出制造")
                                                                var 结果 = 纯回主页()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    return "材料不足"
                                                                }
                                                            } else {
                                                                var jizhandi = imgempt(true, 0.9, "委托制造按钮", 893, 616, 364, 96)
                                                                if (jizhandi != null) {
                                                                    log("点击委托制造按钮")
                                                                    随机点击2(jizhandi.x, jizhandi.y)
                                                                } else {

                                                                }
                                                            }
                                                        }
                                                    } else {
                                                        log("没有找到钻石图标")
                                                    }
                                                }
                                            } else {

                                            }
                                        }
                                    } else {

                                    }
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "手工艺品物品栏_地球仪|手工艺品物品栏_地球仪2", 222, 125, 287, 472)
                                    if (jizhandi != null) {//
                                        log("点击手工艺品物品栏_地球仪")
                                        随机点击2(jizhandi.x, jizhandi.y)
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "手工艺品栏", 10, 125, 223, 503)
                                        if (jizhandi != null) {//
                                            log("点击手工艺品栏")
                                            随机点击2(jizhandi.x, jizhandi.y)
                                        } else {

                                        }
                                    }
                                }
                            } else {
                                log("点击首饰制造技能页")
                                随机点击(631, 95)
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                            if (jizhandi != null) {
                                log("点击菜单_制造");
                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {
                                    var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                                    if (zhunmen != null) {
                                        log("专门制作");
                                        随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 识别辅助装备() {
    var 缺失的装备 = ""
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                var xzfwq = imgempt(true, 0.9, "暂无神圣文物|已有神圣文物", 134, 128, 117, 89)
                if (xzfwq != null) {
                    // var xzfwq = imgempt(true, 0.9, "暂无神圣文物", 83,127,322,319)
                    // if (xzfwq != null) {
                    //     缺失的装备 = 缺失的装备 + "神圣文物"
                    // }
                    var xzfwq = imgempt(true, 0.9, "暂无护身符", 83, 127, 322, 319)
                    if (xzfwq != null) {
                        缺失的装备 = 缺失的装备 + "护身符"
                    }
                    var xzfwq = imgempt(true, 0.9, "暂无地球仪", 83, 127, 322, 319)
                    if (xzfwq != null) {
                        缺失的装备 = 缺失的装备 + "地球仪"
                    }
                    log("缺失的装备:" + 缺失的装备)
                    let 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        if (缺失的装备 != "") {
                            return 缺失的装备
                        }
                        return null
                    }
                } else {
                    log("点击辅助装备页")
                    随机点击2(267, 469)
                }
            } else {
                var xzfwq = imgempt(true, 0.9, "装备图标", 60, 1, 102, 70)
                if (xzfwq != null) {
                    log("装备图标");
                    随机点击(xzfwq.x, xzfwq.y, 10, 10)
                } else {

                }
            }
        }
        sleep(200)
    }
}

function 判断需要提升绿级的装备() {
    var 需要提升的装备 = ""
    var 识别装备 = true
    var 识别首饰 = true
    var 是否确认点击 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                if (识别装备) {//
                    var bbym = cor(true, 12, 81, 442, 117, 62, "#43392d", [[10, -3, "#ebdcbb"], [16, -1, "#534a3b"], [19, -4, "#5f5848"], [25, 0, "#544a3e"], [24, -8, "#574e3f"], [21, -7, "#c7baa7"], [15, -10, "#a19181"], [13, 4, "#b3a686"], [25, 1, "#4a4034"]])
                    if (bbym != null || 是否确认点击) {//此为装备栏
                        log("角色信息装备栏，识别需要换的装备");
                        var 截图 = captureScreen();
                        var clip = images.clip(截图, 100, 214, 80, 71);
                        var bb = images.interval(clip, "#073020", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "斗篷"
                        }
                        识别装备 = false
                        是否确认点击 = false
                    } else {
                        log("不是装备栏,点击装备栏")
                        随机点击2(130, 469)
                        是否确认点击 = true
                    }
                } else if (识别首饰) {
                    var bbym = cor(true, 12, 149, 350, 121, 61, "#e3cea5", [[4, -5, "#ba9b6b"], [4, 5, "#4b4235"], [19, -3, "#564b3c"], [23, 8, "#3a3429"], [-33, -2, "#1d1b17"], [-36, 9, "#171511"], [41, 13, "#1b1814"]])
                    if (bbym != null || 是否确认点击) {//此为首饰栏
                        log("角色信息首饰栏，识别需要换的首饰");
                        var 截图 = captureScreen();
                        var clip = images.clip(截图, 151, 139, 78, 73);
                        var bb = images.interval(clip, "#073020", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                        }

                        var clip = images.clip(截图, 248, 142, 79, 71);
                        var bb = images.interval(clip, "#073020", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                        }

                        var clip = images.clip(截图, 100, 214, 80, 71);
                        var bb = images.interval(clip, "#073020", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "耳环"
                        }
                        //
                        var clip = images.clip(截图, 304, 211, 77, 68);
                        var bb = images.interval(clip, "#073020", 20)
                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                        clip.recycle()
                        bb.recycle()
                        if (获取的所有点.length <= 100) {
                            需要提升的装备 = 需要提升的装备 + "戒指"
                        }
                        识别首饰 = false
                        是否确认点击 = false
                    } else {
                        log("不是首饰栏,点击首饰栏")
                        随机点击2(207, 379)
                        是否确认点击 = true
                    }
                } else {
                    log("装备:" + 需要提升的装备)
                    if (需要提升的装备 != "") {
                        return 需要提升的装备
                    } else {
                        // alert("无可提升装备")
                        log("无可提升装备")
                        return "完成"
                    }
                }
            } else {
                var xzfwq = imgempt(true, 0.9, "装备图标", 60, 1, 102, 70)
                if (xzfwq != null) {
                    log("装备图标");
                    随机点击(xzfwq.x, xzfwq.y, 10, 10)
                } else {

                }
            }
        }
        sleep(200)
    }
}

function 检查副武器() {
    var 整理 = true
    var 未找到 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)//
            if (jizhandi != null) {
                log("退出拍卖行");
                随机点击(1242, 33, 10, 10)
            } else {
                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                if (bbym != null) {
                    log("背包里")
                    if (整理) {
                        log("点击整理背包")
                        随机点击(1178, 577)
                        sleep(2000)
                        log("点击装备栏")
                        随机点击2(1245, 222)
                        整理 = false
                    } else {
                        var guajizhon = 识别并返回识别坐标及图片(true, 0.9, "蓝级副武器(未装备)", 918, 104, 305, 433)
                        if (guajizhon != null) {
                            log("有副武器了")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "存在"
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                            if (bbym != null) {
                                log("装备完毕,关闭背包")
                                纯回主页()
                                return "装备完毕"
                            } else {
                                未找到++
                                if (未找到 >= 9) {
                                    log("装备完毕,关闭背包")
                                    纯回主页()
                                    return "装备完毕"
                                }
                                log("未找到可使用物品")
                                swipe(1037, 432, 1036, 228, 2000)
                            }
                        }
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                        整理 = true
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                            整理 = true
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 购买副武器() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
            if (cdjys != null) {
                log("点击交易所");
                随机点击(cdjys.x, cdjys.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var jizhandi = imgempt(true, 0.9, "拍卖行购买", 610, 543, 290, 93)
                    if (jizhandi != null) {
                        log("拍卖行购买")
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)//
                        sleep(300)
                        // 随机点击(1242,33, 10, 10)//  暂时点购买
                        随机点击(507, 583, 10, 10)
                        var 结果 = 检查副武器()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "购买完成"
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)//
                        if (jizhandi != null) {
                            var jizhandi = imgempt(true, 0.9, "拍卖行详细目录", 909, 638, 239, 75)
                            if (jizhandi != null) {
                                var jizhandi = imgempt(true, 0.9, "拍卖行蓝级副武器", 255, 166, 138, 117)
                                if (jizhandi != null) {
                                    log("拍卖行蓝级副武器");
                                    随机点击(jizhandi.x + 100, jizhandi.y, 10, 10)
                                } else {

                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "拍卖行蓝级副武器", 255, 167, 163, 497)
                                if (jizhandi != null) {
                                    log("拍卖行蓝级副武器");
                                    随机点击(jizhandi.x + 100, jizhandi.y, 10, 10)
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "拍卖行箭袋栏", 13, 109, 216, 605)
                                    if (jizhandi != null) {
                                        log("拍卖行箭袋栏");
                                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "拍卖行副武器栏", 13, 109, 216, 605)
                                        if (jizhandi != null) {
                                            log("拍卖行副武器栏");
                                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
//


function 识别绿级制造材料(直接购买) {
    var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
    if (tongqian != null) {
        var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
        if (当前铜钱数量 != "false") {
            var json = {
                "设备id": 设备id,
                "type": "铜钱数",
                "铜钱数量": 当前铜钱数量
            }
            发送数据至中控("fragmentaryState", json)
            if (当前铜钱数量 <= 200000) {
                log("铜钱不足,制造完成")
                if (!总提示.includes("铜钱不足")) {
                    总提示 = 总提示 + "铜钱不足"
                }
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "材料不足"
                }
            } else {
                swipe(845, 536, 849, 609, 500)
            }
        } else {
            log("没有找到铜钱")
            sleep(3000)
        }
    }
    var 购买数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "制造拍卖行天平图标", 824, 474, 424, 167)
            if (jizhandi != null) {
                log("点击跳转到拍卖行")
                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                var 结果 = 跳转购买("材料", 购买数量)
                if (结果 == "掉线") {
                    return "掉线"
                } else if (结果 == "钻石不足") {
                    return "钻石不足"
                } else if (结果 == "无货") {
                    return "无货"
                }
                购买数量 = 0
            } else {
                var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)
                if (jizhandi != null) {
                    log("还在拍卖行页,点击退出")
                    随机点击(37, 32, 10, 10)
                } else {
                    var 当前数量 = findNumber("钻石铜钱数第二套", [684, 526, 112, 50]);
                    if (当前数量 != null) {
                        log("第一个材料数量:" + 当前数量)
                        已有数量 = parseInt(当前数量.toString().slice(0, -2))
                        if (已有数量 < 60) {
                            log("材料不足")
                            if (直接购买) {
                                log("前往购买")
                                随机点击(750, 536)
                                购买数量 = 60 - 已有数量
                            } else {
                                return "材料不足"
                            }
                        } else {
                            var 当前数量 = findNumber("钻石铜钱数第二套", [978, 526, 122, 47]);
                            if (当前数量 != "false") {
                                log("第二个材料数量:" + 当前数量)
                                log("截取前的值为:" + 当前数量)
                                已有数量 = parseInt(当前数量.toString().slice(0, -2))
                                log("截取后的值为:" + 已有数量)
                                if (已有数量 < 60) {
                                    log("材料不足")
                                    if (直接购买) {
                                        log("前往购买")
                                        随机点击(1050, 536)
                                        购买数量 = 60 - 已有数量
                                    } else {
                                        return "材料不足"
                                    }
                                } else {
                                    log("材料充足")
                                    return "可以制造"
                                }
                            } else {

                            }
                        }
                    } else {

                    }
                }
            }
        }
        sleep(1000)
    }
}

function 识别制造材料(params) {
    var 材料蓝书 = true
    var 光材料 = true
    var 光铁片 = true
    var 铁片黄石头 = true
    var 材料类型 = ""
    var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
    if (tongqian != null) {
        var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
        if (当前铜钱数量 != "false") {
            var json = {
                "设备id": 设备id,
                "type": "铜钱数",
                "铜钱数量": 当前铜钱数量
            }
            发送数据至中控("fragmentaryState", json)
            if (当前铜钱数量 <= 500000) {
                log("铜钱不足,制造完成")
                if (!总提示.includes("铜钱不足")) {
                    总提示 = 总提示 + "铜钱不足"
                }
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "蓝书不足"
                }
            } else {

            }
        } else {
            log("没有找到铜钱")
            sleep(3000)
        }
    }
    var 购买数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "制造拍卖行天平图标|制造拍卖行天平图标2", 716, 466, 545, 210)
            if (jizhandi != null) {
                log("点击跳转到拍卖行")
                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                if (材料类型 != "") {
                    var 结果 = 跳转购买(材料类型, 购买数量)
                    if (结果 == "掉线") {
                        return "掉线"
                    } else if (结果 == "钻石不足") {
                        return "钻石不足"
                    } else if (结果 == "无货") {
                        return "无货"
                    }
                    购买数量 = 0
                } else {
                    发送异常("请检查")
                    alert("请检查")
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)
                if (jizhandi != null) {
                    log("还在拍卖行页,点击退出")
                    随机点击(37, 32, 10, 10)
                } else {
                    if (材料蓝书) {
                        var laolian = imgempt(true, 0.9, "制造详细蓝书", 906, 498, 112, 86)
                        if (laolian != null) {
                            log("识别蓝书数量");
                            var 当前数量 = findNumber("钻石铜钱数第二套", [laolian.x + 45, laolian.y, 127, 43]);
                            if (当前数量 != null) {
                                已有数量 = parseInt(当前数量.toString().slice(0, -2))
                                if (已有数量 < 15) {
                                    log("蓝书不足,制造完成")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "蓝书不足"
                                    }
                                    // exit()
                                } else {
                                    // swipe(736, 614, 762, 528, 500)
                                    //识别材料
                                    log("蓝书充足")
                                    材料蓝书 = false
                                    swipe(736, 614, 762, 528, 500)
                                    sleep(1000)
                                }
                            } else {

                            }
                        } else {
                            log("没找到蓝书")
                            swipe(762, 528, 736, 614, 500)
                            sleep(1000)
                        }
                    } else if (铁片黄石头) {
                        var laolian = imgempt(true, 0.9, "制造详细铁片", 598, 465, 134, 180)
                        if (laolian != null) {
                            log("识别黄石头数量");
                            var 当前数量 = findNumber("钻石铜钱数第二套", [982, laolian.y, 127, 43]);
                            if (当前数量 != null) {
                                已有数量 = parseInt(当前数量.toString().slice(0, -2))
                                if (已有数量 < 10) {
                                    log("黄石头不足,制造完成")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "蓝书不足"
                                    }
                                    log("黄石头不足,购买,识别钻石")
                                    var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                    if (dinbuzuanshi1 != null) {
                                        var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                        if (当前钻石数量 != "false") {
                                            if (参数[45] && 参数[32] == false) {
                                                if (当前钻石数量 < (10 - 已有数量) * 25 + 50) {
                                                    log("黄石头不足,钻石不足,制造完成")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "钻石不足"
                                                    }
                                                } else {
                                                    //继续购买黄石头
                                                    log("点击黄石头")
                                                    随机点击(1163, 534)
                                                    材料类型 = "黄石头"
                                                    购买数量 = 10 - 已有数量
                                                }
                                            } else {
                                                if (当前钻石数量 < (10 - 已有数量) * 25 + 50) {
                                                    log("黄石头不足,钻石不足,制造完成")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "钻石不足"
                                                    }
                                                } else {
                                                    //继续购买黄石头
                                                    log("点击黄石头")
                                                    随机点击(1163, 534)
                                                    材料类型 = "黄石头"
                                                    购买数量 = 10 - 已有数量
                                                }
                                            }
                                        }
                                    } else {
                                        log("没有找到钻石图标")
                                    }
                                } else {
                                    log("黄石头充足")
                                    铁片黄石头 = false
                                }
                            } else {
                                swipe(736, 614, 762, 528, 500)
                                sleep(1000)
                            }
                        } else {
                            swipe(736, 614, 762, 528, 500)
                            sleep(1000)
                        }
                    } else if (光材料) {
                        var laolian = imgempt(true, 0.9, "制造详细蓝书", 906, 498, 112, 86)
                        if (laolian != null) {
                            log("识别材料数量");
                            var 当前数量 = findNumber("钻石铜钱数第二套", [686, 528, 151, 54]);
                            if (当前数量 != null) {
                                log("截取前的值为:" + 当前数量)
                                已有数量 = parseInt(当前数量.toString().slice(0, -3))
                                log("截取后的值为:" + 已有数量)
                                if (已有数量 < 200) {
                                    if (无可用材料箱) {
                                        log("材料不足,没有材料箱,准备购买")
                                        var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                        if (dinbuzuanshi1 != null) {
                                            var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                            if (当前钻石数量 != "false") {
                                                if (当前钻石数量 < 40) {
                                                    log("材料不足,钻石不足,制造完成")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "钻石不足"
                                                    }
                                                } else {
                                                    //继续购买材料
                                                    log("点击材料")
                                                    随机点击2(850, 528)
                                                    材料类型 = "材料"
                                                    购买数量 = 200 - 已有数量
                                                }
                                            }
                                        } else {
                                            log("没找到钻石图标")
                                        }
                                    } else {
                                        log("材料不足,使用材料箱")
                                        var 结果 = 单独开材料箱(params)
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else if (结果 == "无材料箱") {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "蓝书不足"
                                            }
                                            无可用材料箱 = true
                                            return "无材料箱"
                                        } else {
                                            return
                                        }
                                    }
                                } else {
                                    log("材料充足")
                                    光材料 = false
                                    swipe(736, 614, 762, 528, 500)
                                    sleep(1000)
                                }
                            } else {

                            }
                        } else {
                            log("没找到蓝书")
                            swipe(762, 528, 736, 614, 500)
                            sleep(1000)
                        }
                    } else if (光铁片) {
                        var laolian = imgempt(true, 0.9, "制造详细铁片", 598, 465, 134, 180)
                        if (laolian != null) {
                            log("识别铁片数量");
                            var 当前数量 = findNumber("钻石铜钱数第二套", [laolian.x + 45, laolian.y, 127, 43]);
                            if (当前数量 != null) {
                                已有数量 = parseInt(当前数量.toString().slice(0, -3))
                                if (已有数量 < 120) {
                                    log("铁片不足,购买,识别钻石")
                                    var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                    if (dinbuzuanshi1 != null) {
                                        var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                        if (当前钻石数量 != "false") {
                                            if (当前钻石数量 < 20) {
                                                log("铁片不足,钻石不足,制造完成")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "钻石不足"
                                                }
                                            } else {
                                                //继续购买铁片
                                                log("点击铁片")
                                                随机点击(laolian.x + 100, laolian.y, 10, 10)
                                                材料类型 = "材料"
                                                购买数量 = 120 - 已有数量
                                            }
                                        }
                                    } else {
                                        log("没有找到钻石图标")
                                    }
                                } else {
                                    log("铁片充足")
                                    识别铁片 = false
                                    return "可以制造"

                                }
                            } else {
                                swipe(736, 614, 762, 528, 500)
                                sleep(1000)
                            }
                        } else {
                            swipe(736, 614, 762, 528, 500)
                            sleep(1000)
                        }
                    }
                }
            }
        }
    }
}


function 制造蓝装(需要提升的装备) {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
            if (jizhandi != null) {
                log("制作成功")
                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标", 109, 77, 80, 57)
                if (jizhandi != null) {
                    if (需要提升的装备.includes("主武器")) {
                        var laolian = imgempt(true, 0.9, "制造(蓝弓详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通皮革")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                随机点击(1025, 659, 10, 10)
                                需要提升的装备 = 需要提升的装备.replace("主武器", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("主武器", "");
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }

                        } else {//
                            var laolian = imgempt(true, 0.9, "制造(蓝弓)", 220, 121, 354, 598)
                            if (laolian != null) {
                                log("制造(蓝弓)");
                                随机点击(laolian.x + 100, laolian.y, 10, 10)
                            } else {

                            }
                        }
                    }  else if (需要提升的装备.includes("副武器")) {
                        var laolian = imgempt(true, 0.9, "制造副武器_详细|制造副武器_详细2", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通毛发")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                随机点击(1025, 659, 10, 10)
                                需要提升的装备 = 需要提升的装备.replace("副武器", "");
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("副武器", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造副武器栏(关闭状态)|制造副武器栏(关闭状态)2", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造副武器栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级副武器_制造", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级副武器_制造,点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通副武器", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通副武器,下滑");
                                        swipe(395, 676, 394, 212, 500)
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制作武器栏_展开", 14, 136, 198, 554)
                                        if (laolian != null) {
                                            log("制作主武器栏_展开，向下滑动");
                                            swipe(86, 541, 92, 296, 2000)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("护甲")) {
                        var laolian = imgempt(true, 0.9, "制造(护甲详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("护甲", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("护甲", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级护甲(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级护甲,点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通护甲", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通护甲,下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(护甲)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(护甲)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            var laolian = imgempt(true, 0.9, "制作武器栏_展开", 14,136,198,554)
                                            if (laolian != null) {
                                                log("制作武器栏_展开，向下滑动");
                                                swipe(86,541, 92,296, 2000)
                                            } else {
                                                
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }else if (需要提升的装备.includes("头盔")) {
                        var laolian = imgempt(true, 0.9, "制造(头盔详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("头盔", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("头盔", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("头盔", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级头盔(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级头盔(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通头盔(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通头盔(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(头盔)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(头盔)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            var laolian = imgempt(true, 0.9, "制作武器栏_展开", 14,136,198,554)
                                            if (laolian != null) {
                                                log("制作武器栏_展开，向下滑动");
                                                swipe(86,541, 92,296, 2000)
                                            } else {
                                                
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("戒指")) {
                        var laolian = imgempt(true, 0.9, "制造(戒指详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通矿物")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("戒指", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("戒指", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("戒指", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级戒指(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级戒指(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通戒指(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通戒指(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(戒指)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(戒指)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            swipe(107, 607, 131, 400, 2000)
                                            sleep(2000)
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("项链")) {
                        var laolian = imgempt(true, 0.9, "制造(项链详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通矿物")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("项链", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("项链", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("项链", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级项链(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级项链(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通项链(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通项链(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(项链)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(项链)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            swipe(107, 607, 131, 400, 2000)
                                            sleep(2000)
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("甲绑")) {
                        var laolian = imgempt(true, 0.9, "制造(甲绑详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("甲绑", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("甲绑", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("甲绑", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级甲绑(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级甲绑(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通甲绑(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通甲绑(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(甲绑)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(甲绑)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("耳环")) {
                        var laolian = imgempt(true, 0.9, "制造(耳环详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("耳环", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("耳环", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("耳环", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级耳环(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级耳环(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通耳环(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通耳环(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(耳环)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(耳环)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            swipe(107, 607, 131, 400, 2000)
                                            sleep(2000)
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("手套")) {
                        var laolian = imgempt(true, 0.9, "制造(手套详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("手套", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("手套", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("手套", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级手套(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级手套(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通手套(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通手套(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(手套)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(手套)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("靴子")) {
                        var laolian = imgempt(true, 0.9, "制造(靴子详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("靴子", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("靴子", "");
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("靴子", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级靴子(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级靴子(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通靴子(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通靴子(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(靴子)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(靴子)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("斗篷")) {
                        var laolian = imgempt(true, 0.9, "制造(斗篷详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通铁矿")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("斗篷", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造装备栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造装备栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级斗篷(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级斗篷(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通斗篷(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通斗篷(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(斗篷)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(斗篷)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("腰带")) {
                        var laolian = imgempt(true, 0.9, "制造(腰带详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通毛发")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("腰带", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("腰带", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("腰带", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级腰带(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级腰带(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通腰带(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通腰带(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(腰带)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(腰带)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            swipe(107, 607, 131, 400, 2000)
                                            sleep(2000)
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("肩甲")) {
                        var laolian = imgempt(true, 0.9, "制造(肩甲详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            var 结果 = 识别制造材料("普通木材")
                            if (结果 == "可以制造") {
                                log("点击制造")
                                需要提升的装备 = 需要提升的装备.replace("肩甲", "");
                                随机点击(1025, 659, 10, 10)
                            } else if (结果 == "无货") {
                                需要提升的装备 = 需要提升的装备.replace("肩甲", "");
                            } else if (结果 == "蓝书不足") {
                                if (需要提升的装备.includes("手镯")) {
                                    需要提升的装备 = "手镯"
                                } else {
                                    return "制造完成"
                                }
                            } else if (结果 == "钻石不足") {
                                需要提升的装备 = ""
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                            需要提升的装备 = 需要提升的装备.replace("肩甲", "");

                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "蓝级肩甲(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("蓝级肩甲(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "普通肩甲(制造)", 211, 120, 148, 599)
                                    if (laolian != null) {
                                        log("普通肩甲(制造),下滑");
                                        for (let index = 0; index < 3; index++) {
                                            swipe(395, 676, 394, 212, 500)
                                        }
                                    } else {
                                        var laolian = imgempt(true, 0.9, "制造栏(肩甲)", 19, 135, 226, 584)
                                        if (laolian != null) {
                                            log("点击制造栏(肩甲)");
                                            随机点击(laolian.x, laolian.y, 10, 10)
                                        } else {
                                            swipe(107, 607, 131, 400, 2000)
                                            sleep(2000)
                                        }
                                    }
                                }
                            }
                        }
                    } else if (需要提升的装备.includes("手镯")) {
                        var laolian = imgempt(true, 0.9, "制造(手镯详细)", 674, 237, 191, 160)
                        if (laolian != null) {
                            log("点击制造")
                            需要提升的装备 = 需要提升的装备.replace("手镯", "");
                            随机点击(1025, 659, 10, 10)
                            需要提升的装备 = 需要提升的装备.replace("手镯", "");
                        } else {//
                            var laolian = imgempt(true, 0.9, "制造首饰栏(关闭状态)", 19, 135, 226, 584)
                            if (laolian != null) {
                                log("点击制造首饰栏");
                                随机点击(laolian.x, laolian.y, 10, 10)
                            } else {//
                                var laolian = imgempt(true, 0.9, "绿级手镯(制造)", 211, 120, 148, 599)
                                if (laolian != null) {
                                    log("绿级手镯(制造),点击");
                                    随机点击(laolian.x + 100, laolian.y, 10, 10)
                                } else {
                                    var laolian = imgempt(true, 0.9, "制造栏(手镯)", 19, 135, 226, 584)
                                    if (laolian != null) {
                                        log("点击制造栏(手镯)");
                                        随机点击(laolian.x, laolian.y, 10, 10)
                                    } else {
                                        swipe(107, 607, 131, 400, 2000)
                                        sleep(2000)
                                    }
                                }
                            }
                        }
                    } else {
                        log("制造完成")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            return "制造完成"
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                    if (jizhandi != null) {
                        log("点击菜单_制造");
                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("主页点击菜单");
                            随机点击(1238, 36, 10, 10)
                        } else {
                            var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                            if (zhunmen != null) {
                                log("专门制作,鉴别金币");//
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                        if (当前铜钱数量 <= 600000) {
                                            log("铜钱不足,制造完成")
                                            总提示 = 总提示 + "铜钱不足"
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "制造完成"
                                            }
                                        } else {
                                            随机点击(zhunmen.x - 630, zhunmen.y, 10, 10)
                                        }
                                    } else {
                                        log("没有找到铜钱")
                                        sleep(3000)
                                    }
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 识别并返回识别坐标及图片(mode, par, imgname, x, y, w, h) {
    try {
        var img = captureScreen();
    } catch (error) {
        log("截图报错")
    }
    var 分割 = imgname.split("|")
    var 图片 = ""
    var 存储数组;
    var imgxy = null
    for (let index = 0; index < 分割.length; index++) {
        try {
            var temp = images.read("./picture/" + 分割[index] + ".png");
            if (temp != null) {
                if (mode) {
                    imgxy = images.findImage(img, temp, { region: [x, y, w, h], threshold: par }) //AreaSeekImg(par, img, temp, x, y, w, h)
                } else {
                    imgxy = images.findImage(img, temp, { threshold: par })// FullSeekImg(par, img, temp);
                }
                temp.recycle();
                if (imgxy != null) {
                    图片 = 分割[index]
                    break;
                } else {

                }
            } else {
                log("没有:" + 分割[index] + "这张图")
            }
        } catch (error) {
            log("识别并返回识别坐标及图片,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
            if (error.toString().includes("CvException")) {
                log("openCv报错,退出脚本")
                images.save(img, "/sdcard/错误大图.png", "png", 100);
                images.save(temp, "/sdcard/错误小图.png", "png", 100);
                //log("可用内存" + device.getAvailMem())
                // alert("OPCV异常")

            } else {
                log("非指定报错,请检查")
                images.save(img, "/sdcard/错误大图.png", "png", 100);
                images.save(temp, "/sdcard/错误小图.png", "png", 100);
                //log("可用内存" + device.getAvailMem())
            }
        }
    }

    if (imgxy != null) {
        存储数组 = {
            x: imgxy.x,
            y: imgxy.y,
            images: 图片
        }
        return 存储数组
    }
    return imgxy;
}



function 装备蓝装() {
    var 整理 = true
    var 未找到 = 0
    var 需要穿戴的装备 = "蓝级披风(未装备)|蓝级护手(未装备)|蓝级头盔(未装备)|蓝级护甲(未装备)|蓝级腿绑(未装备)|蓝级主武器(未装备)|蓝级副武器(未装备)|蓝级靴子(未装备)|蓝级肩甲(未装备)|蓝级肩甲2(未装备)|绿级手镯(未装备)|蓝级戒指(未装备)|蓝级项链(未装备)|蓝级耳环(未装备)|蓝级戒指(未装备)|蓝级耳环(未装备)|蓝级腰带(未装备)|绿级肩甲(未装备)"
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                if (整理) {
                    log("点击整理背包")
                    随机点击(1178, 577)
                    sleep(2000)
                    log("点击装备栏")
                    随机点击2(1245, 222)
                    整理 = false
                } else {
                    var guajizhon = 识别并返回识别坐标及图片(true, 0.9, 需要穿戴的装备, 921, 112, 286, 358)
                    if (guajizhon != null) {
                        log("点击" + guajizhon.images)
                        未找到 = 0
                        随机点击(guajizhon.x + 30, guajizhon.y + 30)//
                        var bbym = imgempt(true, 0.9, "解除装备", 920, 104, 296, 408)
                        if (bbym != null) {
                            log("已经是穿戴的装备了")
                            随机点击2(1245, 222)
                            var index = 需要穿戴的装备.indexOf(guajizhon.images);
                            if (需要穿戴的装备[index - 1] == "|") {
                                需要穿戴的装备 = 需要穿戴的装备.replace("|" + guajizhon.images, "")
                            } else {
                                需要穿戴的装备 = 需要穿戴的装备.replace(guajizhon.images + "|", "")
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "安装中", 319, 478, 216, 146)
                            if (bbym != null) {
                                log("已有穿戴装备,判断是否需要替换")
                                var 截图 = captureScreen();
                                var clip = images.clip(截图, 375, 120, 177, 20);
                                var bb = images.interval(clip, "#38566E", 20)
                                var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                clip.recycle()
                                bb.recycle()
                                if (获取的所有点.length >= 100) {
                                    log("不需要替换")
                                    if (guajizhon.images == "蓝级戒指(未装备)" || guajizhon.images == "蓝级耳环(未装备)") {
                                        log("点击下一页")
                                        随机点击(526, 543)
                                        var 截图 = captureScreen();
                                        var clip = images.clip(截图, 375, 120, 177, 20);
                                        var bb = images.interval(clip, "#38566E", 20)
                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                        clip.recycle()
                                        bb.recycle()
                                        if (获取的所有点.length >= 100) {
                                            log("不需要替换")
                                            var index = 需要穿戴的装备.indexOf(guajizhon.images);
                                            if (需要穿戴的装备[index - 1] == "|") {
                                                需要穿戴的装备 = 需要穿戴的装备.replace("|" + guajizhon.images, "")
                                            } else {
                                                需要穿戴的装备 = 需要穿戴的装备.replace(guajizhon.images + "|", "")
                                            }
                                        } else {
                                            随机点击(guajizhon.x + 30, guajizhon.y + 30)
                                        }
                                    } else {
                                        var index = 需要穿戴的装备.indexOf(guajizhon.images);
                                        if (需要穿戴的装备[index - 1] == "|") {
                                            需要穿戴的装备 = 需要穿戴的装备.replace("|" + guajizhon.images, "")
                                        } else {
                                            需要穿戴的装备 = 需要穿戴的装备.replace(guajizhon.images + "|", "")
                                        }
                                    }
                                } else {
                                    随机点击(guajizhon.x + 30, guajizhon.y + 30)
                                }
                            } else {

                                随机点击(guajizhon.x + 30, guajizhon.y + 30)
                            }
                        }
                        if (guajizhon.images == "绿级肩甲(未装备)") {
                            var index = 需要穿戴的装备.indexOf(guajizhon.images);
                            if (需要穿戴的装备[index - 1] == "|") {
                                需要穿戴的装备 = 需要穿戴的装备.replace("|" + guajizhon.images, "")
                            } else {
                                需要穿戴的装备 = 需要穿戴的装备.replace(guajizhon.images + "|", "")
                            }
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                        if (bbym != null) {
                            log("装备完毕,关闭背包")
                            纯回主页()
                            return "装备完毕"
                        } else {
                            未找到++
                            if (未找到 >= 9) {
                                log("装备完毕,关闭背包")
                                纯回主页()
                                return "装备完毕"
                            }
                            log("未找到可使用物品")
                            随机点击2(1245, 222)
                            swipe(1037, 432, 1036, 260, 2000)
                        }
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                    整理 = true
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        随机点击(1115, 34, 10, 10)
                        整理 = true
                    } else {

                    }
                }
            }

        }
        sleep(200)
    }
}


function 跳转购买(物资, 需求数量) {
    var 购买次数 = 0
    if (物资 == "材料") {
        var 限制价格 = 40
    } else if (物资 == "黄石头") {
        var 限制价格 = 200
    } else if (物资 == "天枰") {
        var 限制价格 = 20
    } else if (物资 == "普通红色徽章") {
        var 限制价格 = 20
    }
    var 滑动次数 = 0
    var 购买数量 = 0
    var 累计数量 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "制造拍卖行天平图标", 824, 474, 424, 167)
            if (jizhandi != null) {
                log("点击跳转到拍卖行")
                随机点击(jizhandi.x, jizhandi.y, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "拍卖行物资选择页面", 217, 177, 74, 414)
                if (jizhandi != null) {
                    log("点击进入详细")
                    随机点击(jizhandi.x + 300, jizhandi.y, 10, 10)
                } else {
                    var jizhandi = imgempt(true, 0.9, "拍卖行购买", 610, 543, 290, 93)
                    if (jizhandi != null) {
                        log("拍卖行购买")
                        随机点击2(jizhandi.x, jizhandi.y, 10, 10)//
                        var 是否购买成功 = false
                        for (let index = 0; index < 5; index++) {
                            var pmhss = imgempt(true, 0.9, "购买成功提升", 513, 51, 273, 71)//
                            if (pmhss != null) {
                                log("购买成功")
                                累计数量 = 累计数量 + 购买数量
                                购买数量 = 0
                                是否购买成功 = true
                                if (累计数量 >= 需求数量) {
                                    log("购买完成")
                                    return "购买成功"
                                }
                                break
                            } else {

                            }
                            sleep(200)
                        }
                        var jizhandi = imgempt(true, 0.9, "拍卖行_钻石不足", 450, 326, 179, 74)
                        if (jizhandi != null) {
                            if (!总提示.includes("钻石不足")) {
                                总提示 = 总提示 + "钻石不足"
                            }
                            随机点击2(546, 453)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "钻石不足"
                            }
                        } else {
                            var pmhss = imgempt(true, 0.9, "购买钻石不够", 431, 217, 433, 201)//
                            if (pmhss != null) {
                                log("钻石不足以购买")
                                if (!总提示.includes("钻石不足")) {
                                    总提示 = 总提示 + "钻石不足"
                                }
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "钻石不足"
                                }
                            } else {
                                // 随机点击(37, 32, 10, 10)
                                if (!是否购买成功) {
                                    log("购买失败")
                                }

                            }
                        }
                        购买次数++
                    } else {
                        var jizhandi = imgempt(true, 0.9, "拍卖行售价", 942, 108, 292, 115)
                        if (jizhandi != null) {
                            //开始寻找价格
                            // if (购买次数 != 0) {
                            //     log("购买完成")
                            //     return "购买成功"
                            // }
                            var 初始Y = 189
                            if (物资 == "普通红色徽章") {
                                for (let index = 0; index < 6; index++) {
                                    var 单价 = findNumber("夜鸦拍卖行", [704, 初始Y, 145, 74]);
                                    if (单价 != null && 单价 >= 3) {
                                        log("超出单价限制3,识别单价:" + 单价)
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "钻石不足"
                                        }
                                    } else {
                                        var 单价 = findNumber("夜鸦拍卖行", [971, 初始Y, 145, 74]);
                                        if (单价 != null) {
                                            if (parseFloat(单价) <= 限制价格) {
                                                log("价格:" + 单价)
                                                var 识别数量 = findNumber("钻石铜钱数", [312, 初始Y + 10, 39, 74])
                                                if (识别数量 != null) {
                                                    log("识别到数量:" + 识别数量)
                                                    购买数量 = parseInt(识别数量)
                                                    随机点击(971, 初始Y + 37)
                                                } else {
                                                    log('未找到数量,判定为1')
                                                    购买数量 = 1
                                                    随机点击(971, 初始Y + 37)
                                                }
                                                break
                                            } else {
                                                log("高于限制价格:" + 单价)
                                                if (index == 5) {
                                                    滑动次数++
                                                    swipe(697, 508, 699, 300, 2000)
                                                    sleep(2000)
                                                }
                                            }
                                        } else {
                                            log("未找到价格")
                                            swipe(797, 393, 789, 346, 2000)
                                        }
                                    }

                                    初始Y = 初始Y + 74
                                }
                            } else {
                                for (let index = 0; index < 6; index++) {
                                    var 单价 = findNumber("夜鸦拍卖行", [971, 初始Y, 145, 74]);
                                    if (单价 != null) {
                                        if (parseFloat(单价) <= 限制价格) {
                                            log("价格:" + 单价)
                                            var 识别数量 = findNumber("钻石铜钱数", [312, 初始Y + 10, 39, 74])
                                            if (识别数量 != null) {
                                                log("识别到数量:" + 识别数量)
                                                购买数量 = parseInt(识别数量)
                                                随机点击(971, 初始Y + 37)
                                            } else {
                                                log('未找到数量,判定为1')
                                                购买数量 = 1
                                                随机点击(971, 初始Y + 37)
                                            }
                                            break
                                        } else {
                                            log("高于限制价格:" + 单价)
                                            if (index == 5) {
                                                滑动次数++
                                                swipe(697, 508, 699, 300, 2000)
                                                sleep(2000)
                                            }
                                        }
                                    } else {
                                        log("未找到价格")
                                        swipe(797, 393, 789, 346, 2000)
                                    }
                                    初始Y = 初始Y + 74
                                }
                            }

                            if (滑动次数 > 5) {
                                log("拍卖行无货")
                                if (!总提示.includes("拍卖行无货")) {
                                    总提示 = 总提示 + "拍卖行无货"
                                }
                                return "无货"
                            }
                        } else {
                            var jizhandi = imgempt(true, 0.9, "拍卖行页", 17, 2, 226, 76)
                            if (jizhandi != null) {
                                if (购买次数 != 0) {
                                    log("还在拍卖行页,点击退出")
                                    随机点击(37, 32, 10, 10)
                                } else {
                                    log("还在拍卖行页,等待")
                                }
                            } else {
                                log("不在拍卖行页了")
                                return
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 开始委托() {
    var 打印 = 0
    var 重复计时 = new Date().getTime()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            节电模式判断掉线时间戳 = new Date().getTime()
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {//
                var zhuchengzahuo = imgempt(true, 0.9, "委托制造成功", 782, 68, 110, 87)
                if (zhuchengzahuo != null) {
                    log("点击关闭成功页面")
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    for (let index = 0; index < 3; index++) {
                        随机点击2(79, 222, 10, 10)
                    }
                } else {
                    var zhuchengzahuo = imgempt(true, 0.9, "确认制作", 371, 334, 549, 367)
                    if (zhuchengzahuo != null) {
                        log("确认制作")
                        随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                        for (let index = 0; index < 3; index++) {
                            随机点击2(79, 222, 10, 10)
                        }
                    } else {
                        var zhuchengzahuo = imgempt(true, 0.9, "制作(委托)", 389, 369, 538, 345)
                        if (zhuchengzahuo != null) {
                            log("点击制作")
                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                        } else {

                            var zhuchengzahuo = imgempt(true, 0.9, "勾选可制造", 855, 640, 64, 58)
                            if (zhuchengzahuo != null) {
                                log("勾选可制造");
                                随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                            } else {

                            var zhuchengzahuo = imgempt(true, 0.9, "可制作", 251, 201, 71, 418)
                            if (zhuchengzahuo != null) {
                                log("可制作");
                                随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                重复计时 = new Date().getTime()
                                if (parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000 >= 3600) {
                                    log("时间到了,结束委托")
                                    storage.put("今日委托", new Date().getDate())
                                    return "结束委托"
                                } else {
                                    打印++
                                    if (打印 >= 10) {
                                        打印 = 0
                                        log("委托时间:" + parseInt(parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000) + "秒")
                                    }
                                }
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "已勾选可制造|已勾选可制造2", 580, 635, 591, 73)
                                if (zhuchengzahuo != null) {
                                    var zhuchengzahuo = imgempt(true, 0.9, "没有可制造的委托|没有可制造的委托2|没有可制造的委托3", 569, 444, 353, 107)
                                    if (zhuchengzahuo != null) {
                                        log("没有可制造的委托,刷新");
                                        sleep(random(3000, 6000))
                                        // 随机点击(79, 222, 10, 10)
                                        控制点击(1063, 654, 140, 27)
                                        重复点击坐标次数 = 0
                                        if (parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000 >= 3600) {
                                            log("时间到了,结束委托")
                                            storage.put("今日委托", new Date().getDate())
                                            return "结束委托"
                                        } else {
                                            if (parseInt(new Date().getTime()) / 1000 - parseInt(重复计时) / 1000 >= 1200) {
                                                log("太久未刷到,离开委托")
                                                storage.put("今日委托", new Date().getDate())
                                                return "结束委托"
                                            } else {
                                                打印++
                                                if (打印 >= 10) {
                                                    打印 = 0
                                                    log("委托时间:" + parseInt(parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000) + "秒")
                                                }
                                            }
                                        }
                                    } else {
                                        log("点击第一栏")
                                        随机点击2(547, 244, 10, 10)
                                        if (parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000 >= 3600) {
                                            log("时间到了,结束委托")
                                            storage.put("今日委托", new Date().getDate())
                                            return "结束委托"
                                        } else {
                                            打印++
                                            if (打印 >= 10) {
                                                打印 = 0
                                                log("委托时间:" + parseInt(parseInt(new Date().getTime()) / 1000 - parseInt(委托时间记录) / 1000) + "秒")
                                            }
                                        }
                                    }
                                } else {
                                    
                                        var zhuchengzahuo = imgempt(true, 0.9, "委托制作", 948, 318, 190, 137)
                                        if (zhuchengzahuo != null) {
                                            log("委托制作");
                                            随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                            if (zhuchengzahuo != null) {
                                                log("主城委托图标");
                                                随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    for (let index = 0; index < 3; index++) {
                                                        swipe(133, 356, 123, 91, 500)
                                                    }
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 学习制造术(mode) {
    log("学习制造术")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jizhandi = imgempt(true, 0.9, "制作图标", 109, 74, 668, 63)
            if (jizhandi != null) {
                if (mode == "每日制造") {
                    var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                    if (tongqian != null) {
                        var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                        if (当前铜钱数量 != "false") {
                            var json = {
                                "设备id": 设备id,
                                "type": "铜钱数",
                                "铜钱数量": 当前铜钱数量
                            }
                            发送数据至中控("fragmentaryState", json)
                            if (mode == "每日制造") {
                                if (当前铜钱数量 <= 1000000) {
                                    log("铜钱不足300w")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "铜钱不足"
                                    }
                                } else {
                                    var 剩余铜钱可制作数量 = (当前铜钱数量 - 1000000) / 25000 / 100
                                    if (剩余铜钱可制作数量 < 1) {
                                        剩余铜钱可制作数量 = 1
                                        // var 结果 = 纯回主页()
                                        // if (结果 == "掉线") {
                                        //     return "掉线"
                                        // } else {
                                        log("剩余铜钱不足开启最大值箱子")
                                        // return 制作职业
                                        // }
                                    }
                                    log("制作图标");
                                    var x坐标 = parseInt(jizhandi.x)
                                    var 制作职业 = ""
                                    if (x坐标 > 586) {
                                        log("首饰职业")
                                        制作职业 = "首饰职业"
                                    } else if (x坐标 > 430) {
                                        log("法师职业")
                                        制作职业 = "法师职业"
                                    } else if (x坐标 > 267) {
                                        log("远程职业")
                                        制作职业 = "远程职业"
                                    } else {
                                        log("近战职业")
                                        制作职业 = "近战职业"
                                    }
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    var 结果 = 使用材料箱(制作职业, mode, 剩余铜钱可制作数量)
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return 制作职业
                                    }
                                }
                            } else {
                                if (当前铜钱数量 <= 500000) {
                                    alert("铜钱不足,请检查")
                                    exit()
                                } else {
                                    随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                }
                            }

                        } else {
                            log("没有找到铜钱")
                            sleep(3000)
                        }
                    }


                } else {
                    var laolian = imgempt(true, 0.9, "老练的制作术", 10, 618, 194, 97)
                    if (laolian != null) {
                        alert("老练的制作术")
                        exit()
                    } else {
                        var shulian = imgempt(true, 0.9, "熟练的制作术", 10, 618, 194, 97)
                        if (shulian != null) {
                            alert("熟练的制作术")
                            exit()
                        } else {
                            log("制作图标");
                            var x坐标 = parseInt(jizhandi.x)
                            var 制作职业 = ""
                            if (x坐标 > 586) {
                                log("首饰职业")
                                制作职业 = "首饰职业"
                            } else if (x坐标 > 430) {
                                log("法师职业")
                                制作职业 = "法师职业"
                            } else if (x坐标 > 267) {
                                log("远程职业")
                                制作职业 = "远程职业"
                            } else {
                                log("近战职业")
                                制作职业 = "近战职业"
                            }
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            var 结果 = 使用材料箱(制作职业)
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                var 结果 = 提升熟练度()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {

                                }
                            }
                        }
                    }
                }
            } else {
                var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造", 958, 87, 321, 499)
                if (jizhandi != null) {
                    log("点击菜单_制造");
                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                        if (zhunmen != null) {
                            log("专门制作,鉴别金币");//
                            var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                            if (tongqian != null) {
                                var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                if (当前铜钱数量 != "false") {
                                    var json = {
                                        "设备id": 设备id,
                                        "type": "铜钱数",
                                        "铜钱数量": 当前铜钱数量
                                    }
                                    发送数据至中控("fragmentaryState", json)
                                    if (mode == "每日制造") {
                                        if (当前铜钱数量 <= 1000000) {
                                            log("铜钱不足300w")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "铜钱不足"
                                            }
                                        } else {
                                            随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                        }
                                    } else {
                                        if (当前铜钱数量 <= 500000) {
                                            alert("铜钱不足,请检查")
                                            exit()
                                        } else {
                                            随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                        }
                                    }

                                } else {
                                    log("没有找到铜钱")
                                    sleep(3000)
                                }
                            }
                        } else {
                            var zhunmen = imgempt(true, 0.9, "确认学习", 644, 418, 230, 76)
                            if (zhunmen != null) {
                                log("确认学习");
                                随机点击(zhunmen.x, zhunmen.y, 10, 10)
                            } else {
                                var zhunmen = imgempt(true, 0.9, "学习", 504, 618, 281, 90)
                                if (zhunmen != null) {
                                    log("学习");
                                    随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                } else {
                                    var zhunmen = imgempt(true, 0.9, "请选择制作术", 626, 571, 180, 96)
                                    if (zhunmen != null) {
                                        log("随机选择制作术");
                                        var 随机值 = random(1, 4)
                                        if (随机值 == 1) {
                                            随机点击(215, 333, 10, 10)
                                        } else if (随机值 == 2) {
                                            随机点击(494, 333, 10, 10)
                                        } else if (随机值 == 3) {
                                            随机点击(779, 320, 10, 10)
                                        } else if (随机值 == 4) {
                                            随机点击(1080, 328, 10, 10)
                                        }

                                    } else {
                                        var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (bbym != null) {
                                            log("学习制造术,退出节电");
                                            swipe(566, 389, 968, 226, 500)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 提升熟练度() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var jizhandi = imgempt(true, 0.9, "老练的制作术", 10, 618, 194, 97)
            if (jizhandi != null) {
                alert("老练的制作术")
                exit()
            } else {
                var jizhandi = imgempt(true, 0.9, "熟练的制作术", 10, 618, 194, 97)
                if (jizhandi != null) {
                    alert("熟练的制作术")
                    exit()
                } else {
                    var jizhandi = imgempt(true, 0.9, "制作成功", 561, 146, 177, 161)
                    if (jizhandi != null) {
                        log("制作成功")
                        随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                    } else {
                        var jizhandi = imgempt(true, 0.9, "制作加10", 532, 368, 137, 74)
                        if (jizhandi != null) {
                            log("点击+10")
                            for (let index = 0; index < 3; index++) {
                                随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                            }
                            随机点击(725, 497, 10, 10)
                            随机点击2(940, 658, 10, 10)
                        } else {
                            var jizhandi = imgempt(true, 0.9, "制作图标", 109, 74, 668, 63)
                            if (jizhandi != null) {
                                var jizhandi = imgempt(true, 0.9, "材料制作栏(关闭状态)|材料制作栏(关闭状态)2", 9, 127, 255, 529)
                                if (jizhandi != null) {//
                                    log("点击打开材料栏")
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var guajizhon = imgempt(true, 0.9, "制作栏绿色矿物(点出来后)|制作栏绿色毛发(点出来后)|制作栏绿色皮革(点出来后)|制作栏绿色铁矿(点出来后)", 658, 208, 221, 201)////这里判定制作页面材料
                                    if (guajizhon != null) {
                                        log("点击输入制作数量")
                                        随机点击(789, 662, 10, 10)
                                    } else {
                                        var guajizhon = imgempt(true, 0.9, "制作栏绿色矿物|制作栏绿色毛发|制作栏绿色皮革|制作栏绿色铁矿", 212, 127, 237, 107)//这里判定点击种类
                                        if (guajizhon != null) {
                                            log("点击材料栏材料")
                                            随机点击(guajizhon.x + 100, guajizhon.y, 10, 10)
                                        } else {
                                            log("没找到材料栏")
                                            swipe(120, 560, 113, 161, 500)
                                        }
                                    }
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "菜单_制造|菜单_制造2", 958, 87, 321, 499)
                                if (jizhandi != null) {
                                    log("点击菜单_制造");
                                    随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {
                                        var zhunmen = imgempt(true, 0.9, "专门制作", 775, 59, 354, 273)
                                        if (zhunmen != null) {
                                            log("专门制作");
                                            随机点击(zhunmen.x, zhunmen.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 单独开材料箱(制造材料) {
    var 整理 = true
    var 未找到 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            // var bbym = imgempt(true, 0.9, "加100", 625, 362, 116, 85)
            // if (bbym != null) {
            //     log("加100")
            //     for (let index = 0; index < 2; index++) {
            //         随机点击(bbym.x, bbym.y)
            //     }
            //     随机点击(726, 496)
            //     随机点击(733, 558)
            //     var 结果 = 纯回主页()
            //     if (结果 == "掉线") {
            //         return "掉线"
            //     } else {
            //         return "成功"
            //     }
            // } else {
            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
            if (bbym != null) {
                log("获得道具点击画面")
                随机点击2(603, 635)
            } else {
                var bbym1 = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                if (bbym1 != null) {
                    log("使用最大物品数")
                    if (制造材料 == "普通矿物") {
                        var bbym = imgempt(true, 0.9, "普通矿物", 416, 116, 450, 352)
                        if (bbym != null) {
                            log("普通矿物")
                            随机点击2(bbym.x, bbym.y)
                        } else {

                        }
                    } else if (制造材料 == "普通毛发") {
                        var bbym = imgempt(true, 0.9, "普通毛发", 416, 116, 450, 352)
                        if (bbym != null) {
                            log("普通毛发")
                            随机点击2(bbym.x, bbym.y)
                        } else {

                        }
                    } else if (制造材料 == "普通皮革") {
                        var bbym = imgempt(true, 0.9, "普通皮革", 416, 116, 450, 352)
                        if (bbym != null) {
                            log("普通皮革")
                            随机点击2(bbym.x, bbym.y)
                        } else {

                        }
                    } else if (制造材料 == "普通铁矿") {
                        var bbym = imgempt(true, 0.9, "普通铁矿", 416, 116, 450, 352)
                        if (bbym != null) {
                            log("普通铁矿")
                            随机点击2(bbym.x, bbym.y)
                        } else {

                        }
                    } else if (制造材料 == "普通木材") {
                        var bbym = imgempt(true, 0.9, "普通木材", 416, 116, 450, 352)
                        if (bbym != null) {
                            log("普通木材")
                            随机点击2(bbym.x, bbym.y)
                        } else {

                        }
                    }


                    var zhuxian = imgempt(true, 0.9, "绿级5个木材|绿级10个木材", 761, 225, 99, 81)
                    if (zhuxian != null) {
                        log("绿级5个或10个木材");
                        // 随机点击2(zhuxian.x, zhuxian.y)
                        随机点击2(zhuxian.x, zhuxian.y)
                        随机点击2(bbym1.x, bbym1.y)
                        随机点击2(bbym1.x, bbym1.y + 100)
                    } else {
                        var zhuxian = imgempt(true, 0.9, "绿级木材", 416, 116, 450, 352)
                        if (zhuxian != null) {
                            log("绿级木材");
                            // 随机点击2(zhuxian.x, zhuxian.y)
                            随机点击2(544, 554)
                        } else {

                        }
                    }
                    随机点击2(789,464)
                    随机点击2(732, 555)
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "成功"
                    }
                    // var zhuxian = imgempt(true, 0.9, "绿级5个木材|绿级10个木材", 761, 225, 99, 81)
                    // if (zhuxian != null) {
                    //     log("绿级5个或10个木材");
                    //     // 随机点击2(zhuxian.x, zhuxian.y)
                    //     随机点击2(zhuxian.x, zhuxian.y)
                    //     随机点击2(bbym1.x, bbym1.y)
                    //     随机点击2(bbym1.x, bbym1.y + 100)
                    // } else {
                    // var zhuxian = imgempt(true, 0.9, "绿级木材", 416, 116, 450, 352)
                    // if (zhuxian != null) {
                    //     log("绿级木材");
                    //     // 随机点击2(zhuxian.x, zhuxian.y)
                    //     随机点击2(544, 554)
                    // } else {
                    //     随机点击2(727, 464)
                    // }
                    // }
                } else {
                    var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                    if (bbym != null) {
                        log("背包里")
                        if (整理) {
                            log("点击整理背包")
                            随机点击(1178, 577)
                            sleep(2000)
                            log("点击宝箱栏")
                            随机点击2(1249, 309)
                            整理 = false
                        } else {
                            var guajizhon =获取材料箱种类("普通材料箱")// imgempt(true, 0.9, "普通材料箱", 918, 104, 305, 433)//
                            if (guajizhon != null) {
                                未找到 = 0
                                for (let index = 0; index < 2; index++) {
                                    随机点击2(guajizhon.x, guajizhon.y)
                                }
                            } else {
                                var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                if (bbym != null) {
                                    log("使用完毕,没有材料箱")
                                    纯回主页()
                                    return "无材料箱"
                                } else {
                                    随机点击2(1249, 309)
                                    log("未找到可使用物品")
                                    swipe(1037, 432, 1036, 228, 2000)
                                }
                            }
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                        if (bbym != null) {
                            log("点击背包")
                            随机点击2(bbym.x, bbym.y)
                            整理 = true
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("点击背包")
                                随机点击(1115, 34, 10, 10)
                                整理 = true
                            } else {
                                var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                if (退出 != null) {
                                    log("退出");
                                    随机点击(退出.x, 退出.y, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
            // }
        }
        sleep(200)
    }
}

function 使用材料箱(制作职业, mode, 剩余铜钱可制作数量) {
    var 整理 = true
    var 未找到 = 0
    var 开一次皮革 = false
    if (制作职业 == "装备制造,主武器") {
        开一次皮革 = true
        制作职业 = "装备制造"
    }
    var 开启次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var bbym = imgempt(true, 0.9, "加100", 625, 362, 116, 85)
            if (bbym != null) {
                log("加100")
                for (let index = 0; index < 2; index++) {
                    随机点击(bbym.x, bbym.y)
                }
                随机点击(726, 496)
                随机点击(733, 558)
                开一次皮革 = false
            } else {
                var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                if (bbym != null) {
                    log("获得道具点击画面")
                    随机点击2(603, 635)
                } else {
                    var bbym1 = imgempt(true, 0.9, "使用物品MAX", 634, 334, 300, 321)
                    if (bbym1 != null) {
                        log("使用最大物品数")
                        if (制作职业 == "首饰职业") {
                            var bbym = imgempt(true, 0.9, "普通矿物", 416, 116, 450, 352)
                            if (bbym != null) {
                                log("普通矿物")
                                随机点击2(bbym.x, bbym.y)
                            } else {

                            }
                        } else if (制作职业 == "法师职业") {
                            var bbym = imgempt(true, 0.9, "普通毛发", 416, 116, 450, 352)
                            if (bbym != null) {
                                log("普通毛发")
                                随机点击2(bbym.x, bbym.y)
                            } else {

                            }
                        } else if (制作职业 == "远程职业" || 开一次皮革) {
                            var bbym = imgempt(true, 0.9, "普通皮革", 416, 116, 450, 352)
                            if (bbym != null) {
                                log("普通皮革")
                                随机点击2(bbym.x, bbym.y)
                            } else {

                            }
                        } else if (制作职业 == "近战职业" || 制作职业 == "装备制造") {
                            var bbym = imgempt(true, 0.9, "普通铁矿", 416, 116, 450, 352)
                            if (bbym != null) {
                                log("普通铁矿")
                                随机点击2(bbym.x, bbym.y)
                            } else {

                            }
                        }
                        var zhuxian = imgempt(true, 0.9, "绿级5个木材|绿级10个木材", 761, 225, 99, 81)
                        if (zhuxian != null) {
                            log("绿级5个或10个木材");
                            // 随机点击2(zhuxian.x, zhuxian.y)
                            随机点击2(zhuxian.x, zhuxian.y)
                            if (mode = "每日制作") {
                                随机点击2(bbym1.x, bbym1.y)
                                随机点击2(bbym1.x, bbym1.y + 100)
                                for (let index = 0; index < 3; index++) {
                                    随机点击2(1246, 306, 10, 10)
                                }

                            } else {
                                随机点击2(bbym1.x, bbym1.y)
                                随机点击2(bbym1.x, bbym1.y + 100)
                            }
                        } else {
                            var zhuxian = imgempt(true, 0.9, "绿级木材", 416, 116, 450, 352)
                            if (zhuxian != null) {
                                log("绿级木材");
                                // 随机点击2(zhuxian.x, zhuxian.y)
                                随机点击2(544, 554)
                            } else {
                                if (开一次皮革) {
                                    随机点击2(727, 464)
                                } else {
                                    if (mode = "每日制作") {
                                        随机点击2(bbym1.x, bbym1.y)
                                        随机点击2(bbym1.x, bbym1.y + 100)
                                        for (let index = 0; index < 3; index++) {
                                            随机点击2(1246, 306, 10, 10)
                                        }
                                        开启次数++
                                        if (开启次数 >= 剩余铜钱可制作数量) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "成功"
                                            }
                                        }
                                    } else {
                                        随机点击2(bbym1.x, bbym1.y)
                                        随机点击2(bbym1.x, bbym1.y + 100)
                                    }
                                }
                            }
                        }

                    } else {
                        var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                        if (bbym != null) {
                            log("背包里")
                            if (整理) {
                                log("点击整理背包")
                                随机点击(1178, 577)
                                sleep(2000)
                                log("点击宝箱栏")
                                随机点击2(1249, 309)
                                整理 = false
                            } else {
                                var guajizhon = 获取材料箱种类("普通材料箱")
                                // var guajizhon = imgempt(true, 0.9, "普通材料箱", 918, 104, 305, 433)//
                                if (guajizhon != null) {
                                    未找到 = 0
                                    for (let index = 0; index < 2; index++) {
                                        随机点击2(guajizhon.x, guajizhon.y)
                                    }
                                } else {
                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                    if (bbym != null) {
                                        log("使用完毕,没有材料箱")
                                        纯回主页()
                                        return "使用完毕"
                                    } else {
                                        未找到++
                                        if (未找到 >= 9) {
                                            log("没有材料箱")
                                            纯回主页()
                                            return "使用完毕"
                                        }
                                        log("未找到可使用物品")
                                        swipe(1037, 432, 1036, 228, 2000)
                                    }
                                }
                            }
                        } else {
                            var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                            if (bbym != null) {
                                log("点击背包")
                                随机点击2(bbym.x, bbym.y)
                                整理 = true
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("点击背包")
                                    随机点击(1115, 34, 10, 10)
                                    整理 = true
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 获取材料箱种类(params) {
    var guajizhon = imgempt(true, 0.9, "普通材料箱", 918, 104, 305, 433)//
    if (guajizhon != null) {
        log("找到材料箱")
        if (params=="普通材料箱") {
            var bbym = cor(true, 15, 918, 104, 305, 433, "#6e5d53",[[-8,2,"#54b5d5"],[-4,-8,"#734837"],[-22,-12,"#1e1e1c"],[23,-10,"#24201d"],[18,-19,"#262523"],[-21,-16,"#1f1e1c"]])
            if (bbym != null) {
                return bbym
            }
        }else if (params=="绿级材料箱") {
            var bbym = cor(true, 15, 918, 104, 305, 433, "#26424e",[[-11,-2,"#1f76a3"],[-6,-8,"#282e3a"],[-15,-15,"#2c3d35"],[-24,-16,"#27332f"],[21,-18,"#262f2a"],[-21,-18,"#293430"]])
            if (bbym != null) {
                return bbym
            }
        }else if (params=="蓝级材料箱") {
            var bbym = cor(true, 15, 918, 104, 305, 433, "#728e92",[[-9,-2,"#1d7c9a"],[0,-3,"#a27c67"],[-18,-15,"#2c4655"],[-26,-13,"#263643"],[21,4,"#2c3e4a"],[-21,-3,"#a4967b"]])
            if (bbym != null) {
                return bbym
            }
        }
    }else{
        log("未找到材料箱")
    }
    return null
}



function 判断激战地商人是否只兑换紫徽章() {
    log("判断激战地商人是否只兑换紫徽章")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 488, 240, 62, 244)
            if (dinwei != null) {
                log("物品信息(获取方式),点击跳转");
                随机点击(dinwei.x + 41, dinwei.y + 9, 10, 10)
            } else {
                var jizhandi = imgempt(true, 0.9, "制作图标", 109, 77, 80, 57)
                if (jizhandi != null) {
                    var laolian = imgempt(true, 0.9, "二转书详细(制造)2|二转书详细(制造)", 651, 342, 240, 126)
                    if (laolian != null) {
                        var laolian = imgempt(true, 0.9, "紫级红色徽章(制造)", 590, 478, 166, 113)
                        if (laolian != null) {
                            swipe(774, 605, 769, 523, 500)
                            sleep(2000)
                            log("识别紫色徽章数量");
                            var 当前数量 = findNumber("钻石铜钱数第二套", [685, 519, 67, 36]);
                            if (当前数量 != null) {
                                已有数量 = parseInt(当前数量.slice(0, -1))
                                log("紫色徽章数量:" + 已有数量)
                                if (已有数量 >= 3) {
                                    log("紫级红色徽章充足,不再兑换紫级徽章")
                                    storage.put("兑换紫级徽章", false)
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "不兑换紫级徽章"
                                    }
                                } else {
                                    log("紫级红色徽章不足,且无法购买")
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "只兑换紫级徽章"
                                    }
                                }
                            } else {
                                log("未能识别到紫级红色徽章数量")
                            }
                        } else {
                            log("紫级红色徽章(制造)")
                            swipe(762, 528, 736, 614, 500)
                        }
                    } else {
                        var laolian = imgempt(true, 0.9, "二转书列表(制造)", 187, 97, 375, 447)
                        if (laolian != null) {
                            log("点击二转书列表")
                            随机点击2(laolian.x, laolian.y, 10, 10)
                        } else {
                            log("没有找到二转书列表")
                        }
                    }
                } else {
                    var qiagnhua = imgempt(true, 0.9, "职业页", 2, 3, 230, 81)
                    if (qiagnhua != null) {
                        log("职业页");//
                        var qiagnhua = imgempt(true, 0.9, "职业页E", 187, 137, 101, 210)
                        if (qiagnhua != null) {
                            log("已二转不再兑换紫级徽章")
                            storage.put("兑换紫级徽章", false)
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "不兑换紫级徽章"
                            }
                        } else {
                            var qiagnhua = imgempt(true, 0.9, "已二转", 130, 422, 278, 82)
                            if (qiagnhua != null) {
                                log("已识别二转不再兑换紫级徽章")
                                storage.put("兑换紫级徽章", false)
                                storage.put("二转记录", "已二转")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "不兑换紫级徽章"
                                }
                            } else {
                                log("点击二转并点击转职书")
                                随机点击(242, 193)
                                sleep(1500)
                                log("点击跳转")
                                随机点击(1012, 646)
                            }
                        }
                    } else {
                        var qiagnhua = imgempt(true, 0.9, "菜单_职业", 956, 88, 318, 540)//956,88,318,540
                        if (qiagnhua != null) {
                            log("点击进入菜单_职业");
                            随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击2(1238, 36, 10, 10)
                            } else {
                                var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                                if (jizhandi != null) {
                                    log("关闭激战地选择弹窗");
                                    随机点击(38, 29, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 开始兑换(mode) {
    var 材料箱点击次数 = 0
    var 绿级 = false
    var 普通 = false
    var 阴卡 = true
    var 阳卡 = true
    var 滑动次数 = 0

    var 正常购买材料 = "激战地普通材料箱|激战地绿级材料箱|激战地商店_活动收藏币"//|激战地商店_紫级徽章

    if (mode.includes("激战地铜钱箱") || mode.includes("激战地经验药")) {
        正常购买材料 = 正常购买材料 + "|" + mode
    }
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    if (mode == "阴阳卡") {
                        var jizhandi = imgempt(true, 0.9, "购买阴卡详细", 530, 190, 235, 90)
                        if (jizhandi != null) {
                            log("购买阴卡详细");
                            随机点击(725, 635, 10, 10)
                            阴卡 = false
                        } else {
                            var jizhandi = imgempt(true, 0.9, "购买阳卡详细", 530, 190, 235, 90)
                            if (jizhandi != null) {
                                log("购买阳卡详细");
                                随机点击(725, 635, 10, 10)
                                阳卡 = false
                            } else {

                            }
                        }
                    } else {
                        log("点击购买");
                        for (let index = 0; index < 3; index++) {
                            随机点击2(681, 465, 10, 10)
                        }
                        随机点击2(728, 636, 10, 10)
                        材料箱点击次数 = 0
                        if (mode == "紫级徽章") {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "购买成功"
                            }
                        } else {
                            if (绿级 && 普通) {
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "购买成功"
                                }
                            }
                        }
                    }
                } else {
                    var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                    if (jizhandi != null) {
                        log("点击确认进入激战地");
                        随机点击2(718, 494, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var jizhandi = imgempt(true, 0.9, "激战地兑换商店图标", 5, 46, 98, 376)
                        if (jizhandi != null) {
                            log("激战地兑换商店图标");
                            随机点击(jizhandi.x, jizhandi.y, 10, 10)
                        } else {



                            var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                            if (jizhandi != null) {
                                log("关闭激战地选择弹窗");
                                随机点击(38, 29, 10, 10)
                            } else {
                                if (mode == "阴阳卡") {
                                    var jizhandi = imgempt(true, 0.9, "激战地商店页", 3, 1, 272, 73)
                                    if (jizhandi != null) {
                                        log("激战地商店页")
                                        if (阴卡) {
                                            var jizhandi = imgempt(true, 0.9, "激战地商店阴卡", 6, 74, 166, 628)
                                            if (jizhandi != null) {
                                                log("激战地商店阴卡");
                                                随机点击2(jizhandi.x + 100, jizhandi.y, 10, 10)
                                                var jizhandi = imgempt(true, 0.9, "激战地徽章不够|激战地徽章不够2|激战地徽章不够3|激战地徽章不够4", 520, 57, 260, 63)
                                                if (jizhandi != null) {
                                                    log("激战地积分不足")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "购买成功"
                                                    }
                                                }
                                            } else {
                                                log("没找到阴卡")
                                                swipe(140, 560, 144, 349, 2000)
                                            }
                                        } else if (阳卡) {
                                            var jizhandi = imgempt(true, 0.9, "激战地商店阳卡", 6, 74, 166, 628)
                                            if (jizhandi != null) {
                                                log("激战地商店阳卡");
                                                随机点击2(jizhandi.x + 100, jizhandi.y, 10, 10)
                                                var jizhandi = imgempt(true, 0.9, "激战地徽章不够|激战地徽章不够2|激战地徽章不够3|激战地徽章不够4", 520, 57, 260, 63)
                                                if (jizhandi != null) {
                                                    log("激战地积分不足")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "购买成功"
                                                    }
                                                }
                                            } else {
                                                log("没找到阳卡")
                                                swipe(140, 560, 144, 349, 2000)
                                            }
                                        } else {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "购买成功"
                                            }
                                        }
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "激战地商店", 8, 2, 273, 76)
                                        if (jizhandi != null) {
                                            log("激战地商店,翻页");
                                            for (let index = 0; index < 4; index++) {
                                                swipe(147, 139, 150, 620, 500)
                                            }
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                for (let index = 0; index < 3; index++) {
                                                    swipe(133, 356, 123, 91, 500)
                                                }
                                            }
                                        }
                                    }
                                } else if (mode == "紫级徽章") {
                                    var jizhandi = CoordinatesAndPictureName(true, 0.9, "激战地商店_紫级徽章", 6, 116, 191, 585)
                                    if (jizhandi != null) {
                                        log("点击材料")
                                        随机点击2(jizhandi.x + 100, jizhandi.y, 10, 10)
                                        var zhuangtai = imgempt(true, 0.9, "激战地徽章不够|激战地徽章不够2|激战地徽章不够3|激战地徽章不够4", 520, 57, 260, 63)
                                        if (zhuangtai != null) {
                                            log("激战地积分不足")
                                            log("激战地积分不足")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "购买成功"
                                            }
                                        }
                                        材料箱点击次数++
                                        if (材料箱点击次数 >= 5) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "购买成功"
                                            }
                                        }
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "激战地商店|激战地商店2", 6, 4, 269, 72)
                                        if (jizhandi != null) {
                                            log("激战地商店,翻页");
                                            if (滑动次数 >= 10) {
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "购买成功"
                                                }
                                            }
                                            滑动次数++
                                            swipe(150, 535, 147, 196, 2000)
                                            sleep(1000)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                for (let index = 0; index < 3; index++) {
                                                    swipe(133, 356, 123, 91, 500)
                                                }
                                            }
                                        }
                                        // }
                                    }
                                } else {
                                    var jizhandi = CoordinatesAndPictureName(true, 0.9, 正常购买材料, 6, 116, 191, 585)
                                    if (jizhandi != null) {
                                        log("点击材料")
                                        随机点击2(jizhandi.x + 100, jizhandi.y, 10, 10)
                                        var zhuangtai = imgempt(true, 0.9, "激战地徽章不够|激战地徽章不够2|激战地徽章不够3|激战地徽章不够4", 520, 57, 260, 63)
                                        if (zhuangtai != null) {
                                            log("激战地积分不足")
                                            if (jizhandi.图名 == "激战地商店_紫级徽章") {
                                                log("紫级徽章兑换材料不足,跳过")
                                                var regex = new RegExp(jizhandi.图名 + "\\|");
                                                if (正常购买材料.match(regex)) {
                                                    正常购买材料 = 正常购买材料.replace(jizhandi.图名 + "|", '');
                                                } else {
                                                    正常购买材料 = 正常购买材料.replace("|" + jizhandi.图名, '');
                                                }
                                            } else {
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "购买成功"
                                                }
                                            }
                                        }
                                        材料箱点击次数++
                                        if (材料箱点击次数 >= 5) {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "购买成功"
                                            }
                                        }
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "激战地商店|激战地商店2", 6, 4, 269, 72)
                                        if (jizhandi != null) {
                                            log("激战地商店,翻页");
                                            if (滑动次数 >= 10) {
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "购买成功"
                                                }
                                            }
                                            滑动次数++
                                            swipe(150, 535, 147, 196, 2000)
                                            sleep(1000)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                for (let index = 0; index < 3; index++) {
                                                    swipe(133, 356, 123, 91, 500)
                                                }
                                            }
                                        }
                                        // }
                                    }
                                    // }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}







function 取随机点位(区域) {
    let 随机坐标 = {}
    let 取随机区域 = 区域[random(0, 区域.length - 1)]
    随机坐标.x = random(取随机区域.起始x, 取随机区域.结束x)
    随机坐标.y = random(取随机区域.起始y, 取随机区域.结束y)
    log("取随机坐标为:" + 随机坐标)
    return 随机坐标
}

function 激战地开始改版() {
    var 未移动 = true
    var 是否已在激战地 = 0
    var 移动周期 = 0
    var 移动时间 = new Date().getTime() / 1000
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {



                var 记录距离 = 10000
                var 原地移动计次 = 0
                var 原地转圈 = false
                var 未识别到距离 = 0
                while (true) {
                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                    if (mi != null) {
                        var 剩余距离 = findNumber("距离", [584, 511, 115, 38])
                        if (剩余距离 != null) {
                            剩余距离 = parseInt(剩余距离)
                            if (剩余距离 < 记录距离) {
                                记录距离 = 剩余距离
                                原地移动计次 = 0
                                未识别到距离 = 0
                            } else if (剩余距离 - 记录距离 >= 50) {
                                log("误识别，重新记录距离")
                                记录距离 = 剩余距离
                            } else {
                                原地移动计次++
                                if (原地移动计次 >= 10) {
                                    log("原地打圈,看看任务")
                                    原地转圈 = true
                                    break
                                } else {
                                    log("可能原地移动")
                                }
                            }
                        } else {
                            未识别到距离++
                            if (未识别到距离 >= 3) {
                                break
                            }
                        }
                    } else {
                        未识别到距离++
                        if (未识别到距离 >= 3) {
                            break
                        }
                    }
                    sleep(1000)
                }

                if (原地转圈) {
                    log("激战地以原地转圈,点击回城")
                    随机点击(887, 661)
                }



            } else {
                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                if (bfzl != null) {
                    log("死亡复活")
                   
                        var 死亡等待随机时间 = random(20, 120) * 1000
                        log("死亡等待随机时间:" + 死亡等待随机时间)
                        sleep(死亡等待随机时间)
                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                        if (bfzl != null) {
                            随机点击(bfzl.x, bfzl.y, 10, 10)
                        }
                        var 随机等待恢复时间 = random(10, 20) * 1000
                        sleep(随机等待恢复时间)
                    return "死亡"
                } else {
                    var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                    if (guajizhon != null) {
                        log("死亡墓碑恢复经验，激战地开始改版");
                        var 结果 = 死亡恢复经验()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else if (结果 == "恢复完成") {
                            未移动 = true
                        }
                    } else {
                        var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                        if (bbym != null) {
                            log("死亡墓碑恢复经验，激战地开始改版颜色");
                            var 结果 = 死亡恢复经验()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else if (结果 == "恢复完成") {
                                未移动 = true
                            }
                        } else {
                            var guajizhon = imgempt(true, 0.9, "脚印|脚印2", 246, 629, 128, 86)
                            if (guajizhon != null) {
                                log("脚印")
                                if ((参数[49] && storage.get("自动激战地") == "40") || (!参数[49] && 参数[2] == 0)) {
                                    swipe(1080, 226, 1103, 530, 500)
                                    var jizhandi = imgempt(true, 0.9, "40级激战地点", 972, 164, 202, 488)
                                    if (jizhandi != null) {
                                        log("矫正40激战地位置")
                                        随机点击(jizhandi.x, jizhandi.y)
                                    } else {
                                        log("未找到40级地图名称,滑动试试")
                                        swipe(1080, 226, 1103, 530, 500)
                                    }
                                    var 随机坐标 = null;
                                    var 区域 = null
                                    var jizhan = imgempt(true, 0.9, "志同道合的聚集地|志同道合的聚集地2", 945, 166, 264, 229)
                                    if (jizhan != null) {
                                        区域 = [{ "起始x": 468, "起始y": 153, "结束x": 615, "结束y": 385 }, { "起始x": 592, "起始y": 406, "结束x": 707, "结束y": 568 }]
                                    } else {
                                        var jizhan = imgempt(true, 0.9, "必胜的聚集地|必胜的聚集地2", 945, 166, 264, 229)
                                        if (jizhan != null) {
                                            区域 = [{ "起始x": 395, "起始y": 332, "结束x": 611, "结束y": 385 }, { "起始x": 698, "起始y": 336, "结束x": 794, "结束y": 441 }]
                                        } else {
                                            var jizhan = imgempt(true, 0.9, "战义聚集地|战义聚集地2", 945, 166, 264, 229)
                                            if (jizhan != null) {
                                                区域 = [{ "起始x": 700, "起始y": 272, "结束x": 786, "结束y": 347 }, { "起始x": 679, "起始y": 324, "结束x": 754, "结束y": 403 }, { "起始x": 594, "起始y": 407, "结束x": 666, "结束y": 546 }, { "起始x": 545, "起始y": 470, "结束x": 620, "结束y": 568 }]
                                            } else {

                                            }
                                        }
                                    }
                                    if (区域 != null) {
                                        随机坐标 = 取随机点位(区域)
                                        随机点击(随机坐标.x, 随机坐标.y, 10, 10)
                                        var jizhandi = imgempt(true, 0.9, "激战地移动提示", 319, 26, 560, 676)
                                        if (jizhandi != null) {
                                            log("点击激战地移动提示")
                                            随机点击(jizhandi.x, jizhandi.y)
                                            var 非移动状态 = 0
                                            var 脚印移动时间 = new Date().getTime() / 1000
                                            while (true) {
                                                if (异常捕获() == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                                    if (mi != null) {
                                                        非移动状态 = 0
                                                        var 当前识别时间戳 = new Date().getTime() / 1000
                                                        if (当前识别时间戳 - 脚印移动时间 > 150) {
                                                            log("卡移动了,急停")
                                                            随机点击2(1231, 458)
                                                            break
                                                        } else {
                                                            log("移动中,脚印移动时间:" + (parseInt(当前识别时间戳 - 脚印移动时间)));
                                                        }

                                                        var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
                                                        if (guajizhon != null) {
                                                            log("被攻击中,逃跑");
                                                            for (let index = 0; index < 3; index++) {
                                                                随机点击2(893, 660)
                                                            }
                                                            storage.put("激战地今日逃跑次数", (parseInt(storage.get("激战地今日逃跑次数")) + 1).toString())
                                                            
                                                                ui.run(function () {
                                                                    window.运维检测.setText("♣检" + storage.get("激战地今日逃跑次数").toString())
                                                                });

                                                            
                                                                if (storage.get("激战地今日逃跑次数") >= 激战地逃跑次数限制) {
                                                                    log("逃跑次数过多结束激战地")
                                                                    threads.currentThread().interrupt()
                                                                }
                                                            return "掉线"
                                                        }
                                                        sleep(1000)
                                                    } else {
                                                        var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                        if (退出 != null) {
                                                            log("退出地图");
                                                            随机点击(退出.x, 退出.y, 10, 10)
                                                        } else {
                                                            非移动状态++
                                                            if (非移动状态 >= 5) {
                                                                log("可能到了")
                                                                break
                                                            }
                                                        }
                                                    }
                                                }
                                                sleep(200)
                                            }

                                            log("到达目的地")
                                            是否已在激战地 = 0
                                            移动时间 = new Date().getTime() / 1000
                                            if ((参数[49] && storage.get("自动激战地") == "40") || (!参数[49] && 参数[2] == 0)) {
                                                var 结果 = "完成"
                                            } else {
                                                var 结果 = 激战地随机移动()
                                            }
                                            if (结果 == "完成") {
                                                var 结果 = 激战地挂机()
                                                if (结果 == "购买药水") {
                                                    var 结果 = 激战地回城买药()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        是否已在激战地 = 0
                                                        未移动 = true
                                                    }
                                                } else if (结果 == "死亡") {
                                                    return "死亡"
                                                } else if (结果 == "重启") {
                                                    return "重启"
                                                } else if (结果 == "掉线") {
                                                    return "掉线"
                                                } else if (结果 == "已回城") {
                                                    return "已回城"
                                                }
                                            } else if (结果 == "死亡") {
                                                return "死亡"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }
                                    } else {
                                        log("区域为空")
                                    }
                                } else {
                                    log("超40级激战地点脚印");
                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                    var 非移动状态 = 0
                                    var 脚印移动时间 = new Date().getTime() / 1000
                                    while (true) {
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {
                                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                            if (mi != null) {
                                                非移动状态 = 0
                                                var 当前识别时间戳 = new Date().getTime() / 1000
                                                if (当前识别时间戳 - 脚印移动时间 > 150) {
                                                    log("卡移动了,急停")
                                                    随机点击2(1231, 458)
                                                    break
                                                } else {
                                                    log("移动中,脚印移动时间:" + (parseInt(当前识别时间戳 - 脚印移动时间)));
                                                }

                                                var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
                                                if (guajizhon != null) {
                                                    log("被攻击中,逃跑");
                                                    for (let index = 0; index < 3; index++) {
                                                        随机点击2(893, 660)
                                                    }
                                                    storage.put("激战地今日逃跑次数", (parseInt(storage.get("激战地今日逃跑次数")) + 1).toString())
                                                  
                                                        ui.run(function () {
                                                            window.运维检测.setText("♣检" + storage.get("激战地今日逃跑次数").toString())
                                                        });

                                                    
                                                        if (storage.get("激战地今日逃跑次数") >= 激战地逃跑次数限制) {
                                                            log("逃跑次数过多结束激战地")
                                                            threads.currentThread().interrupt()
                                                        }
                                                    return "掉线"
                                                }
                                                sleep(1000)
                                            } else {
                                                var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                if (退出 != null) {
                                                    log("退出地图");
                                                    随机点击(退出.x, 退出.y, 10, 10)
                                                } else {
                                                    非移动状态++
                                                    if (非移动状态 >= 5) {
                                                        log("可能到了")
                                                        break
                                                    }
                                                }
                                            }
                                        }
                                        sleep(200)
                                    }

                                    log("到达目的地")
                                    是否已在激战地 = 0
                                    移动时间 = new Date().getTime() / 1000
                                    if ((参数[49] && storage.get("自动激战地") == "40") || (!参数[49] && 参数[2] == 0)) {
                                        var 结果 = "完成"
                                    } else {
                                        var 结果 = 激战地随机移动()
                                    }
                                    if (结果 == "完成") {
                                        var 结果 = 激战地挂机()
                                        if (结果 == "购买药水") {
                                            var 结果 = 激战地回城买药()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                是否已在激战地 = 0
                                                未移动 = true
                                            }
                                        } else if (结果 == "死亡") {
                                            return "死亡"
                                        } else if (结果 == "重启") {
                                            return "重启"
                                        } else if (结果 == "掉线") {
                                            return "掉线"
                                        } else if (结果 == "已回城") {
                                            return "已回城"
                                        }
                                    } else if (结果 == "死亡") {
                                        return "死亡"
                                    } else if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "40级激战地点", 972, 164, 202, 488)
                                if (jizhandi != null) {
                                    if (参数[49]) {
                                        if (storage.get("自动激战地") == "40") {
                                            log("选择40级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                                        } else if (storage.get("自动激战地") == "45") {
                                            log("选择45级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y + 98, 10, 10)
                                        }
                                    } else {
                                        if (参数[2] == 0) {
                                            log("选择40级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y, 10, 10)
                                        } else if (参数[2] == 1) {
                                            log("选择45级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y + 98, 10, 10)
                                        } else if (参数[2] == 2) {
                                            log("选择50级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y + 196, 10, 10)
                                        } else if (参数[2] == 3) {
                                            log("选择55级激战地点");
                                            随机点击2(jizhandi.x, jizhandi.y + 285, 10, 10)
                                        } else {
                                            log("没有选择激战地等级")
                                        }
                                    }
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                } else {
                                    var guajizhon = imgempt(true, 0.9, "基尔巴德特", 1024, 55, 168, 74)
                                    if (guajizhon != null) {
                                        log("基尔巴德特")
                                        swipe(1080, 226, 1103, 530, 500)
                                    } else {
                                        var jizhandi = imgempt(true, 0.9, "激战地主城(小地图)|激战地主城(小地图)2", 115, 64, 121, 34)
                                        if (jizhandi != null) {
                                            log("点击地图");
                                            随机点击(131, 156, 10, 10)
                                        } else {
                                            var jizhandi = imgempt(true, 0.9, "到达激战地", 1, 33, 132, 230)
                                            if (jizhandi != null) {
                                                log("到达激战地,点击显示地图");
                                                随机点击(305, 71, 10, 10)
                                                sleep(1000)
                                            } else {
                                                var jizhandi = imgempt(true, 0.9, "排队成功", 502, 316, 278, 93)
                                                if (jizhandi != null) {
                                                    log("排队成功,点击进入");
                                                    随机点击(723, 448, 10, 10)
                                                    while (true) {
                                                        if (异常捕获() == "掉线") {
                                                            return "掉线"
                                                        } else {
                                                            var jizhandi = imgempt(true, 0.9, "已经登记排队了", 598, 259, 300, 109)
                                                            if (jizhandi != null) {
                                                                log("点击关闭排队中弹窗")
                                                                随机点击(547, 449, 10, 10)
                                                            } else {
                                                                var jizhandi = imgempt(true, 0.9, "频道饱满", 496, 264, 172, 90)
                                                                if (jizhandi != null) {
                                                                    log("点击关闭排队选项")
                                                                    随机点击(552, 449, 10, 10)
                                                                } else {
                                                                    var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                                                                    if (jizhandi != null) {
                                                                        log("关闭激战地选项");
                                                                        随机点击(39, 34, 10, 10)
                                                                    } else {
                                                                        var jizhandi = imgempt(true, 0.9, "到达激战地", 1, 33, 132, 230)
                                                                        if (jizhandi != null) {
                                                                            log("到达激战地");
                                                                            break
                                                                        } else {

                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        sleep(200)
                                                    }
                                                } else {
                                                    var jizhandi = imgempt(true, 0.9, "已经登记排队了", 598, 259, 300, 109)
                                                    if (jizhandi != null) {
                                                        log("排队中...")
                                                        登录点击计次 = 0
                                                        sleep(3000)
                                                    } else {
                                                        var jizhandi = imgempt(true, 0.9, "频道饱满", 496, 264, 172, 90)
                                                        if (jizhandi != null) {
                                                            log("点击确认排队...")
                                                            随机点击(736, 450, 10, 10)
                                                            sleep(3000)
                                                        } else {
                                                            var jizhandi = imgempt(true, 0.9, "激战选择4|激战选择3|激战选择|激战选择2", 327, 107, 206, 129)
                                                            if (jizhandi != null) {
                                                                重复点击坐标次数 = 0
                                                                log("点击选择第一个激战地");
                                                                随机点击2(929, 235)
                                                                var jizhandi = imgempt(true, 0.9, "已经在激战地了|已经在副本了|已经在副本里了", 510, 36, 304, 105)
                                                                if (jizhandi != null) {
                                                                    log("已经在激战地了");
                                                                    随机点击(39, 34, 10, 10)
                                                                } else {
                                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                                    if (guajizhon != null) {
                                                                        log("铜钱不足,处理")
                                                                        // 无铜钱处理()
                                                                        野外挂机刷金币()
                                                                        return "掉线"
                                                                    }
                                                                }
                                                            } else {
                                                                var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                                                                if (jizhandi != null) {
                                                                    log("点击确认进入激战地");
                                                                    随机点击2(718, 494, 10, 10)
                                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                                    if (guajizhon != null) {
                                                                        log("铜钱不足,处理")
                                                                        // 无铜钱处理()
                                                                        野外挂机刷金币()
                                                                        return "掉线"
                                                                    }
                                                                    移动时间 = new Date().getTime() / 1000
                                                                    是否已在激战地++
                                                                    if (是否已在激战地 >= 3) {
                                                                        是否已在激战地 = 0
                                                                        log("已在激战地")
                                                                        移动时间 = new Date().getTime() / 1000
                                                                        随机点击(545, 498, 10, 10)
                                                                        // var 结果 = 激战地避开角色密集点()
                                                                        // if (结果 == "掉线") {
                                                                        //     return "掉线"
                                                                        // } else if (结果 == "死亡") {
                                                                        //     return "死亡"
                                                                        // } else {
                                                                        if ((参数[49] && storage.get("自动激战地") == "40") || (!参数[49] && 参数[2] == 0)) {
                                                                            log("重新选择坐标")
                                                                            var 结果 = 纯回主页()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else {
                                                                                var jizhandi = imgempt(true, 0.9, "激战地商店图标", 5, 50, 72, 231)
                                                                                if (jizhandi != null) {
                                                                                    log("点击展开小地图")
                                                                                    随机点击(306, 75)
                                                                                }
                                                                                log("点击地图")
                                                                                随机点击(153, 158)
                                                                            }
                                                                        } else {
                                                                            // var 结果 = 激战地随机移动()
                                                                            // if (结果 == "完成") {
                                                                            var 结果 = 激战地挂机()
                                                                            if (结果 == "购买药水") {
                                                                                var 结果 = 激战地回城买药()//回城买药()
                                                                                if (结果 == "掉线") {
                                                                                    return "掉线"
                                                                                } else {
                                                                                    是否已在激战地 = 0
                                                                                    未移动 = true
                                                                                }
                                                                            } else if (结果 == "死亡") {
                                                                                return "死亡"
                                                                            } else if (结果 == "重启") {
                                                                                return "重启"
                                                                            } else if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else if (结果 == "已回城") {
                                                                                return "已回城"
                                                                            }
                                                                            // } else if (结果 == "死亡") {
                                                                            //     return "死亡"
                                                                            // } else if (结果 == "掉线") {
                                                                            //     return "掉线"
                                                                            // }
                                                                        }
                                                                        // }
                                                                    }
                                                                } else {
                                                                    var jizhandi = imgempt(true, 0.9, "激战地图标", 958, 87, 321, 499)
                                                                    if (jizhandi != null) {
                                                                        log("点击激战地图标");
                                                                        随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                                                    } else {
                                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                        if (手 != null) {
                                                                            log("主页点击菜单");
                                                                            随机点击(1238, 36, 10, 10)
                                                                        } else {

                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}





function 激战地随机移动() {
    var 检测 = true
    var 移动时间 = new Date().getTime() / 1000
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
            if (zhuchengzahuo != null) {
                log("杂货商店，已经死亡")
                return "死亡"
            } else {
                var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                if (jizhandi != null) {
                    log("已在激战地")
                    随机点击(545, 498, 10, 10)
                } else {
                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                    if (bfzl != null) {
                        log("死亡复活")
                       
                            var 死亡等待随机时间 = random(20, 120) * 1000
                            log("死亡等待随机时间:" + 死亡等待随机时间)
                            sleep(死亡等待随机时间)
                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                            if (bfzl != null) {
                                随机点击(bfzl.x, bfzl.y, 10, 10)
                            }
                            var 随机等待恢复时间 = random(10, 20) * 1000
                            sleep(随机等待恢复时间)
                        return "死亡"
                    } else {
                        var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                        if (mi != null) {
                            log("移动中")
                            sleep(1000)
                            检测 = true
                            移动时间 = new Date().getTime() / 1000
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                if (zhuchengzahuo != null) {
                                    log("避开密集点时死亡");
                                    return "死亡"
                                } else {
                                    log("点击菜单地图");
                                    随机点击(138, 144, 10, 10)
                                }
                            } else {
                                var guajizhon = imgempt(true, 0.9, "脚印|脚印2", 246, 629, 128, 86)
                                if (guajizhon != null) {
                                    log("点击脚印移动")
                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                    var 非移动状态 = 0
                                    var 移动时间记录 = new Date().getTime() / 1000
                                    var 随机移动时间 = random(5, 9)
                                    while (true) {
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {
                                            if ((new Date().getTime() / 1000) - (移动时间记录) >= 随机移动时间) {
                                                log("急停")
                                                随机点击2(1231, 458)
                                                激战地跳转时间 = new Date().getTime()
                                                return "完成"
                                            } else {
                                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                                if (mi != null) {
                                                    非移动状态 = 0
                                                    var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
                                                    if (guajizhon != null) {
                                                        log("被攻击中,逃跑");
                                                        for (let index = 0; index < 3; index++) {
                                                            随机点击2(893, 660)
                                                        }
                                                        storage.put("激战地今日逃跑次数", (parseInt(storage.get("激战地今日逃跑次数")) + 1).toString())
                                                        
                                                            ui.run(function () {
                                                                window.运维检测.setText("♣检" + storage.get("激战地今日逃跑次数").toString())
                                                            });

                                                        
                                                            if (storage.get("激战地今日逃跑次数") >= 激战地逃跑次数限制) {
                                                                log("逃跑次数过多结束激战地")
                                                                threads.currentThread().interrupt()
                                                            }
                                                        return "掉线"
                                                    }
                                                    sleep(1000)
                                                } else {
                                                    var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                    if (退出 != null) {
                                                        log("退出地图");
                                                        随机点击(退出.x, 退出.y, 10, 10)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                        sleep(200)
                                    }
                                    // 随机点击(1241, 36, 10, 10)
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("看人数，退出节电")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {
                                        if (参数[2] == 0) {
                                            var jizhandi = imgempt(true, 0.9, "40级激战地点", 972, 164, 202, 488)//
                                            if (jizhandi != null) {
                                                log("选择40级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到40激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 1) {
                                            var jizhandi = imgempt(true, 0.9, "45级激战地点", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择45级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到45激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 2) {
                                            var jizhandi = imgempt(true, 0.9, "50级激战地点", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择50级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到50激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 3) {
                                            var jizhandi = imgempt(true, 0.9, "55级激战地", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择55级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到55激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else {
                                            log("没有选择激战地等级")
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}
function 激战地避开角色密集点() {
    var 检测 = true
    var 移动时间 = new Date().getTime() / 1000
    var 限制瞬移次数 = random(1, 5)
    var 随机移动次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
            if (zhuchengzahuo != null) {
                log("杂货商店，已经死亡")
                return "死亡"
            } else {
                var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                if (jizhandi != null) {
                    log("已在激战地")
                    随机点击(545, 498, 10, 10)
                } else {
                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                    if (bfzl != null) {
                        log("死亡复活")
                       
                            var 死亡等待随机时间 = random(20, 120) * 1000
                            log("死亡等待随机时间:" + 死亡等待随机时间)
                            sleep(死亡等待随机时间)
                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                            if (bfzl != null) {
                                随机点击(bfzl.x, bfzl.y, 10, 10)
                            }
                            var 随机等待恢复时间 = random(10, 20) * 1000
                            sleep(随机等待恢复时间)
                        return "死亡"
                    } else {
                        if (检测) {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                var 当前移动时间戳 = new Date().getTime() / 1000
                                if (当前移动时间戳 - 移动时间 >= 200) {
                                    log("移动卡住了,往前滑动")
                                    swipe(175, 502, 170, 376, 2000)
                                } else {
                                    log("移动中")
                                    log("移动中，移动时间:" + 当前移动时间戳 - 移动时间)
                                    sleep(1000)
                                }
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("在主界面");
                                    var saomaiop = imgempt(true, 0.9, "扫描盘", 1005, 265, 99, 70)
                                    if (saomaiop != null) {
                                        log("点击扫描");
                                        随机点击(saomaiop.x, saomaiop.y, 10, 10)
                                        sleep(1000)
                                        var 起始坐标x = 822
                                        var 起始坐标y = 85
                                        var 人数 = 0
                                        for (let index = 1; index <= 4; index++) {
                                            for (let index1 = 1; index1 <= 2; index1++) {
                                                if (index1 == 1) {
                                                    起始坐标x = 822
                                                } else {
                                                    起始坐标x = 1015
                                                }
                                                var result = imgempt(true, 0.9, "弓一转|弓二转|弓三转|双匕首一转|双匕首二转|双匕首三转|双剑一转|双剑二转|双剑三转|匕首一转|匕首二转|匕首三转|单剑二转|单剑三转|盾一转|盾三转|巫一转|巫二转|巫三转|奶三转|奶二转", 起始坐标x, 起始坐标y, 102, 48)
                                                if (result != null) {
                                                    人数++
                                                    log(index + "行-" + index1 + "列有人")
                                                }
                                            }
                                            起始坐标y = 起始坐标y + 46
                                        }
                                        log("人数:" + 人数)
                                        if (人数 <= 3) {
                                            log("人数小于3")
                                            激战地跳转时间 = new Date().getTime()
                                            return "无人"
                                        } else {
                                            log("人数大于2")
                                            检测 = false
                                            if (随机移动次数 >= 限制瞬移次数) {
                                                log("随机移动次数上限")
                                                return "无人"
                                            } else {
                                                随机移动次数++
                                            }


                                        }
                                    } else {
                                        log("点出扫描")
                                        随机点击(1239, 241, 10, 10)
                                    }
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("看人数，退出节电")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {
                                        var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                        if (退出 != null) {
                                            log("退出地图");
                                            随机点击(退出.x, 退出.y, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        } else {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                log("移动中")
                                sleep(1000)
                                检测 = true
                                移动时间 = new Date().getTime() / 1000
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("避开密集点时死亡");
                                        return "死亡"
                                    } else {
                                        log("点击菜单地图");
                                        随机点击(138, 144, 10, 10)
                                    }
                                } else {
                                    var guajizhon = imgempt(true, 0.9, "脚印|脚印2", 246, 629, 128, 86)
                                    if (guajizhon != null) {
                                        log("点击脚印移动");
                                        随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                        移动时间 = new Date().getTime() / 1000
                                        var 移动标识时间 = new Date().getTime() / 1000
                                        var 未识别到关闭次数 = 0
                                        while (true) {
                                            var 移动标识识别时间戳 = new Date().getTime() / 1000
                                            var 移动时间判断 = 移动标识识别时间戳 - 移动标识时间
                                            if (异常捕获() == "掉线") {
                                                return "掉线"
                                            } else {
                                                var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                                if (dtyd != null) {
                                                    log("点击移动");
                                                    随机点击(dtyd.x, dtyd.y, 10, 10)
                                                    log("已到达")
                                                    未移动 = false
                                                    break
                                                } else {
                                                    var guajizhon = imgempt(true, 0.9, "脚印|脚印2", 246, 629, 128, 86)
                                                    if (guajizhon != null) {
                                                        var dtyd = imgempt(true, 0.8, "移动XX|移动标识|移动标识X|移动标识移动图标", 265, 17, 678, 694)
                                                        if (dtyd != null) {
                                                            未识别到关闭次数 = 0
                                                            if (移动时间判断 >= 240) {
                                                                log("移动标识,移动中...卡移动了,重新点击脚印");
                                                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                                移动标识时间 = new Date().getTime() / 1000
                                                            } else {
                                                                log("移动时间:" + parseInt(移动时间判断))
                                                            }
                                                        } else {
                                                            log("没有XX")
                                                            未识别到关闭次数++
                                                            if (未识别到关闭次数 >= 3) {
                                                                log("可能已到达")
                                                                随机点击(1242, 30)
                                                                未移动 = false
                                                                break
                                                            }
                                                        }
                                                    } else {
                                                        log("脚印呢")
                                                    }

                                                }
                                            }
                                            sleep(200)
                                        }


                                        // 随机点击(1241, 36, 10, 10)
                                    } else {
                                        if (参数[2] == 0) {
                                            var jizhandi = imgempt(true, 0.9, "40级激战地点", 972, 164, 202, 488)//
                                            if (jizhandi != null) {
                                                log("选择40级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到40激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 1) {
                                            var jizhandi = imgempt(true, 0.9, "45级激战地点", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择45级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到45激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 2) {
                                            var jizhandi = imgempt(true, 0.9, "50级激战地点", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择50级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到50激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else if (参数[2] == 3) {
                                            var jizhandi = imgempt(true, 0.9, "55级激战地", 972, 164, 202, 488)
                                            if (jizhandi != null) {
                                                log("选择55级激战地点");
                                                随机点击(jizhandi.x, jizhandi.y, 10, 10)
                                            } else {
                                                log("未找到55激战地,下滑")
                                                swipe(1081, 225, 1080, 551, 500)
                                            }
                                        } else {
                                            log("没有选择激战地等级")
                                        }

                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 激战地挂机() {
    激战地跳转时间 = new Date().getTime()
    var 点击auto次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
            if (guajizhon != null) {
                log("被攻击中,逃跑");
                for (let index = 0; index < 3; index++) {
                    随机点击2(893, 660)
                }
                storage.put("激战地今日逃跑次数", (parseInt(storage.get("激战地今日逃跑次数")) + 1).toString())
               
                    ui.run(function () {
                        window.运维检测.setText("♣检" + storage.get("激战地今日逃跑次数").toString())
                    });

               
                    if (storage.get("激战地今日逃跑次数") >= 激战地逃跑次数限制) {
                        log("逃跑次数过多结束激战地")
                        threads.currentThread().interrupt()
                    }
                return "掉线"
            } else {
                var jizhandi = imgempt(true, 0.9, "激战弹窗", 509, 161, 275, 139)
                if (jizhandi != null) {
                    log("已在激战地")
                    随机点击(545, 498, 10, 10)
                } else {
                    var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                    if (退出 != null) {
                        log("退出地图");
                        随机点击(退出.x, 退出.y, 10, 10)
                    } else {
                        var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                        if (guajizhon != null) {
                            log("死亡墓碑恢复经验,激战地挂机");
                            var 结果 = 死亡恢复经验()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                            if (bbym != null) {
                                log("死亡墓碑恢复经验，激战地挂机颜色");
                                var 结果 = 死亡恢复经验()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else {
                                var jizhandi = imgempt(true, 0.9, "激战地图标", 958, 87, 321, 499)
                                if (jizhandi != null) {
                                    log("主城,死亡");
                                    return "死亡"
                                } else {
                                    var jizhandi = imgempt(true, 0.9, "激战地主城(小地图)", 126, 61, 70, 43)
                                    if (jizhandi != null) {
                                        log("主城,死亡");
                                        return "死亡"
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (jdmsz != null) {
                                            log("节电模式中");
                                            var 结果 = 节电模式("激战地")
                                            if (结果 == "购买药水") {
                                                return "购买药水"
                                            } else if (结果 == "死亡") {
                                                return "死亡"
                                            } else if (结果 == "重启") {
                                                return "重启"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            } else if (结果 == "已回城") {
                                                return "已回城"
                                            }
                                            //  else if (结果 == "看人数") {
                                            //     var 结果 = 激战地避开角色密集点()
                                            //     if (结果 == "掉线") {
                                            //         return "掉线"
                                            //     } else if (结果 == "死亡") {
                                            //         return "死亡"
                                            //     }
                                            // }
                                        } else {
                                            var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                            if (jdmsz != null) {
                                                点击auto次数 = 0
                                                log("已锁定怪物")
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    log("到主城了,判定为死亡");
                                                    return "死亡"
                                                } else {
                                                    log("还在激战地...点击节电模式");
                                                    if (参数[48] && !参数[26]) {
                                                        while (true) {
                                                            if (异常捕获() == "掉线") {
                                                                log("掉线")
                                                                break
                                                            } else {
                                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                if (jeig != null) {
                                                                    log("设定自动使用生命药剂为百分之八十左右")
                                                                    sleep(1000)
                                                                    随机点击2(921, 464)
                                                                    参数[48] = false
                                                                    ui.run(function () {
                                                                        ui.药水设定.setChecked(false)
                                                                    })
                                                                    storage.put("药水设定", false)
                                                                    break
                                                                } else {
                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                    if (手 != null) {
                                                                        log("点击药水")
                                                                        随机点击2(976, 656)
                                                                    } else {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    sleep(random(1000, 10000))
                                                    随机点击(34, 624, 10, 10)
                                                }
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    log("到主城了,判定为死亡");
                                                    return "死亡"
                                                } else {
                                                    var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                                    if (auto != null) {
                                                        log("点击auto");
                                                        随机点击(auto.x, auto.y, 10, 10)
                                                        点击auto次数++
                                                        if (点击auto次数 >= 5) {
                                                            log("周边没有怪物")
                                                            return "重新移动"
                                                        }
                                                    } else {
                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                        if (bfzl != null) {
                                                            log("死亡复活")
                                                           
                                                                var 死亡等待随机时间 = random(20, 120) * 1000
                                                                log("死亡等待随机时间:" + 死亡等待随机时间)
                                                                sleep(死亡等待随机时间)
                                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                                if (bfzl != null) {
                                                                    随机点击(bfzl.x, bfzl.y, 10, 10)
                                                                }
                                                                var 随机等待恢复时间 = random(10, 20) * 1000
                                                                sleep(随机等待恢复时间)
                                                            return "死亡"
                                                        } else {

                                                        }
                                                    }
                                                }
                                                // }
                                            }
                                            // }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }


        }
        sleep(200)
    }
}

function 回城购买卷轴(mode) {
    var 模式 = mode
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    随机点击(674, 463, 10, 10)
                    随机点击2(730, 643, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,处理")
                        // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }
                    购买成功 = true
                    随机点击(1239, 35, 10, 10)
                    return
                } else {
                    var yssrhy = imgempt(true, 0.9, "回城卷轴(NPC)", 15, 54, 329, 625)
                    if (yssrhy != null) {
                        log("回城卷轴(NPC)");
                        随机点击2(yssrhy.x + 100, yssrhy.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                        if (yssrhy != null) {
                            log("下滑")
                            swipe(134, 552, 130, 150, 500)
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 140)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (模式 == "铜钱回城") {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("回城买卷轴,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    } else {
                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                        if (huicheng != null) {
                                                            log("点击回城卷轴");
                                                            随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                            var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                            if (guajizhon != null) {
                                                                log("没有卷轴了")
                                                                模式 = "铜钱回城"
                                                            }
                                                            sleep(3000)
                                                        } else {
                                                            log("没有找到回城卷轴")
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 放置瞬间移动卷轴() {
    var 整理 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                log("主页点击背包");
                随机点击(1115, 31, 10, 10)
            } else {
                var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
                if (zhuangbei != null) {
                    log("全部栏或装备栏");
                    随机点击(1246, 308, 10, 10)
                } else {
                    var zhuangbei = imgempt(true, 0.9, "瞬间移动卷轴(详细)", 577, 114, 166, 124)
                    if (zhuangbei != null) {
                        log("点击放入")
                        随机点击(825, 656, 10, 10)
                        return "完成"
                    } else {
                        var zhuangbei = imgempt(true, 0.9, "快捷放入(勾选)", 905, 533, 111, 88)
                        if (zhuangbei != null) {
                            var zhuangbei = imgempt(true, 0.9, "瞬间移动卷轴(背包)", 917, 106, 307, 503)
                            if (zhuangbei != null) {
                                随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                            } else {
                                log("没有找到回城卷轴")
                            }
                        } else {
                            var zhuangbei = imgempt(true, 0.9, "瞬间移动卷轴(背包)", 917, 106, 307, 503)
                            if (zhuangbei != null) {
                                log("背包里的瞬间移动卷轴,点击快捷放入");
                                随机点击(946, 576, 10, 10)
                            } else {
                                var zhuangbei = imgempt(true, 0.9, "整理", 1126, 533, 116, 100)
                                if (zhuangbei != null) {
                                    整理++
                                    if (整理 >= 4) {
                                        return "没有瞬间移动卷轴"
                                    } else if (整理 >= 2) {
                                        swipe(1020, 479, 1030, 150, 2000)
                                    } else {
                                        log("点击整理");
                                        随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                    }
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 放置回城卷轴() {
    var 整理 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                log("主页点击背包");
                随机点击(1115, 31, 10, 10)
            } else {
                var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
                if (zhuangbei != null) {
                    log("全部栏或装备栏");
                    随机点击(1246, 308, 10, 10)
                } else {
                    var zhuangbei = imgempt(true, 0.9, "回城卷轴(详细)", 577, 114, 166, 124)
                    if (zhuangbei != null) {
                        log("点击放入")
                        随机点击(890, 659, 10, 10)
                        return "完成"
                    } else {
                        var zhuangbei = imgempt(true, 0.9, "快捷放入(勾选)", 905, 533, 111, 88)
                        if (zhuangbei != null) {
                            var zhuangbei = imgempt(true, 0.9, "回城卷轴(背包)", 917, 106, 307, 503)
                            if (zhuangbei != null) {
                                随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                            } else {
                                log("没有找到回城卷轴")
                            }
                        } else {
                            var zhuangbei = imgempt(true, 0.9, "回城卷轴(背包)", 917, 106, 307, 503)
                            if (zhuangbei != null) {
                                log("背包里的回城卷轴,点击快捷放入");
                                随机点击(946, 576, 10, 10)
                            } else {
                                var zhuangbei = imgempt(true, 0.9, "整理", 1126, 533, 116, 100)
                                if (zhuangbei != null) {
                                    整理++
                                    if (整理 >= 4) {
                                        return "没有回城卷轴"
                                    } else if (整理 >= 2) {
                                        swipe(1020, 479, 1030, 150, 2000)
                                    } else {
                                        log("点击整理");
                                        随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                                    }
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 找数字(mode, imgname, space, similarity, x, y, W, H, 跳跃) {
    if (imgname == "钻石铜钱数") {
        var 中断条件 = 3
    } else if (imgname == "夜鸦制造") {
        var 中断条件 = 6
    } else {
        var 中断条件 = 2
    }
    let contours = [];
    if (imgname == "夜鸦拍卖行") {
        var 计次 = 11
    } else {
        var 计次 = 9
    }
    var 相识度
    for (let index = 0; index <= 计次; index++) {
        contours[index] = imgname + index + ""
    }
    var 结果 = []
    var yp = 0
    var Xb2 = x + W;
    try {
        var img1 = captureScreen();
    } catch (error) {
        log("找数字截图报错")
    }

    try {
        var 锁死 = false
        var 锁后 = 0
        while (true) {
            下标 = 0
            if (x >= Xb2 || (x + 13) >= 1280) {
                break;
            } else {
                for (let index = 0; index < contours.length; index++) {
                    try {
                        var temp = images.read("./picture/" + contours[index] + ".png");
                        if (imgname == "夜鸦拍卖行" && index == 1) {
                            相识度 = 0.96
                        } else if (imgname == "夜鸦拍卖行" && index == 10) {
                            相识度 = 0.9
                        } else {
                            相识度 = similarity
                        }

                        if (imgname == "夜鸦区服") {
                            var 识别宽度 = 22
                        } else {
                            var 识别宽度 = 13
                        }

                        if (imgname == "夜鸦拍卖行") {
                            if (index == 0) {
                                var 识别宽度 = 16
                            } else {
                                var 识别宽度 = 13
                            }
                        }

                        var imgxy = images.findImage(img1, temp, { region: [x, y, 识别宽度, H], threshold: 相识度 })//13的宽是单个找字所以只能设置13的宽
                    } catch (error) {
                        log("找数字报错" + error)
                    }
                    temp.recycle()
                    if (imgxy != null) {
                        锁死 = true
                        if (index == 10) {
                            结果[yp] = "."
                            x = imgxy.x + 5
                            yp++
                        } else if (index == 11) {
                            log("此为逗号分隔符")
                            x = imgxy.x + 5
                        } else if (index == 1) {
                            结果[yp] = index
                            x = imgxy.x + 5
                            yp++
                        } else {
                            结果[yp] = index
                            x = imgxy.x + space
                            yp++
                        }
                        break;
                    } else {
                        if (锁死 && index == contours.length - 1) {
                            锁后++
                        } else {

                        }
                    }
                }

                if (锁死 && 锁后 >= 中断条件) {
                    log(中断条件 + "次未识别到，中断识别")
                    break
                } else {//
                    if (跳跃 == "跳跃" && imgxy == null && 结果.length == 3) {
                        x = x + space + 4;
                    } else {
                        if (imgxy == null) {
                            x = x + space;
                        }
                    }
                }
            }
        }

    } catch (error) {
        log("找数字图片识别（总）报错,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + img.getWidth() + "*" + img.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
        if (error.toString().includes("CvException")) {
            log("openCv报错,退出脚本")
            images.save(img, "/sdcard/错误大图.png", "png", 100);
            images.save(temp, "/sdcard/错误小图.png", "png", 100);
            //log("可用内存" + device.getAvailMem())
            // alert("OPCV异常")
           
            exit()
        } else {
            log("非指定报错,请检查")
            images.save(img, "/sdcard/错误大图.png", "png", 100);
            images.save(temp, "/sdcard/错误小图.png", "png", 100);
            //log("可用内存" + device.getAvailMem())
        }
    }

    log("识别结果:" + 结果)
    if (结果.length != 0) {
        if (mode == "数组") {
            return 结果
        } else if (mode == "字符串") {
            var 字符串 = ""
            for (let index = 0; index < 结果.length; index++) {
                字符串 = 字符串 + 结果[index]
            }
            return 字符串;
        } else if (mode == "数字") {
            var 字符串 = ""
            for (let index = 0; index < 结果.length; index++) {
                if (index == 0 && 结果[index] == 0) {
                    字符串 = 字符串 + 结果[index] + "." //首位为0处理为小数点
                } else if (结果[index] == "." && 结果[0] == "0.") {
                    log("已有小数点略过...")
                } else {
                    字符串 = 字符串 + 结果[index]
                }
            }
            var 数字 = parseFloat(字符串)
            return 数字;
        } else {
            log("没有该返回值模式")
        }
    } else {
        return "false";
    }
}

function findNumber(params, range) {
    var settleAccount = []

    try {
        var img1 = captureScreen();
    } catch (error) {
        log("找数字简单版截图报错")
    }
    var 次数 = 9
    if (params == "夜鸦拍卖行") {
        次数 = 10
    }
    try {
        for (let j = 0; j <= 次数; j++) {
            var imp = images.read("./picture/" + params + j + ".png")
            let num = images.matchTemplate(img1, imp, { region: range });
            imp.recycle()
            if (num.points.length > 0) {
                if (j == 10) {
                    settleAccount.push({ num: ".", points: num.points });
                } else {
                    settleAccount.push({ num: j, points: num.points });
                }
            }
        }
    } catch (error) {
        log("找数字简版图片识别（总）报错,图名:" + params + ",范围:" + range + "错误详细:" + error)
        if (error.toString().includes("CvException")) {
            log("openCv报错,退出脚本")
            images.save(img1, "/sdcard/错误大图.png", "png", 100);
            images.save(imp, "/sdcard/错误小图.png", "png", 100);
            // alert("OPCV异常")
            
            exit()
        } else {
            log("非指定报错,请检查")
            images.save(img1, "/sdcard/错误大图.png", "png", 100);
            images.save(imp, "/sdcard/错误小图.png", "png", 100);
        }
    }

    if (settleAccount.length != 0) {
        //sort
        const sequence = [];
        settleAccount.forEach(item => {
            item.points.forEach(point => sequence.push({ number: item.num, x: point.x }));
        });
        sequence.sort((a, b) => a.x - b.x);
        sequence.forEach((point, index, arr) => arr[index] = point.number);
        const finalNumber = sequence.join("");
        log(finalNumber)
        return finalNumber.toString()
    } else {
        log("没找到" + params + "相关数字")
        return null
    }
}


// function 开始出售() {
//     while (true) {
//         if (异常捕获() == "掉线") {
//             return "掉线"
//         } else {

//         }
//         sleep(200)
//     }
// }

function 双击(x, y) {
    for (let index = 0; index < 2; index++) {
        随机点击2(x, y, 10, 10)
    }
}

function 仓库调整(拿出物品参数) {
    var 回城卷轴 = true
    var 回城卷轴点击次数 = 0
    var 放入物品 = "高级木材(背包)|高级钢(背包)|高级皮革(背包)|高级矿物(背包)|高级毛发(背包)|齿轮(背包)|黄石头(背包)|普通铁块(背包)|普通木材(背包)|普通矿物(背包)|普通皮革(仓库)|普通毛发(背包)|蓝色墨水(背包)|普通红色徽章(背包)|铁片(背包)"
    var 筛选物品 = ""
    //紫级洗点石非仓库截图,可能需要重做
    var 拿出物品 = "橙装蜂巢(仓库)|橙装眼镜(仓库)|橙装强化卷(仓库)|五行洗点石(仓库)|五行彩色洗点石(仓库)|橙色魔法书(仓库)|橙装笛子装备箱(仓库)|橙装装备箱(仓库)|顶蓝材料箱(仓库)|绿级材料箱(仓库)|普通材料箱(仓库)|普通顶蓝材料箱(仓库)|紫色装备随机箱(仓库)|紫色装备随机箱2(仓库)|蓝色装备随机箱(仓库)|消耗品菜篮子(仓库)|普通五行抽奖(仓库)|蓝色时长钟(仓库)|橙色时长钟(仓库)|黄色时长钟(仓库)|活动制造卷轴1(仓库)|活动制造卷轴3(仓库)|活动制造卷轴2(仓库)|首饰洗点石(仓库)|钻石洗点石(仓库)|武器洗练石(仓库)|防具洗练石(仓库)|钻石紫级洗练石(临时)|武器紫级洗练石(临时)|防具紫级洗练石(临时)|首饰紫级洗练石(临时)钱袋子(仓库)|瞬移卷轴(仓库)|回城卷轴(仓库)|小药(仓库)|中级药水(仓库)|随机强化卷轴箱(仓库)|坐骑武器抽奖箱(仓库)"
    if (拿出物品参数 != null) {
        拿出物品 = 拿出物品 + "|" + 拿出物品参数
        拿出物品数组 = 拿出物品参数.split("|")
        for (let index = 0; index < 拿出物品数组.length; index++) {
            var 包含字符 = 拿出物品数组[index].replace("背包", "仓库");
            if (放入物品.includes(包含字符)) {
                var regex = new RegExp(包含字符 + "\\|");
                if (放入物品.match(regex)) {
                    放入物品 = 放入物品.replace(包含字符 + "|", '');
                } else {
                    放入物品 = 放入物品.replace("|" + 包含字符, '');
                }
            }
        }
    }
    log("整理背包")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("点击整理背包")
                随机点击2(1178, 577)
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    break;
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        随机点击(1115, 34, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }

    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                log("关闭角色信息")
                随机点击(33, 86)
            } else {
                var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                if (zhuxian != null) {
                    log("确定瞬移");
                    随机点击2(725, 496)
                } else {
                    var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗按钮", 612, 398, 272, 165)
                    if (zhuxian != null) {
                        log("确定瞬移");
                        随机点击2(zhuxian.x, zhuxian.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                        if (mi != null) {
                            var 放入 = true
                            var 拿出 = true
                            var 拿出次数 = 0
                            while (true) {
                                if (异常捕获() == "掉线") {
                                    return "掉线"
                                } else {
                                    var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                                    if (mi != null) {
                                        if (放入) {
                                            var zhuxian = CoordinatesAndPictureName(true, 0.9, 放入物品, 924, 118, 288, 536)
                                            if (zhuxian != null) {
                                                log("点击物品");
                                                随机点击2(zhuxian.x, zhuxian.y)
                                                var shibie = imgempt(true, 0.9, "白级绑定|绿级绑定|蓝色绑定|金色绑定", 601, 120, 288, 60)
                                                if (shibie != null) {
                                                    log("放入")
                                                    随机点击2(zhuxian.x, zhuxian.y)
                                                    var mi = imgempt(true, 0.9, "仓库空间不足|仓库空间不足2", 541, 66, 52, 43)
                                                    if (mi != null) {
                                                        log("仓库空间已满")
                                                        放入 = false
                                                        拿出 = true
                                                        sleep(2000)
                                                    } else {
                                                        var regex = new RegExp(zhuxian.图名 + "\\|");
                                                        if (放入物品.match(regex)) {
                                                            放入物品 = 放入物品.replace(zhuxian.图名 + "|", '');
                                                        } else {
                                                            放入物品 = 放入物品.replace("|" + zhuxian.图名, '');
                                                        }
                                                    }
                                                } else {
                                                    log("不放入")
                                                    if (筛选物品.includes(zhuxian.图名)) {
                                                        var regex = new RegExp(zhuxian.图名 + "\\|");
                                                        if (放入物品.match(regex)) {
                                                            放入物品 = 放入物品.replace(zhuxian.图名 + "|", '');
                                                        } else {
                                                            放入物品 = 放入物品.replace("|" + zhuxian.图名, '');
                                                        }
                                                    } else {
                                                        筛选物品 = 筛选物品 + zhuxian.图名 + ""
                                                    }
                                                }
                                            } else {
                                                var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                                if (bbym != null) {
                                                    log("放入完毕")
                                                    放入 = false
                                                    拿出 = true
                                                } else {
                                                    log("下滑背包")
                                                    swipe(1062, 450, 1063, 300, 2000)
                                                    sleep(2000)
                                                }
                                            }
                                        } else {//拿出
                                            var zhuxian = CoordinatesAndPictureName(true, 0.9, 拿出物品, 61, 99, 310, 444)
                                            if (zhuxian != null) {
                                                log("双击拿出");
                                                for (let index = 0; index < 2; index++) {
                                                    随机点击2(zhuxian.x, zhuxian.y)
                                                }
                                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                if (bbkjbztc != null) {
                                                    log("背包已满")
                                                    if (拿出次数 == 0) {
                                                        发送异常("背包仓库都满了")
                                                        alert("背包仓库都满了")
                                                    } else {
                                                        放入 = true
                                                        拿出 = false
                                                        拿出次数 = 0
                                                    }
                                                    sleep(3000)
                                                } else {
                                                    拿出次数++
                                                }
                                            } else {
                                                log("无可拿出物品")
                                                if (拿出次数 >= 1) {
                                                    放入 = true
                                                    拿出 = false
                                                    拿出次数 = 0
                                                } else {
                                                    log("仓库执行完毕")
                                                    var 是否填充 = false
                                                    var mi = imgempt(true, 0.9, "空仓库", 69, 114, 298, 364)
                                                    if (mi != null) {
                                                        是否填充 = true
                                                    }
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        if (是否填充) {
                                                            return "填充"
                                                        } else {
                                                            return "成功"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("卡回主页");
                                            break;
                                        } else {

                                        }
                                    }
                                }
                                sleep(200)
                            }
                        } else {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                log("移动中...");
                                sleep(1000)
                            } else {
                                var shezhi = imgempt(true, 0.9, "主城仓库图标", 9, 57, 96, 367)
                                if (shezhi != null) {
                                    log("点击主城仓库图标");
                                    随机点击(shezhi.x + 10, shezhi.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                    if (zhuchengzahuo != null) {
                                        log("主城主城技能商店图标");
                                        swipe(122, 138, 114, 274, 500)
                                    } else {
                                        var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                        if (shezhi != null) {
                                            log("确定退出副本");
                                            随机点击(shezhi.x, shezhi.y, 10, 10)
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                            if (guajizhon != null) {
                                                log("点击退出副本");
                                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                            } else {
                                                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                                if (qrtz != null) {
                                                    log("确认跳转");
                                                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                    if (guajizhon != null) {
                                                        log("铜钱不足,处理")
                                                        // 无铜钱处理()
                                                        野外挂机刷金币()
                                                        return "掉线"
                                                    }
                                                } else {
                                                    var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                                    if (yssrhy != null) {
                                                        log("点击退出商店页")
                                                        随机点击(1244, 33, 10, 10)
                                                    } else {
                                                        if (回城卷轴) {
                                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                            if (zhuchengzahuo != null) {
                                                                log("主城委托图标");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(153, 87, 150, 282, 500)
                                                                }
                                                            } else {
                                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                if (huicheng != null) {
                                                                    log("点击回城卷轴")
                                                                    随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                    回城卷轴点击次数++
                                                                    sleep(3000)
                                                                    if (回城卷轴点击次数 >= 3) {
                                                                        回城卷轴 = false
                                                                    }
                                                                } else {
                                                                    回城卷轴 = false
                                                                }
                                                            }
                                                        } else {
                                                            var dyzczhsrtb = imgempt(true, 0.9, "地图里仓库图标", 7, 105, 244, 563)
                                                            if (dyzczhsrtb != null) {
                                                                log("点击地图里仓库图标");
                                                                随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                                            } else {
                                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                if (zhuchengzahuo != null) {
                                                                    log("点击主城杂货商人图标");
                                                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                                } else {
                                                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                                    if (dtl != null) {
                                                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                        if (dthctb != null) {
                                                                            log("点击回城图标");
                                                                            随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                        } else {
                                                                            log("地图里,寻找主城");
                                                                            for (let index = 0; index < 3; index++) {
                                                                                swipe(1104, 216, 1118, 614, 500)
                                                                                sleep(random(1000, 3000))
                                                                            }
                                                                        }
                                                                    } else {
                                                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                        if (dtgbzt != null) {
                                                                            log("地图关闭状态,点击打开");
                                                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                        } else {
                                                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                            if (dtdkzt != null) {
                                                                                log("点击地图");
                                                                                随机点击(139, 150, 10, 10)
                                                                                sleep(random(1000, 3000))
                                                                            } else {

                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 放入拿出仓库(mode) {
    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var xzfwq = imgempt(true, 0.9, "角色信息2|角色信息", 41, 45, 192, 97)
            if (xzfwq != null) {
                log("关闭角色信息")
                随机点击(33, 86)
            } else {
                var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗", 442, 202, 410, 63)
                if (zhuxian != null) {
                    log("确定瞬移");
                    随机点击2(725, 496)
                } else {
                    var zhuxian = imgempt(true, 0.9, "确定瞬移弹窗按钮", 612, 398, 272, 165)
                    if (zhuxian != null) {
                        log("确定瞬移");
                        随机点击2(zhuxian.x, zhuxian.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                        if (mi != null) {
                            log("个人仓库");
                            if (mode == "一键") {
                                var mi = imgempt(true, 0.9, "空仓库", 69, 114, 298, 364)
                                if (mi != null) {
                                    log("空仓库,先放入")
                                    var 结果 = 开始放入()
                                    if (结果 = "完成") {
                                        storage.put("一键存放时间", new Date().getDate())
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }

                                        return "完成"
                                    } else if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else {
                                    var mi = imgempt(true, 0.9, "回城卷轴(仓库)", 69, 98, 293, 469)
                                    if (mi != null) {
                                        log("拿出回城卷轴")
                                        随机点击2(mi.x, mi.y, 10, 10)
                                        随机点击2(mi.x, mi.y, 10, 10)
                                    } else {
                                        var mi = imgempt(true, 0.9, "小药(仓库)", 69, 98, 293, 469)
                                        if (mi != null) {
                                            log("拿出小药")
                                            随机点击2(mi.x, mi.y, 10, 10)
                                            随机点击2(mi.x, mi.y, 10, 10)
                                        } else {
                                            var mi = imgempt(true, 0.9, "中药(仓库)", 69, 98, 293, 469)
                                            if (mi != null) {
                                                log("拿出中药")
                                                随机点击2(mi.x, mi.y, 10, 10)
                                                随机点击2(mi.x, mi.y, 10, 10)
                                            } else {
                                                for (let index = 0; index < 2; index++) {
                                                    随机点击(207, 679, 10, 10)
                                                }
                                                storage.put("一键存放时间", new Date().getDate())
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                }
                                                return "完成"
                                            }
                                        }
                                    }
                                }
                            } else if (mode == "拿出") {
                                var mi = imgempt(true, 0.9, "绿材料箱(仓库)|普通材料箱(仓库)|武器强化卷轴(仓库)|装备强化卷轴(仓库)|首饰强化卷(仓库)|辅助装备强化卷(仓库)|橙装强化卷(仓库)", 69, 98, 293, 469)
                                if (mi != null) {
                                    log("拿出物品")
                                    双击(mi.x, mi.y)
                                } else {
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                }
                            } else {
                                var 结果 = 开始放入()
                                if (结果 = "完成") {
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            }
                        } else {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                log("移动中...");
                                sleep(1000)
                            } else {
                                var shezhi = imgempt(true, 0.9, "主城仓库图标", 9, 57, 96, 367)
                                if (shezhi != null) {
                                    log("点击主城仓库图标");
                                    随机点击(shezhi.x + 10, shezhi.y, 10, 10)
                                } else {
                                    var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                    if (shezhi != null) {
                                        log("确定退出副本");
                                        随机点击(shezhi.x, shezhi.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                            if (guajizhon != null) {
                                                log("点击退出副本");
                                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                            } else {
                                                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                                if (qrtz != null) {
                                                    log("确认跳转");
                                                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                    if (guajizhon != null) {
                                                        log("铜钱不足,处理")
                                                        // 无铜钱处理()
                                                        野外挂机刷金币()
                                                        return "掉线"
                                                    }
                                                } else {
                                                    var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                                                    if (yssrhy != null) {
                                                        log("点击退出商店页")
                                                        随机点击(1244, 33, 10, 10)
                                                    } else {
                                                        if (回城卷轴) {
                                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                            if (zhuchengzahuo != null) {
                                                                log("主城委托图标");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(153, 87, 150, 282, 500)
                                                                }
                                                            } else {
                                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                                if (huicheng != null) {
                                                                    log("点击回城卷轴")
                                                                    随机点击(huicheng.x, huicheng.y, 10, 10)
                                                                    sleep(3000)
                                                                } else {
                                                                    回城卷轴 = false
                                                                }
                                                            }
                                                        } else {
                                                            var dyzczhsrtb = imgempt(true, 0.9, "地图里仓库图标", 7, 105, 244, 563)
                                                            if (dyzczhsrtb != null) {
                                                                log("点击地图里仓库图标");
                                                                随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                                            } else {
                                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                                if (zhuchengzahuo != null) {
                                                                    log("点击主城杂货商人图标");
                                                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                                } else {
                                                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                                    if (dtl != null) {
                                                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                                        if (dthctb != null) {
                                                                            log("点击回城图标");
                                                                            随机点击(dthctb.x, dthctb.y, 10, 10)
                                                                        } else {
                                                                            log("地图里,寻找主城");
                                                                            for (let index = 0; index < 3; index++) {
                                                                                swipe(1104, 216, 1118, 614, 500)
                                                                                sleep(random(1000, 3000))
                                                                            }
                                                                        }
                                                                    } else {
                                                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                                        if (dtgbzt != null) {
                                                                            log("地图关闭状态,点击打开");
                                                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                                        } else {
                                                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                            if (dtdkzt != null) {
                                                                                log("点击地图");
                                                                                随机点击(139, 150, 10, 10)
                                                                                sleep(random(1000, 3000))
                                                                            } else {

                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 开始放入() {
    var 点击位置 = 1
    var 初始X = 958
    var 初始Y = 155
    var 点击X = 0
    var 点击Y = 0
    var 重复点击相同位置 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "物品分享图标", 687, 173, 229, 44)
            if (mi != null) {
                重复点击相同位置 = 0
                log("物品分享图标,开始识别")//
                var mi = imgempt(true, 0.9, "恢复药水", 624, 214, 266, 82)
                if (mi != null) {
                    log("药水不放入")
                    随机点击(30, 151, 10, 10)
                    点击位置++
                } else {
                    var mi = imgempt(true, 0.9, "移动卷轴4", 646, 191, 296, 113)
                    if (mi != null) {
                        log("移动卷轴不放入")
                        随机点击(30, 151, 10, 10)
                        点击位置++
                    } else {
                        var shibie = imgempt(true, 0.9, "白级绑定|绿级绑定|蓝色绑定|金色绑定", 601, 120, 288, 60)
                        if (shibie != null) {
                            log("绑定,放入")
                            随机点击2(点击X, 点击Y, 10, 10)
                        } else {
                            // var shezhi = cor(true, 17, 687, 173, 229, 44, "#6b604e", [[-6, 0, "#6c6553"], [-13, 0, "#6c6050"], [-15, 10, "#716451"], [-5, 13, "#6d6151"], [1, 9, "#807060"], [3, 9, "#7c7467"], [24, 9, "#40372e"], [32, 9, "#332c22"], [32, 13, "#423c2e"], [32, 0, "#473f34"], [39, 10, "#413b2d"], [42, 9, "#3b342a"]])
                            // if (shezhi != null) {
                            //     log("绑定,放入")
                            //     随机点击2(点击X, 点击Y, 10, 10)
                            // } else {
                            log("可交易不放入")
                            随机点击(30, 151, 10, 10)
                            点击位置++
                            // }
                        }
                    }
                }

                var guajizhon = imgempt(true, 0.9, "仓库空间不足|仓库空间不足2", 540, 65, 55, 40)
                if (guajizhon != null) {
                    log("完成放入")
                    // 参数[23] = false
                    // ui.run(function () {
                    //     ui.放入仓库.setChecked(false)
                    // });
                    return "完成"
                }
            } else {
                var mi = imgempt(true, 0.9, "个人仓库|个人仓库2", 43, 44, 183, 102)
                if (mi != null) {
                    var 行 = Math.ceil(点击位置 / 4)
                    var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                    点击X = 初始X + (列 * 69 - 69)
                    点击Y = 初始Y + (行 * 69 - 69)
                    log("点击的位置为:" + 点击位置 + "个物品")
                    随机点击(点击X, 点击Y, 10, 10)
                    重复点击相同位置++
                    重复点击坐标次数 = 0
                    if (重复点击相同位置 >= 4) {
                        log("无可放入物品")
                        return "完成"
                    }
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("卡退");
                        return
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}


function 设置pvp退出节电() {
    log("设置pvp退出节电")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {

            var shezhi = imgempt(true, 0.9, "设置图标|设置图标2", 960, 616, 297, 97)
            if (shezhi != null) {
                log("点击设置");
                随机点击(shezhi.x, shezhi.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var shezhi = imgempt(true, 0.9, "设置页", 18, 2, 188, 80)
                    if (shezhi != null) {
                        var shezhi = imgempt(true, 0.9, "设置界面页", 132, 105, 298, 200)
                        if (shezhi != null) {
                            log("设置界面页,点击遍历页")
                            随机点击2(43, 260)
                        } else {
                            var shezhi = imgempt(true, 0.9, "设置便利页", 148, 102, 382, 229)
                            if (shezhi != null) {
                                log("设置便利页,下滑")
                                for (let index = 0; index < 3; index++) {
                                    swipe(337, 622, 343, 268, 500)
                                    sleep(500)
                                }
                            } else {
                                var shezhi = cor(true, 12, 902, 526, 344, 98, "#f6eee1", [[-9, -1, "#615444"], [-6, -4, "#f7ede1"], [-16, 1, "#f6eee1"], [-15, 5, "#f7ede1"], [0, 7, "#f7ede1"], [13, -2, "#675747"], [31, -1, "#524437"], [72, -11, "#181715"], [73, 9, "#1a1917"], [-22, 0, "#f6eee3"], [-26, -2, "#f9ede1"], [-24, -4, "#463c30"]])
                                if (shezhi != null) {
                                    log("pvp已打开")
                                    storage.put("看pvp退节电设置随机时间", random(1440, 2880).toString())
                                    storage.put("看pvp退节电上次记录时间", (new Date().getTime() / (1000 * 60)).toString())
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                } else {
                                    var shezhi = cor(true, 12, 902, 526, 344, 98, "#5e5d58", [[0, 6, "#605d58"], [0, 9, "#605d58"], [9, 2, "#605d58"], [14, 1, "#605d56"], [14, 7, "#605d56"], [14, 10, "#605d56"], [37, 4, "#1a1917"], [56, -5, "#1d1916"], [98, 9, "#635343"], [100, -4, "#635343"], [92, -3, "#584b3b"], [131, 2, "#f7ede1"]])
                                    if (shezhi != null) {
                                        log("点击打开pvp退出节电")
                                        随机点击2(shezhi.x, shezhi.y)
                                    } else {
                                    }
                                }
                            }
                        }
                    } else {
                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                        if (jdmsz != null) {
                            log("退出节电,看pvp")
                            swipe(566, 389, 968, 226, 500)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 环境优化() {
    log("环境优化")
    var 打开pvp退出节电 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var shezhi = imgempt(true, 0.9, "设置图标|设置图标2", 960, 616, 297, 97)
            if (shezhi != null) {
                log("点击设置");
                随机点击(shezhi.x, shezhi.y, 10, 10)
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击菜单");
                    随机点击(1238, 36, 10, 10)
                } else {
                    var shezhi = imgempt(true, 0.9, "设置页", 18, 2, 188, 80)
                    if (shezhi != null) {
                        if (打开pvp退出节电) {//
                            var shezhi = imgempt(true, 0.9, "设置界面页", 132, 105, 298, 200)
                            if (shezhi != null) {
                                log("设置界面页,点击遍历页")
                                随机点击2(43, 260)
                            } else {
                                var shezhi = imgempt(true, 0.9, "设置便利页", 148, 102, 382, 229)
                                if (shezhi != null) {
                                    log("设置便利页,下滑")
                                    for (let index = 0; index < 3; index++) {
                                        swipe(337, 622, 343, 268, 500)
                                        sleep(500)
                                    }
                                } else {
                                    var shezhi = cor(true, 12, 902, 526, 344, 98, "#f6eee1", [[-9, -1, "#615444"], [-6, -4, "#f7ede1"], [-16, 1, "#f6eee1"], [-15, 5, "#f7ede1"], [0, 7, "#f7ede1"], [13, -2, "#675747"], [31, -1, "#524437"], [72, -11, "#181715"], [73, 9, "#1a1917"], [-22, 0, "#f6eee3"], [-26, -2, "#f9ede1"], [-24, -4, "#463c30"]])
                                    if (shezhi != null) {
                                        log("pvp已打开")
                                        打开pvp退出节电 = false
                                    } else {
                                        var shezhi = cor(true, 12, 902, 526, 344, 98, "#5e5d58", [[0, 6, "#605d58"], [0, 9, "#605d58"], [9, 2, "#605d58"], [14, 1, "#605d56"], [14, 7, "#605d56"], [14, 10, "#605d56"], [37, 4, "#1a1917"], [56, -5, "#1d1916"], [98, 9, "#635343"], [100, -4, "#635343"], [92, -3, "#584b3b"], [131, 2, "#f7ede1"]])
                                        if (shezhi != null) {
                                            log("点击打开pvp退出节电")
                                            随机点击2(shezhi.x, shezhi.y)
                                        } else {
                                        }
                                    }
                                }
                            }
                        } else {
                            var shezhi = imgempt(true, 0.9, "环境设置2|FSR2|画面播放速度2|环境设置|FSR|画面播放速度", 182, 131, 311, 571)//
                            if (shezhi != null) {
                                var shezhi = cor(true, 15, 624, 246, 178, 457, "#605d56", [[-1, 6, "#120e0f"], [5, 8, "#605d56"], [5, 12, "#171612"], [-1, 10, "#1a1917"], [10, 9, "#171614"], [17, 9, "#5e5e56"]])
                                if (shezhi != null) {
                                    log("设置最低分辨率");
                                    随机点击2(shezhi.x, shezhi.y, 10, 10)
                                } else {
                                    var shezhi = cor(true, 15, 687, 170, 114, 519, "#5e5d58", [[0, 4, "#5e5d58"], [6, 2, "#201c19"], [4, 2, "#1d1c1a"], [10, -3, "#5a5a52"], [16, 0, "#5e5d58"], [13, 7, "#5c5954"], [13, 4, "#1e1d19"]])
                                    if (shezhi != null) {
                                        log("设置最显示10人");
                                        随机点击2(shezhi.x, shezhi.y, 10, 10)
                                    } else {
                                        var shezhi = imgempt(true, 0.9, "画面播放速度|画面播放速度2", 191, 208, 178, 488)
                                        if (shezhi != null) {
                                            log("设置成功");
                                            参数[22] = false
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "设置完成"
                                            }
                                        } else {
                                            log("向下滑动")
                                            swipe(349, 602, 360, 431, 2000)
                                        }
                                    }
                                }
                            } else {
                                log("点击环境设置")
                                随机点击2(634, 97)
                            }
                        }
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}

function 识别并填入价格(数量) {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrcstc = imgempt(true, 0.9, "确认出售弹窗|确认出售弹窗2", 429, 308, 193, 80)
            if (qrcstc != null) {
                log("退出填入价格")
                return "正常"
            } else {
                var cstc = imgempt(true, 0.9, "出售弹窗|出售弹窗2", 550, 71, 209, 99)
                if (cstc != null) {
                    log("确认单价及数量")
                    随机点击(893, 180, 10, 0)
                    var cstcjh = imgempt(true, 0.9, "出售弹窗减号", 651, 264, 137, 109)
                    if (cstcjh != null) {
                        if (参数[34]) {
                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 444, 399, 163, 44);
                            if (单价 != "false" && 单价 != "") {
                                var 上架价格 = parseInt(数量 * 单价).toString()
                                log("数量为:" + 数量 + ",单价为:" + 单价 + ",上架价格为:" + 上架价格)
                                if (parseInt(上架价格) < 10) {
                                    log("总价未达到10金")
                                    随机点击(1005, 115, 10, 10);
                                    return "未达到交易价格"
                                } else {
                                    随机点击2(881, 180, 10, 0)
                                    随机点击2(928, 451, 10, 0)
                                    var 确定数量 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 838, 164, 154, 36);
                                    if (确定数量 != 数量) {
                                        log("数量不对，重新输入")
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(881, 180, 10, 0);
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(928, 451, 10, 0);
                                        }
                                    } else {
                                        log("输入价格:" + 上架价格)
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(903, 217, 10, 0);//点击钻石输入框
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(941, 493, 10, 0);//点击C 清零
                                        }
                                        数字盘输入(上架价格)
                                        var 确认价格 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 828, 201, 176, 37, "跳跃");
                                        if (确认价格 != "false" && 确认价格 != "") {
                                            log("确认价格为:" + 确认价格)
                                            if (parseInt(上架价格) == parseInt(确认价格)) {
                                                log("准确无误")
                                                随机点击2(833, 589, 10, 10)
                                                var sjslym = imgempt(true, 0.9, "上架数量已满|上架数量已满2|上架数量已满3", 465, 49, 358, 60)
                                                if (sjslym != null) {
                                                    log("上架数量已满")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "上架次数上限"
                                                    }
                                                }
                                            } else {
                                                log("价格有误")
                                                return "错误价格"
                                            }
                                        } else {
                                            log("未识别到总价")
                                        }
                                    }
                                }
                            } else {
                                log("未识别到单价")
                                return
                            }
                        } else if (参数[33]) {//平均价
                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 462, 465, 155, 46);
                            if (单价 != "false" && 单价 != "") {
                                var 上架价格 = parseInt(数量 * 单价).toString()
                                log("数量为:" + 数量 + ",单价为:" + 单价 + ",上架价格为:" + 上架价格)
                                if (parseInt(上架价格) < 10) {
                                    log("总价未达到10金")
                                    随机点击(1005, 115, 10, 10);
                                    return "未达到交易价格"
                                } else {
                                    随机点击2(881, 180, 10, 0)
                                    随机点击2(928, 451, 10, 0)
                                    var 确定数量 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 838, 164, 154, 36);
                                    if (确定数量 != 数量) {
                                        log("数量不对，重新输入")
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(881, 180, 10, 0);
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(928, 451, 10, 0);
                                        }
                                    } else {
                                        log("输入价格:" + 上架价格)
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(903, 217, 10, 0);//点击钻石输入框
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(941, 493, 10, 0);//点击C 清零
                                        }
                                        数字盘输入(上架价格)
                                        var 确认价格 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 828, 201, 176, 37);
                                        if (确认价格 != "false" && 确认价格 != "") {
                                            log("确认价格为:" + 确认价格)
                                            if (parseInt(上架价格) == parseInt(确认价格)) {
                                                log("准确无误")
                                                随机点击2(833, 589, 10, 10)
                                                var sjslym = imgempt(true, 0.9, "上架数量已满|上架数量已满2|上架数量已满3", 465, 49, 358, 60)
                                                if (sjslym != null) {
                                                    log("上架数量已满")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "上架次数上限"
                                                    }
                                                }
                                            } else {
                                                log("价格有误")
                                                return "错误价格"
                                            }
                                        } else {
                                            log("未识别到总价")
                                        }
                                    }
                                }
                            } else {
                                log("未识别到单价")
                                return
                            }
                        } else if (参数[35]) {
                            var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 444, 399, 163, 44);
                            if (单价 != "false" && 单价 != "") {
                                上浮价格 = parseFloat(单价 * 1.2)
                                var 上架价格 = parseInt(数量 * 上浮价格).toString()
                                log("数量为:" + 数量 + ",单价为:" + 单价 + ",上浮价格为:" + 上浮价格)
                                if (parseInt(上架价格) < 10) {
                                    log("总价未达到10金")
                                    随机点击(1005, 115, 10, 10);
                                    return "未达到交易价格"
                                } else {
                                    随机点击2(881, 180, 10, 0)
                                    随机点击2(928, 451, 10, 0)
                                    var 确定数量 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 838, 164, 154, 36);
                                    if (确定数量 != 数量) {
                                        log("数量不对，重新输入")
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(881, 180, 10, 0);
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(928, 451, 10, 0);
                                        }
                                    } else {
                                        log("输入价格:" + 上浮价格)
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(903, 217, 10, 0);//点击钻石输入框
                                        }
                                        for (let index = 0; index < 2; index++) {
                                            随机点击2(941, 493, 10, 0);//点击C 清零
                                        }
                                        数字盘输入(上架价格.toString())
                                        var 确认价格 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 828, 201, 176, 37);
                                        if (确认价格 != "false" && 确认价格 != "") {
                                            log("确认价格为:" + 确认价格)
                                            if (parseInt(上架价格) == parseInt(确认价格)) {
                                                log("准确无误")
                                                随机点击2(833, 589, 10, 10)
                                                var sjslym = imgempt(true, 0.9, "上架数量已满|上架数量已满2|上架数量已满3", 465, 49, 358, 60)
                                                if (sjslym != null) {
                                                    log("上架数量已满")
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "上架次数上限"
                                                    }
                                                }
                                            } else {
                                                log("价格有误")
                                                return "错误价格"
                                            }
                                        } else {
                                            log("未识别到总价")
                                        }
                                    }
                                }
                            } else {
                                log("未识别到单价")
                                return
                            }
                        }
                    } else {

                    }
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("卡回主页");
                        return
                    } else {
                        var pmhtjcsy = imgempt(true, 0.9, "拍卖行_添加出售页", 110, 132, 192, 78)
                        if (pmhtjcsy != null) {
                            log("返回重来");
                            return
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 数字盘输入(数组) {
    log("按对应数字盘")
    for (let index = 0; index < 数组.length; index++) {
        log(数组[index]);
        点击(数组[index])
        sleep(550)
    }
    function 点击(sum) {
        if (sum == "0")
            随机点击(709, 497, 10, 10);
        if (sum == "1")
            随机点击(706, 450, 10, 10);
        if (sum == "2")
            随机点击(786, 453, 10, 10);
        if (sum == "3")
            随机点击(864, 454, 10, 10);
        if (sum == "4")
            随机点击(706, 407, 10, 10);
        if (sum == "5")
            随机点击(784, 408, 10, 10);
        if (sum == "6")
            随机点击(864, 406, 10, 10);
        if (sum == "7")
            随机点击(708, 360, 10, 10);
        if (sum == "8")
            随机点击(784, 361, 10, 10);
        if (sum == "9")
            随机点击(864, 362, 10, 10);
    }
}

function 交易翻页版() {
    if (storage.get("识别的等级") == null || parseInt(storage.get("识别的等级")) <= 35) {
        log("未达到交易等级,放弃交易")
        return "完成交易"
    }

    var 点击位置 = 1
    var 初始X = 958
    var 初始Y = 175
    var 点击X = 958
    var 点击Y = 175
    var 点击次数 = 0
    var 无交易信息次数 = 0
    var 发送当前钻石数 = true
    var 等待结算 = true
    var 回收初始y = 148
    var 回收初始h = 492
    var 等待回收 = true
    var TempPicture = null
    var 记录位置 = {}
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrcstc = imgempt(true, 0.9, "确认出售弹窗|确认出售弹窗2", 429, 308, 193, 80)
            if (qrcstc != null) {
                log("确认出售")
                随机点击2(719, 548, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,处理")
                    // 无铜钱处理()
                    野外挂机刷金币()
                    return "掉线"
                }
            } else {
                var cstc = imgempt(true, 0.9, "出售弹窗|出售弹窗2", 550, 71, 209, 99)
                if (cstc != null) {
                    // 点击位置++
                    // 随机点击(1005, 114, 10, 10)
                    // 点击次数 = 0
                    // continue

                    log("出售弹窗,点击最大数量")
                    随机点击2(908, 178)
                    随机点击(938, 451)
                    点击次数 = 0
                    //夜鸦拍卖行
                    var 当前数量 = findNumber("夜鸦拍卖行", [859, 170, 117, 25]);
                    if (当前数量 != null) {
                        log("物品数为:" + 当前数量)
                        var 识别无交易信息的范围 = []
                        var 识别单价的范围 = []
                        if (参数[34] || 参数[35]) {
                            识别无交易信息的范围 = [412, 384, 195, 67]
                            识别单价的范围 = [444, 399, 163, 44]
                        } else if (参数[33]) {
                            识别无交易信息的范围 = [410, 454, 215, 67]
                            识别单价的范围 = [462, 465, 155, 46]
                        }
                        var cstc = imgempt(true, 0.9, "无交易信息|无交易信息2", 识别无交易信息的范围[0], 识别无交易信息的范围[1], 识别无交易信息的范围[2], 识别无交易信息的范围[3])
                        if (cstc != null) {
                            无交易信息次数++
                            if (无交易信息次数 >= 4) {
                                无交易信息次数 = 0
                                log("交易行网络掉线了")
                                关闭应用("com.wemade.nightcrows");
                                sleep(10000)
                                log("拉起游戏")
                                app.launch("com.wemade.nightcrows")
                                sleep(5000)
                                return "掉线"
                            }
                            点击位置++
                            随机点击(1005, 114, 10, 10)
                        } else {
                            log("识别单价")
                            var 单价 = findNumber("夜鸦拍卖行", 识别单价的范围);
                            if (单价 != null) {
                                var 上架金额 = parseInt(parseFloat(单价) * parseFloat(当前数量))
                                log("识别到的单价为:" + 单价 + ",识别到的数量为:" + 当前数量 + "上架的金额为:" + 上架金额)
                                var pmhtjcsy = imgempt(true, 0.9, "一堆9|一堆9_2", 810, 187, 208, 101)
                                if (pmhtjcsy != null && 单价 == 10) {
                                    log("数量不可修改，单价为10，判定为垃圾装备，不出售")
                                    点击位置++
                                    随机点击(1005, 114, 10, 10)
                                    // if (当前数量 == 1 && 单价 == 10) {
                                    //     log("数量为1，单价为10，判定为垃圾装备，不出售")
                                    //     点击位置++
                                    //     随机点击(1005, 114, 10, 10)
                                } else if (上架金额 < 10) {
                                    log("上架金额为:" + 上架金额 + ",小于10不出售")
                                    点击位置++
                                    随机点击(1005, 114, 10, 10)
                                } else {
                                    随机点击2(903, 217, 10, 0);//点击钻石输入框
                                    随机点击2(941, 493, 10, 0);//点击C 清零
                                    数字盘输入(上架金额.toString())
                                    var 确认价格 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 828, 201, 176, 37, "跳跃");
                                    if (确认价格 != "false" && 确认价格 != "") {
                                        log("确认价格为:" + 确认价格)
                                        if (parseInt(上架金额) == parseInt(确认价格)) {
                                            log("准确无误")
                                            随机点击2(833, 589, 10, 10)
                                            var sjslym = imgempt(true, 0.9, "上架数量已满|上架数量已满2|上架数量已满3", 465, 49, 358, 60)
                                            if (sjslym != null) {
                                                log("上架数量已满")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    return "上架次数上限"
                                                }
                                            }
                                        } else {
                                            log("价格有误")
                                            随机点击(1005, 114, 10, 10)
                                        }
                                    } else {
                                        log("未识别到总价")
                                    }
                                }
                            } else {
                                log("没识别到单价")
                            }
                            无交易信息次数 = 0
                        }
                    } else {
                        log("未找到物品数量")
                    }
                } else {
                    var pmhtjcsy = imgempt(true, 0.9, "拍卖行_添加出售页", 110, 132, 192, 78)
                    if (pmhtjcsy != null) {
                        if (发送当前钻石数) {
                            var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                            if (dinbuzuanshi1 != null) {
                                var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                if (当前钻石数量 != "false") {
                                    storage.put("现有钻石", 当前钻石数量.toString())
                                   
                                    var data = {
                                        "type": "当前金币",
                                        "androidID": 设备id,
                                        "当前金币": parseInt(当前钻石数量)
                                    };
                                    var jsonData = JSON.stringify(data);
                                    中控数据发送(jsonData)
                                    发送当前钻石数 = false
                                }
                            } else {

                            }

                            var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                            if (tongqian != null) {
                                var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                if (当前铜钱数量 != "false") {
                                    var json = {
                                        "设备id": 设备id,
                                        "type": "铜钱数",
                                        "铜钱数量": 当前铜钱数量
                                    }
                                    发送数据至中控("fragmentaryState", json)

                                }
                            }

                        }

                        var kejiesuan = imgempt(true, 0.9, "可结算", 655, 185, 208, 455)
                        if (kejiesuan != null && 等待结算) {
                            var dinbuzuanshi = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                            if (dinbuzuanshi != null) {
                                var 月份 = new Date().getMonth() + 1
                                if (月份 == "1") {
                                    var 需删除月份 = "10"
                                } else if (月份 == "2") {
                                    var 需删除月份 = "11"
                                } else if (月份 == "3") {
                                    var 需删除月份 = "12"
                                } else {
                                    var 需删除月份 = (parseInt(月份) - 3).toString()
                                }
                                if (月份 == "1") {
                                    var 上个月 = "12"
                                } else {
                                    var 上个月 = 月份 - 1
                                }
                                log("需删除月份:" + 需删除月份)
                                if (storage.get(需删除月份 + "月记录") != null) {
                                    log("需要删除：" + 需删除月份 + "月记录")
                                    storage.remove(需删除月份 + "月记录")
                                    storage.remove(需删除月份 + "月详细")
                                } else {
                                    log("没有该月份记录")
                                }
                                var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                if (钻石数量 != "false") {
                                    log("现有钻石:" + 钻石数量)
                                    storage.put("现有钻石", 钻石数量.toString())
                                   
                                    if (storage.get("上次钻石记录") != null) {
                                        var 上次钻石记录 = parseInt(storage.get("上次钻石记录"))
                                        var 判断钻石 = 钻石数量 - 上次钻石记录
                                        if (判断钻石 >= 2000) {
                                            storage.put("上次钻石记录", 钻石数量.toString())
                                        } else if (上次钻石记录 < 钻石数量) {
                                            var 时间 = new Date()
                                            记录钻石 = 钻石数量 - 上次钻石记录
                                            log("上次钻石记录:" + 上次钻石记录)
                                            log("现有钻石:" + 钻石数量)
                                            if (storage.get(月份 + "月记录") == null) {
                                                storage.put(月份 + "月记录", 记录钻石.toString())
                                                storage.put(月份 + "月详细", 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                                
                                                    ui.run(function () {
                                                        window.收益.setText("收益:" + 记录钻石)
                                                    });
                                            } else {
                                                var 总收益 = parseInt(storage.get(月份 + "月记录")) + 记录钻石
                                                storage.put(月份 + "月记录", 总收益.toString())
                                                var 详细收益 = storage.get(月份 + "月详细")
                                                storage.put(月份 + "月详细", 详细收益 + 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                               
                                                    ui.run(function () {
                                                        window.收益.setText("收益:" + 总收益)
                                                    });
                                            }
                                        }
                                    }
                                    storage.put("上次钻石记录", 钻石数量.toString())
                                    log("点击结算")
                                    随机点击2(1104, 681, 10, 5)
                                    var pmhssy = imgempt(true, 0.9, "正在验证交易", 463, 48, 209, 83)
                                    if (pmhssy != null) {
                                        log("正在验证交易,下次结算")
                                        等待结算 = false
                                    } else {
                                        等待结算 = false
                                    }
                                    sleep(1500)
                                    var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                    if (钻石数量 != "false") {
                                        storage.put("现有钻石", 钻石数量.toString())
                                        
                                        var 上次钻石记录 = parseInt(storage.get("上次钻石记录"))
                                        if (上次钻石记录 < 钻石数量) {
                                            var 时间 = new Date()
                                            log("上次钻石记录:" + 上次钻石记录)
                                            log("现有钻石:" + 钻石数量)
                                            记录钻石 = 钻石数量 - 上次钻石记录
                                            if (记录钻石 >= 1000) {
                                                log("数额过大,重新识别")
                                                var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                                if (钻石数量 != "false") {
                                                    log("再次识别钻石:" + 钻石数量)
                                                    记录钻石 = 钻石数量 - 上次钻石记录
                                                    log("最终记录钻石:" + 记录钻石)
                                                }
                                            } else {

                                            }
                                            if (storage.get(月份 + "月记录") == null) {
                                                storage.put(月份 + "月记录", 记录钻石.toString())
                                                storage.put(月份 + "月详细", 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")

                                               
                                                    ui.run(function () {
                                                        window.收益.setText("收益:" + 记录钻石)
                                                    });
                                            } else {
                                                var 总收益 = parseInt(storage.get(月份 + "月记录")) + 记录钻石
                                                storage.put(月份 + "月记录", 总收益.toString())
                                                var 详细收益 = storage.get(月份 + "月详细")
                                                storage.put(月份 + "月详细", 详细收益 + 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                               
                                                    ui.run(function () {
                                                        window.收益.setText("收益:" + 总收益)
                                                    });
                                            }
                                        } else {
                                            log("可能识别出错了")
                                        }
                                        storage.put("上次钻石记录", 钻石数量.toString())
                                        var data = {
                                            "type": "当前金币",
                                            "androidID": 设备id,
                                            "当前金币": parseInt(钻石数量)
                                        };
                                        var jsonData = JSON.stringify(data);
                                        中控数据发送(jsonData)
                                        if (storage.get(月份 + "月记录") != null) {
                                            var 当月金币 = storage.get(月份 + "月记录")
                                        } else {
                                            var 当月金币 = "0"
                                        }
                                        if (storage.get(上个月 + "月记录") != null) {
                                            var 上月金币 = storage.get(上个月 + "月记录")
                                        } else {
                                            var 上月金币 = "0"
                                        }
                                        var data = {
                                            "type": "当月金币",
                                            "androidID": 设备id,
                                            "当月金币": parseInt(当月金币),
                                            "上月金币": parseInt(上月金币),
                                            "上上月金币": parseInt(上上月收益)
                                        };
                                        var jsonData = JSON.stringify(data);
                                        中控数据发送(jsonData)
                                    } else {
                                        log("没识别到二次判定金额")
                                    }
                                } else {
                                    log("没识别到钻石数量,不点结算")
                                }
                            } else {
                                log("未识别到顶部钻石位置")
                            }
                        } else {
                            if (等待回收 == false) {//屏蔽识别
                                回收初始y = 4
                                回收初始h = 4
                            }
                            var huishou = imgempt(true, 0.9, "回收", 780, 回收初始y, 101, 回收初始h)
                            if (huishou != null && 等待回收) {
                                log("回收")
                                随机点击2(huishou.x, huishou.y, 10, 10)
                                for (let index = 0; index < 3; index++) {
                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                    if (bbkjbztc != null) {
                                        log("背包空间不足弹窗")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            // var 结果 = 成就图鉴()
                                            // if (结果 == "掉线") {
                                            //     return "掉线"
                                            // } else {
                                            var 结果 = 清理背包()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {

                                            }
                                            // }
                                        }
                                    }
                                    sleep(200)
                                }

                                var bbkjbztc = imgempt(true, 0.9, "项目数量不一致", 487, 287, 323, 84)
                                if (bbkjbztc != null) {
                                    log("无法回收,跳过")
                                    随机点击2(638, 447)
                                    回收初始y = huishou.y + 60
                                    回收初始h = 80
                                    if (回收初始y + 回收初始h >= 600) {
                                        log("不再识别")
                                        等待回收 = false
                                    }
                                } else {

                                }
                                重复点击坐标次数 = 0
                            } else {
                                var 行 = Math.ceil(点击位置 / 4)
                                var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                点击X = 初始X + (列 * 69 - 69)
                                点击Y = 初始Y + (行 * 69 - 69)
                                if (点击Y > 628) {
                                    log("物品栏点击上限")
                                    点击位置--
                                    var 行 = Math.ceil(点击位置 / 4)
                                    var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                    点击X = 初始X + (列 * 69 - 69)
                                    点击Y = 初始Y + (行 * 69 - 69)
                                    var 截取区域 = {}
                                    截取区域.x = 点击X - 34
                                    截取区域.y = 点击Y - 34
                                    console.log("上次结束位置:");
                                    console.log(截取区域);
                                    var img = captureScreen();
                                    TempPicture = images.clip(img, 截取区域.x, 截取区域.y, 69, 69);
                                    TempPicture.saveTo("/storage/emulated/0/tete.png")
                                    记录位置 = 截取区域
                                    console.log("截最后一个物品图并翻页");
                                    swipe(1032, 551, 1030, 380, 1000)
                                    sleep(1000)
                                    var img = captureScreen();
                                    imgxy = images.findImage(img, TempPicture, { region: [917, 134, 299, 507], threshold: 0.9 })
                                    if (imgxy != null) {
                                        log("识别的位置")
                                        log(imgxy)
                                        if ((imgxy.x <= (截取区域.x + 2) && imgxy.x >= (截取区域.x - 2)) && (imgxy.y <= (截取区域.y + 2) && imgxy.y >= (截取区域.y - 2))) {
                                            log("最后一个物品为相同物品,判定为结束")
                                            log("完成交易")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                log("退出交易")
                                                今日可交易 = false
                                                return "完成交易"
                                            }
                                        } else {
                                            log("找到上次结束位置:" + imgxy.x + "," + imgxy.y + "，开始计算下一个物品位置")
                                            log(imgxy.y)
                                            初始X = 958
                                            初始Y = imgxy.y + 69 + 34
                                            点击位置 = 1
                                            log("计算的位置为:" + 初始X + "," + 初始Y)
                                        }
                                    } else {
                                        console.log("没找到上次记录位置，请留意");
                                        // alert("留意")
                                    }
                                    TempPicture.recycle()
                                } else {
                                    log("点击下一个物品");
                                    log("点击的位置为:" + 点击位置 + "个物品")
                                    log(点击X + "," + 点击Y)
                                    随机点击(点击X, 点击Y, 10, 10)
                                    if (点击次数 > 2) {
                                        log("完成交易")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            log("退出交易")
                                            今日可交易 = false
                                            return "完成交易"
                                        }
                                    } else {
                                        点击次数++
                                    }


                                }
                            }
                        }
                    } else {
                        var pmhssy = imgempt(true, 0.9, "拍卖行_搜索页", 219, 637, 225, 82)
                        if (pmhssy != null) {
                            log("拍卖行_搜索页,点击添加出售");
                            随机点击(277, 98, 10, 10)
                        } else {
                            var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
                            if (cdjys != null) {
                                log("点击交易所");
                                随机点击(cdjys.x, cdjys.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {
                                    var cgyfz = imgempt(true, 0.9, "节电模式_背包已满", 14, 57, 141, 502)
                                    if (cgyfz != null) {
                                        log("节电模式，背包已满")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {
                                        var cgyfz = imgempt(true, 0.9, "节电模式_背包已满(大)", 6, 89, 226, 367)
                                        if (cgyfz != null) {
                                            log("节电模式，背包已满")
                                            swipe(566, 389, 968, 226, 500)
                                        } else {
                                            var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                            if (bbym != null) {
                                                log("交易,退出节电");
                                                swipe(566, 389, 968, 226, 500)
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}




function 交易开始() {
    var 点击位置 = 1
    var 初始X = 958
    var 初始Y = 175
    var 点击次数 = 0
    var 无交易信息次数 = 0
    var 发送当前钻石数 = true
    var 等待结算 = true
    var 回收初始y = 148
    var 回收初始h = 492
    var 等待回收 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrcstc = imgempt(true, 0.9, "确认出售弹窗|确认出售弹窗2", 429, 308, 193, 80)
            if (qrcstc != null) {
                log("确认出售")
                随机点击2(719, 548, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,处理")
                    // 无铜钱处理()
                    野外挂机刷金币()
                    return "掉线"
                }
            } else {
                var guajizhon = imgempt(true, 0.9, "物品分享图标|物品分享图标2", 304, 172, 682, 73)
                if (guajizhon != null) {
                    var 数量图标 = imgempt(true, 0.9, "数量图标", 449, 113, 407, 511)
                    if (数量图标 != null) {
                        var 数量 = 找数字("数字", "数量", 6, 0.9, 数量图标.x + 20, 数量图标.y, 146, 27);
                        if (数量 != "false") {
                            log(数量 + "个材料")
                            随机点击(902, 176, 10, 10)
                            sleep(1000)
                            var 结果 = 识别并填入价格(数量)
                            if (结果 == "掉线") {
                                return "掉线"
                            } else if (结果 == "未达到交易价格") {
                                点击位置++
                                log("点击栏变更为:" + 点击位置)
                            } else if (结果 == "错误价格") {
                                log("重新识别并填入")
                            } else if (结果 == "上架次数上限") {
                                log("退出交易")
                                今日可交易 = false
                                return "完成交易"
                            }
                        } else {
                            log("未识别到数量")
                            sleep(3000)
                        }
                    } else {
                        log("装备")
                        随机点击(1012, 324, 10, 10)
                        sleep(1000)
                        var 单价 = 找数字("数字", "夜鸦拍卖行", 6, 0.9, 444, 399, 163, 44);
                        if (单价 != "false" && 单价 != "") {
                            if (单价 > 10) {
                                var 结果 = 识别并填入价格(1)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "未达到交易价格") {
                                    点击位置++
                                    log("点击栏变更为:" + 点击位置)
                                } else if (结果 == "错误价格") {
                                    log("重新识别并填入")
                                } else if (结果 == "上架次数上限") {
                                    log("退出交易")
                                    今日可交易 = false
                                    return "完成交易"
                                }
                            } else {
                                log("装备价格小于11不上架")
                                随机点击(1003, 115, 10, 10)
                                点击位置++
                            }
                        } else {
                            log("没有金额点击退出")
                            随机点击(1003, 115, 10, 10)
                            点击位置++
                        }
                    }
                } else {
                    var cstc = imgempt(true, 0.9, "出售弹窗|出售弹窗2", 550, 71, 209, 99)
                    if (cstc != null) {
                        点击次数 = 0
                        if (参数[34] || 参数[35]) {
                            var cstc = imgempt(true, 0.9, "无交易信息", 412, 384, 195, 67)
                            if (cstc != null) {
                                无交易信息次数++
                                if (无交易信息次数 >= 4) {
                                    无交易信息次数 = 0
                                    log("交易行网络掉线了")
                                    关闭应用("com.wemade.nightcrows");
                                    sleep(10000)
                                    log("拉起游戏")
                                    app.launch("com.wemade.nightcrows")
                                    sleep(5000)
                                    return "掉线"
                                }
                                点击位置++
                                随机点击(1005, 114, 10, 10)
                            } else {
                                随机点击(461, 263, 10, 10)
                                无交易信息次数 = 0
                            }
                        } else if (参数[33]) {
                            var cstc = imgempt(true, 0.9, "无交易信息", 410, 454, 215, 67)
                            if (cstc != null) {
                                点击位置++
                                随机点击(1005, 114, 10, 10)
                            } else {
                                随机点击(461, 263, 10, 10)
                                无交易信息次数 = 0
                            }
                        }
                    } else {
                        var pmhtjcsy = imgempt(true, 0.9, "拍卖行_添加出售页", 110, 132, 192, 78)
                        if (pmhtjcsy != null) {
                            if (发送当前钻石数) {
                                var dinbuzuanshi1 = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                if (dinbuzuanshi1 != null) {
                                    var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi1.x, 1, 264, 45);
                                    if (当前钻石数量 != "false") {
                                        storage.put("现有钻石", 当前钻石数量.toString())
                                       
                                        var data = {
                                            "type": "当前金币",
                                            "androidID": 设备id,
                                            "当前金币": parseInt(当前钻石数量)
                                        };
                                        var jsonData = JSON.stringify(data);
                                        中控数据发送(jsonData)
                                        发送当前钻石数 = false
                                    }
                                } else {

                                }

                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)

                                    }
                                }

                            }

                            var kejiesuan = imgempt(true, 0.9, "可结算", 655, 185, 208, 455)
                            if (kejiesuan != null && 等待结算) {
                                var dinbuzuanshi = imgempt(true, 0.9, "顶部钻石", 384, 1, 581, 59)
                                if (dinbuzuanshi != null) {
                                    var 月份 = new Date().getMonth() + 1
                                    if (月份 == "1") {
                                        var 需删除月份 = "10"
                                    } else if (月份 == "2") {
                                        var 需删除月份 = "11"
                                    } else if (月份 == "3") {
                                        var 需删除月份 = "12"
                                    } else {
                                        var 需删除月份 = (parseInt(月份) - 3).toString()
                                    }
                                    if (月份 == "1") {
                                        var 上个月 = "12"
                                    } else {
                                        var 上个月 = 月份 - 1
                                    }
                                    log("需删除月份:" + 需删除月份)
                                    if (storage.get(需删除月份 + "月记录") != null) {
                                        log("需要删除：" + 需删除月份 + "月记录")
                                        storage.remove(需删除月份 + "月记录")
                                        storage.remove(需删除月份 + "月详细")
                                    } else {
                                        log("没有该月份记录")
                                    }
                                    var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                    if (钻石数量 != "false") {
                                        log("现有钻石:" + 钻石数量)
                                        storage.put("现有钻石", 钻石数量.toString())
                                       
                                        if (storage.get("上次钻石记录") != null) {
                                            var 上次钻石记录 = parseInt(storage.get("上次钻石记录"))
                                            var 判断钻石 = 钻石数量 - 上次钻石记录
                                            if (判断钻石 >= 2000) {
                                                storage.put("上次钻石记录", 钻石数量.toString())
                                            } else if (上次钻石记录 < 钻石数量) {
                                                var 时间 = new Date()
                                                记录钻石 = 钻石数量 - 上次钻石记录
                                                log("上次钻石记录:" + 上次钻石记录)
                                                log("现有钻石:" + 钻石数量)
                                                if (storage.get(月份 + "月记录") == null) {
                                                    storage.put(月份 + "月记录", 记录钻石.toString())
                                                    storage.put(月份 + "月详细", 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                                    
                                                        ui.run(function () {
                                                            window.收益.setText("收益:" + 记录钻石)
                                                        });
                                                } else {
                                                    var 总收益 = parseInt(storage.get(月份 + "月记录")) + 记录钻石
                                                    storage.put(月份 + "月记录", 总收益.toString())
                                                    var 详细收益 = storage.get(月份 + "月详细")
                                                    storage.put(月份 + "月详细", 详细收益 + 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                                    
                                                        ui.run(function () {
                                                            window.收益.setText("收益:" + 总收益)
                                                        });
                                                }
                                            }
                                        }
                                        storage.put("上次钻石记录", 钻石数量.toString())
                                        log("点击结算")
                                        随机点击2(1104, 681, 10, 5)
                                        var pmhssy = imgempt(true, 0.9, "正在验证交易", 463, 48, 209, 83)
                                        if (pmhssy != null) {
                                            log("正在验证交易,下次结算")
                                            等待结算 = false
                                        } else {
                                            等待结算 = false
                                        }
                                        sleep(1500)
                                        var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                        if (钻石数量 != "false") {
                                            storage.put("现有钻石", 钻石数量.toString())
                                            
                                            var 上次钻石记录 = parseInt(storage.get("上次钻石记录"))
                                            if (上次钻石记录 < 钻石数量) {
                                                var 时间 = new Date()
                                                log("上次钻石记录:" + 上次钻石记录)
                                                log("现有钻石:" + 钻石数量)
                                                记录钻石 = 钻石数量 - 上次钻石记录
                                                if (记录钻石 >= 1000) {
                                                    log("数额过大,重新识别")
                                                    var 钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, dinbuzuanshi.x, 1, 264, 45);
                                                    if (钻石数量 != "false") {
                                                        log("再次识别钻石:" + 钻石数量)
                                                        记录钻石 = 钻石数量 - 上次钻石记录
                                                        log("最终记录钻石:" + 记录钻石)
                                                    }
                                                } else {

                                                }
                                                if (storage.get(月份 + "月记录") == null) {
                                                    storage.put(月份 + "月记录", 记录钻石.toString())
                                                    storage.put(月份 + "月详细", 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")

                                                    
                                                        ui.run(function () {
                                                            window.收益.setText("收益:" + 记录钻石)
                                                        });
                                                } else {
                                                    var 总收益 = parseInt(storage.get(月份 + "月记录")) + 记录钻石
                                                    storage.put(月份 + "月记录", 总收益.toString())
                                                    var 详细收益 = storage.get(月份 + "月详细")
                                                    storage.put(月份 + "月详细", 详细收益 + 时间.getDate() + "日" + 时间.getHours() + "时" + 时间.getMinutes() + "分,收益:" + 记录钻石.toString() + "\n")
                                                   
                                                        ui.run(function () {
                                                            window.收益.setText("收益:" + 总收益)
                                                        });
                                                }
                                            } else {
                                                log("可能识别出错了")
                                            }
                                            storage.put("上次钻石记录", 钻石数量.toString())
                                            var data = {
                                                "type": "当前金币",
                                                "androidID": 设备id,
                                                "当前金币": parseInt(钻石数量)
                                            };
                                            var jsonData = JSON.stringify(data);
                                            中控数据发送(jsonData)
                                            if (storage.get(月份 + "月记录") != null) {
                                                var 当月金币 = storage.get(月份 + "月记录")
                                            } else {
                                                var 当月金币 = "0"
                                            }
                                            if (storage.get(上个月 + "月记录") != null) {
                                                var 上月金币 = storage.get(上个月 + "月记录")
                                            } else {
                                                var 上月金币 = "0"
                                            }
                                            var data = {
                                                "type": "当月金币",
                                                "androidID": 设备id,
                                                "当月金币": parseInt(当月金币),
                                                "上月金币": parseInt(上月金币),
                                                "上上月金币": parseInt(上上月收益)
                                            };
                                            var jsonData = JSON.stringify(data);
                                            中控数据发送(jsonData)
                                        } else {
                                            log("没识别到二次判定金额")
                                        }
                                    } else {
                                        log("没识别到钻石数量,不点结算")
                                    }
                                } else {
                                    log("未识别到顶部钻石位置")
                                }
                            } else {
                                if (等待回收 == false) {//屏蔽识别
                                    回收初始y = 4
                                    回收初始h = 4
                                }
                                var huishou = imgempt(true, 0.9, "回收", 780, 回收初始y, 101, 回收初始h)
                                if (huishou != null && 等待回收) {
                                    log("回收")
                                    随机点击2(huishou.x, huishou.y, 10, 10)
                                    for (let index = 0; index < 3; index++) {
                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                        if (bbkjbztc != null) {
                                            log("背包空间不足弹窗")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                // var 结果 = 成就图鉴()
                                                // if (结果 == "掉线") {
                                                //     return "掉线"
                                                // } else {
                                                var 结果 = 清理背包()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {

                                                }
                                                // }
                                            }
                                        }
                                        sleep(200)
                                    }

                                    var bbkjbztc = imgempt(true, 0.9, "项目数量不一致", 487, 287, 323, 84)
                                    if (bbkjbztc != null) {
                                        log("无法回收,跳过")
                                        随机点击2(638, 447)
                                        回收初始y = huishou.y + 60
                                        回收初始h = 80
                                        if (回收初始y + 回收初始h >= 600) {
                                            log("不再识别")
                                            等待回收 = false
                                        }
                                    } else {

                                    }
                                    重复点击坐标次数 = 0
                                } else {
                                    log("点击出售");
                                    if (点击位置 > 27) {
                                        log("物品栏点击上限退出交易")
                                        log("完成交易")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            log("退出交易")
                                            今日可交易 = false
                                            return "完成交易"
                                        }

                                    } else {
                                        var 行 = Math.ceil(点击位置 / 4)
                                        var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                                        var 点击X = 初始X + (列 * 69 - 69)
                                        var 点击Y = 初始Y + (行 * 69 - 69)
                                        log("点击的位置为:" + 点击位置 + "个物品")
                                        随机点击(点击X, 点击Y, 10, 10)
                                        点击次数++
                                        if (点击次数 >= 3) {
                                            log("完成交易")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                log("退出交易")
                                                今日可交易 = false
                                                return "完成交易"
                                            }
                                        }
                                    }
                                }
                            }
                        } else {
                            var pmhssy = imgempt(true, 0.9, "拍卖行_搜索页", 219, 637, 225, 82)
                            if (pmhssy != null) {
                                log("拍卖行_搜索页,点击添加出售");
                                随机点击(277, 98, 10, 10)
                            } else {
                                var cdjys = imgempt(true, 0.9, "菜单_交易所", 960, 87, 316, 460)
                                if (cdjys != null) {
                                    log("点击交易所");
                                    随机点击(cdjys.x, cdjys.y, 10, 10)
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                    if (手 != null) {
                                        log("主页点击菜单");
                                        随机点击(1238, 36, 10, 10)
                                    } else {
                                        var cgyfz = imgempt(true, 0.9, "节电模式_背包已满", 14, 57, 141, 502)
                                        if (cgyfz != null) {
                                            log("节电模式，背包已满")
                                            swipe(566, 389, 968, 226, 500)
                                        } else {
                                            var cgyfz = imgempt(true, 0.9, "节电模式_背包已满(大)", 6, 89, 226, 367)
                                            if (cgyfz != null) {
                                                log("节电模式，背包已满")
                                                swipe(566, 389, 968, 226, 500)
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 领取邮件内容() {
    log("邮件")
    var 未识别 = 0
    var 点击次数 = 0
    var 单个领取 = false
    var 点击红点次数 = 0
    var 识别铜钱 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {

            var xinxiang = imgempt(true, 0.9, "获得邮件", 622, 373, 269, 171)
            if (xinxiang != null) {
                log("点击获得邮件");
                随机点击(xinxiang.x, xinxiang.y, 10, 10)
                sleep(1000)
                随机点击2(457, 683, 10, 10)
                for (let index = 0; index < 3; index++) {
                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                    if (bbkjbztc != null) {
                        log("背包空间不足弹窗")
                        var 结果 = 纯回主页()
                        if (结果 == "掉线") {
                            return "掉线"
                        } else {
                            var 结果 = 清理背包()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {

                            }
                        }
                    }
                    sleep(200)
                }
            } else {
                var 信件 = imgempt(true, 0.9, "信件|信件2|信件3", 947, 601, 168, 107)
                if (信件 != null) {
                    log("进来邮件了")
                    var bbym = cor(true, 15, 956, 613, 118, 99, "#d02e2c", [[0, 2, "#d42c2b"]])
                    if (bbym != null) {
                        log("点击邮件")
                        随机点击(1006, 660, 10, 10)
                    } else {
                        未识别++
                        if (未识别 >= 3) {
                            if (storage.get("激战地锁") == false || storage.get("区副本锁") == false) {
                                log("达标")
                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                if (tongqian != null) {
                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                    if (当前铜钱数量 != "false") {
                                        var json = {
                                            "设备id": 设备id,
                                            "type": "铜钱数",
                                            "铜钱数量": 当前铜钱数量
                                        }
                                        发送数据至中控("fragmentaryState", json)
                                       
                                            var 铜钱条件 = 10000000
                                        if (当前铜钱数量 >= 铜钱条件) {
                                            log("铜钱大于1000w,解锁激战地")
                                            var json = {
                                                "设备id": 设备id,
                                                "type": "激战地锁",
                                                "状态": "未锁"
                                            }
                                            发送数据至中控("fragmentaryState", json)
                                            storage.put("激战地锁", true)
                                        } else {
                                            log("激战地未达到解锁条件")
                                        }
                                        if (当前铜钱数量 >= 800000) {
                                            log("铜钱大于80w,解锁区副本")
                                            storage.put("区副本锁", true)
                                        } else {
                                            log("区副本未达到解锁条件")
                                        }


                                    } else {
                                        log("未能识别到铜钱数量,不进行解锁")
                                    }
                                } else {
                                    log("未能识别到铜钱图标,不进行解锁")
                                }
                            }

                            log("未识别到可领取邮件,关闭菜单")
                            随机点击(1246, 42, 10, 10)
                            邮件领取 = false
                            邮件领取时间 = new Date().getHours()
                            纯回主页()
                            return
                        }
                    }
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var xinxiang = imgempt(true, 0.9, "信箱", 44, 2, 186, 73)
                        if (xinxiang != null) {
                            if (单个领取) {
                                var xinxiang = imgempt(true, 0.9, "点击邮件领取", 1050, 115, 218, 355)
                                if (xinxiang != null) {
                                    log("单击邮件")
                                    随机点击2(xinxiang.x, xinxiang.y, 10, 10)
                                    for (let index = 0; index < 3; index++) {
                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                        if (bbkjbztc != null) {
                                            log("背包空间不足弹窗")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                // var 结果 = 成就图鉴()
                                                // if (结果 == "掉线") {
                                                //     return "掉线"
                                                // } else {
                                                var 结果 = 清理背包()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {

                                                }
                                                // }
                                            }
                                        } else {

                                        }
                                        sleep(200)
                                    }
                                } else {
                                    var bbym = cor(true, 15, 50, 63, 896, 60, "#d02e2c", [[0, 2, "#d42c2b"]])
                                    if (bbym != null) {
                                        单个领取 = false
                                    } else {
                                        未识别++
                                        if (未识别 >= 5) {
                                            if (storage.get("激战地锁") == false || storage.get("区副本锁") == false) {
                                                var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                                if (tongqian != null) {
                                                    var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                                    if (当前铜钱数量 != "false") {
                                                        var json = {
                                                            "设备id": 设备id,
                                                            "type": "铜钱数",
                                                            "铜钱数量": 当前铜钱数量
                                                        }
                                                        发送数据至中控("fragmentaryState", json)

                                                       
                                                            var 铜钱条件 = 10000000
                                                        if (当前铜钱数量 >= 铜钱条件) {
                                                            log("铜钱大于1000w,解锁激战地")
                                                            var json = {
                                                                "设备id": 设备id,
                                                                "type": "激战地锁",
                                                                "状态": "未锁"
                                                            }
                                                            发送数据至中控("fragmentaryState", json)
                                                            storage.put("激战地锁", true)
                                                        } else {
                                                            log("激战地未达到解锁条件")
                                                        }
                                                        if (当前铜钱数量 >= 800000) {
                                                            log("铜钱大于80w,解锁区副本")
                                                            storage.put("区副本锁", true)
                                                        } else {
                                                            log("区副本未达到解锁条件")
                                                        }
                                                    } else {
                                                        log("未能识别到铜钱数量,不进行解锁")
                                                    }
                                                } else {
                                                    log("未能识别到铜钱图标,不进行解锁")
                                                }
                                            }
                                            log("未识别到可领取邮件,走了")
                                            随机点击(1239, 37, 10, 10)
                                            邮件领取 = false
                                            邮件领取时间 = new Date().getHours()
                                            纯回主页()
                                            return
                                        }
                                    }
                                }
                            } else {
                                var bbym = cor(true, 15, 50, 63, 896, 60, "#d02e2c", [[0, 2, "#d42c2b"]])
                                if (bbym != null) {
                                    log("点击邮件红点")
                                    if (parseInt(bbym.x) >= 580) {
                                        单个领取 = true
                                    } else {
                                        点击红点次数++
                                        if (点击红点次数 >= 10) {
                                           
                                            发送异常("请检测网络")
                                            alert("请检测网络")
                                        }
                                    }
                                    未识别 = 0
                                    随机点击(bbym.x - 20, bbym.y + 20, 10, 10)
                                    sleep(450)
                                    随机点击2(1160, 681, 10, 10)///
                                    for (let index = 0; index < 3; index++) {
                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3|背包空间不足弹窗3", 452, 42, 357, 202)
                                        if (bbkjbztc != null) {
                                            log("背包空间不足弹窗")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                // var 结果 = 成就图鉴()
                                                // if (结果 == "掉线") {
                                                //     return "掉线"
                                                // } else {
                                                var 结果 = 清理背包()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    break
                                                }
                                                // }
                                            }
                                        } else {

                                        }
                                        sleep(200)
                                    }
                                    sleep(1000)
                                    随机点击(457, 683, 10, 10)
                                } else {
                                    未识别++
                                    if (未识别 >= 5) {
                                        log("未识别到可领取邮件,退出")
                                        if (storage.get("激战地锁") == false || storage.get("区副本锁") == false) {
                                            var tongqian = imgempt(true, 0.9, "顶端铜钱标志|顶端铜钱标志2", 395, 1, 606, 71)
                                            if (tongqian != null) {
                                                var 当前铜钱数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, tongqian.x, 1, 264, 45);
                                                if (当前铜钱数量 != "false") {
                                                    var json = {
                                                        "设备id": 设备id,
                                                        "type": "铜钱数",
                                                        "铜钱数量": 当前铜钱数量
                                                    }
                                                    发送数据至中控("fragmentaryState", json)
                                                        var 铜钱条件 = 10000000
                                                    if (当前铜钱数量 >= 铜钱条件) {
                                                        log("铜钱大于1000w,解锁激战地")
                                                        var json = {
                                                            "设备id": 设备id,
                                                            "type": "激战地锁",
                                                            "状态": "未锁"
                                                        }
                                                        发送数据至中控("fragmentaryState", json)
                                                        storage.put("激战地锁", true)
                                                    } else {
                                                        log("激战地未达到解锁条件")
                                                    }
                                                    if (当前铜钱数量 >= 800000) {
                                                        log("铜钱大于80w,解锁区副本")
                                                        storage.put("区副本锁", true)
                                                    } else {
                                                        log("区副本未达到解锁条件")
                                                    }
                                                } else {
                                                    log("未能识别到铜钱数量,不进行解锁")
                                                }
                                            } else {
                                                log("未能识别到铜钱图标,不进行解锁")
                                            }
                                        }
                                        随机点击(1239, 37, 10, 10)
                                        邮件领取 = false
                                        邮件领取时间 = new Date().getHours()
                                        纯回主页()
                                    }
                                }
                            }
                        } else {
                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (jdmsz != null) {
                                log("退出节电,领取邮件")
                                swipe(566, 389, 968, 226, 500)
                            } else {

                            }
                        }
                    }
                }
            }
            // }
        }
        sleep(200)
    }
}


function 巴斯锂开始() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.9, "希南的橡树|林间小路", 38, 53, 235, 64)
            if (guajizhon != null) {
                log("已到达挂机点");
                巴斯锂挂机()
            } else {
                var diaoduyuan = imgempt(true, 0.9, "到期", 1143, 131, 123, 81)
                if (diaoduyuan != null) {
                    log("时长已加完，点击开始")
                    随机点击(1157, 681, 10, 10)
                } else {
                    var diaoduyuan = imgempt(true, 0.9, "请登记日程", 736, 275, 446, 356)
                    if (diaoduyuan != null) {
                        var diaoduyuan = imgempt(true, 0.9, "登记为45级", 732, 192, 492, 95)
                        if (diaoduyuan != null) {//
                            log("点击加时")
                            for (let index = 0; index < 9; index++) {
                                随机点击2(1153, 233, 10, 10)
                            }
                        } else {
                            var diaoduyuan = imgempt(true, 0.9, "登记为47级", 732, 192, 492, 95)
                            if (diaoduyuan != null) {
                                log("点击加时")
                                for (let index = 0; index < 9; index++) {
                                    随机点击2(1153, 233, 10, 10)
                                }
                            } else {
                                log("关闭登记错误的")
                                随机点击(1209, 238, 10, 10)
                            }
                        }
                    } else {
                        var diaoduyuan = imgempt(true, 0.9, "调度员", 953, 4, 326, 708)
                        if (diaoduyuan != null) {
                            log("主页点击50级挂机");
                            随机点击(diaoduyuan.x, diaoduyuan.y, 10, 10)
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("主页点击菜单");
                                随机点击(1238, 36, 10, 10)
                            } else {
                                var guajizhon = imgempt(true, 0.9, "不是这个图|不是这个图2", 330, 130, 387, 100)
                                if (guajizhon != null) {
                                    log("不是这个图");
                                    随机点击(149, 188, 10, 10)
                                } else {
                                    var diaoduyuan = imgempt(true, 0.9, "是这个图", 330, 130, 387, 100)
                                    if (diaoduyuan != null) {
                                        log("向下滑动");
                                        swipe(508, 587, 510, 246, 300)
                                    } else {
                                        var diaoduyuan = imgempt(true, 0.9, "巴斯锂45级挂机点", 330, 130, 387, 100)
                                        if (diaoduyuan != null) {
                                            log("巴斯锂45级挂机点");
                                            for (let index = 0; index < 2; index++) {
                                                随机点击(diaoduyuan.x, diaoduyuan.y, 10, 10)
                                            }
                                            //这里再判断为45还是47
                                            //47
                                            for (let index = 0; index < 2; index++) {
                                                随机点击(diaoduyuan.x, diaoduyuan.y + 130, 10, 10)
                                            }
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(300)
    }
}


function 区副本开始() {
    var 区副本已加时长 = false
    var 副本跳转次数 = 0
    var 点击次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("区本区使用时间满")
                随机点击(631, 445, 10, 10)
            } else {//
                var frzd = imgempt(true, 0.9, "小地图_马萨塔冰窟|小地图(入口)", 11, 48, 340, 74)
                // var frzd = imgempt(true, 0.9, "小地图_马萨塔冰窟", 56, 49, 167, 70)
                if (frzd != null) {
                    点击次数 = 0
                    log("到达马萨塔冰窟");
                    // var 结果 = 切换频道()
                    // if (结果 == "掉线") {
                    //     return "掉线"
                    // } else {
                    副本跳转次数 = 0
                    var 结果 = 接取公会任务("区本")
                    if (结果 == "完成") {
                        var 结果 = 区副本挂机()
                        if (结果 == "购买药水") {
                            var 结果 = 回城买药()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else if (结果 == "死亡") {
                            return "死亡"
                        } else if (结果 == "重启") {
                            return "重启"
                        } else if (结果 == "掉线") {
                            return "掉线"
                        }
                    }
                    // }
                } else {
                    var qrtz = imgempt(true, 0.9, "加时长MAX|加时长MAX2", 653, 369, 251, 191)
                    if (qrtz != null) {
                        log("加时长MAX");
                        // 随机点击2(804, 424, 10, 10)
                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                        sleep(450)
                        随机点击2(729, 565, 10, 10)
                        区副本已加时长 = true
                        var qrtz = imgempt(true, 0.9, "取消加时长", 410, 485, 296, 153)
                        if (qrtz != null) {
                            随机点击(qrtz.x, qrtz.y, 10, 10)
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            点击次数 = 0
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                            副本跳转次数++
                            if (副本跳转次数 > 3) {
                                log("副本拥挤")
                                storage.put("区副本拥挤时间戳", new Date().getTime())
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "等会"
                                }
                            }
                        } else {
                            var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                            if (fuben != null) {
                                log("点击副本");
                                随机点击(fuben.x, fuben.y, 10, 10)
                            } else {
                                var fnzd = imgempt(true, 0.9, "马萨塔冰窟|马萨塔冰窟2", 330, 131, 244, 93)
                                if (fnzd != null) {
                                    log("马萨塔冰窟");
                                    var hysj = imgempt(true, 0.9, "区副本到期2|区副本到期", 513, 201, 219, 97)
                                    if (hysj != null) {
                                        log("区副本已刷完")
                                        storage.put("区副本时间记录", getTimestampWeekNumber().toString())
                                        return "完成区本"
                                    } else {
                                        log("区副本还有时间");
                                        var fb35j = imgempt(true, 0.9, "30及40级合3|30及40级合|30及40级合2", 868, 126, 184, 269)
                                        if (fb35j != null) {
                                            if (区副本已加时长) {
                                                var 随机X坐标 = random(1, 150)
                                                if (参数[49]) {
                                                    // if (storage.get("自动副本测试") < 200) {
                                                    随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)//200防
                                                    // } else {
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63 + 63 + 63, 10, 10)//45级
                                                    // }


                                                    // if (storage.get("自动副本测试") == "30") {
                                                    //     log("副本30级");
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 79, 10, 10)
                                                    // } else if (storage.get("自动副本测试") == "40") {
                                                    //     log("副本40级");
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 158, 10, 10)
                                                    // }//
                                                } else {
                                                    // if (参数[12]) {
                                                    log("区副本30-40级");
                                                    随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                    // } else if ((参数[13])) {
                                                    //     log("区副本40级");
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63 + 63, 10, 10)
                                                    // } else if (参数[16] || 参数[17]) {
                                                    //     log("区副本45级");
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63 + 63 + 63, 10, 10)
                                                    // }//
                                                }

                                                var fnzd = imgempt(true, 0.9, "已经在副本了|已经在副本里了", 509, 50, 270, 80)
                                                if (fnzd != null) {
                                                    log("已经在马萨塔冰窟");
                                                    // var 结果 = 切换频道()
                                                    // if (结果 == "掉线") {
                                                    //     return "掉线"
                                                    // } else {
                                                    副本跳转次数 = 0
                                                    var 结果 = 接取公会任务("区本")
                                                    if (结果 == "完成") {
                                                        var 结果 = 区副本挂机()
                                                        if (结果 == "购买药水") {
                                                            var 结果 = 回城买药()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                        } else if (结果 == "死亡") {
                                                            return "死亡"
                                                        } else if (结果 == "重启") {
                                                            return "重启"
                                                        } else if (结果 == "掉线") {
                                                            return "掉线"
                                                        }
                                                    }
                                                    // }
                                                } else {
                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                    if (guajizhon != null) {
                                                        log("铜钱不足,处理")
                                                        // 无铜钱处理()
                                                        野外挂机刷金币()
                                                        return "掉线"
                                                    } else {
                                                        点击次数++
                                                        if (点击次数 >= 50) {
                                                            点击次数 = 0
                                                            关闭应用("com.wemade.nightcrows");
                                                            sleep(10000)
                                                            log("拉起游戏")
                                                            app.launch("com.wemade.nightcrows")
                                                            sleep(5000)
                                                            return "掉线"
                                                        }
                                                    }
                                                }

                                            } else {
                                                log("点击增加时长")
                                                随机点击(526, 235)
                                            }
                                        } else {
                                            log("没找到35级等级")
                                        }
                                    }

                                    // var hysj = imgempt(true, 0.9, "还有时间", 551, 203, 205, 71)
                                    // if (hysj != null) {
                                    //     log("区副本还有时间");
                                    //     var fb35j = imgempt(true, 0.9, "副本30级|副本30级2", 884, 131, 263, 99)
                                    //     if (fb35j != null) {
                                    //         if (区副本已加时长) {
                                    //             var 随机X坐标 = random(1, 150)
                                    //             if (参数[49]) {
                                    //                 if (storage.get("自动副本测试") == "30") {
                                    //                     log("副本30级");
                                    //                     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 79, 10, 10)
                                    //                 } else if (storage.get("自动副本测试") == "40") {
                                    //                     log("副本40级");
                                    //                     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 158, 10, 10)
                                    //                 }//
                                    //             } else {
                                    //                 if (参数[12]) {
                                    //                     log("副本30级");
                                    //                     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 79, 10, 10)
                                    //                 } else if ((参数[13] || 参数[16] || 参数[17])) {
                                    //                     log("副本40级");
                                    //                     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 158, 10, 10)
                                    //                 }//
                                    //             }

                                    //             var fnzd = imgempt(true, 0.9, "已经在副本了|已经在副本里了", 509, 50, 270, 80)
                                    //             if (fnzd != null) {
                                    //                 log("已经在马萨塔冰窟");
                                    //                 // var 结果 = 切换频道()
                                    //                 // if (结果 == "掉线") {
                                    //                 //     return "掉线"
                                    //                 // } else {
                                    //                 副本跳转次数 = 0
                                    //                 var 结果 = 接取公会任务("区本")
                                    //                 if (结果 == "完成") {
                                    //                     var 结果 = 区副本挂机()
                                    //                     if (结果 == "购买药水") {
                                    //                         var 结果 = 回城买药()
                                    //                         if (结果 == "掉线") {
                                    //                             return "掉线"
                                    //                         }
                                    //                     } else if (结果 == "死亡") {
                                    //                         return "死亡"
                                    //                     } else if (结果 == "重启") {
                                    //                         return "重启"
                                    //                     } else if (结果 == "掉线") {
                                    //                         return "掉线"
                                    //                     }
                                    //                 }
                                    //                 // }
                                    //             } else {
                                    //                 var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    //                 if (guajizhon != null) {
                                    //                     log("铜钱不足,处理")
                                    //                     // 无铜钱处理()
                                    //                     野外挂机刷金币()
                                    //                     return "掉线"
                                    //                 } else {
                                    //                     点击次数++
                                    //                     if (点击次数 >= 50) {
                                    //                         点击次数 = 0
                                    //                         关闭应用("com.wemade.nightcrows");
                                    //                         sleep(10000)
                                    //                         log("拉起游戏")
                                    //                         app.launch("com.wemade.nightcrows")
                                    //                         sleep(5000)
                                    //                         return "掉线"
                                    //                     }
                                    //                 }
                                    //             }

                                    //         } else {
                                    //             log("点击增加时长")
                                    //             随机点击(526,235)
                                    //         }
                                    //     } else {
                                    //         log("没找到35级等级")
                                    //     }
                                    // } else {
                                    //     log("区副本已刷完")
                                    //     storage.put("区副本时间记录", getTimestampWeekNumber().toString())
                                    //     return "完成区本"
                                    // }
                                } else {
                                    var rfbfnzd = imgempt(true, 0.9, "日副本_繁荣之地选项|日副本_繁荣之地选项2", 17, 128, 398, 564)
                                    if (rfbfnzd != null) {
                                        log("日副本_繁荣之地选项，点击区副本");
                                        随机点击(283, 98, 10, 10)
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("主页点击菜单");
                                            随机点击(1238, 36, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 清理背包(mode) {
    var 临时分解 = false// true
    var api分解 = false
    var 分解材料 = ""
    if (参数[15] && 设备id != "" && false) {
        var url = "14.22.112.230:8233/snhc/getYeYaInternationalDissolubleMaterials"//验证码平台API接口
        var params = {
            param1: 设备id // 替换为您要发送的数据
        };
        try {
            http.__okhttp__.setTimeout(5000);
            var result = http.post(url, params)
            var r = result.body.json()
            if (r.code == 0) {
                api分解 = true
                分解材料 = r.msg
                log("可分解材料为:" + r.msg)
            } else {
                log(r.msg)
            }
        } catch (error) {
            log("分解材料获取错误")
            log(error)
        }
    }


    if (临时分解) {
        //临时分解变量
        var 点击位置 = 1
        var 初始X = 958
        var 初始Y = 156
        var 点击X = 0
        var 点击Y = 0
        while (true) {////临时分解
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {
                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                if (bbym != null) {
                    log("背包里")
                    var 结果 = cor(true, 12, 1210, 66, 69, 455, "#65553d", [[-7, 0, "#62543d"], [3, -4, "#61513b"], [0, -123, "#967e5b"], [-12, -21, "#1e1a17"], [-19, 2, "#221e1c"]])
                    if (结果 != null) {
                        log("点击整理背包")
                        随机点击(1178, 577)
                        sleep(2000)
                        log("点击装备栏")
                        随机点击2(结果.x, 结果.y)
                    } else {
                        var bbym = imgempt(true, 0.9, "分解弹窗", 619, 114, 147, 72)
                        if (bbym != null) {
                            var 行 = Math.ceil(点击位置 / 4)
                            var 列 = (点击位置 % 4 === 0) ? 4 : (点击位置 % 4);
                            点击X = 初始X + (列 * 69 - 69)
                            点击Y = 初始Y + (行 * 69 - 69)
                            log("点击选中物品：" + 点击位置)
                            点击位置++
                            随机点击2(点击X, 点击Y)
                            if (点击位置 >= 17) {
                                点击位置 = 1
                                log("已经选择很多装备，先分解一波")
                                随机点击(773, 598)
                            } else {
                                for (let index = 0; index < 3; index++) {
                                    var bbym = imgempt(true, 0.9, "无法分解的单品", 506, 57, 219, 64)
                                    if (bbym != null) {
                                        log("此装备无法分解，点击分解")
                                        随机点击2(773, 598)
                                        if (mode == "直接返回") {
                                            return "成功"
                                        } else if (mode == "仓库") {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            return "成功"
                                        } else {
                                            var 截图 = captureScreen();//#84
                                            var clip = images.clip(截图, 948, 74, 73, 32);
                                            var bb = images.interval(clip, "#C9634F", 20)
                                            var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                            bb.recycle()
                                            clip.recycle()
                                            if (获取的所有点.length >= 50) {
                                                log("清理背包格子满了去仓库放入")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    最终仓库调整(false)
                                                    return "掉线"
                                                }
                                                // 发送异常("满背包请手动处理")
                                                // alert("满背包请手动处理")
                                                // exit()
                                            } else {

                                            }
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                return "成功"
                                            }
                                        }
                                    }
                                    sleep(200)
                                }
                            }
                        } else {
                            log("点击分解选项")
                            随机点击(1023, 577)
                        }
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                        } else {
                            var cgyfz = imgempt(true, 0.9, "节电模式_背包已满", 14, 57, 141, 502)
                            if (cgyfz != null) {
                                log("节电模式，背包已满")
                                swipe(566, 389, 968, 226, 500)
                            } else {
                                var cgyfz = imgempt(true, 0.9, "节电模式_背包已满(大)", 6, 89, 226, 367)
                                if (cgyfz != null) {
                                    log("节电模式，背包已满")
                                    swipe(566, 389, 968, 226, 500)
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("清理背包,退出节电")
                                        swipe(566, 389, 968, 226, 500)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                }
            }
            sleep(200)
        }

    } else {
        while (true) {
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("主页点击背包");
                    随机点击(1115, 31, 10, 10)
                } else {
                    var fenjie = imgempt(true, 0.9, "分解MAX", 723, 365, 139, 82)
                    if (fenjie != null) {
                        log("分解MAX");
                        随机点击(fenjie.x, fenjie.y, 10, 10)
                        随机点击(732, 494, 10, 10)
                    } else {
                        var fenjie = imgempt(true, 0.9, "获得道具2", 527, 211, 242, 147)
                        if (fenjie != null) {
                            log("获得道具2");
                            随机点击(fenjie.x, fenjie.y, 10, 10)
                        } else {
                            var bbym = imgempt(true, 0.9, "获得道具点击画面|获得道具点击画面2", 515, 230, 258, 104)
                            if (bbym != null) {
                                log("获得道具点击画面")
                                随机点击2(603, 635)
                            } else {
                                var bbfj = imgempt(true, 0.9, "都已勾选|都已勾选2", 537, 413, 232, 66)//반짝이는
                                if (bbfj != null) {
                                    if (参数[15] && api分解 && false) {
                                        var bbfj = imgempt(true, 0.9, 分解材料, 918, 114, 304, 366)
                                        if (bbfj != null) {
                                            log("点击需分解材料")
                                            随机点击2(bbfj.x, bbfj.y, 10, 10)
                                        } else {
                                            log("都已勾选,点击分解");//
                                            随机点击2(774, 598, 10, 10)
                                            for (let index = 0; index < 3; index++) {
                                                var bbfj = imgempt(true, 0.9, "请选择要分解的项目", 599, 43, 207, 90)
                                                if (bbfj != null) {
                                                    随机点击2(590, 595)
                                                    if (mode == "直接返回") {
                                                        return "成功"
                                                    } else {
                                                        // var 背包格子 = findNumber("背包数字", [941, 68, 88, 41]);
                                                        // if (背包格子 != null && 背包格子.toString().length >= 4 && 背包格子.toString().length <= 6) {
                                                        //     var 后面位数 = parseInt(Math.ceil(背包格子.toString().length / 2))
                                                        //     log("后面位数" + 后面位数)
                                                        //     总格子 = parseInt(背包格子.toString().slice(-后面位数))
                                                        //     可用格子 = parseInt(背包格子.toString().slice(0, (背包格子.toString().length - 后面位数)))
                                                        //     log("可用格子:" + 可用格子 + "----总格子:" + 总格子)
                                                        //     if (可用格子 == 总格子) {
                                                        //         log("清理背包格子满了去仓库放入")
                                                        //         var 结果 = 纯回主页()
                                                        //         if (结果 == "掉线") {
                                                        //             return "掉线"
                                                        //         } else {
                                                        //             最终仓库调整(false)
                                                        //             return "掉线"
                                                        //         }
                                                        //         发送异常("满背包请手动处理")
                                                        //         alert("满背包请手动处理")
                                                        //         exit()
                                                        //     }
                                                        //      else if (可用格子 <= 4) {
                                                        //         var 结果 = 纯回主页()
                                                        //         if (结果 == "掉线") {
                                                        //             return "掉线"
                                                        //         } else {
                                                        //             最终仓库调整(false)
                                                        //             return "掉线"
                                                        //         }
                                                        //     }
                                                        // } else {
                                                        var 截图 = captureScreen();//#84
                                                        var clip = images.clip(截图, 948, 74, 73, 32);
                                                        var bb = images.interval(clip, "#C9634F", 20)
                                                        var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                        bb.recycle()
                                                        clip.recycle()
                                                        if (获取的所有点.length >= 50) {
                                                            log("清理背包格子满了去仓库放入")
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                最终仓库调整(false)
                                                                return "掉线"
                                                            }
                                                            // 发送异常("满背包请手动处理")
                                                            // alert("满背包请手动处理")
                                                            // exit()
                                                        } else {

                                                        }
                                                        // }

                                                        var 结果 = 纯回主页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        } else {
                                                            return "成功"
                                                        }
                                                    }
                                                }
                                                sleep(100)
                                            }
                                        }
                                    } else {
                                        log("都已勾选,点击分解");//
                                        随机点击2(774, 598, 10, 10)
                                        for (let index = 0; index < 3; index++) {
                                            var bbfj = imgempt(true, 0.9, "请选择要分解的项目", 599, 43, 207, 90)
                                            if (bbfj != null) {
                                                随机点击2(590, 595)
                                                if (mode == "直接返回") {
                                                    return "成功"
                                                } else {
                                                    var 截图 = captureScreen();//#84
                                                    var clip = images.clip(截图, 948, 74, 73, 32);
                                                    var bb = images.interval(clip, "#B46A5F", 20)
                                                    var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                                                    bb.recycle()
                                                    clip.recycle()
                                                    if (获取的所有点.length >= 50) {
                                                        log("清理背包格子满了去仓库放入")
                                                        var 结果 = 纯回主页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        } else {
                                                            最终仓库调整(false)
                                                            return "掉线"
                                                        }
                                                        // 发送异常("满背包请手动处理")
                                                        // alert("满背包请手动处理")
                                                        // exit()
                                                    } else {
                                                        log("点数:" + 获取的所有点.length)
                                                    }
                                                    // }

                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        return "成功"
                                                    }
                                                }
                                            }
                                            sleep(100)
                                        }
                                    }
                                } else {
                                    var bbfj = imgempt(true, 0.9, "低级_未勾|低级_未勾2", 545, 411, 91, 70)
                                    if (bbfj != null) {
                                        log("低级_勾选上");
                                        随机点击(581, 446, 10, 10)

                                        if (mode == "清理过期物品") {
                                            随机点击(788,440)
                                        }else{
                                            随机点击(581, 524, 10, 10)
                                        }

                                        随机点击(580, 481)
                                        随机点击(682, 482)
                                    } else {
                                        var bbfj = imgempt(true, 0.9, "低级_未勾|低级_未勾2", 660, 424, 69, 48)
                                        if (bbfj != null) {
                                            log("高级_勾选上");
                                            随机点击2(683, 444, 10, 10)
                                        } else {
                                            var bbfj = imgempt(true, 0.9, "背包_分解", 987, 545, 77, 67)
                                            if (bbfj != null) {
                                                log("背包_分解");
                                                随机点击(1176, 575)
                                                sleep(1000)
                                                随机点击(bbfj.x, bbfj.y, 10, 10)
                                            } else {
                                                var cgyfz = imgempt(true, 0.9, "节电模式_背包已满", 14, 57, 141, 502)
                                                if (cgyfz != null) {
                                                    log("节电模式，背包已满")
                                                    swipe(566, 389, 968, 226, 500)
                                                } else {
                                                    var cgyfz = imgempt(true, 0.9, "节电模式_背包已满(大)", 6, 89, 226, 367)
                                                    if (cgyfz != null) {
                                                        log("节电模式，背包已满")
                                                        swipe(566, 389, 968, 226, 500)
                                                    } else {
                                                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                        if (jdmsz != null) {
                                                            log("清理背包,退出节电")
                                                            swipe(566, 389, 968, 226, 500)
                                                        } else {

                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            sleep(200)
        }
    }


}


function 开始判定药水数量(mode) {
    var 滑动次数 = 0
    var 未点击药水 = true
    var 重新滑动 = false
    var 重新滑动次数 = 0
    var 无药次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "小药详细|小药详细2|中药详细|中药详细2", 562, 96, 161, 136)
            if (bbym != null) {
                log("药水详细识别数量")
                var 数量图标 = imgempt(true, 0.9, "数量图标", 570, 195, 98, 224)
                if (数量图标 != null) {
                    log("识别数量")
                    var 数量 = 找数字("数字", "数量", 6, 0.9, 数量图标.x + 20, 数量图标.y, 146, 27);
                    if (数量 != "false") {
                        if (数量 < 200) {
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }

                            if (mode == "挂机中") {
                                return "确实无药"
                            } else {
                                var 结果 = 回城买药()
                                if (结果 == "购买成功") {
                                    return "购买成功"
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            }
                        } else {
                            药水上次检测 = new Date().getTime()
                            log("不需要买药")
                            if (mode == "挂机中") {
                                return "无需买药"
                            } else {
                                var 结果 = 纯回主页()
                                log("返回结果:" + 结果)
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "购买成功"
                                }
                            }
                        }
                    } else {
                        log("未识别到数量")
                        sleep(3000)
                    }
                } else {
                    log("没找到数量图标")
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                if (bbym != null) {
                    log("背包里")
                    随机点击2(1245, 309)
                    重复点击坐标次数 = 0
                    if (参数[21]) {
                        var bbym = imgempt(true, 0.8, "中药水(背包)|中药水(背包闪烁)|中药水(背包)2", 920, 114, 291, 376)//
                        if (bbym != null) {
                            log("点击中药水")
                            随机点击(bbym.x, bbym.y)
                            未点击药水 = false
                        } else {
                            var bbym = cor(true, 25, 918, 115, 292, 410, "#a8a3a0", [[-1, 20, "#e9e6e1"], [-1, 21, "#eae5e2"], [-1, 26, "#f5e0db"], [-1, 30, "#f1e2dd"], [0, 30, "#eee3df"], [3, 20, "#3f0708"], [5, 18, "#ca9da0"], [6, 11, "#b8ada9"]])
                            if (bbym != null) {
                                log("点击中药水")
                                随机点击(bbym.x, bbym.y)
                                未点击药水 = false
                            } else {
                                if (未点击药水) {
                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                    if (bbym != null) {
                                        log("无药")
                                        重新滑动 = true
                                        无药次数++
                                        // if (滑动次数 <= 15 && 无药次数 <= 3) {
                                        //     log("往回滑动")
                                        //     swipe(1061, 281, 1061, 442, 2000)
                                        // } else {
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }

                                        if (mode == "挂机中") {
                                            return "确实无药"
                                        } else {
                                            var 结果 = 回城买药()
                                            if (结果 == "购买成功") {
                                                return "购买成功"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }
                                        // }
                                    } else {
                                        // if (重新滑动) {
                                        //     重新滑动次数++
                                        //     if (重新滑动次数 <= 3) {
                                        //         swipe(1061, 281, 1061, 442, 2000)
                                        //     } else {
                                        //         重新滑动次数 = 0
                                        //         重新滑动 = false
                                        //     }
                                        // } else {
                                        //     滑动次数++
                                        swipe(1061, 442, 1061, 281, 2000)
                                        // }
                                    }
                                }
                            }
                        }
                    } else {
                        var bbym = imgempt(true, 0.8, "小药水(背包)|小药水(背包)2|小药水(背包闪烁)", 920, 114, 291, 376)
                        if (bbym != null) {
                            log("点击小药水")
                            随机点击(bbym.x, bbym.y)
                            未点击药水 = false
                        } else {
                            var bbym = cor(true, 25, 918, 115, 292, 410, "#9f8063", [[6, 11, "#a28067"], [3, 15, "#b39b7f"], [0, 21, "#dcd4d1"], [0, 24, "#ddd4cf"], [-1, 25, "#dcd4d1"], [0, 28, "#e3d0cc"], [0, 29, "#e3d0ca"], [0, 30, "#e3d0ca"], [3, 15, "#b39b7f"], [4, 20, "#190a07"], [7, 20, "#371804"], [9, 19, "#947d6f"]])
                            if (bbym != null) {
                                log("点击小药水")
                                随机点击(bbym.x, bbym.y)
                                未点击药水 = false
                            } else {
                                if (未点击药水) {
                                    var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                                    if (bbym != null) {
                                        log("无药")
                                        // 重新滑动 = true
                                        // 无药次数++
                                        // if (滑动次数 <= 15 && 无药次数 <= 3) {
                                        //     log("往回滑动")
                                        //     swipe(1061, 281, 1061, 442, 2000)
                                        // } else {
                                        if (mode == "挂机中") {
                                            return "确实无药"
                                        } else {

                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            var 结果 = 回城买药()
                                            if (结果 == "购买成功") {
                                                return "购买成功"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }
                                        // }
                                    } else {
                                        // if (重新滑动) {
                                        //     重新滑动次数++
                                        //     if (重新滑动次数 <= 3) {
                                        //         swipe(1061, 281, 1061, 442, 2000)
                                        //     } else {
                                        //         重新滑动 = false
                                        //         重新滑动次数 = 0
                                        //     }
                                        // } else {
                                        //     滑动次数++
                                        swipe(1061, 442, 1061, 281, 2000)
                                        // }
                                    }

                                } else {

                                }
                            }
                        }
                    }
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                        } else {
                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (jdmsz != null) {
                                log("检测药水,退出节电")
                                swipe(566, 389, 968, 226, 500)
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 判断瞬移及回城卷轴() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                var 结果 = 判定卷轴数量()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return 结果
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        随机点击(1115, 34, 10, 10)
                    } else {
                        var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                        if (关闭XX != null) {
                            log("关闭XX");
                            随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                        } else {
                            var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                            if (退出 != null) {
                                log("退出");
                                随机点击(退出.x, 退出.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("点击背包")
                                    随机点击(1115, 34, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 判定卷轴数量() {
    var 滑动次数 = 0
    var 随机瞬间卷轴 = false
    var 快速回城卷轴 = false
    var 识别随机瞬间卷轴 = true
    var 识别快速回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
            if (bbym != null) {
                log("背包里")
                重复点击坐标次数 = 0
                随机点击2(1245, 309)
                if (识别随机瞬间卷轴) {
                    var zhuangbei = imgempt(true, 0.9, "瞬间移动卷轴(背包)", 917, 106, 307, 503)
                    if (zhuangbei != null) {
                        log("瞬间移动卷轴");
                        随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                        var 数量图标 = imgempt(true, 0.9, "数量图标", 570, 195, 98, 224)
                        if (数量图标 != null) {
                            log("识别瞬间移动卷轴数量")
                            var 数量 = 找数字("数字", "数量", 6, 0.9, 数量图标.x + 20, 数量图标.y, 146, 27);
                            if (数量 != "false") {
                                识别随机瞬间卷轴 = false
                                if (数量 < 200) {
                                    log("随机瞬移卷轴不足")
                                    随机瞬间卷轴 = true
                                } else {
                                    log("随机瞬移卷轴充足")
                                }
                            } else {
                                log("未识别到数量")
                                sleep(3000)
                            }
                        } else {
                            log("没找到数量图标")
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                        if (bbym != null) {
                            log("啥也没有")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            if (随机瞬间卷轴 && 快速回城卷轴) {
                                return "回城及瞬移卷轴"
                            } else if (随机瞬间卷轴) {
                                return "瞬移卷轴"
                            } else if (快速回城卷轴) {
                                return "回城卷轴"
                            } else {
                                if (识别随机瞬间卷轴) {
                                    return "瞬移卷轴"
                                }
                                return "无需买卷轴"
                            }
                        } else {
                            滑动次数++
                            swipe(1061, 442, 1061, 281, 2000)
                            if (滑动次数 >= 9) {
                                log("识别次数过多")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                if (随机瞬间卷轴 && 快速回城卷轴) {
                                    return "回城及瞬移卷轴"
                                } else if (随机瞬间卷轴) {
                                    return "瞬移卷轴"
                                } else if (快速回城卷轴) {
                                    return "回城卷轴"
                                } else {
                                    if (识别随机瞬间卷轴) {
                                        return "瞬移卷轴"
                                    }
                                    return "无需买卷轴"
                                }
                            }
                        }
                    }
                } else if (识别快速回城卷轴) {
                    var zhuangbei = imgempt(true, 0.9, "回城卷轴(背包)", 917, 106, 307, 503)
                    if (zhuangbei != null) {
                        log("回城卷轴");
                        随机点击(zhuangbei.x, zhuangbei.y, 10, 10)
                        var 数量图标 = imgempt(true, 0.9, "数量图标", 570, 195, 98, 224)
                        if (数量图标 != null) {
                            log("识别回城卷轴数量")
                            var 数量 = 找数字("数字", "数量", 6, 0.9, 数量图标.x + 20, 数量图标.y, 146, 27);
                            if (数量 != "false") {
                                识别快速回城卷轴 = false
                                if (数量 < 50) {
                                    log("回城卷轴不足")
                                    快速回城卷轴 = true
                                } else {
                                    log("回城卷轴充足")
                                }
                            } else {
                                log("未识别到数量")
                                sleep(3000)
                            }
                        } else {
                            log("没找到数量图标")
                        }
                    } else {
                        var bbym = imgempt(true, 0.9, "背包(啥也没有)", 918, 115, 292, 410)
                        if (bbym != null) {
                            log("啥也没有")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            if (随机瞬间卷轴 && 快速回城卷轴) {
                                return "回城及瞬移卷轴"
                            } else if (随机瞬间卷轴) {
                                return "瞬移卷轴"
                            } else if (快速回城卷轴) {
                                return "回城卷轴"
                            } else {
                                if (识别快速回城卷轴) {
                                    return "回城卷轴"
                                }
                                return "无需买卷轴"
                            }
                        } else {
                            滑动次数++
                            swipe(1061, 442, 1061, 281, 2000)
                            if (滑动次数 >= 3) {
                                log("识别次数过多")
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                                if (随机瞬间卷轴 && 快速回城卷轴) {
                                    return "回城及瞬移卷轴"
                                } else if (随机瞬间卷轴) {
                                    return "瞬移卷轴"
                                } else if (快速回城卷轴) {
                                    return "回城卷轴"
                                } else {
                                    if (识别快速回城卷轴) {
                                        return "回城卷轴"
                                    }
                                    return "无需买卷轴"
                                }
                            }
                        }
                    }
                } else {
                    log("识别完成")
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    if (随机瞬间卷轴 && 快速回城卷轴) {
                        return "回城及瞬移卷轴"
                    } else if (随机瞬间卷轴) {
                        return "瞬移卷轴"
                    } else if (快速回城卷轴) {
                        return "回城卷轴"
                    } else {
                        return "无需买卷轴"
                    }
                }
            } else {
                var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                if (bbym != null) {
                    log("点击背包")
                    随机点击2(bbym.x, bbym.y)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                    if (手 != null) {
                        log("点击背包")
                        随机点击(1115, 34, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}


function 判断是否买药() {
    药水检测时间戳 = new Date().getTime()
    var 检测相隔时间 = (药水检测时间戳 - 药水上次检测) / 1000
    if (检测相隔时间 >= 600) {
        var bbym = imgempt(true, 0.9, "药水千字", 977, 659, 60, 45)
        if (bbym != null) {
            log("千瓶以上药水")
            药水上次检测 = new Date().getTime()
            return "购买成功"
        } else {
            log("判断是否买药")
            var 结果 = 节电模式检测药水()
            if (结果 == "掉线") {
                return "掉线"
            } else if (结果 == "无需买药") {
                药水上次检测 = new Date().getTime()
                return "购买成功"
            } else {
                log("再次确认药水数量")
                while (true) {
                    if (异常捕获() == "掉线") {
                        return "掉线"
                    } else {
                        var bbym = imgempt(true, 0.9, "背包(打开状态)", 1103, 40, 144, 101)
                        if (bbym != null) {
                            log("背包里")
                            var 结果 = 开始判定药水数量()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "购买成功"
                            }
                        } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                var 数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, 951, 657, 93, 49);
                                if (数量 != "false") {
                                    if (数量 < 200) {
                                        log("首次识别小于200瓶,点击背包再次识别")
                                        随机点击(1115, 34, 10, 10)
                                    } else {
                                        log("药水:" + 数量)
                                        药水上次检测 = new Date().getTime()
                                        return "购买成功"
                                    }
                                } else {
                                    log("未识别到药水,点击背包")
                                    随机点击(1115, 34, 10, 10)
                                }
                            } else {
                                var 关闭XX = imgempt(false, 0.9, "关闭XX", 0, 0, 0, 0)
                                if (关闭XX != null) {
                                    log("关闭XX");
                                    随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                } else {
                                    var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                    if (退出 != null) {
                                        log("退出");
                                        随机点击(退出.x, 退出.y, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    }
                    sleep(200)
                }
            }
        }
    } else {
        log("短时间内不再检测药水")
        return "购买成功"
    }
}

function 周副本开始(mode) {
    var 周副本已加时长 = false
    var 副本跳转次数 = 0
    var 点击次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "周本未解锁", 49, 404, 273, 157)
            if (dtyd != null) {
                log("周本未解锁")
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    return "未解锁副本"
                }
            } else {
                var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
                if (dtyd != null) {
                    log("周副本区使用时间满")
                    随机点击(631, 445, 10, 10)
                } else {
                    var frzd = imgempt(true, 0.9, "小地图_伊丽塔神殿", 56, 49, 167, 70)
                    if (frzd != null) {
                        log("到达伊丽塔神殿");
                        副本跳转次数 = 0
                        // var 结果 = 切换频道()
                        // if (结果 == "掉线") {
                        //     return "掉线"
                        // } else {
                        var 结果 = 接取公会任务("周本")
                        if (结果 == "完成") {
                            var 结果 = 周副本挂机()
                            if (结果 == "购买药水") {
                                var 结果 = 回城买药()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else if (结果 == "死亡") {
                                return "死亡"
                            } else if (结果 == "重启") {
                                return "重启"
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        }
                        // }
                    } else {
                        var qrtz = imgempt(true, 0.9, "加时长MAX|加时长MAX2", 653, 369, 251, 191)
                        if (qrtz != null) {
                            log("加时长MAX");
                            // 随机点击2(804, 424, 10, 10)
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            sleep(450)
                            随机点击2(729, 565, 10, 10)
                            周副本已加时长 = true
                            var qrtz = imgempt(true, 0.9, "取消加时长", 410, 485, 296, 153)
                            if (qrtz != null) {
                                随机点击(qrtz.x, qrtz.y, 10, 10)
                            }
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                                副本跳转次数++
                                if (副本跳转次数 > 3) {
                                    log("副本拥挤")
                                    storage.put("周副本拥挤时间戳", new Date().getTime())
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "等会"
                                    }
                                }
                            } else {
                                var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                                if (fuben != null) {
                                    log("点击副本");
                                    随机点击(fuben.x, fuben.y, 10, 10)
                                } else {
                                    var fnzd = imgempt(true, 0.9, "伊丽塔神殿|伊丽塔神殿2", 338, 128, 247, 93)
                                    if (fnzd != null) {
                                        log("伊丽塔神殿");
                                        var rfbfnzd = imgempt(true, 0.9, "周副本没时间了|日副本没时间了2", 23, 416, 180, 128)
                                        if (rfbfnzd != null) {
                                            log("周副本已刷完")
                                            storage.put("周副本时间记录", getTimestampWeekNumber().toString())
                                            return "完成周本"
                                        } else {
                                            log("周副本还有时间");
                                            var fb35j = imgempt(true, 0.9, "副本30级|副本30级2", 884, 131, 263, 99)
                                            if (fb35j != null) {
                                                if (周副本已加时长) {
                                                    var 随机X坐标 = random(1, 150)
                                                    if (参数[49]) {
                                                        if (storage.get("自动副本测试") == "30") {
                                                            log("副本30级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                        } else if (storage.get("自动副本测试") == "40" || storage.get("自动副本测试") == "50") {
                                                            log("副本40级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                        }
                                                        // else if (storage.get("自动副本测试") == "50") {
                                                        //     log("副本50级");
                                                        //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                                        // }
                                                    } else {
                                                        if (参数[12]) {
                                                            log("副本30级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                        } else if (参数[13]) {
                                                            log("副本40级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                        } else if (参数[16]) {
                                                            log("副本50级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                                        } else if (参数[17]) {
                                                            log("副本60级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 189, 10, 10)
                                                        }
                                                    }


                                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                    if (guajizhon != null) {
                                                        log("铜钱不足,处理")
                                                        // 无铜钱处理()
                                                        野外挂机刷金币()
                                                        return "掉线"
                                                    } else {
                                                        var fnzd = imgempt(true, 0.9, "已经在副本了|已经在副本里了", 509, 50, 270, 80)
                                                        if (fnzd != null) {
                                                            log("已经在副本了")
                                                            随机点击2(1257, 17)
                                                        } else {
                                                            if (mode != "练级") {
                                                                点击次数++
                                                                if (点击次数 >= 50) {
                                                                    点击次数 = 0
                                                                    关闭应用("com.wemade.nightcrows");
                                                                    sleep(10000)
                                                                    log("拉起游戏")
                                                                    app.launch("com.wemade.nightcrows")
                                                                    sleep(5000)
                                                                    return "掉线"
                                                                }
                                                            }
                                                        }
                                                    }
                                                } else {
                                                    log("点击增加时长")
                                                    随机点击(526, 235)
                                                }
                                            } else {
                                                log("没找到35级等级")
                                            }
                                        }



                                        // var hysj = imgempt(true, 0.9, "还有时间", 551, 203, 205, 71)
                                        // if (hysj != null) {

                                        // } else {
                                        //     log("周副本已刷完")
                                        //     storage.put("周副本时间记录", getTimestampWeekNumber().toString())
                                        //     return "完成周本"
                                        // }
                                    } else {
                                        var rfbfnzd = imgempt(true, 0.9, "周副本_伊丽塔神殿选项|周副本_伊丽塔神殿选项2", 3, 122, 336, 576)
                                        if (rfbfnzd != null) {
                                            log("周副本_伊丽塔神殿选项");
                                            var panmduan = imgempt(true, 0.9, "周副本没时间了|日副本没时间了2", 23, 416, 180, 128)
                                            if (panmduan != null) {
                                                log("周副本暂时未刷新")
                                                storage.put("周副本时间记录", getTimestampWeekNumber().toString())
                                                return "完成周本"
                                            } else {
                                                随机点击(rfbfnzd.x, rfbfnzd.y, 10, 10)
                                                重复点击坐标次数 = 0
                                            }
                                        } else {
                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                log("主页点击菜单");
                                                随机点击(1238, 36, 10, 10)
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 区副本挂机() {
    var 未移动 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
            if (guajizhon != null) {
                log("被攻击中,逃跑");
                for (let index = 0; index < 3; index++) {
                    随机点击2(893, 660)
                }
                storage.put("区本今日逃跑次数", (parseInt(storage.get("区本今日逃跑次数")) + 1).toString())
                
                    if (storage.get("区本今日逃跑次数") >= 区本逃跑次数限制 || storage.get("区副本修复装备次数") >= 5) {
                        log("逃跑次数过多结束区本")
                        threads.currentThread().interrupt()
                    }
               
                    ui.run(function () {
                        window.运维检测.setText("♣检" + storage.get("区本今日逃跑次数").toString() + ",")
                    });
                return "掉线"
            } else {
                var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
                if (dtyd != null) {
                    log("副本区使用时间满")
                    随机点击(631, 445, 10, 10)
                    return "时间结束"
                } else {
                    var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                    if (guajizhon != null) {
                        log("死亡墓碑恢复经验，区服本挂机");
                        var 结果 = 死亡恢复经验()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                        if (bbym != null) {
                            log("死亡墓碑恢复经验，区服本挂机颜色");
                            var 结果 = 死亡恢复经验()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else {
                            if (未移动) {
                                var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                if (dtyd != null) {
                                    log("点击移动");
                                    随机点击(dtyd.x, dtyd.y, 10, 10)
                                    var 已到达 = 0
                                    var 移动标识时间 = new Date().getTime() / 1000
                                    while (true) {
                                        var 移动标识识别时间戳 = new Date().getTime() / 1000
                                        var 移动时间判断 = 移动标识识别时间戳 - 移动标识时间
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {
                                            var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                            if (dtyd != null) {
                                                log("点击移动");
                                                未到达 = 0
                                                随机点击(dtyd.x, dtyd.y, 10, 10)
                                            } else {
                                                var ydbs = imgempt(true, 0.8, "移动标识", 354, 45, 558, 654)
                                                if (ydbs != null) {
                                                    if (移动时间判断 >= 240) {
                                                        log("移动标识,移动中...卡移动了");
                                                        未移动 = true
                                                        已到达 = 0
                                                        break
                                                    } else {
                                                        log("移动标识,移动中...");
                                                        已到达 = 0
                                                        sleep(1000)
                                                    }
                                                } else {
                                                    已到达++
                                                    if (已到达 >= 4) {
                                                        未移动 = false
                                                        break
                                                    }
                                                }
                                            }
                                        }
                                        sleep(550)
                                    }
                                } else {
                                    var frzd = imgempt(true, 0.9, "小地图_马萨塔冰窟|小地图(入口)", 11, 48, 340, 74)
                                    // var frzd = imgempt(true, 0.9, "小地图_马萨塔冰窟", 56, 49, 167, 70)
                                    if (frzd != null) {
                                        log("点击地图");
                                        随机点击(145, 163, 10, 10)
                                    } else {
                                        var rfbdtfrzd = imgempt(true, 0.9, "周副本地图_马萨塔冰窟", 1010, 50, 199, 84)
                                        if (rfbdtfrzd != null) {
                                            log("随机点击位置");

                                            if (参数[49]) {
                                                if (storage.get("自动副本测试") == "30") {
                                                    var 坐标数组 = ["573,153", "590,203", "648,150", "648,202", "726,159", "707,210", "710,274", "637,270", "571,282", "639,330", "692,357", "588,353", "493,408", "567,412", "636,411", "715,411", "787,410", "702,469", "759,485", "828,476", "643,493", "579,472", "510,483", "443,470", "444,531", "438,595", "502,601", "504,551", "567,551", "569,591", "716,552", "700,598", "774,597", "774,556", "858,588", "836,546"]
                                                } else if (storage.get("自动副本测试") == "40") {
                                                    var 坐标数组 = ["545,179", "638,172", "721,182", "476,283", "565,259", "638,272", "714,259", "806,281", "480,352", "567,321", "638,350", "716,322", "804,359", "415,431", "477,425", "552,412", "642,434", "733,405", "808,422", "862,429", "504,489", "572,484", "640,511", "702,484", "780,489", "490,542", "570,548", "786,543", "635,572", "706,548", "707,599", "568,597", "638,574"]
                                                }
                                            } else {
                                                if (参数[12]) {
                                                    var 坐标数组 = ["573,153", "590,203", "648,150", "648,202", "726,159", "707,210", "710,274", "637,270", "571,282", "639,330", "692,357", "588,353", "493,408", "567,412", "636,411", "715,411", "787,410", "702,469", "759,485", "828,476", "643,493", "579,472", "510,483", "443,470", "444,531", "438,595", "502,601", "504,551", "567,551", "569,591", "716,552", "700,598", "774,597", "774,556", "858,588", "836,546"]
                                                } else if (参数[13]) {
                                                    var 坐标数组 = ["545,179", "638,172", "721,182", "476,283", "565,259", "638,272", "714,259", "806,281", "480,352", "567,321", "638,350", "716,322", "804,359", "415,431", "477,425", "552,412", "642,434", "733,405", "808,422", "862,429", "504,489", "572,484", "640,511", "702,484", "780,489", "490,542", "570,548", "786,543", "635,572", "706,548", "707,599", "568,597", "638,574"]
                                                } else if (参数[16] || 参数[17]) {//四十五级和五十级共用四十五级
                                                    var 坐标数组 = ["566,184", "718,182", "513,233", "631,226", "772,238", "500,315", "567,301", "639,305", "716,298", "786,313", "411,375", "460,382", "520,379", "635,370", "761,380", "828,389", "877,379", "689,412", "587,407", "642,447", "536,443", "456,454", "740,443", "825,456", "645,602", "580,586", "708,585", "768,558", "712,523", "569,522", "510,559", "514,487"]
                                                }
                                            }


                                            var 随机坐标 = 坐标数组[random(0, 坐标数组.length - 1)]
                                            var 坐标xy = 随机坐标.split(",")
                                            x坐标 = parseInt(坐标xy[0])
                                            y坐标 = parseInt(坐标xy[1])
                                            随机点击(x坐标, y坐标, 10, 10)
                                        } else {
                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                            if (手 != null) {
                                                log("识别到手,点击地图");
                                                随机点击(145, 163, 10, 10)
                                            } else {
                                                var fnzd = imgempt(true, 0.9, "马萨塔冰窟", 330, 131, 244, 93)
                                                if (fnzd != null) {
                                                    log("已经在副本,关闭副本选项")
                                                    随机点击(1241, 33, 10, 10)
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            } else {
                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                if (mi != null) {
                                    log("移动中...");
                                    sleep(1000)
                                } else {
                                    var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                    if (退出 != null) {
                                        log("退出地图");
                                        随机点击(退出.x, 退出.y, 10, 10)
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                        if (jdmsz != null) {
                                            log("节电模式中");
                                            var 结果 = 节电模式("区本")
                                            if (结果 == "购买药水") {
                                                return "购买药水"
                                            } else if (结果 == "死亡") {
                                                return "死亡"
                                            } else if (结果 == "重启") {
                                                return "重启"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                            if (jdmsz != null) {
                                                log("已锁定怪物")
                                                var frzd = imgempt(true, 0.9, "马萨塔冰窟(洞穴)", 11, 48, 340, 74)
                                                if (frzd != null) {
                                                    log("还在马萨塔冰窟...点击节电模式");
                                                    if (参数[48] && !参数[26]) {
                                                        while (true) {
                                                            if (异常捕获() == "掉线") {
                                                                log("掉线")
                                                                break
                                                            } else {
                                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                if (jeig != null) {
                                                                    log("设定自动使用生命药剂为百分之八十左右")
                                                                    sleep(1000)
                                                                    随机点击2(921, 464)
                                                                    参数[48] = false
                                                                    ui.run(function () {
                                                                        ui.药水设定.setChecked(false)
                                                                    })
                                                                    storage.put("药水设定", false)
                                                                    break
                                                                } else {
                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                    if (手 != null) {
                                                                        log("点击药水")
                                                                        随机点击2(976, 656)
                                                                    } else {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    sleep(random(1000, 10000))
                                                    随机点击(34, 624, 10, 10)
                                                } else {
                                                    log("不在区副本了");
                                                    return "死亡"
                                                }
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    var frzd = imgempt(true, 0.9, "马萨塔冰窟(洞穴)", 11, 48, 340, 74)
                                                    if (frzd != null) {
                                                        log("还在马萨塔冰窟...点击节电模式");
                                                        if (参数[48] && !参数[26]) {
                                                            while (true) {
                                                                if (异常捕获() == "掉线") {
                                                                    log("掉线")
                                                                    break
                                                                } else {
                                                                    var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                    if (jeig != null) {
                                                                        log("设定自动使用生命药剂为百分之八十左右")
                                                                        sleep(1000)
                                                                        随机点击2(921, 464)
                                                                        参数[48] = false
                                                                        ui.run(function () {
                                                                            ui.药水设定.setChecked(false)
                                                                        })
                                                                        storage.put("药水设定", false)
                                                                        break
                                                                    } else {
                                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                        if (手 != null) {
                                                                            log("点击药水")
                                                                            随机点击2(976, 656)
                                                                        } else {
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        sleep(random(1000, 10000))
                                                        随机点击(34, 624, 10, 10)
                                                    } else {
                                                        log("不在区副本了");
                                                        return "死亡"
                                                    }
                                                } else {
                                                    var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                                    if (auto != null) {
                                                        log("点击auto");
                                                        随机点击(auto.x, auto.y, 10, 10)
                                                    } else {
                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                        if (bfzl != null) {
                                                            随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            log("死亡复活,等待20秒恢复")
                                                            sleep(20000)
                                                            return "死亡"
                                                        } else {

                                                        }
                                                    }
                                                }
                                                // }
                                            }
                                            // }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 周副本挂机() {
    var 未移动 = true
    野外跳转时间 = new Date().getTime()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("周本区使用时间满")
                随机点击(631, 445, 10, 10)
                return "时间结束"
            } else {
                var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                if (guajizhon != null) {
                    log("死亡墓碑恢复经验，周副本挂机");
                    var 结果 = 死亡恢复经验()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                    if (bbym != null) {
                        log("死亡墓碑恢复经验，周副本挂机颜色");
                        var 结果 = 死亡恢复经验()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        if (未移动) {
                            var shunyijuanzhou = imgempt(true, 0.9, "瞬间移动卷轴", 779, 609, 94, 99)
                            var 随机位移方式 = random(1, 2)
                            if (shunyijuanzhou != null && 随机位移方式 == 1) {
                                log("点击使用瞬移卷轴")
                                sleep(4000)
                                随机点击2(820, 653)
                                for (let index = 0; index < 5; index++) {
                                    var jdmsz = imgempt(true, 0.9, "瞬移卷轴不足", 486, 56, 194, 62)
                                    if (jdmsz != null) {
                                        log("瞬移卷轴不足")
                                        回城买药()
                                        return "掉线"
                                    }
                                }
                                未移动 = false
                            } else {
                                var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                if (dtyd != null) {
                                    log("点击移动");
                                    随机点击(dtyd.x, dtyd.y, 10, 10)
                                    var 已到达 = 0
                                    var 移动标识时间 = new Date().getTime() / 1000
                                    while (true) {
                                        var 移动标识识别时间戳 = new Date().getTime() / 1000
                                        var 移动时间判断 = 移动标识识别时间戳 - 移动标识时间
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {
                                            var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                            if (dtyd != null) {
                                                log("点击移动");
                                                未到达 = 0
                                                随机点击(dtyd.x, dtyd.y, 10, 10)
                                            } else {
                                                var ydbs = imgempt(true, 0.8, "移动标识", 354, 45, 558, 654)
                                                if (ydbs != null) {
                                                    if (移动时间判断 >= 240) {
                                                        log("移动标识,移动中...卡移动了");
                                                        未移动 = true
                                                        已到达 = 0
                                                        break
                                                    } else {
                                                        log("移动标识,移动中...");
                                                        已到达 = 0
                                                        sleep(1000)
                                                    }

                                                } else {
                                                    已到达++
                                                    if (已到达 >= 4) {
                                                        未移动 = false
                                                        break
                                                    }
                                                }
                                            }
                                        }
                                        sleep(550)
                                    }
                                } else {
                                    var frzd = imgempt(true, 0.9, "小地图_伊丽塔神殿", 56, 49, 167, 70)
                                    if (frzd != null) {
                                        log("点击地图");
                                        随机点击(145, 163, 10, 10)
                                    } else {
                                        var rfbdtfrzd = imgempt(true, 0.9, "周副本地图_伊丽塔神殿", 1010, 50, 199, 84)
                                        if (rfbdtfrzd != null) {
                                            log("随机点击位置");
                                            if (参数[49]) {
                                                if (storage.get("自动副本测试") == "30") {
                                                    var 坐标数组 = ["642,179", "645,365", "610,405", "651,443", "683,405", "813,270", "827,503", "638,601", "512,601", "481,568", "466,366", "415,321", "804,253", "805,289", "647,272", "690,448", "681,376", "607,373", "615,443", "651,445"]
                                                } else if (storage.get("自动副本测试") == "40") {
                                                    var 坐标数组 = ["453,252", "488,182", "486,266", "515,256", "512,178", "482,218", "620,220", "655,225", "691,224", "813,215", "808,250", "800,289", "621,326", "670,333", "620,369", "678,372", "647,553", "612,553", "501,527", "505,585", "757,575", "752,541", "782,570", "785,590", "828,578", "824,537", "458,175"]
                                                } else if (storage.get("自动副本测试") == "50") {
                                                    var 坐标数组 = ["454,206", "505,207", "456,236", "498,237", "630,236", "629,282", "638,354", "753,222", "809,222", "757,263", "811,265", "750,305", "807,303", "823,430", "824,481", "819,535", "670,461", "629,463", "587,463", "447,480", "450,520", "448,543"]
                                                }
                                            } else {
                                                if (参数[12]) {
                                                    var 坐标数组 = ["642,179", "645,365", "610,405", "651,443", "683,405", "813,270", "827,503", "638,601", "512,601", "481,568", "466,366", "415,321", "804,253", "805,289", "647,272", "690,448", "681,376", "607,373", "615,443", "651,445"]
                                                } else if (参数[13]) {
                                                    var 坐标数组 = ["453,252", "488,182", "486,266", "515,256", "512,178", "482,218", "620,220", "655,225", "691,224", "813,215", "808,250", "800,289", "621,326", "670,333", "620,369", "678,372", "647,553", "612,553", "501,527", "505,585", "757,575", "752,541", "782,570", "785,590", "828,578", "824,537", "458,175"]
                                                } else if (参数[16]) {
                                                    var 坐标数组 = ["454,206", "505,207", "456,236", "498,237", "630,236", "629,282", "638,354", "753,222", "809,222", "757,263", "811,265", "750,305", "807,303", "823,430", "824,481", "819,535", "670,461", "629,463", "587,463", "447,480", "450,520", "448,543"]
                                                } else if (参数[17]) {
                                                    var 坐标数组 = ["423,180", "484,181", "624,163", "632,224", "585,279", "775,141", "854,147", "823,207", "761,304", "762,350", "803,397", "842,349", "838,304", "457,367", "455,450", "507,410", "547,391", "545,425", "411,569", "485,574", "446,594", "770,511", "812,533", "854,536", "640,548", "639,584", "646,626"]
                                                }
                                            }

                                            var 随机坐标 = 坐标数组[random(0, 坐标数组.length - 1)]
                                            var 坐标xy = 随机坐标.split(",")
                                            x坐标 = parseInt(坐标xy[0])
                                            y坐标 = parseInt(坐标xy[1])
                                            随机点击(x坐标, y坐标, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        } else {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                log("移动中...");
                                sleep(1000)
                            } else {
                                var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                if (退出 != null) {
                                    log("退出地图");
                                    随机点击(退出.x, 退出.y, 10, 10)
                                    var 未在移动中 = 0
                                    while (true) {
                                        var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                        if (mi != null) {
                                            log("移动中...");
                                            sleep(1000)
                                            未在移动中 = 0
                                        } else {
                                            未在移动中++
                                            if (未在移动中 >= 5) {
                                                log("到达目的地")
                                                break
                                            }
                                        }
                                    }
                                    // var 结果 = 挂机去人少的地方()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // } else if (结果 == "死亡") {
                                    //     return "死亡"
                                    // }
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("节电模式中");
                                        var 结果 = 节电模式("周本")
                                        if (结果 == "购买药水") {
                                            return "购买药水"
                                        } else if (结果 == "死亡") {
                                            return "死亡"
                                        } else if (结果 == "重启") {
                                            return "重启"
                                        } else if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        //  else if (结果 == "看人数") {
                                        //     var 结果 = 挂机去人少的地方()
                                        //     if (结果 == "掉线") {
                                        //         return "掉线"
                                        //     } else if (结果 == "死亡") {
                                        //         return "死亡"
                                        //     }
                                        // }
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                        if (jdmsz != null) {
                                            log("已锁定怪物")
                                            var frzd = imgempt(true, 0.9, "小地图_伊丽塔神殿", 56, 49, 167, 70)
                                            if (frzd != null) {
                                                log("还在伊丽塔神殿...点击节电模式");
                                                if (参数[48] && !参数[26]) {
                                                    while (true) {
                                                        if (异常捕获() == "掉线") {
                                                            log("掉线")
                                                            break
                                                        } else {
                                                            var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                            if (jeig != null) {
                                                                log("设定自动使用生命药剂为百分之八十左右")
                                                                sleep(1000)
                                                                随机点击2(921, 464)
                                                                参数[48] = false
                                                                ui.run(function () {
                                                                    ui.药水设定.setChecked(false)
                                                                })
                                                                storage.put("药水设定", false)
                                                                break
                                                            } else {
                                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                if (手 != null) {
                                                                    log("点击药水")
                                                                    随机点击2(976, 656)
                                                                } else {
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                sleep(random(1000, 10000))
                                                随机点击(34, 624, 10, 10)
                                            } else {
                                                log("不在伊丽塔神殿了");
                                                return "死亡"
                                            }
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                var frzd = imgempt(true, 0.9, "小地图_伊丽塔神殿", 56, 49, 167, 70)
                                                if (frzd != null) {
                                                    log("还在马萨塔冰窟...点击节电模式");
                                                    if (参数[48] && !参数[26]) {
                                                        while (true) {
                                                            if (异常捕获() == "掉线") {
                                                                log("掉线")
                                                                break
                                                            } else {
                                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                if (jeig != null) {
                                                                    log("设定自动使用生命药剂为百分之八十左右")
                                                                    sleep(1000)
                                                                    随机点击2(921, 464)
                                                                    参数[48] = false
                                                                    ui.run(function () {
                                                                        ui.药水设定.setChecked(false)
                                                                    })
                                                                    storage.put("药水设定", false)
                                                                    break
                                                                } else {
                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                    if (手 != null) {
                                                                        log("点击药水")
                                                                        随机点击2(976, 656)
                                                                    } else {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    sleep(random(1000, 10000))
                                                    随机点击(34, 624, 10, 10)
                                                } else {
                                                    log("不在周副本了");
                                                    return "死亡"
                                                }
                                            } else {
                                                var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                                if (auto != null) {
                                                    log("点击auto");
                                                    随机点击(auto.x, auto.y, 10, 10)
                                                    for (let index = 0; index < 8; index++) {
                                                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                        if (jdmsz != null) {
                                                            log("周副本已锁定怪物")
                                                        } else if (index == 4) {
                                                            未移动 = true
                                                        }
                                                    }

                                                } else {
                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        log("死亡复活")
                                                       
                                                            var 死亡等待随机时间 = random(20, 120) * 1000
                                                            log("死亡等待随机时间:" + 死亡等待随机时间)
                                                            sleep(死亡等待随机时间)
                                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                            if (bfzl != null) {
                                                                随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            }
                                                            var 随机等待恢复时间 = random(10, 20) * 1000
                                                            sleep(随机等待恢复时间)
                                                        return "死亡"
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 经验本挂机() {
    log("经验本挂机")
    var 未移动 = true
    野外跳转时间 = new Date().getTime()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("经验本使用时间满")
                随机点击(631, 445, 10, 10)
                return "时间结束"
            } else {
                var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                if (guajizhon != null) {
                    log("死亡墓碑恢复经验，经验本挂机");
                    var 结果 = 死亡恢复经验()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    // var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                    // if (bbym != null) {
                    //     log("死亡墓碑恢复经验图色");
                    //     var 结果 = 死亡恢复经验()
                    //     if (结果 == "掉线") {
                    //         return "掉线"
                    //     }
                    // } else {
                    if (未移动) {
                        var shunyijuanzhou = imgempt(true, 0.9, "瞬间移动卷轴", 779, 609, 94, 99)
                        var 随机位移方式 = random(1, 2)
                        if (shunyijuanzhou != null && 随机位移方式 == 1) {
                            log("点击使用瞬移卷轴")
                            sleep(4000)
                            随机点击2(820, 653)
                            for (let index = 0; index < 5; index++) {
                                var jdmsz = imgempt(true, 0.9, "瞬移卷轴不足", 486, 56, 194, 62)
                                if (jdmsz != null) {
                                    log("瞬移卷轴不足")
                                    回城买药()
                                    return "掉线"
                                }
                            }
                            未移动 = false
                        } else {


                            var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                            if (dtyd != null) {
                                log("点击移动");
                                随机点击(dtyd.x, dtyd.y, 10, 10)
                                var 已到达 = 0
                                var 移动标识时间 = new Date().getTime() / 1000
                                while (true) {
                                    var 移动标识识别时间戳 = new Date().getTime() / 1000
                                    var 移动时间判断 = 移动标识识别时间戳 - 移动标识时间
                                    if (异常捕获() == "掉线") {
                                        return "掉线"
                                    } else {
                                        var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                        if (dtyd != null) {
                                            log("点击移动");
                                            已到达 = 0
                                            随机点击(dtyd.x, dtyd.y, 10, 10)
                                        } else {
                                            var ydbs = imgempt(true, 0.8, "移动标识", 354, 45, 558, 654)
                                            if (ydbs != null) {
                                                if (移动时间判断 >= 240) {
                                                    log("移动标识,移动中...卡移动了");
                                                    未移动 = true
                                                    已到达 = 0
                                                    break
                                                } else {
                                                    log("移动标识,移动中...");
                                                    已到达 = 0
                                                    sleep(1000)
                                                }
                                            } else {
                                                已到达++
                                                log("未找到移动标识")
                                                if (已到达 >= 6) {
                                                    log("已到达")
                                                    未移动 = false
                                                    break
                                                }
                                            }
                                        }
                                    }
                                    sleep(200)
                                }
                            } else {
                                var frzd = imgempt(true, 0.9, "小地图_圣科纳遗址|小地图_圣科纳遗址2", 29, 46, 194, 70)
                                if (frzd != null) {
                                    log("点击地图");
                                    随机点击(145, 163, 10, 10)
                                } else {
                                    var rfbdtfrzd = imgempt(true, 0.9, "经验本地图_圣科纳遗址|经验本地图_圣科纳遗址2", 989, 47, 221, 102)
                                    if (rfbdtfrzd != null) {
                                        log("随机点击位置");

                                        if (参数[49]) {
                                            if (storage.get("自动副本测试") == "40" || storage.get("自动副本测试") == "30") {//40
                                                var 坐标数组 = ["594,145", "709,151", "775,147", "882,255", "782,254", "866,411", "866,604", "773,480", "640,517", "639,384", "638,240", "495,257", "505,365", "417,269", "398,147", "411,382", "411,487", "420,606", "566,625", "675,624", "640,521", "509,497"]
                                            } else if (storage.get("自动副本测试") == "50") {
                                                var 坐标数组 = ["606,153", "730,145", "858,139", "410,150", "414,270", "527,256", "734,251", "867,257", "876,431", "775,396", "648,378", "494,363", "404,444", "506,484", "650,518", "754,522", "876,587", "696,621", "557,615", "430,608"]
                                            }
                                        } else {
                                            if (参数[12] || 参数[13]) {//40
                                                var 坐标数组 = ["594,145", "709,151", "775,147", "882,255", "782,254", "866,411", "866,604", "773,480", "640,517", "639,384", "638,240", "495,257", "505,365", "417,269", "398,147", "411,382", "411,487", "420,606", "566,625", "675,624", "640,521", "509,497"]
                                            } else if (参数[16]) {//50
                                                var 坐标数组 = ["606,153", "730,145", "858,139", "410,150", "414,270", "527,256", "734,251", "867,257", "876,431", "775,396", "648,378", "494,363", "404,444", "506,484", "650,518", "754,522", "876,587", "696,621", "557,615", "430,608"]
                                            } else if (参数[17]) {//55
                                                var 坐标数组 = ["422,153", "638,146", "847,155", "880,246", "768,274", "645,279", "518,272", "394,245", "397,388", "633,391", "872,380", "768,471", "885,528", "857,602", "641,621", "459,614", "401,597", "513,480"]
                                            }
                                        }

                                        var 随机坐标 = 坐标数组[random(0, 坐标数组.length - 1)]
                                        var 坐标xy = 随机坐标.split(",")
                                        x坐标 = parseInt(坐标xy[0])
                                        y坐标 = parseInt(坐标xy[1])
                                        随机点击(x坐标, y坐标, 10, 10)
                                    } else {

                                    }
                                }
                            }
                        }
                    } else {
                        var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                        if (mi != null) {
                            log("移动中...");
                            sleep(1000)
                        } else {
                            var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                            if (退出 != null) {
                                log("退出地图");
                                随机点击(退出.x, 退出.y, 10, 10)
                                var 未在移动中 = 0
                                while (true) {
                                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                    if (mi != null) {
                                        log("移动中...");
                                        sleep(1000)
                                        未在移动中 = 0
                                    } else {
                                        未在移动中++
                                        if (未在移动中 >= 5) {
                                            log("到达目的地")
                                            break
                                        }
                                    }
                                }
                            } else {
                                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                if (jdmsz != null) {
                                    log("节电模式中");
                                    var 结果 = 节电模式("经验本")
                                    if (结果 == "购买药水") {
                                        return "购买药水"
                                    } else if (结果 == "死亡") {
                                        return "死亡"
                                    } else if (结果 == "重启") {
                                        return "重启"
                                    } else if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                    if (jdmsz != null) {
                                        log("已锁定怪物")
                                        var frzd = imgempt(true, 0.9, "小地图_圣科纳遗址|小地图_圣科纳遗址2", 29, 46, 194, 70)
                                        if (frzd != null) {
                                            log("还在圣科纳遗址...点击节电模式");
                                            if (参数[48] && !参数[26]) {
                                                while (true) {
                                                    if (异常捕获() == "掉线") {
                                                        log("掉线")
                                                        break
                                                    } else {
                                                        var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                        if (jeig != null) {
                                                            log("设定自动使用生命药剂为百分之八十左右")
                                                            sleep(1000)
                                                            随机点击2(921, 464)
                                                            参数[48] = false
                                                            ui.run(function () {
                                                                ui.药水设定.setChecked(false)
                                                            })
                                                            storage.put("药水设定", false)
                                                            break
                                                        } else {
                                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                            if (手 != null) {
                                                                log("点击药水")
                                                                随机点击2(976, 656)
                                                            } else {
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            sleep(random(1000, 10000))
                                            随机点击(34, 624, 10, 10)
                                        } else {
                                            log("不在圣科纳遗址了");
                                            return "死亡"
                                        }
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                        if (zhuchengzahuo != null) {
                                            var frzd = imgempt(true, 0.9, "小地图_圣科纳遗址|小地图_圣科纳遗址2", 29, 46, 194, 70)
                                            if (frzd != null) {
                                                log("还在圣科纳遗址...点击节电模式");
                                                if (参数[48] && !参数[26]) {
                                                    while (true) {
                                                        if (异常捕获() == "掉线") {
                                                            log("掉线")
                                                            break
                                                        } else {
                                                            var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                            if (jeig != null) {
                                                                log("设定自动使用生命药剂为百分之八十左右")
                                                                sleep(1000)
                                                                随机点击2(921, 464)
                                                                参数[48] = false
                                                                ui.run(function () {
                                                                    ui.药水设定.setChecked(false)
                                                                })
                                                                storage.put("药水设定", false)
                                                                break
                                                            } else {
                                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                if (手 != null) {
                                                                    log("点击药水")
                                                                    随机点击2(976, 656)
                                                                } else {
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                sleep(random(1000, 10000))
                                                随机点击(34, 624, 10, 10)
                                            } else {
                                                log("不在圣科纳遗址了");
                                                return "死亡"
                                            }
                                        } else {
                                            var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                            if (auto != null) {
                                                log("点击auto");
                                                随机点击(auto.x, auto.y, 10, 10)
                                            } else {
                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                if (bfzl != null) {
                                                    log("死亡复活")
                                                        var 死亡等待随机时间 = random(20, 120) * 1000
                                                        log("死亡等待随机时间:" + 死亡等待随机时间)
                                                        sleep(死亡等待随机时间)
                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                        if (bfzl != null) {
                                                            随机点击(bfzl.x, bfzl.y, 10, 10)
                                                        }
                                                        var 随机等待恢复时间 = random(10, 20) * 1000
                                                        sleep(随机等待恢复时间)
                                                    return "死亡"
                                                } else {

                                                }
                                            }
                                        }
                                        // }
                                    }
                                    // }
                                }
                            }
                        }
                    }
                    // }
                }
            }
        }
        sleep(200)
    }
}

function 日副本挂机(随机值) {
    log("日副本挂机")
    var 未移动 = true
    野外跳转时间 = new Date().getTime()
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("周本区使用时间满")
                随机点击(631, 445, 10, 10)
                return "时间结束"
            } else {
                var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                if (guajizhon != null) {
                    log("死亡墓碑恢复经验，日副本挂机");
                    var 结果 = 死亡恢复经验()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                    if (bbym != null) {
                        log("死亡墓碑恢复经验，日副本挂机颜色");
                        var 结果 = 死亡恢复经验()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else {
                        if (未移动) {
                            var shunyijuanzhou = imgempt(true, 0.9, "瞬间移动卷轴", 779, 609, 94, 99)
                            var 随机位移方式 = random(1, 2)
                            if (shunyijuanzhou != null && 随机位移方式 == 1) {
                                log("点击使用瞬移卷轴")
                                sleep(4000)
                                随机点击2(820, 653)
                                for (let index = 0; index < 5; index++) {
                                    var jdmsz = imgempt(true, 0.9, "瞬移卷轴不足", 486, 56, 194, 62)
                                    if (jdmsz != null) {
                                        log("瞬移卷轴不足")
                                        回城买药()
                                        return "掉线"
                                    }
                                }
                                未移动 = false
                            } else {
                                var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                if (dtyd != null) {
                                    log("点击移动");
                                    随机点击(dtyd.x, dtyd.y, 10, 10)
                                    var 已到达 = 0
                                    var 移动标识时间 = new Date().getTime() / 1000
                                    while (true) {
                                        var 移动标识识别时间戳 = new Date().getTime() / 1000
                                        var 移动时间判断 = 移动标识识别时间戳 - 移动标识时间
                                        if (异常捕获() == "掉线") {
                                            return "掉线"
                                        } else {
                                            var dtyd = imgempt(true, 0.9, "地图_移动", 354, 45, 558, 654)
                                            if (dtyd != null) {
                                                log("点击移动");
                                                已到达 = 0
                                                随机点击(dtyd.x, dtyd.y, 10, 10)
                                            } else {
                                                var ydbs = imgempt(true, 0.8, "移动标识", 354, 45, 558, 654)
                                                if (ydbs != null) {
                                                    if (移动时间判断 >= 240) {
                                                        log("移动标识,移动中...卡移动了");
                                                        未移动 = true
                                                        已到达 = 0
                                                        break
                                                    } else {
                                                        log("移动标识,移动中...");
                                                        已到达 = 0
                                                        sleep(1000)
                                                    }
                                                } else {
                                                    已到达++
                                                    log("未找到移动标识")
                                                    if (已到达 >= 6) {
                                                        log("已到达")
                                                        未移动 = false
                                                        break
                                                    }
                                                }
                                            }
                                        }
                                        sleep(200)
                                    }
                                } else {
                                    var frzd = imgempt(true, 0.9, "小地图_繁荣之地", 56, 49, 167, 70)
                                    if (frzd != null) {
                                        log("点击地图");
                                        随机点击(145, 163, 10, 10)
                                    } else {
                                        var rfbdtfrzd = imgempt(true, 0.9, "日副本地图_繁荣之地", 1029, 47, 165, 89)
                                        if (rfbdtfrzd != null) {
                                            log("随机点击位置");
                                            if (参数[49]) {
                                                if (随机值 == 1) {
                                                    var x坐标 = random(573, 749)
                                                    var y坐标 = random(235, 503)
                                                } else if (随机值 == 2) {
                                                    var x坐标 = random(537, 682)
                                                    var y坐标 = random(207, 437)
                                                } else {
                                                    var x坐标 = random(535, 693)
                                                    var y坐标 = random(204, 433)
                                                }
                                                // if (storage.get("自动副本测试") == "30") {
                                                //     var x坐标 = random(573, 749)
                                                //     var y坐标 = random(235, 503)
                                                // } else if (storage.get("自动副本测试") == "40") {
                                                //     var x坐标 = random(537, 682)
                                                //     var y坐标 = random(207, 437)
                                                // }
                                            } else {
                                                if (参数[12]) {
                                                    var x坐标 = random(573, 749)
                                                    var y坐标 = random(235, 503)
                                                } else if (参数[13]) {
                                                    var x坐标 = random(537, 682)
                                                    var y坐标 = random(207, 437)
                                                } else if (参数[16]) {
                                                    var x坐标 = random(535, 693)
                                                    var y坐标 = random(204, 433)
                                                } else if (参数[17]) {
                                                    var x坐标 = random(571, 749)
                                                    var y坐标 = random(235, 501)
                                                }
                                            }
                                            随机点击(x坐标, y坐标, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        } else {
                            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                            if (mi != null) {
                                log("移动中...");
                                sleep(1000)
                            } else {
                                var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                if (退出 != null) {
                                    log("退出地图");
                                    随机点击(退出.x, 退出.y, 10, 10)
                                    var 未在移动中 = 0
                                    while (true) {
                                        var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                        if (mi != null) {
                                            log("移动中...");
                                            sleep(1000)
                                            未在移动中 = 0
                                        } else {
                                            未在移动中++
                                            if (未在移动中 >= 5) {
                                                log("到达目的地")
                                                break
                                            }
                                        }
                                    }
                                    // var 结果 = 挂机去人少的地方()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // } else if (结果 == "死亡") {
                                    //     return "死亡"
                                    // }
                                } else {
                                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                    if (jdmsz != null) {
                                        log("节电模式中");
                                        var 结果 = 节电模式("日副本")
                                        if (结果 == "购买药水") {
                                            return "购买药水"
                                        } else if (结果 == "死亡") {
                                            return "死亡"
                                        } else if (结果 == "重启") {
                                            return "重启"
                                        } else if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        //  else if (结果 == "看人数") {
                                        //     var 结果 = 挂机去人少的地方()
                                        //     if (结果 == "掉线") {
                                        //         return "掉线"
                                        //     } else if (结果 == "死亡") {
                                        //         return "死亡"
                                        //     }
                                        // }
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                        if (jdmsz != null) {
                                            log("已锁定怪物")
                                            var frzd = imgempt(true, 0.9, "小地图_繁荣之地", 56, 49, 167, 70)
                                            if (frzd != null) {
                                                log("还在繁荣之地...点击节电模式");
                                                if (参数[48] && !参数[26]) {
                                                    while (true) {
                                                        if (异常捕获() == "掉线") {
                                                            log("掉线")
                                                            break
                                                        } else {
                                                            var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                            if (jeig != null) {
                                                                log("设定自动使用生命药剂为百分之八十左右")
                                                                sleep(1000)
                                                                随机点击2(921, 464)
                                                                参数[48] = false
                                                                ui.run(function () {
                                                                    ui.药水设定.setChecked(false)
                                                                })
                                                                storage.put("药水设定", false)
                                                                break
                                                            } else {
                                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                if (手 != null) {
                                                                    log("点击药水")
                                                                    随机点击2(976, 656)
                                                                } else {
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                sleep(random(1000, 10000))
                                                随机点击(34, 624, 10, 10)
                                            } else {
                                                log("不在繁荣之地了");
                                                return "死亡"
                                            }
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                var frzd = imgempt(true, 0.9, "小地图_繁荣之地", 56, 49, 167, 70)
                                                if (frzd != null) {
                                                    log("还在马萨塔冰窟...点击节电模式");
                                                    if (参数[48] && !参数[26]) {
                                                        while (true) {
                                                            if (异常捕获() == "掉线") {
                                                                log("掉线")
                                                                break
                                                            } else {
                                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                if (jeig != null) {
                                                                    log("设定自动使用生命药剂为百分之八十左右")
                                                                    sleep(1000)
                                                                    随机点击2(921, 464)
                                                                    参数[48] = false
                                                                    ui.run(function () {
                                                                        ui.药水设定.setChecked(false)
                                                                    })
                                                                    storage.put("药水设定", false)
                                                                    break
                                                                } else {
                                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                    if (手 != null) {
                                                                        log("点击药水")
                                                                        随机点击2(976, 656)
                                                                    } else {
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    sleep(random(1000, 10000))
                                                    随机点击(34, 624, 10, 10)
                                                } else {
                                                    log("不在日副本了");
                                                    return "死亡"
                                                }
                                            } else {
                                                var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                                if (auto != null) {
                                                    log("点击auto");
                                                    随机点击2(auto.x, auto.y, 10, 10)
                                                    for (let index = 0; index < 8; index++) {
                                                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                        if (jdmsz != null) {
                                                            log("检测到锁定怪物")
                                                            break
                                                        } else if (index == 4) {
                                                            未移动 = true
                                                        }
                                                        sleep(200)
                                                    }

                                                } else {
                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        log("死亡复活")
                                                      
                                                            var 死亡等待随机时间 = random(20, 120) * 1000
                                                            log("死亡等待随机时间:" + 死亡等待随机时间)
                                                            sleep(死亡等待随机时间)
                                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                            if (bfzl != null) {
                                                                随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            }
                                                            var 随机等待恢复时间 = random(10, 20) * 1000
                                                            sleep(随机等待恢复时间)
                                                        return "死亡"
                                                    } else {

                                                    }
                                                }
                                            }
                                            // }
                                        }
                                        // }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 经验本开始() {
    var 经验本已加时长 = false
    var 副本跳转次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("经验本区使用时间满")
                随机点击(631, 445, 10, 10)
            } else {
                // var frzd = imgempt(true, 0.9, "小地图_圣科纳遗址|小地图_圣科纳遗址2", 29,46,194,70)
                // var fubenjj = imgempt(true, 0.9, "副本入口_小地图",15,75,263,187)
                // if (frzd != null && fubenjj!=null) {
                //     log("到达圣科纳遗址");
                //     var 结果 = 经验本挂机()
                //     if (结果 == "购买药水") {
                //         var 结果 = 回城买药()
                //         if (结果 == "掉线") {
                //             return "掉线"
                //         }
                //     } else if (结果 == "死亡") {
                //         return "死亡"
                //     } else if (结果 == "重启") {
                //         return "重启"
                //     } else if (结果 == "掉线") {
                //         return "掉线"
                //     }
                // } else {
                var qrtz = imgempt(true, 0.9, "加时长MAX|加时长MAX2", 653, 369, 251, 191)
                if (qrtz != null) {
                    log("加时长MAX");
                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                    sleep(450)
                    随机点击2(729, 565, 10, 10)
                    经验本已加时长 = true
                    var qrtz = imgempt(true, 0.9, "取消加时长", 410, 485, 296, 153)
                    if (qrtz != null) {
                        随机点击(qrtz.x, qrtz.y, 10, 10)
                    }
                } else {
                    var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                    if (qrtz != null) {
                        log("确认跳转");
                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                        副本跳转次数++
                        if (副本跳转次数 > 5) {
                            log("副本拥挤")
                            storage.put("经验本拥挤时间戳", new Date().getTime())
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                return "等会"
                            }
                        }
                    } else {
                        var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                        if (fuben != null) {
                            log("点击副本");
                            随机点击(fuben.x, fuben.y, 10, 10)
                        } else {
                            var fnzd = imgempt(true, 0.9, "经验本尚未解锁", 14, 508, 410, 200)
                            if (fnzd != null) {
                                log("经验本已刷完")
                                if (new Date().getHours() < 4) {
                                    var today = new Date();
                                    // 获取昨天的日期
                                    var yesterday = new Date(today);
                                    yesterday.setDate(today.getDate() - 1);
                                    // 获取昨天的日期是几号
                                    var dayOfMonth = yesterday.getDate();
                                    storage.put("经验本今日记录", dayOfMonth.toString())
                                } else {
                                    storage.put("经验本今日记录", new Date().getDate().toString())
                                }
                                纯回主页()
                                return "完成经验本"
                            } else {
                                var fnzd = imgempt(true, 0.9, "圣科纳遗址|圣科纳遗址2|圣科纳遗址3", 330, 131, 244, 93)
                                if (fnzd != null) {
                                    log("圣科纳遗址");
                                    var rfbfnzd = imgempt(true, 0.9, "经验本没时间了|经验本未解锁|日副本没时间了2", 24, 543, 213, 136)
                                    if (rfbfnzd != null) {
                                        log("经验本已刷完")
                                        ///这里结束线程
                                        if (new Date().getHours() < 4) {
                                            var today = new Date();
                                            // 获取昨天的日期
                                            var yesterday = new Date(today);
                                            yesterday.setDate(today.getDate() - 1);
                                            // 获取昨天的日期是几号
                                            var dayOfMonth = yesterday.getDate();
                                            storage.put("经验本今日记录", dayOfMonth.toString())
                                        } else {
                                            storage.put("经验本今日记录", new Date().getDate().toString())
                                        }
                                        纯回主页()
                                        return "完成经验本"
                                    } else {
                                        var fb35j = imgempt(true, 0.9, "副本40级2", 884, 131, 263, 99)
                                        if (fb35j != null) {
                                            if (经验本已加时长) {
                                                var 随机X坐标 = random(1, 150)
                                                if (参数[49]) {
                                                    // if (storage.get("自动副本测试") == "30" || storage.get("自动副本测试") == "40") {
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                    // } else if (storage.get("自动副本测试") == "50") {
                                                    //     log("副本50级");
                                                    //     随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                    // }
                                                } else {
                                                    if (参数[12]) {
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                    } else if (参数[13]) {
                                                        log("副本40级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                    } else if (参数[16]) {
                                                        log("副本50级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                    } else if (参数[17]) {
                                                        log("副本55级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                                    }
                                                }
                                                //
                                                var frzd = imgempt(true, 0.9, "已经在经验本里了|已经在经验本里了2", 517, 51, 257, 68)
                                                if (frzd != null) {
                                                    副本跳转次数 = 0
                                                    log("到达圣科纳遗址");
                                                    var 结果 = 纯回主页()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        // var 结果 = 切换频道()
                                                        // if (结果 == "掉线") {
                                                        //     return "掉线"
                                                        // } else {
                                                        var 结果 = 接取公会任务("经验本")
                                                        if (结果 == "完成") {
                                                            var 结果 = 经验本挂机()
                                                            if (结果 == "购买药水") {
                                                                var 结果 = 回城买药()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                }
                                                            } else if (结果 == "死亡") {
                                                                return "死亡"
                                                            } else if (结果 == "重启") {
                                                                return "重启"
                                                            } else if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                        }
                                                        // }
                                                    }
                                                } else {
                                                    var frzd = imgempt(true, 0.9, "未过17章", 455, 60, 187, 58)
                                                    if (frzd != null) {
                                                        log("未过17章经验本未解锁")
                                                        if (new Date().getHours() < 4) {
                                                            var today = new Date();
                                                            // 获取昨天的日期
                                                            var yesterday = new Date(today);
                                                            yesterday.setDate(today.getDate() - 1);
                                                            // 获取昨天的日期是几号
                                                            var dayOfMonth = yesterday.getDate();
                                                            storage.put("经验本今日记录", dayOfMonth.toString())
                                                        } else {
                                                            storage.put("经验本今日记录", new Date().getDate().toString())
                                                        }
                                                        纯回主页()
                                                        return "完成经验本"
                                                    } else {
                                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                        if (guajizhon != null) {
                                                            log("铜钱不足,处理")
                                                            // 无铜钱处理()
                                                            野外挂机刷金币()
                                                            return "掉线"
                                                        }
                                                    }
                                                }
                                            } else {
                                                log("点击增加时长")
                                                随机点击(526, 235)
                                            }
                                        } else {
                                            log("没找到35级等级")
                                            ///这里结束线程
                                        }
                                    }

                                    // var hysj = imgempt(true, 0.9, "还有时间", 551, 203, 205, 71)
                                    // if (hysj != null) {
                                    //     log("经验本还有时间");
                                    //     // var fb35j = imgempt(true, 0.9, "副本40级", 884, 131, 263, 99)

                                    // } else {

                                    // }
                                } else {
                                    var rfbfnzd = imgempt(true, 0.9, "圣科纳遗址选项|圣科纳遗址选项2|圣科纳遗址选项3", 23, 542, 292, 138)
                                    if (rfbfnzd != null) {
                                        log("经验本_圣科纳遗址选项");
                                        var panduan = imgempt(true, 0.9, "经验本没时间了|经验本未解锁|日副本没时间了2", 24, 543, 213, 136)
                                        if (panduan != null) {
                                            log("区副本暂时未刷新或未解锁")
                                            if (new Date().getHours() < 4) {
                                                var today = new Date();
                                                // 获取昨天的日期
                                                var yesterday = new Date(today);
                                                yesterday.setDate(today.getDate() - 1);
                                                // 获取昨天的日期是几号
                                                var dayOfMonth = yesterday.getDate();
                                                storage.put("经验本今日记录", dayOfMonth.toString())
                                            } else {
                                                storage.put("经验本今日记录", new Date().getDate().toString())
                                            }
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            return "完成经验本"
                                        } else {
                                            随机点击(rfbfnzd.x, rfbfnzd.y, 10, 10)
                                        }
                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("主页点击菜单");
                                            随机点击(1238, 36, 10, 10)
                                        } else {
                                            log("啥也木有")
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                // }
            }
        }
        sleep(200)
    }
}


function 切换频道() {
    var 滑动次数 = 0
    var 未找到频道 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var pdydtc = imgempt(true, 0.9, "频道移动", 280, 82, 210, 237)
            if (pdydtc != null) {
                log("频道移动弹窗")
                sleep(500)
                var frzd = imgempt(true, 0.8, "频道畅通|频道畅通2|频道畅通3|频道拥挤", 289, 60, 186, 230)
                if (frzd != null) {
                    log("点击非饱满频道,并移动")
                    随机点击2(frzd.x, frzd.y)
                    随机点击2(pdydtc.x, pdydtc.y)
                    return "完成"
                } else {
                    log("未找到频道,滑动")
                    swipe(369, 169, 372, 108, 500)
                    滑动次数++
                    if (滑动次数 >= 5) {
                        log("无可移动频道")
                        return "完成"
                    }
                }
            } else {
                var frzd = imgempt(true, 0.9, "小地图_频道", 206, 57, 89, 43)
                if (frzd != null) {
                    随机点击2(frzd.x, frzd.y)
                    log("点击小地图频道")
                } else {
                    未找到频道++
                    if (未找到频道 >= 10) {
                        log("未找到频道，正常执行")
                        return
                    }
                }
            }
        }
        sleep(200)
    }
}


function 活动副本开始() {
    var 点击次数 = 0
    var 未找到活动副本次数 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
            if (jdmsz != null) {
                log("节电模式中");
                var 结果 = 节电模式("活动副本")
                if (结果 == "购买药水") {
                    var 结果 = 回城买药()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else if (结果 == "死亡") {
                    return "死亡"
                } else if (结果 == "重启") {
                    return "重启"
                } else if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                var qrtz = imgempt(true, 0.9, "满月盛宴", 47, 51, 179, 63)
                if (qrtz != null) {
                    log("已经在活动副本了")
                    var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                    if (fuben != null) {
                        log("关闭菜单");
                        随机点击(1238, 36, 10, 10)
                    } else {
                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                        if (jdmsz != null) {
                            log("已锁定怪物,点击关闭锁定并点击auto")
                            随机点击(750, 21)
                            随机点击(1234, 459)
                            随机点击(31, 622)
                        } else {
                            log("点击auto并点击节电")
                            随机点击(1234, 459)
                            随机点击(31, 622)
                        }
                    }

                } else {
                    var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                    if (qrtz != null) {
                        log("确认跳转");
                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                        点击次数 = 0
                    } else {
                        var fuben = imgempt(true, 0.9, "副本页", 16, 4, 141, 63)
                        if (fuben != null) {
                            var fuben = imgempt(true, 0.9, "活动副本页", 31, 148, 188, 94)
                            if (fuben != null) {
                                var rfbfnzd = imgempt(true, 0.9, "日副本没时间了|日副本没时间了2", 27, 149, 171, 126)
                                if (rfbfnzd != null) {
                                    log("活动副本副本已完成")
                                    storage.put("活动本今日记录", new Date().getDate().toString())
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    return "完成"
                                } else {
                                    var fb35j = imgempt(true, 0.9, "副本30级|副本30级2", 884, 131, 263, 99)
                                    if (fb35j != null) {
                                        var 随机X坐标 = random(1, 150)
                                        if (参数[49]) {
                                            log(storage.get("自动副本测试"))
                                            if (storage.get("自动副本测试") == "30") {
                                                log("副本30级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                            } else if (storage.get("自动副本测试") == "40") {
                                                log("副本40级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                            }
                                        } else {
                                            if (参数[12]) {
                                                log("副本30级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                            } else if (参数[13]) {
                                                log("副本40级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                            } else if (参数[16]) {
                                                log("副本50级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                            } else if (参数[17]) {
                                                log("副本60级");
                                                随机点击2(fb35j.x + 随机X坐标, fb35j.y + 189, 10, 10)
                                            }
                                        }

                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            // 无铜钱处理()
                                            野外挂机刷金币()
                                            return "掉线"
                                        } else {
                                            var fnzd = imgempt(true, 0.9, "已经在副本了|已经在副本里了", 509, 50, 270, 80)
                                            if (fnzd != null) {
                                                log("已经在副本了")
                                                随机点击2(1257, 17)
                                            } else {
                                                点击次数++
                                                if (点击次数 >= 50) {
                                                    点击次数 = 0
                                                    关闭应用("com.wemade.nightcrows");
                                                    sleep(10000)
                                                    log("拉起游戏")
                                                    app.launch("com.wemade.nightcrows")
                                                    sleep(5000)
                                                    return "掉线"
                                                }
                                            }
                                        }
                                        重复点击坐标次数 = 0
                                    } else {
                                        log("没找到35级等级")
                                        ///这里结束线程
                                    }
                                }
                            } else {
                                var fuben = imgempt(true, 0.9, "活动副本", 402, 66, 363, 76)
                                if (fuben != null) {
                                    log("点击活动副本")
                                    未找到活动副本次数 = 0
                                    随机点击(fuben.x, fuben.y)
                                } else {
                                    未找到活动副本次数++
                                    if (未找到活动副本次数 >= 5) {
                                        storage.put("活动本今日记录", new Date().getDate().toString())
                                        log("活动副本已结束")
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        } else {
                                            return "完成"
                                        }
                                    }
                                }
                            }
                        } else {
                            var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                            if (fuben != null) {
                                log("点击副本");
                                随机点击2(fuben.x, fuben.y, 10, 10)
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}



function 日副本开始(mode) {
    var 日副本已加时长 = false
    var 跳转次数 = 0
    var 点击次数 = 0
    var 随机值 = 1
    if (storage.get("自动副本测试") == "30") {
        log("副本30级");
    } else if (storage.get("自动副本测试") == "40") {
        随机值 = random(1, 2)
    } else {
        随机值 = random(1, 3)
    }

    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
            if (dtyd != null) {
                log("日副本区使用时间满")
                随机点击(631, 445, 10, 10)
            } else {
                var frzd = imgempt(true, 0.9, "小地图_繁荣之地", 56, 49, 167, 70)
                if (frzd != null) {
                    点击次数 = 0
                    log("到达繁荣之地");
                    跳转次数 = 0

                    if (参数[49] && parseInt(new Date().getTime() / (1000 * 60)) - parseInt(storage.get("上次识别属性时间测试12")) > parseInt(storage.get("自动识别属性随机时间"))) {
                        var 结果 = 识别属性值()
                        if (结果 = "掉线") {
                            return "掉线"
                        }
                    } else {
                        log("未达到识别属性条件")
                    }

                    // var 结果 = 切换频道()
                    // if (结果 == "掉线") {
                    //     return "掉线"
                    // } else {
                    var 结果 = 接取公会任务("日副本")
                    if (结果 == "完成") {
                        var 结果 = 日副本挂机(随机值)
                        if (结果 == "购买药水") {
                            var 结果 = 回城买药()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else if (结果 == "死亡") {
                            return "死亡"
                        } else if (结果 == "重启") {
                            return "重启"
                        } else if (结果 == "掉线") {
                            return "掉线"
                        }
                    }
                    // }
                } else {
                    var qrtz = imgempt(true, 0.9, "加时长MAX|加时长MAX2", 653, 369, 251, 191)
                    if (qrtz != null) {
                        log("加时长MAX");
                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                        sleep(450)
                        随机点击2(729, 565, 10, 10)
                        日副本已加时长 = true
                        var qrtz = imgempt(true, 0.9, "取消加时长", 410, 485, 296, 153)
                        if (qrtz != null) {
                            随机点击(qrtz.x, qrtz.y, 10, 10)
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                            点击次数 = 0
                            跳转次数++
                            if (跳转次数 > 3) {
                                log("副本拥挤")
                                storage.put("日副本拥挤时间戳", new Date().getTime())
                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    return "等会"
                                }
                            }
                        } else {
                            var fuben = imgempt(true, 0.9, "菜单_副本", 962, 90, 317, 434)
                            if (fuben != null) {
                                log("点击副本");
                                随机点击2(fuben.x, fuben.y, 10, 10)
                                if (mode == "练级") {
                                    var fuben = imgempt(true, 0.9, "还未解锁副本", 510, 63, 159, 50)
                                    if (fuben != null) {
                                        log("副本未解锁,关闭菜单");
                                        随机点击2(1239, 38, 10, 10)
                                        return "未解锁副本"
                                    }
                                }
                            } else {
                                var fnzd = imgempt(true, 0.9, "繁荣之地|繁荣之地2", 330, 131, 244, 93)
                                if (fnzd != null) {
                                    log("繁荣之地");
                                    var rfbfnzd = imgempt(true, 0.9, "日副本没时间了|日副本没时间了2", 27, 149, 171, 126)
                                    if (rfbfnzd != null) {
                                        log("日副本已完成")
                                        var 周几 = new Date().getDay()
                                        if (周几 == "0") {
                                            if (parseInt(new Date().getHours()) < 4) {
                                                storage.put("日副本记录", "6")
                                            } else {
                                                storage.put("日副本记录", "7")
                                            }
                                        } else {
                                            if (parseInt(new Date().getHours()) < 4) {
                                                var 昨天 = "" + (parseInt(周几) - 1)
                                                if (昨天 == "0") {
                                                    storage.put("日副本记录", "7")
                                                } else {
                                                    storage.put("日副本记录", 昨天)
                                                }
                                            } else {
                                                storage.put("日副本记录", 周几)
                                            }
                                        }
                                        var rfbfnzd = imgempt(true, 0.9, "周副本没时间了|日副本没时间了2", 23, 416, 180, 128)
                                        if (rfbfnzd != null) {
                                            log("周副本暂时未刷新")
                                            storage.put("周副本时间记录", getTimestampWeekNumber().toString())
                                        }
                                        var rfbfnzd = imgempt(true, 0.9, "经验本没时间了|经验本未解锁|日副本没时间了2", 24, 543, 213, 136)
                                        if (rfbfnzd != null) {
                                            log("区副本暂时未刷新")
                                            if (new Date().getHours() < 4) {
                                                var today = new Date();
                                                // 获取昨天的日期
                                                var yesterday = new Date(today);
                                                yesterday.setDate(today.getDate() - 1);
                                                // 获取昨天的日期是几号
                                                var dayOfMonth = yesterday.getDate();
                                                storage.put("经验本今日记录", dayOfMonth.toString())
                                            } else {
                                                storage.put("经验本今日记录", new Date().getDate().toString())
                                            }
                                        }
                                        var 结果 = 纯回主页()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        return "完成日本"
                                    } else {
                                        var fb35j = imgempt(true, 0.9, "副本30级|副本30级2", 884, 131, 263, 99)
                                        if (fb35j != null) {
                                            if (日副本已加时长) {
                                                var 随机X坐标 = random(1, 150)
                                                if (参数[49]) {
                                                   
                                                        if (随机值 == 1) {
                                                            log("随机副本30级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                        } else if (随机值 == 2) {
                                                            log("随机副本40级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                        } else {
                                                            log("随机副本50级");
                                                            随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                                        }
                                                } else {
                                                    if (参数[12]) {
                                                        log("副本30级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y, 10, 10)
                                                    } else if (参数[13]) {
                                                        log("副本40级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y + 63, 10, 10)
                                                    } else if (参数[16]) {
                                                        log("副本50级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y + 126, 10, 10)
                                                    } else if (参数[17]) {
                                                        log("副本60级");
                                                        随机点击2(fb35j.x + 随机X坐标, fb35j.y + 189, 10, 10)
                                                    }
                                                }


                                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                                if (guajizhon != null) {
                                                    log("铜钱不足,处理")
                                                    // 无铜钱处理()
                                                    野外挂机刷金币()
                                                    return "掉线"
                                                } else {
                                                    var fnzd = imgempt(true, 0.9, "已经在副本了|已经在副本里了", 509, 50, 270, 80)
                                                    if (fnzd != null) {
                                                        log("已经在副本了")
                                                        随机点击2(1257, 17)
                                                    } else {
                                                        if (mode != "练级") {
                                                            点击次数++
                                                            if (点击次数 >= 50) {
                                                                点击次数 = 0
                                                                关闭应用("com.wemade.nightcrows");
                                                                sleep(10000)
                                                                log("拉起游戏")
                                                                app.launch("com.wemade.nightcrows")
                                                                sleep(5000)
                                                                return "掉线"
                                                            }
                                                        }
                                                    }
                                                }

                                                重复点击坐标次数 = 0
                                            } else {
                                                log("点击增加时长")
                                                随机点击(526, 235)
                                            }
                                        } else {
                                            log("没找到35级等级")
                                            ///这里结束线程
                                        }
                                    }



                                    // var hysj = imgempt(true, 0.9, "还有时间", 551, 203, 205, 71)
                                    // if (hysj != null) {
                                    //     log("日副本还有时间");

                                    // } else {
                                    //     log("日副本已刷完")
                                    //     ///这里结束线程
                                    //     var 周几 = new Date().getDay()
                                    //     if (周几 == "0") {
                                    //         if (parseInt(new Date().getHours()) < 4) {
                                    //             storage.put("日副本记录", "6")
                                    //         } else {
                                    //             storage.put("日副本记录", "7")
                                    //         }
                                    //     } else {
                                    //         if (parseInt(new Date().getHours()) < 4) {
                                    //             var 昨天 = "" + (parseInt(周几) - 1)
                                    //             if (昨天 == "0") {
                                    //                 storage.put("日副本记录", "7")
                                    //             } else {
                                    //                 storage.put("日副本记录", 昨天)
                                    //             }
                                    //         } else {
                                    //             storage.put("日副本记录", 周几)
                                    //         }

                                    //     }
                                    //     return "完成日本"
                                    // }
                                } else {
                                    var rfbfnzd1 = imgempt(true, 0.9, "日副本_繁荣之地选项|日副本_繁荣之地选项2", 17, 128, 398, 564)
                                    if (rfbfnzd1 != null) {
                                        log("日副本_繁荣之地选项");
                                        var rfbfnzd = imgempt(true, 0.9, "日副本没时间了|日副本没时间了2", 27, 149, 171, 126)
                                        if (rfbfnzd != null) {
                                            var 周几 = new Date().getDay()
                                            if (周几 == "0") {
                                                if (parseInt(new Date().getHours()) < 4) {
                                                    storage.put("日副本记录", "6")
                                                } else {
                                                    storage.put("日副本记录", "7")
                                                }
                                            } else {
                                                if (parseInt(new Date().getHours()) < 4) {
                                                    var 昨天 = "" + (parseInt(周几) - 1)
                                                    if (昨天 == "0") {
                                                        storage.put("日副本记录", "7")
                                                    } else {
                                                        storage.put("日副本记录", 昨天)
                                                    }
                                                } else {
                                                    storage.put("日副本记录", 周几)
                                                }
                                            }
                                            var rfbfnzd = imgempt(true, 0.9, "周副本没时间了|日副本没时间了|日副本没时间了2", 23, 416, 180, 128)
                                            if (rfbfnzd != null) {
                                                log("周副本暂时未刷新")
                                                storage.put("周副本时间记录", getTimestampWeekNumber().toString())
                                            }
                                            var rfbfnzd = imgempt(true, 0.9, "经验本没时间了|经验本未解锁|日副本没时间了2", 24, 543, 213, 136)
                                            if (rfbfnzd != null) {
                                                log("区副本暂时未刷新")
                                                if (new Date().getHours() < 4) {
                                                    var today = new Date();
                                                    // 获取昨天的日期
                                                    var yesterday = new Date(today);
                                                    yesterday.setDate(today.getDate() - 1);
                                                    // 获取昨天的日期是几号
                                                    var dayOfMonth = yesterday.getDate();
                                                    storage.put("经验本今日记录", dayOfMonth.toString())
                                                } else {
                                                    storage.put("经验本今日记录", new Date().getDate().toString())
                                                }
                                            }
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            return "完成日本"
                                        } else {
                                            随机点击(rfbfnzd1.x, rfbfnzd1.y, 10, 10)
                                            重复点击坐标次数 = 0
                                        }


                                    } else {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            log("主页点击菜单");
                                            随机点击(1238, 36, 10, 10)
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 回城买药(mode) {
    if (参数[26] && !参数[39]) {
        var 购买成功 = false
        var 点击购买次数 = 0
        var 回城卷轴 = true
        while (true) {
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {
                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                if (mi != null) {
                    log("移动中...");
                    sleep(1000)
                } else {
                    var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                    if (srgmjm != null) {
                        log("商人购买界面，购买");
                        for (let index = 0; index < 9; index++) {
                            随机点击2(679, 461, 10, 10)
                        }
                        随机点击2(738, 641, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                        纯回主页()
                        return "购买成功"
                    } else {
                        var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                        if (yssrhy != null) {
                            log("点击药水商人红药")
                            if (mode == "练级") {
                                if (购买成功) {
                                    var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                                    if (srgmjm != null) {
                                        log("商人购买界面，购买");
                                        随机点击(756, 377, 10, 10)
                                        sleep(1000)
                                        随机点击2(738, 641, 10, 10)
                                    } else {
                                        // var 结果 = 出售钱袋子()
                                        // if (结果 == "掉线") {
                                        //     return "掉线"
                                        // }
                                        纯回主页()
                                        return "购买成功"
                                    }
                                } else {
                                    log("药水商人红药");
                                    随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                                }
                            } else {
                                if (参数[21]) {
                                    var yssrhy = imgempt(true, 0.9, "药水商人中红药|药水商人中红药2", 8, 72, 340, 580)
                                    if (yssrhy != null) {
                                        log("药水商人中红药");
                                        随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                                    } else {

                                    }
                                } else {
                                    log("药水商人红药");
                                    随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                                }
                            }
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (回城卷轴) {
                                                        var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                        if (zhuchengzahuo != null) {
                                                            log("主城委托图标");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(153, 87, 150, 282, 500)
                                                            }
                                                        } else {
                                                            var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                            if (huicheng != null) {
                                                                var 信件 = imgempt(true, 0.9, "信件|信件2", 958, 619, 115, 93)
                                                                if (信件 != null) {
                                                                    log("关闭菜单")
                                                                    随机点击(1243, 35, 10, 10)
                                                                } else {
                                                                    log("点击回城卷轴")
                                                                    随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                    for (let index = 0; index < 5; index++) {
                                                                        var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                        if (guajizhon != null) {
                                                                            log("没有卷轴了")
                                                                            回城卷轴 = false
                                                                            break
                                                                        }
                                                                    }
                                                                }
                                                                sleep(3000)
                                                            } else {
                                                                回城卷轴 = false
                                                            }
                                                        }
                                                    } else {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("回城买药,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {

                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }

                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        log("死亡复活")
                                                       
                                                            var 死亡等待随机时间 = random(20, 120) * 1000
                                                            log("死亡等待随机时间:" + 死亡等待随机时间)
                                                            sleep(死亡等待随机时间)
                                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                            if (bfzl != null) {
                                                                随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            }
                                                            var 随机等待恢复时间 = random(10, 20) * 1000
                                                            sleep(随机等待恢复时间)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            sleep(200)
        }
    } else {
        var 购买成功 = false
        var 点击购买次数 = 0
        var 回城卷轴 = true
        while (true) {
            if (异常捕获() == "掉线") {
                return "掉线"
            } else {
                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                if (mi != null) {
                    log("移动中...");
                    sleep(1000)
                } else {
                    var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                    if (srgmjm != null) {
                        log("商人购买界面，购买");
                        for (let index = 0; index < 9; index++) {
                            随机点击2(679, 461, 10, 10)
                        }
                        随机点击2(738, 641, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                        纯回主页()
                        return "购买成功"
                    } else {
                        var yssrhy = imgempt(true, 0.9, "设置一键买药按钮|设置一键买药按钮2|设置一键买药按钮3", 16, 627, 243, 89)
                        if (yssrhy != null) {
                            log("设置一键买药按钮")
                            var bbym = cor(true, 12, 344, 647, 155, 70, "#362b1b", [[-9, 9, "#352a1b"], [-20, 0, "#34291a"], [40, 6, "#c1aa92"], [44, 7, "#7b7461"], [47, 7, "#1e1615"], [47, 12, "#c5b594"], [-39, 8, "#6d6a61"]])
                            if (bbym != null) {
                                log("设置一键买药")
                                var 结果 = 设置一键买药()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "设置完毕") {
                                    log("点击购买")
                                    随机点击(yssrhy.x + 230, yssrhy.y)
                                    随机点击2(725, 629)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                    纯回主页()
                                    return "购买成功"
                                }
                            } else {
                                if (storage.get("重新设置买药") || (参数[20] && storage.get("上次购买的药水") != "小药水") || (参数[21] && storage.get("上次购买的药水") != "中药水")) {
                                    log("换药类型了,重新设置")
                                    var 结果 = 设置一键买药()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else if (结果 == "设置完毕") {
                                        log("点击购买")
                                        随机点击(yssrhy.x + 230, yssrhy.y)
                                        随机点击2(725, 629)
                                        storage.put("重新设置买药", false)
                                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                        if (guajizhon != null) {
                                            log("铜钱不足,处理")
                                            // 无铜钱处理()
                                            野外挂机刷金币()
                                            return "掉线"
                                        }
                                        纯回主页()
                                        return "购买成功"
                                    }
                                } else {
                                    log("点击购买")
                                    随机点击(yssrhy.x + 230, yssrhy.y)
                                    随机点击2(725, 629)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                    纯回主页()
                                    return "购买成功"
                                }
                            }
                        } else {
                            var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                            if (qrtz != null) {
                                log("确认跳转");
                                随机点击2(qrtz.x, qrtz.y, 10, 10)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                            } else {
                                var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                if (dyzczhsrtb != null) {
                                    log("点击地图主城杂货商人图标");
                                    随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击主城杂货商人图标");
                                        随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                            if (shezhi != null) {
                                                log("确定退出副本");
                                                随机点击(shezhi.x, shezhi.y, 10, 10)
                                            } else {
                                                var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                                if (guajizhon != null) {
                                                    log("点击退出副本");
                                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                                } else {
                                                    if (回城卷轴) {
                                                        var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                        if (zhuchengzahuo != null) {
                                                            log("主城委托图标");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(153, 87, 150, 282, 500)
                                                            }
                                                        } else {
                                                            var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                            if (huicheng != null) {
                                                                log("点击回城卷轴")
                                                                随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                for (let index = 0; index < 5; index++) {
                                                                    var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                    if (guajizhon != null) {
                                                                        log("没有卷轴了")
                                                                        回城卷轴 = false
                                                                        break
                                                                    }
                                                                }
                                                                sleep(3000)
                                                            } else {
                                                                回城卷轴 = false
                                                            }
                                                        }
                                                    } else {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("回城买药,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {


                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }

                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        log("死亡复活")
                                                       
                                                            var 死亡等待随机时间 = random(20, 120) * 1000
                                                            log("死亡等待随机时间:" + 死亡等待随机时间)
                                                            sleep(死亡等待随机时间)
                                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                            if (bfzl != null) {
                                                                随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            }
                                                            var 随机等待恢复时间 = random(10, 20) * 1000
                                                            sleep(随机等待恢复时间)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            sleep(200)
        }
    }

}

function 设置一键买药() {
    var 药水 = true
    var 回城卷轴 = true
    var 瞬移卷轴 = true
    var 突击灵药 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var bbym = imgempt(true, 0.9, "设置一键买药按钮|设置一键买药按钮2|设置一键买药按钮3", 16, 627, 243, 89)
            if (bbym != null) {
                log("点击设置置一键买药")
                随机点击2(133, 667)
            } else {
                var bfzl = imgempt(true, 0.9, "设置一键买药输入盘", 531, 329, 306, 169)
                if (bfzl != null) {
                    log("开始输入")
                    if (药水) {
                        随机点击2(677, 268);
                        for (let index = 0; index < 2; index++) {
                            var 随机数 = random(0, 9).toString()
                            if (随机数 == "0")
                                随机点击2(524, 404);
                            if (随机数 == "1")
                                随机点击2(522, 360);
                            if (随机数 == "2")
                                随机点击2(522, 313);
                            if (随机数 == "3")
                                随机点击2(677, 358);
                            if (随机数 == "4")
                                随机点击2(522, 313);
                            if (随机数 == "5")
                                随机点击2(599, 315);
                            if (随机数 == "6")
                                随机点击2(678, 314);
                            if (随机数 == "7")
                                随机点击2(520, 266);
                            if (随机数 == "8")
                                随机点击2(597, 269);
                            if (随机数 == "9")
                                随机点击2(677, 268);
                        }
                        随机点击2(735, 495);
                        药水 = false
                    } else if (突击灵药) {
                        随机点击2(599, 315);
                        var 随机数 = random(0, 9).toString()
                        if (随机数 == "0")
                            随机点击2(524, 404);
                        if (随机数 == "1")
                            随机点击2(522, 360);
                        if (随机数 == "2")
                            随机点击2(522, 313);
                        if (随机数 == "3")
                            随机点击2(677, 358);
                        if (随机数 == "4")
                            随机点击2(522, 313);
                        if (随机数 == "5")
                            随机点击2(599, 315);
                        if (随机数 == "6")
                            随机点击2(678, 314);
                        if (随机数 == "7")
                            随机点击2(520, 266);
                        if (随机数 == "8")
                            随机点击2(597, 269);
                        if (随机数 == "9")
                            随机点击2(677, 268);
                        随机点击2(735, 495);
                        突击灵药 = false
                    } else if (瞬移卷轴) {
                        随机点击2(599, 357);
                        var 随机数 = random(0, 9).toString()
                        for (let index = 0; index < 2; index++) {
                            if (随机数 == "0")
                                随机点击2(524, 404);
                            if (随机数 == "1")
                                随机点击2(522, 360);
                            if (随机数 == "2")
                                随机点击2(522, 313);
                            if (随机数 == "3")
                                随机点击2(677, 358);
                            if (随机数 == "4")
                                随机点击2(522, 313);
                            if (随机数 == "5")
                                随机点击2(599, 315);
                            if (随机数 == "6")
                                随机点击2(678, 314);
                            if (随机数 == "7")
                                随机点击2(520, 266);
                            if (随机数 == "8")
                                随机点击2(597, 269);
                            if (随机数 == "9")
                                随机点击2(677, 268);
                        }
                        随机点击2(735, 495);
                        瞬移卷轴 = false
                    } else if (回城卷轴) {
                        随机点击2(599, 315);
                        var 随机数 = random(0, 9).toString()
                        if (随机数 == "0")
                            随机点击2(524, 404);
                        if (随机数 == "1")
                            随机点击2(522, 360);
                        if (随机数 == "2")
                            随机点击2(522, 313);
                        if (随机数 == "3")
                            随机点击2(677, 358);
                        if (随机数 == "4")
                            随机点击2(522, 313);
                        if (随机数 == "5")
                            随机点击2(599, 315);
                        if (随机数 == "6")
                            随机点击2(678, 314);
                        if (随机数 == "7")
                            随机点击2(520, 266);
                        if (随机数 == "8")
                            随机点击2(597, 269);
                        if (随机数 == "9")
                            随机点击2(677, 268);
                        随机点击2(735, 495);
                        回城卷轴 = false
                    } else {
                        toastLog("没有可购买的选项了")
                        sleep(3000)
                    }
                } else {
                    var bfzl = imgempt(true, 0.9, "保存买药设置|保存买药设置2", 226, 638, 249, 81)
                    if (bfzl != null) {
                        if (药水) {
                            if (参数[20]) {
                                var xiaohongyao = imgempt(true, 0.9, "一键买药设置小红药", 11, 80, 128, 544)
                                if (xiaohongyao != null) {
                                    log("点击清空其他血药并点击输入盘，小药")
                                    随机点击2(xiaohongyao.x + 295 + 43, xiaohongyao.y + 15 + 95)
                                    随机点击(xiaohongyao.x + 295, xiaohongyao.y + 15)
                                } else {

                                }
                            } else if (参数[21]) {
                                var xiaohongyao = imgempt(true, 0.9, "一键买药设置中红药", 11, 80, 128, 544)
                                if (xiaohongyao != null) {
                                    log("点击清空其他血药并点击输入盘，中药")
                                    随机点击2(xiaohongyao.x + 295 + 43, xiaohongyao.y + 15 - 95)
                                    随机点击(xiaohongyao.x + 295, xiaohongyao.y + 15)
                                } else {

                                }
                            }
                        } else if (突击灵药) {
                            var xiaohongyao = imgempt(true, 0.9, "一键买药设置突击灵药", 11, 80, 128, 544)
                            if (xiaohongyao != null) {
                                log("点击输入盘，突击灵药")
                                随机点击(xiaohongyao.x + 295, xiaohongyao.y + 15)
                            } else {
                                log("没有找到突击灵药,下滑")
                                swipe(68, 495, 71, 365, 2000)
                            }
                        } else if (瞬移卷轴) {
                            var xiaohongyao = imgempt(true, 0.9, "一键买药设置瞬移卷轴", 11, 80, 128, 544)
                            if (xiaohongyao != null) {
                                log("点击输入盘，瞬移卷轴")
                                随机点击(xiaohongyao.x + 295, xiaohongyao.y + 15)
                            } else {
                                log("没有找到瞬移卷轴,下滑")
                                swipe(68, 495, 71, 365, 2000)
                            }
                        } else if (回城卷轴) {
                            var xiaohongyao = imgempt(true, 0.9, "一键买药设置回城卷轴", 11, 80, 128, 544)
                            if (xiaohongyao != null) {
                                log("点击输入盘,回城卷轴")
                                随机点击(xiaohongyao.x + 295, xiaohongyao.y + 15)
                            } else {
                                log("没有找到回城卷轴,下滑")
                                swipe(68, 495, 71, 365, 2000)
                            }
                        } else {
                            log("已经设置完毕，保存")
                            随机点击2(bfzl.x, bfzl.y)
                            if (参数[20]) {
                                storage.put("上次购买的药水", "小药水")
                            } else if (参数[21]) {
                                storage.put("上次购买的药水", "中药水")
                            }
                            return "设置完毕"
                        }
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("无故退出")
                            return "无故退出"
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 纯回主城() {
    var 回城卷轴 = true
    log("纯回主城")
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                if (yssrhy != null) {
                    log("到达NPC杂货商人")
                    return "完成"
                } else {
                    var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                    if (qrtz != null) {
                        log("确认跳转");
                        随机点击2(qrtz.x, qrtz.y, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                        if (dyzczhsrtb != null) {
                            log("点击地图主城杂货商人图标");
                            随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                        } else {
                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                            if (zhuchengzahuo != null) {
                                log("点击主城杂货商人图标");
                                随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                if (zhuchengzahuo != null) {
                                    log("主城主城技能商店图标");
                                    swipe(122, 138, 114, 274, 500)
                                } else {
                                    var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                    if (shezhi != null) {
                                        log("确定退出副本");
                                        随机点击(shezhi.x, shezhi.y, 10, 10)
                                    } else {
                                        var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                        if (guajizhon != null) {
                                            log("点击退出副本");
                                            随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                        } else {
                                            if (回城卷轴) {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                if (zhuchengzahuo != null) {
                                                    log("主城委托图标");
                                                    for (let index = 0; index < 3; index++) {
                                                        swipe(153, 87, 150, 282, 500)
                                                    }
                                                } else {
                                                    var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                    if (huicheng != null) {
                                                        log("点击回城卷轴")
                                                        随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                        for (let index = 0; index < 5; index++) {
                                                            var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                            if (guajizhon != null) {
                                                                log("没有卷轴了")
                                                                回城卷轴 = false
                                                                break
                                                            }
                                                        }
                                                        sleep(3000)
                                                    } else {
                                                        回城卷轴 = false
                                                    }
                                                }
                                            } else {
                                                var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                if (dtl != null) {
                                                    var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                    if (dthctb != null) {
                                                        log("点击回城图标");
                                                        随机点击(dthctb.x, dthctb.y, 10, 10)
                                                    } else {
                                                        log("地图里,寻找主城");
                                                        for (let index = 0; index < 3; index++) {
                                                            swipe(1104, 216, 1118, 614, 500)
                                                            sleep(random(1000, 3000))
                                                        }
                                                    }
                                                } else {
                                                    var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                    if (dtgbzt != null) {
                                                        log("地图关闭状态,点击打开");
                                                        随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                    } else {
                                                        var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                        if (dtdkzt != null) {
                                                            log("点击地图");
                                                            随机点击(139, 150, 10, 10)
                                                            sleep(random(1000, 3000))
                                                        } else {
                                                            var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                            if (bbym != null) {
                                                                log("纯回主城,退出节电");
                                                                swipe(566, 389, 968, 226, 500)
                                                            } else {


                                                            }
                                                        }
                                                    }
                                                }
                                            }

                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                            if (bfzl != null) {
                                                log("死亡复活")
                                                
                                                    var 死亡等待随机时间 = random(20, 120) * 1000
                                                    log("死亡等待随机时间:" + 死亡等待随机时间)
                                                    sleep(死亡等待随机时间)
                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        随机点击(bfzl.x, bfzl.y, 10, 10)
                                                    }
                                                    var 随机等待恢复时间 = random(10, 20) * 1000
                                                    sleep(随机等待恢复时间)
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 练级回城买药(mode) {
    var 购买成功 = false
    var 点击购买次数 = 0
    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    for (let index = 0; index < 9; index++) {
                        随机点击2(679, 461, 10, 10)
                    }
                    随机点击2(738, 641, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,处理")
                        // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }
                    纯回主页()
                    return "购买成功"
                } else {
                    var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                    if (yssrhy != null) {
                        log("点击药水商人红药")
                        if (mode == "练级") {
                            if (购买成功) {
                                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                                if (srgmjm != null) {
                                    log("商人购买界面，购买");
                                    随机点击(756, 377, 10, 10)
                                    sleep(1000)
                                    随机点击2(738, 641, 10, 10)
                                } else {
                                    // var 结果 = 出售钱袋子()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // }
                                    纯回主页()
                                    return "购买成功"
                                }
                            } else {
                                log("药水商人红药");
                                随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                            }
                        } else {
                            if (参数[21]) {
                                var yssrhy = imgempt(true, 0.9, "药水商人中红药|药水商人中红药2", 8, 72, 340, 580)
                                if (yssrhy != null) {
                                    log("药水商人中红药");
                                    随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                                } else {

                                }
                            } else {
                                log("药水商人红药");
                                随机点击2(yssrhy.x + 65, yssrhy.y, 10, 10)
                            }
                        }
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,处理")
                            // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                            if (dyzczhsrtb != null) {
                                log("点击地图主城杂货商人图标");
                                随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                if (zhuchengzahuo != null) {
                                    log("点击主城杂货商人图标");
                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                } else {
                                    var shezhi = imgempt(true, 0.9, "确定退出副本", 618, 365, 243, 192)
                                    if (shezhi != null) {
                                        log("确定退出副本");
                                        随机点击(shezhi.x, shezhi.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var guajizhon = imgempt(true, 0.9, "退出副本|退出副本2|退出副本3", 278, 48, 74, 69)
                                            if (guajizhon != null) {
                                                log("点击退出副本");
                                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                            } else {
                                                if (回城卷轴) {
                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                    if (zhuchengzahuo != null) {
                                                        log("主城委托图标");
                                                        for (let index = 0; index < 3; index++) {
                                                            swipe(153, 87, 150, 282, 500)
                                                        }
                                                    } else {
                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                        if (huicheng != null) {
                                                            log("点击回城卷轴")
                                                            随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                            for (let index = 0; index < 5; index++) {
                                                                var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                if (guajizhon != null) {
                                                                    log("没有卷轴了")
                                                                    回城卷轴 = false
                                                                    break
                                                                }
                                                            }
                                                            sleep(3000)
                                                        } else {
                                                            回城卷轴 = false
                                                        }
                                                    }
                                                } else {
                                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                    if (dtl != null) {
                                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                        if (dthctb != null) {
                                                            log("点击回城图标");
                                                            随机点击(dthctb.x, dthctb.y, 10, 10)
                                                        } else {
                                                            log("地图里,寻找主城");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(1104, 216, 1118, 614, 500)
                                                                sleep(random(1000, 3000))
                                                            }
                                                        }
                                                    } else {
                                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                        if (dtgbzt != null) {
                                                            log("地图关闭状态,点击打开");
                                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                        } else {
                                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                            if (dtdkzt != null) {
                                                                log("点击地图");
                                                                随机点击(139, 150, 10, 10)
                                                                sleep(random(1000, 3000))
                                                            } else {
                                                                var bbym = cor(true, 8, 327, 597, 642, 119, "#280907", [[0, 3, "#270b08"], [3, 4, "#2a0e0b"], [6, 3, "#270e0a"], [7, 1, "#291411"], [7, 0, "#28100c"], [5, 11, "#36100d"], [12, 10, "#311c19"]])
                                                                if (bbym != null) {
                                                                    log("练级回城买药,退出节电");
                                                                    swipe(566, 389, 968, 226, 500)
                                                                } else {


                                                                }
                                                            }
                                                        }
                                                    }
                                                }

                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                if (bfzl != null) {
                                                    log("死亡复活")
                                                   
                                                        var 死亡等待随机时间 = random(20, 120) * 1000
                                                        log("死亡等待随机时间:" + 死亡等待随机时间)
                                                        sleep(死亡等待随机时间)
                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                        if (bfzl != null) {
                                                            随机点击(bfzl.x, bfzl.y, 10, 10)
                                                        }
                                                        var 随机等待恢复时间 = random(10, 20) * 1000
                                                        sleep(随机等待恢复时间)
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 激战地回城买药() {
    var 购买成功 = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    for (let index = 0; index < 9; index++) {
                        随机点击2(679, 461, 10, 10)
                    }
                    随机点击2(738, 641, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,处理")
                        // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }
                    纯回主页()
                    return "购买成功"
                } else {
                    var yssrhy = imgempt(true, 0.9, "设置一键买药按钮|设置一键买药按钮2|设置一键买药按钮3", 16, 627, 243, 89)
                    if (yssrhy != null) {
                        log("设置一键买药按钮")
                        var bbym = cor(true, 12, 344, 647, 155, 70, "#362b1b", [[-9, 9, "#352a1b"], [-20, 0, "#34291a"], [40, 6, "#c1aa92"], [44, 7, "#7b7461"], [47, 7, "#1e1615"], [47, 12, "#c5b594"], [-39, 8, "#6d6a61"]])
                        if (bbym != null) {
                            log("设置一键买药")
                            var 结果 = 设置一键买药()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else if (结果 == "设置完毕") {
                                log("点击购买")
                                随机点击(yssrhy.x + 230, yssrhy.y)
                                随机点击2(725, 629)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                                纯回主页()
                                return "购买成功"
                            }
                        } else {
                            if ((参数[20] && storage.get("上次购买的药水") != "小药水") || (参数[21] && storage.get("上次购买的药水") != "中药水")) {
                                log("换药类型了,重新设置")
                                var 结果 = 设置一键买药()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else if (结果 == "设置完毕") {
                                    log("点击购买")
                                    随机点击(yssrhy.x + 230, yssrhy.y)
                                    随机点击2(725, 629)
                                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                    if (guajizhon != null) {
                                        log("铜钱不足,处理")
                                        // 无铜钱处理()
                                        野外挂机刷金币()
                                        return "掉线"
                                    }
                                    纯回主页()
                                    return "购买成功"
                                }
                            } else {
                                log("点击购买")
                                随机点击(yssrhy.x + 230, yssrhy.y)
                                随机点击2(725, 629)
                                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                                if (guajizhon != null) {
                                    log("铜钱不足,处理")
                                    // 无铜钱处理()
                                    野外挂机刷金币()
                                    return "掉线"
                                }
                                纯回主页()
                                return "购买成功"
                            }
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                            if (dyzczhsrtb != null) {
                                log("点击地图主城杂货商人图标");
                                随机点击(dyzczhsrtb.x + 80, dyzczhsrtb.y, 10, 10)
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                if (zhuchengzahuo != null) {
                                    log("点击主城杂货商人图标");
                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                } else {
                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                    if (dtl != null) {
                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                        if (dthctb != null) {
                                            log("点击回城图标");
                                            随机点击(dthctb.x, dthctb.y, 10, 10)
                                            随机点击(300, 673, 10, 10)
                                        } else {
                                            log("地图里,寻找主城");
                                            for (let index = 0; index < 3; index++) {
                                                swipe(1104, 216, 1118, 614, 500)
                                            }
                                        }
                                    } else {
                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                        if (dtgbzt != null) {
                                            log("地图关闭状态,点击打开");
                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                        } else {
                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                            if (dtdkzt != null) {
                                                var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                if (jdmsz != null) {
                                                    log("已锁定怪物，点击关闭")
                                                    随机点击(jdmsz.x, jdmsz.y, 10, 10)
                                                } else {
                                                    log("点击地图");
                                                    随机点击(139, 150, 10, 10)
                                                }
                                            } else {
                                                var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                if (bbym != null) {
                                                    log("激战地回城买药,退出节电");
                                                    swipe(566, 389, 968, 226, 500)
                                                } else {
                                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                    if (bfzl != null) {
                                                        log("死亡复活")
                                                       
                                                            var 死亡等待随机时间 = random(20, 120) * 1000
                                                            log("死亡等待随机时间:" + 死亡等待随机时间)
                                                            sleep(死亡等待随机时间)
                                                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                            if (bfzl != null) {
                                                                随机点击(bfzl.x, bfzl.y, 10, 10)
                                                            }
                                                            var 随机等待恢复时间 = random(10, 20) * 1000
                                                            sleep(随机等待恢复时间)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 出售钱袋子(mode) {
    log("出售钱袋子")
    var 未找到钱袋子 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中")
                sleep(1000)
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "出售MAX", 705, 378, 120, 81)
                if (zhuchengzahuo != null) {
                    log("点击出售MAX");
                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    随机点击2(727, 634, 10, 10)
                } else {
                    var zhuchengzahuo = imgempt(true, 0.9, "确定出售", 639, 475, 206, 92)
                    if (zhuchengzahuo != null) {
                        log("确定出售");
                        随机点击2(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                    } else {
                        var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                        if (zhuchengzahuo != null) {
                            log("点击主城杂货商人图标");
                            随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                        } else {
                            var yssrhy = imgempt(true, 0.9, "药水商人红药|药水商人红药2", 18, 90, 100, 89)
                            if (yssrhy != null) {
                                log("寻找钱袋子")
                                随机点击2(1246, 309, 10, 10)
                                var yssrhy = imgempt(true, 0.9, "钱袋子(背包)", 922, 106, 292, 538)
                                if (yssrhy != null) {
                                    log("点击钱袋子")
                                    随机点击(yssrhy.x, yssrhy.y, 10, 10)
                                } else {
                                    未找到钱袋子++
                                    if (未找到钱袋子 >= 4) {
                                        log("没有钱袋子")
                                        if (mode == "回主页") {
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }
                                        return "没有钱袋子"
                                    } else {
                                        log("未找到钱袋子")
                                        swipe(1054, 498, 1054, 214, 2000)
                                    }
                                }
                            } else {

                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 节电模式检测负重() {
    log("节电模式检测负重")
    var 节电 = 0
    var 退出节电 = false
    while (true) {
        if (异常捕获("不退节电") == "掉线") {
            return "掉线"
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                if (退出节电) {
                    判定背包满检测时间 = new Date().getTime()
                    return "没问题"
                } else {
                    log("点节电")
                    随机点击(34, 624, 10, 10)
                }
            } else {
                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                if (jdmsz != null) {
                    log("节电模式中");
                    var cgyfz = imgempt(true, 0.9, "节电模式_背包已满|无法自然恢复|无法自然恢复2|节电模式_背包已满(大)|不介入攻击", 7, 72, 196, 482)
                    if (cgyfz != null) {
                        节电 = 0
                        log("节电模式，背包已满")
                        swipe(566, 389, 968, 226, 500)
                        if (参数[14]) {
                            var 结果 = 交易翻页版()// 交易开始()
                            if (结果 == "完成交易") {
                                交易时间 = new Date().getDate()
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        }
                        // var 结果 = 成就图鉴()
                        // if (结果 == "掉线") {
                        //     return "掉线"
                        // } else {
                        var 结果 = 清理背包()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                        // }
                    } else {
                        var bbym = cor(true, 12, 9, 107, 66, 357, "#771a09", [[0, -4, "#b76045"], [-4, -4, "#a2472c"], [-4, -1, "#b34d34"], [8, -1, "#d36a4a"], [8, 2, "#cb5e3f"], [7, 2, "#d36647"], [13, 0, "#c25639"], [13, -6, "#d4825d"], [13, -9, "#d99473"], [-13, -8, "#332e2a"], [20, -9, "#322d27"]])
                        if (bbym != null) {
                            节电 = 0
                            log("节电模式，背包已满")
                            swipe(566, 389, 968, 226, 500)
                            if (参数[14]) {
                                var 结果 = 交易翻页版()// 交易开始()
                                if (结果 == "完成交易") {
                                    交易时间 = new Date().getDate()
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            }
                            // var 结果 = 成就图鉴()
                            // if (结果 == "掉线") {
                            //     return "掉线"
                            // } else {
                            var 结果 = 清理背包()
                            if (结果 == "掉线") {
                                return "掉线"
                            }
                            // }
                        } else {

                        }
                    }
                    节电++
                    if (节电 >= 3) {
                        var guajizhon = imgempt(true, 0.9, "节电模式小红药|节电模式中红药|节电模式小红药2|节电模式中红药2", 277, 606, 814, 106)
                        if (guajizhon != null) {
                            log("检测负重时检测药水")
                            var bbym = imgempt(true, 0.9, "药水千字", guajizhon.x - 6, 651, 124, 63)
                            if (bbym != null) {
                                log("千瓶药水,重置检测时间")
                                药水上次检测 = new Date().getTime()
                            } else {
                                var 数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, guajizhon.x - 6, 651, 124, 63);
                                if (数量 != "false") {
                                    log("药水还有:" + 数量 + "瓶")
                                    if (数量 >= 200) {
                                        log(数量 + "药水,重置检测时间")
                                        药水上次检测 = new Date().getTime()
                                    }
                                }
                            }
                        }
                        swipe(566, 389, 968, 226, 500)
                        退出节电 = true
                    }
                } else {

                }
            }
        }
        sleep(200)
    }
}

function 随机传送移动() {
    var 瞬移次数 = 0
    var 限制瞬移次数 = 5
    while (true) {
        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
        if (jdmsz != null) {
            log("随机传送退出节电")
            swipe(566, 389, 968, 226, 500)
            sleep(450)
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                log("随机传送")
                随机点击2(818, 657)
                for (let index = 0; index < 5; index++) {
                    var jdmsz = imgempt(true, 0.9, "瞬移卷轴不足", 486, 56, 194, 62)
                    if (jdmsz != null) {
                        log("瞬移卷轴不足")
                        回城买药()
                        return "掉线"
                    }
                }
                sleep(random(5000, 10000))
                log("识别人数")
                var 起始坐标x = 822
                var 起始坐标y = 85
                var 人数 = 0
                for (let index = 1; index <= 4; index++) {
                    for (let index1 = 1; index1 <= 2; index1++) {
                        if (index1 == 1) {
                            起始坐标x = 822
                        } else {
                            起始坐标x = 1015
                        }
                        var result = imgempt(true, 0.9, "弓一转|弓二转|弓三转|双匕首一转|双匕首二转|双匕首三转|双剑一转|双剑二转|双剑三转|匕首一转|匕首二转|匕首三转|单剑二转|单剑三转|盾一转|盾三转|巫一转|巫二转|巫三转|奶三转|奶二转", 起始坐标x, 起始坐标y, 102, 48)
                        if (result != null) {
                            人数++
                            log(index + "行-" + index1 + "列有人")
                        }
                    }
                    起始坐标y = 起始坐标y + 46
                }
                log("人数:" + 人数)
                if (人数 >= 2) {
                    if (瞬移次数 >= 限制瞬移次数) {
                        log("已瞬移" + 限制瞬移次数 + "次")
                        storage.put("跳转时间记录", new Date().getTime().toString())
                        storage.put("随机跳转时间", random(30, 60).toString())
                        return "无人"
                    }
                    log("有人,跳走")
                    // 随机点击(823, 660, 10, 10)
                    // sleep(random(5000, 10000))
                    瞬移次数++
                } else {
                    storage.put("跳转时间记录", new Date().getTime().toString())
                    storage.put("随机跳转时间", random(30, 60).toString())
                    log("没人")
                    return "无人"
                }
            } else {

            }
        }

        sleep(200)
    }
}




function 节电模式(mode) {
    var 药水 = false
    var 药水检测计时 = 0
    // var 退节电 = false
    var 退节电随机时间 = random(1800, 3600)//秒
    var 进入节电时间 = parseInt(new Date().getTime() / 1000)
    // if (mode == "激战地" || mode == "区本" || mode == "周本" || mode == "日副本" || mode == "经验本") {
    //     退节电 = true
    // }

    log("进来节电了")
    var 不在副本检测 = 0
    var 随机时间后操作其他 = random(10, 20)
    var 进入节电模式时间 = new Date().getTime() / (1000 * 60)
    var 其他操作 = true
    var 进入世界boss时间 = "-10-17-18-21-22-"

    while (true) {
        todayPast = 获得当前运行时间()
        节电模式判断掉线时间戳 = new Date().getTime()
        // var 节电模式当前时间戳 = parseInt(new Date().getTime() / 1000)
        // // if (退节电) {
        // var 节电模式时间 = 节电模式当前时间戳 - 进入节电时间
        // if (节电模式时间 >= 退节电随机时间) {
        //     log("随机时间到了,退出节电模式")
        //     swipe(566, 389, 968, 226, 500)
        //     进入节电时间 = 节电模式当前时间戳
        // }
        // }
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            if (mode == "激战地" || mode == "区本") {
                其他操作 = false
            }
           
                var 当前时间戳 = new Date().getTime()
                if (mode == "激战地") {
                    var 挂机时间 = (当前时间戳 - 激战地跳转时间) / 1000
                    if (挂机时间 >= 看人数随机时间) {
                        log("退出节电并跳转看人数")
                        var 结果 = 激战地随机移动()
                        if (结果 == "死亡") {
                            return "死亡"
                        } else if (结果 == "掉线") {
                            return "掉线"
                        }
                    }
                } else {
                    var 挂机时间 = (当前时间戳 - 野外跳转时间) / 1000
                    if (挂机时间 >= 看人数随机时间) {
                        log("退出节电并跳转看人数")
                        swipe(566, 389, 968, 226, 500)
                        sleep(2000)
                        随机点击(823, 650)
                        野外跳转时间 = new Date().getTime()
                    }
                }

            //else if (mode == "野外" || mode == "周本" || mode == "日副本") {
            //         var 当前时间戳 = new Date().getTime()
            //         var 挂机时间 = (当前时间戳 - 野外跳转时间) / 1000
            //         if (挂机时间 >= 看人数随机时间) {
            //             log("该看人数了")
            //             swipe(566, 389, 968, 226, 500)
            //             return "看人数"
            //         }
            //     }
            // }

            if (mode.includes("周本") || mode.includes("日副本") || mode.includes("经验本") || mode.includes("区本") || mode.includes("活动副本")) {
                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                if (jdmsz != null) {
                    var 在副本 = imgempt(true, 0.9, "节电副本剩余时间|节电副本剩余时间2", 99, 17, 439, 57)
                    if (在副本 == null) {
                        if (不在副本检测 >= 10) {
                            log("不在副本了")
                            swipe(566, 389, 968, 226, 500)
                        }
                        不在副本检测++
                    } else {
                        不在副本检测 = 0
                    }
                }
            }

            var guajizhon = imgempt(true, 0.8, "被攻击中|被攻击中2|被攻击中3|被攻击中4", 1190, 523, 89, 104)
            if (guajizhon != null) {
                log("被攻击中,逃跑");
                for (let index = 0; index < 3; index++) {
                    随机点击2(893, 660)
                }
                if (mode == "激战地") {
                    storage.put("激战地今日逃跑次数", (parseInt(storage.get("激战地今日逃跑次数")) + 1).toString())
                        ui.run(function () {
                            window.运维检测.setText("♣检" + storage.get("激战地今日逃跑次数").toString())
                        });
                   
                        if (storage.get("激战地今日逃跑次数") >= 激战地逃跑次数限制) {
                            log("逃跑次数过多结束激战地")
                            threads.currentThread().interrupt()
                        }

                } else if (mode == "区本") {
                    storage.put("区本今日逃跑次数", (parseInt(storage.get("区本今日逃跑次数")) + 1).toString())
                        ui.run(function () {
                            window.运维检测.setText("♣检" + storage.get("区本今日逃跑次数").toString() + ",")
                        });
                   
                        if (storage.get("区本今日逃跑次数") >= 区本逃跑次数限制 || storage.get("区副本修复装备次数") >= 5) {
                            log("逃跑次数过多结束区本")
                            threads.currentThread().interrupt()
                        }
                }
                return "掉线"
            }

            if (mode == "刷金币") {
                if (new Date().getTime() / (1000 * 60 * 60) - storage.get("刷金币计时") > 5) {
                    log("已经刷满5小时金币了")
                    swipe(566, 389, 968, 226, 500)
                    return "掉线"
                }
            }

            // if (!mode.includes("活动副本") && storage.get("活动制造时间记录") != new Date().getDate() && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
            //     var 结果 = 活动制造()
            //     if (结果 == "掉线") {
            //         return "掉线"
            //     } else (
            //         storage.put("活动制造时间记录", new Date().getDate())
            //     )
            // }

            if (mode != "激战地" && mode != "区本" && (new Date().getTime() - storage.get("跳转时间记录")) / (1000 * 60) >= storage.get("随机跳转时间")) {
                var 起始坐标x = 822
                var 起始坐标y = 85
                var 人数 = 0
                for (let index = 1; index <= 4; index++) {
                    for (let index1 = 1; index1 <= 2; index1++) {
                        if (index1 == 1) {
                            起始坐标x = 822
                        } else {
                            起始坐标x = 1015
                        }
                        var result = imgempt(true, 0.9, "弓一转|弓二转|弓三转|双匕首一转|双匕首二转|双匕首三转|双剑一转|双剑二转|双剑三转|匕首一转|匕首二转|匕首三转|单剑二转|单剑三转|盾一转|盾三转|巫一转|巫二转|巫三转|奶三转|奶二转", 起始坐标x, 起始坐标y, 102, 48)
                        if (result != null) {
                            人数++
                            log(index + "行-" + index1 + "列有人")
                        }
                    }
                    起始坐标y = 起始坐标y + 46
                }
                log("人数:" + 人数)
                if (人数 >= 2) {
                    log("检测人数大于等于2人随机跳转")
                    var 结果 = 随机传送移动()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                }
            }


            // 白嫖属性时间戳
            var 白嫖属性时差 = Math.ceil((parseInt(new Date().getTime()) - parseInt(storage.get("白嫖属性时间戳"))) / (1000 * 3600));//大于等于2小时
            if (参数[24] && 白嫖属性时差 >= 5 && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
                节电模式判断掉线时间戳 = new Date().getTime()
                var 结果 = 白嫖属性检测()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }

            var 制作材料时间 = storage.get("自动制作材料时间")
            if (参数[18] && 制作材料时间 != new Date().getDate() && parseInt(storage.get("识别的等级")) >= 35 && todayPast >= 自动制作材料随机时间 && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
                节电模式判断掉线时间戳 = new Date().getTime()
                var 结果 = 每日制造绿级材料()
                if (结果 == "铜钱不足" || 结果 == "材料不足") {
                    自动制作材料时间 = new Date().getDate()
                    storage.put("自动制作材料时间", new Date().getDate())
                } else if (结果 == "掉线") {
                    return "掉线"
                }
            }

            var 自动清理过期物品时差 = Math.ceil((parseInt(new Date().getTime()) - parseInt(storage.get("清理过期物品时间点"))) / (1000 * 3600));//大于等于7天
            // var 清理过期物品日期 = storage.get("清理过期物品日期")
            if (自动清理过期物品时差 >= 5 && new Date().getHours() > 8 && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
                节电模式判断掉线时间戳 = new Date().getTime()
                var 结果 = 清理过期物品()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }

            if (使用背包物品日期 != new Date().getDate() && todayPast >= 使用背包物品随机时间 && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {///
                节电模式判断掉线时间戳 = new Date().getTime()
                var 结果 = 丢弃物品()
                if (结果 == "掉线") {
                    return "掉线"
                }
                var 结果 = 使用背包物品()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                // log("今日已使用背包物品")
                // var 结果 = "使用完毕"
            }


            if (参数[14]) {
                if (new Date().getTime() / (1000 * 60) - parseInt(storage.get("拍卖行记录时间")) > parseInt(storage.get("拍卖行随机时间"))) {
                    节电模式判断掉线时间戳 = new Date().getTime()
                    var 结果 = 交易翻页版()// 交易开始()
                    if (结果 == "完成交易") {
                        storage.put("拍卖行记录时间", new Date().getTime() / (1000 * 60).toString())
                        storage.put("拍卖行随机时间", random(720, 1440).toString())
                        log("充值的拍卖行随机时间为:" + storage.get("拍卖行随机时间"))
                        // 交易时间 = new Date().getDate()
                    } else if (结果 == "掉线") {
                        return "掉线"
                    }
                    var 结果 = 清理背包()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    continue
                }
            }


            var 自动用药时差 = Math.floor((parseInt(new Date().getTime()) - parseInt(storage.get("自动使用药水时间戳"))) / (1000 * 3600 * 24) && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他);//大于等于7天
            if (自动用药时差 >= 7) {
                节电模式判断掉线时间戳 = new Date().getTime()
                var 结果 = 开启药水自动()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }


            if (((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && 其他操作 && parseInt(storage.get("识别的等级")) >= 35 && 参数[45] && (new Date().getTime() / (1000 * 60)) - storage.get("自动提升上次提升时间") >= storage.get("自动提升属性时间随机分钟") && mode != "刷金币" && (还未制造蓝装 || 还未制造绿装) && !mode.includes("活动副本")) {
                log("达到制作条件")
                if (还未制造蓝装) {
                    var 结果 = 清理背包()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    // 最终仓库调整()
                    var 结果 = 装备蓝装遍历版()
                    if (结果 == "装备完毕") {
                        节电模式判断掉线时间戳 = new Date().getTime()
                        var 结果 = 判断需要购买的蓝装()
                        if (结果 == "提升完成") {
                            var 结果 = 检测蓝书()///给个随机时间，  剩余功能绿装及委托强化卷轴  自动购买技能书
                            if (结果 == "条件达标") {
                                节电模式判断掉线时间戳 = new Date().getTime()
                                var 结果 = 判断需要强化的装备("自动提升")
                                if (结果 == "提升完成") {
                                    log("提升完毕")
                                    还未制造蓝装 = false
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else if (结果 == "掉线") {
                                return "掉线"
                            }
                        } else if (结果 == "掉线") {
                            return "掉线"
                        }
                    } else if (结果 == "条件不足") {
                        还未制造蓝装 = false
                    }
                }


                // if (还未制造蓝装) {
                //     var 结果 = 检测蓝书()///给个随机时间，  剩余功能绿装及委托强化卷轴  自动购买技能书
                //     if (结果 == "条件达标") {
                //         var 结果 = 清理背包()
                //         if (结果 == "掉线") {
                //             return "掉线"
                //         }
                //         // 最终仓库调整()
                //         var 结果 = 装备蓝装遍历版()
                //         if (结果 == "装备完毕") {
                //             节电模式判断掉线时间戳 = new Date().getTime()
                //             var 结果 = 判断需要强化的装备("自动提升")
                //             if (结果 == "提升完成") {
                //                 log("提升完毕")
                //                 还未制造蓝装 = false
                //             } else if (结果 == "掉线") {
                //                 return "掉线"
                //             }
                //         } else if (结果 == "条件不足") {
                //             还未制造蓝装 = false
                //         }
                //     } else if (结果 == "掉线") {
                //         return "掉线"
                //     }
                // }


                if (还未制造绿装) {
                    节电模式判断掉线时间戳 = new Date().getTime()
                    // var 结果 = 全绿打造含交易("自动提升")
                    // if (结果 == "完成") {
                    //     还未制造蓝装 = true
                    //     还未制造绿装 = true
                    //     节电模式判断掉线时间戳 = new Date().getTime()
                    //     var 结果 = 简易制造橙装()
                    //     if (结果 == "掉线") {
                    //         return "掉线"
                    //     } else {

                    //     }
                    var 结果 = 进阶洗练()// 开始洗练()
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {

                    }
                    节电模式判断掉线时间戳 = new Date().getTime()
                    开始灌注()
                    if (storage.get("古董版本号") != "2") {
                        制造古董图鉴()
                    }
                    // var 结果 = 自动图鉴()
                    // if (结果 == "掉线") {
                    //     return "掉线"
                    // }

                    log("全部提升完毕")
                    storage.put("自动提升上次提升时间", (new Date().getTime() / (1000 * 60)).toString())
                    log("重新赋值时间" + storage.get("自动提升属性时间"))
                    if (parseFloat(storage.get("自动提升属性时间")) < 1) {
                        storage.put("自动提升属性时间随机分钟", random(5, parseInt(parseFloat(storage.get("自动提升属性时间")) * 24 * 60)).toString())
                    } else {
                        storage.put("自动提升属性时间随机分钟", random(1440, (parseInt((parseFloat(storage.get("自动提升属性时间")) + 1) * 24 * 60)).toString()))
                    }
                    log("重新随机的时间:" + storage.get("自动提升属性时间随机分钟"))
                    // } else if (结果 == "掉线") {
                    //     return "掉线"
                    // }
                }
            }

            if (storage.get("讨伐世界boss记录") != new Date().getDate() && new Date().getMinutes() == storage.get("世界boss随机分钟") && 进入世界boss时间.includes(("-" + new Date().getHours() + "-"))) {// (new Date().getHours() == "8" || new Date().getHours() == "11" || new Date().getHours() == "15" || new Date().getHours() == "19" || new Date().getHours() == "23")) {
                var 结果 = 检测世界boss()
                if (结果 == "讨伐") {
                    // var 结果 = 回城买药()
                    // if (结果 == "掉线") {
                    //     return "掉线"
                    // }
                    return 讨伐世界boss()
                } else if (结果 == "掉线") {
                    return "掉线"
                }
            }

            // if (storage.get("队伍副本完成日期") != new Date().getDate() && new Date().getHours() > 4 && new Date().getHours() > storage.get("随机前往队伍副本") && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
            //     if (storage.get("识别的等级") != null && storage.get("识别的等级") > 40) {
            //         var 结果 = 队伍副本()
            //         if (结果 != "申请中") {
            //             return "掉线"
            //         }
            //     }
            // }

            if (!mode.includes("活动副本") && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && storage.get("活动物资购买时间") != new Date().getDate() && false) {
                var 结果 = 活动物质购买0926()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }

            if (!mode.includes("活动副本") && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && 参数[3] && new Date().getTime() / (1000 * 60 * 60) - storage.get("查看物价时间记录") >= 5) {//查看物价
                var 结果 = 查看材料价格改()//查看物价时间记录
                if (结果 == "掉线") {
                    return "掉线"
                }
            }

            if (((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && 邮件领取时间 != new Date().getHours() && parseInt(new Date().getMinutes()) >= 领取邮件时间偏移 && (new Date().getHours() == "12" || new Date().getHours() == "18") && !mode.includes("活动副本")) {
                log("领取邮件")
                var 结果 = 领取邮件内容()
                if (结果 == "掉线") {
                    return "掉线"
                } else if (结果 == "死亡") {
                    return "死亡"
                }
            } else {
                var 等待中 = imgempt(true, 0.9, "等待中|等待中2", 533, 500, 245, 106)
                if (等待中 != null) {
                    log("等待中,退出节电")
                    swipe(566, 389, 968, 226, 500)
                } else {
                    // var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                    // if (guajizhon != null && mode != "刷金币") {
                    //     log("死亡墓碑恢复经验，节电模式");
                    //     var 结果 = 死亡恢复经验()
                    //     if (结果 == "掉线") {
                    //         return "掉线"
                    //     }
                    // } else {
                    //     var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                    //     if (bbym != null && mode != "刷金币") {
                    //         log("死亡墓碑恢复经验，节电模式颜色");
                    //         var 结果 = 死亡恢复经验()
                    //         if (结果 == "掉线") {
                    //             return "掉线"
                    //         }
                    //     } else {
                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                            if (手 != null) {
                                log("已退出节电模式");
                                if (((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && 其他操作) {
                                    var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                    if (jdmsz != null) {
                                        log("已退出节电模式，已锁定怪物，关闭怪物锁定")
                                        随机点击2(jdmsz.x, jdmsz.y)
                                    } else {
                                        var xuyqd = imgempt(true, 0.9, "需要签到", 219, 4, 164, 45)
                                        if (xuyqd != null) {
                                            var 结果 = 签到()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            continue
                                        }

                                        var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
                                        if (bbym != null) {
                                            log("领取活动")
                                            var 结果 = 活动领取()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                            continue
                                        }

                                        if (药水) {
                                            return "购买药水"
                                        }
                                        return
                                    }
                                } else {
                                    log("在节电模式待的时间太短,不操作其他")
                                    var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                    if (jdmsz != null) {
                                        log("已退出节电模式，已锁定怪物，关闭怪物锁定")
                                        随机点击2(jdmsz.x, jdmsz.y)
                                    } else {

                                    }
                                    if (药水) {
                                        return "购买药水"
                                    }
                                    return
                                }
                            } else {
                                var cgyfz = imgempt(true, 0.9, "节电模式_背包已满|无法自然恢复|无法自然恢复2|节电模式_背包已满(大)|不介入攻击", 7, 72, 196, 482)
                                if (cgyfz != null && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
                                    log("节电模式，背包已满")
                                    swipe(566, 389, 968, 226, 500)
                                    if (参数[14]) {
                                        var 结果 = 交易翻页版()// 交易开始()
                                        if (结果 == "完成交易") {
                                            交易时间 = new Date().getDate()
                                        } else if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                    }
                                    // var 结果 = 成就图鉴()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // } else {
                                    var 结果 = 清理背包()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                    // }
                                } else {
                                    var bbym = cor(true, 12, 9, 107, 66, 357, "#771a09", [[0, -4, "#b76045"], [-4, -4, "#a2472c"], [-4, -1, "#b34d34"], [8, -1, "#d36a4a"], [8, 2, "#cb5e3f"], [7, 2, "#d36647"], [13, 0, "#c25639"], [13, -6, "#d4825d"], [13, -9, "#d99473"], [-13, -8, "#332e2a"], [20, -9, "#322d27"]])
                                    if (bbym != null && ((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他) {
                                        log("节电模式，背包已满")
                                        swipe(566, 389, 968, 226, 500)
                                        if (参数[14] ) {
                                            var 结果 = 交易翻页版()//交易开始()
                                            if (结果 == "完成交易") {
                                                交易时间 = new Date().getDate()
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        }

                                        // var 结果 = 成就图鉴()
                                        // if (结果 == "掉线") {
                                        //     return "掉线"
                                        // } else {
                                        var 结果 = 清理背包()
                                        if (结果 == "掉线") {
                                            return "掉线"
                                        }
                                        // }
                                    } else {
                                        var jdmssw = imgempt(true, 0.9, "节电死亡", 578, 514, 144, 85)
                                        if (jdmssw != null) {
                                            log("节电死亡");
                                            swipe(566, 389, 968, 226, 500)
                                            var 结果 = 死亡复活()
                                            if (结果 == "死亡") {
                                                return "死亡"
                                            } else if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            var bfzl = imgempt(true, 0.9, "节电模式在主城|节电模式在主城2", 485, 462, 365, 113)
                                            if (bfzl != null) {
                                                log("节电模式在主城,退出节电")
                                                swipe(566, 389, 968, 226, 500)
                                            } else {
                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                if (bfzl != null) {
                                                    log("死亡复活")
                                                   
                                                        var 死亡等待随机时间 = random(20, 120) * 1000
                                                        log("死亡等待随机时间:" + 死亡等待随机时间)
                                                        sleep(死亡等待随机时间)
                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                        if (bfzl != null) {
                                                            随机点击(bfzl.x, bfzl.y, 10, 10)
                                                        }
                                                        var 随机等待恢复时间 = random(10, 20) * 1000
                                                        sleep(随机等待恢复时间)
                                                    return "死亡"
                                                } else {
                                                    var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
                                                    if (dtyd != null) {
                                                        log("副本区使用时间满")
                                                        随机点击(631, 445, 10, 10)
                                                    } else {
                                                        if (((parseInt(节电模式判断掉线时间戳) / ((1000 * 60))) - 进入节电模式时间) >= 随机时间后操作其他 && (new Date().getTime() / (1000 * 60) - parseInt(storage.get("看pvp退节电上次记录时间"))) > parseInt(storage.get("看pvp退节电设置随机时间"))) {
                                                            var 结果 = 设置pvp退出节电()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            }
                                                        } else {
                                                            var cgyfz = imgempt(true, 0.9, "分钟|节电模式分钟", 9, 61, 163, 447)
                                                            if (cgyfz != null) {
                                                                var bfzl = imgempt(true, 0.9, "百分之零|百分之零2", 9, 61, 163, 447)
                                                                if (bfzl != null) {
                                                                    log("一分钟后还是百分之零,掉线了")
                                                                    关闭应用("com.wemade.nightcrows")
                                                                    sleep(10000)
                                                                    log("拉起游戏")
                                                                    app.launch("com.wemade.nightcrows")
                                                                    sleep(5000)
                                                                    return "重启"
                                                                } else {
                                                                    if (!mode.includes("活动副本") && 参数[25] && mode != "刷金币") {
                                                                        var dtyd = imgempt(true, 0.9, "节电模式任务完成", 428, 567, 204, 67)
                                                                        if (dtyd != null) {
                                                                            log("节电模式任务完成")
                                                                            var 结果 = 接取公会任务(mode)
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            } else {

                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                    //     }
                    // }
                }
            }

            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
            if (jdmsz != null) {
                var 取色图 = captureScreen();
                var 取色数组 = [[175, 672], [174, 672], [174, 673], [175, 673], [175, 674], [174, 674], [174, 675], [175, 675], [175, 676], [174, 676], [174, 677], [174, 678], [173, 678]]
                var 血色 = false
                var 比色 = "#AD3C2E"
                for (let index = 0; index < 取色数组.length; index++) {
                    var 坐标数组 = 取色数组[index]
                    var 取色 = images.pixel(取色图, 坐标数组[0], 坐标数组[1])
                    if (colors.isSimilar(比色, 取色, 26)) {
                        血色 = true
                        break
                    }
                }

                if (血色 == false) {
                    log("没血了赶紧跑路了")
                    var 结果 = 快速回城("卷轴")
                    if (结果 == "掉线") {
                        return "掉线"
                    } else {
                        return "死亡"
                    }
                }

                // var 总血量 = 1800
                // var 截图 = captureScreen();//#84
                // var clip = images.clip(截图, 92, 669, 171, 11);
                // var bb = images.interval(clip, "#151515", 15)
                // var 获取的所有点 = images.findAllPointsForColor(bb, "#FFFFFF", { similarity: 0.9 })
                // var 百分比 = 100 - parseInt((获取的所有点.length - 50) / 总血量 * 100)
                // clip.recycle()
                // bb.recycle()
                // if (百分比 <= 60) {
                //     log("血量百分比:" + 百分比 + "黑色点位:" + 获取的所有点.length)
                //     var 结果 = 快速回城("卷轴")
                //     if (结果 == "掉线") {
                //         return "掉线"
                //     } else {
                //         return "死亡"
                //     }
                // } else {
                //     sleep(1000)
                // }
            }
        }
        sleep(200)
    }
}


function 快速回城(params) {
    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
            if (zhuchengzahuo != null) {
                log("已回城");
                return "已回城"
            } else {
                var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                if (zhuchengzahuo != null) {
                    log("主城主城技能商店图标");
                    swipe(122, 138, 114, 274, 500)
                } else {
                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                    if (jdmsz != null) {
                        log("退出节电")
                        swipe(566, 389, 968, 226, 500)
                        sleep(450)
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                            if (bfzl != null) {
                                log("死亡复活")
                               
                                    var 死亡等待随机时间 = random(20, 120) * 1000
                                    log("死亡等待随机时间:" + 死亡等待随机时间)
                                    sleep(死亡等待随机时间)
                                    var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                    if (bfzl != null) {
                                        随机点击(bfzl.x, bfzl.y, 10, 10)
                                    }
                                    var 随机等待恢复时间 = random(10, 20) * 1000
                                    sleep(随机等待恢复时间)
                                return "死亡"
                            } else {
                                if (params == "卷轴" || params == "传送") {
                                    if (回城卷轴) {
                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                        if (手 != null) {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                            if (zhuchengzahuo != null) {
                                                log("主城委托图标");
                                                for (let index = 0; index < 3; index++) {
                                                    swipe(153, 87, 150, 282, 500)
                                                }
                                            } else {
                                                var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                if (huicheng != null) {
                                                    log("点击回城卷轴")
                                                    随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                    for (let index = 0; index < 5; index++) {
                                                        var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                        if (guajizhon != null) {
                                                            log("没有卷轴了")
                                                            回城卷轴 = false
                                                            break
                                                        }
                                                    }
                                                    sleep(3000)
                                                } else {
                                                    回城卷轴 = false
                                                }
                                            }
                                        } else {

                                        }
                                    } else {
                                        var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                        if (dyzczhsrtb != null) {
                                            log("点击地图主城杂货商人图标");
                                            随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                        } else {
                                            var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                            if (dtl != null) {
                                                var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                if (dthctb != null) {
                                                    log("点击回城图标");
                                                    随机点击2(dthctb.x, dthctb.y, 10, 10)
                                                } else {
                                                    log("地图里,寻找主城");
                                                    for (let index = 0; index < 3; index++) {
                                                        swipe(1104, 216, 1118, 614, 500)
                                                    }
                                                }
                                            } else {
                                                var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                if (dtgbzt != null) {
                                                    log("地图关闭状态,点击打开");
                                                    随机点击2(dtgbzt.x, dtgbzt.y, 10, 10)
                                                } else {
                                                    var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                    if (dtdkzt != null) {


                                                        log("点击地图");
                                                        随机点击2(139, 150, 10, 10)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }
                                } else {
                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                    if (dtl != null) {
                                        for (let index = 0; index < 3; index++) {
                                            swipe(1104, 216, 1118, 614, 500)
                                        }
                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                        if (dthctb != null) {
                                            log("点击回城图标");
                                            随机点击2(dthctb.x, dthctb.y, 10, 10)
                                        } else {
                                            log("地图里,寻找主城");
                                            for (let index = 0; index < 3; index++) {
                                                swipe(1104, 216, 1118, 614, 500)
                                            }
                                        }
                                    } else {
                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                        if (dtgbzt != null) {
                                            log("地图关闭状态,点击打开");
                                            随机点击2(dtgbzt.x, dtgbzt.y, 10, 10)
                                        } else {
                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                            if (dtdkzt != null) {
                                                sleep(5000)
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    log("已回城")
                                                    return "已回城"
                                                } else {
                                                    log("点击地图");
                                                    随机点击2(139, 150, 10, 10)
                                                }
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 节电模式检测药水() {
    var 退出节电 = false
    var 买药 = false
    var 节电模式未找到药水次数 = 0
    while (true) {
        if (异常捕获("不退节电") == "掉线") {
            return "掉线"
        } else {
            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
            if (手 != null) {
                if (退出节电) {
                    if (买药) {
                        return "需要买药"
                    } else {
                        return "无需买药"
                    }
                } else {
                    log("点节电")
                    随机点击(34, 624, 10, 10)
                }
            } else {
                var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                if (jdmsz != null) {
                    log("节电模式中");
                    var guajizhon = imgempt(true, 0.9, "节电模式小红药|节电模式中红药|节电模式小红药2|节电模式中红药2", 277, 606, 814, 106)
                    if (guajizhon != null) {
                        log("找到了药水")
                        节电模式未找到药水次数 = 0
                        var bbym = imgempt(true, 0.9, "药水千字", guajizhon.x - 6, 651, 124, 63)
                        if (bbym != null) {
                            log("千瓶药水")
                            退出节电 = true
                            swipe(566, 389, 968, 226, 500)
                            sleep(450)
                        } else {
                            var 数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, guajizhon.x - 6, 651, 124, 63);
                            if (数量 != "false") {
                                log("药水还有:" + 数量 + "瓶")
                                if (数量 >= 200) {
                                    退出节电 = true
                                    log("药水:" + 数量)
                                    swipe(566, 389, 968, 226, 500)
                                    sleep(450)
                                } else {
                                    买药 = true
                                    退出节电 = true
                                    swipe(566, 389, 968, 226, 500)
                                    sleep(450)
                                }
                            } else {
                                退出节电 = true
                                买药 = true
                                swipe(566, 389, 968, 226, 500)
                                sleep(450)
                                log("未找到数量")
                            }
                        }
                    } else {
                        log("节电模式未找到药水")
                        节电模式未找到药水次数++
                        if (节电模式未找到药水次数 >= 10) {
                            退出节电 = true
                            买药 = true
                            swipe(566, 389, 968, 226, 500)
                            sleep(450)
                        }
                    }
                } else {

                }

            }
        }
        sleep(200)
    }
}

function 节电模式药水检测() {
    var guajizhon = imgempt(true, 0.9, "节电模式小红药|节电模式中红药|节电模式小红药2|节电模式中红药2", 277, 606, 814, 106)
    if (guajizhon != null) {
        log("找到了药水")
        log("识别的位置:" + guajizhon.x + "," + guajizhon.y)
        var bbym = imgempt(true, 0.8, "药水千字", guajizhon.x - 6, 651, 124, 63)
        if (bbym != null) {
            log("千瓶药水")
            return "正常"
        } else {
            var 数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, guajizhon.x - 6, 651, 124, 63);
            if (数量 != "false") {
                log("药水还有:" + 数量 + "瓶")
                if (数量 <= 200) {
                    var 结果 = 再次确认药水数量()
                    if (结果 == "药水不够") {
                        return "药水不够"
                    } else if (结果 == "掉线") {
                        return "掉线"
                    } else if (结果 == "正常") {
                        return "正常"
                    } else {
                        return "没找到"
                    }
                } else {
                    return "正常"
                }
            } else {
                return "无药"
            }
        }
    } else {
        log("节电模式未找到药水")
        return "没找到"
    }
}


function 再次确认药水数量() {
    var 确实需要买药 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.9, "节电模式小红药|节电模式中红药|节电模式小红药2|节电模式中红药2", 277, 606, 814, 106)
            if (guajizhon != null) {
                log("找到了药水")
                var 数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, guajizhon.x, 651, 124, 63);
                if (数量 != "false") {
                    log("再次确认药水还有:" + 数量 + "瓶")
                    if (数量 <= 200) {
                        确实需要买药++
                        if (确实需要买药 >= 3) {
                            return "药水不够"
                        }
                    } else {
                        return "正常"
                    }
                } else {
                    确实需要买药++
                    if (确实需要买药 >= 3) {
                        return "药水不够"
                    }
                }
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("已退出节电")
                    return "已退出节电"
                } else {

                }
            }
        }
        sleep(1000)
    }
}




function 死亡恢复经验() {
    var 未找到可恢复 = 0
    var 点击恢复 = 0
    if (区副本状态) {
        log("区副本中修复装备")
        storage.put("区副本修复装备次数", (storage.get("区副本修复装备次数") + 1).toString())
        log("区副本中修复次数:" + storage.get("区副本修复装备次数"))
    }
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jdmssw = imgempt(true, 0.9, "恢复经验EXP", 44, 102, 373, 502)
            if (jdmssw != null) {
                log("点击恢复经验EXP");
                随机点击2(219, 579, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,前往野外挂机")
                    // // 无铜钱处理()
                    野外挂机刷金币()
                    return "掉线"
                }
                重复点击坐标次数 = 0
                点击恢复++
                if (点击恢复 >= 10) {
                   
                    发送异常("是否有铜钱恢复或网络异常")
                    alert("是否有铜钱恢复或网络异常?")
                    点击恢复 = 0
                }
            } else {
                var jdmssw = imgempt(true, 0.9, "恢复装备E", 68, 112, 99, 446)
                if (jdmssw != null) {
                    log("点击恢复装备E");
                    随机点击2(203, 574, 10, 10)
                    var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                    if (guajizhon != null) {
                        log("铜钱不足,前往野外挂机")
                        // // 无铜钱处理()
                        野外挂机刷金币()
                        return "掉线"
                    }
                    重复点击坐标次数 = 0
                    点击恢复++
                    if (点击恢复 >= 10) {
                        点击恢复 = 0
                       
                        发送异常("是否有铜钱恢复或网络异常")
                        alert("是否有铜钱恢复或网络异常?")
                    }
                } else {
                    var bbym = cor(true, 13, 33, 185, 42, 39, "#e9514e", [[2, 0, "#da403e"], [2, -3, "#d54948"], [2, 3, "#d12e2f"], [-2, 1, "#e14141"], [5, 0, "#cf2929"], [4, -1, "#d02a2a"]])
                    if (bbym != null) {
                        log("点击装备修复");
                        随机点击2(36, 228, 10, 10)
                        var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                        if (guajizhon != null) {
                            log("铜钱不足,前往野外挂机")
                            // // 无铜钱处理()
                            野外挂机刷金币()
                            return "掉线"
                        }
                        重复点击坐标次数 = 0
                        点击恢复++
                        if (点击恢复 >= 10) {
                            点击恢复 = 0
                           
                            发送异常("是否有铜钱恢复或网络异常")
                            alert("是否有铜钱恢复或网络异常?")
                        }
                    } else {
                        var guajizhon = imgempt(true, 0.9, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                        if (guajizhon != null) {
                            log("死亡墓碑恢复经验");
                            if (guajizhon.y - 5 <= 0) {
                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                            } else {
                                随机点击(guajizhon.x, guajizhon.y - 5, 10, 10)
                            }
                        } else {
                            var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                            if (bbym != null) {
                                log("死亡墓碑恢复经验颜色");
                                if (bbym.y - 5 <= 0) {
                                    随机点击(bbym.x, bbym.y, 10, 10)
                                } else {
                                    随机点击(bbym.x, bbym.y - 5, 10, 10)
                                }
                            } else {
                                未找到可恢复++
                                if (未找到可恢复 >= 5) {
                                    log("恢复完成")
                                    var jdmssw = imgempt(true, 0.9, "关闭任何恢复", 3, 55, 112, 80)
                                    if (jdmssw != null) {
                                        log("关闭恢复");
                                        随机点击(31, 86, 10, 10)
                                        return "恢复完成"
                                    } else {
                                        return "恢复完成"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(500)
    }
}

function 开始挂机刷金币() {
    var 已点auto = false
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
            if (jdmsz != null) {
                log("节电模式中");
                var 结果 = 节电模式("刷金币")
                if (结果 == "死亡") {
                    // 自动挂机 = false
                    return "死亡"
                } else if (结果 == "重启") {
                    return "重启"
                } else if (结果 == "掉线") {
                    return "掉线"
                } else if (结果 == "已完成刷金币任务") {
                    return "已完成刷金币任务"
                }
            } else {
                var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                if (jdmsz != null) {
                    log("已锁定怪物，点击节电模式")
                    if (参数[48] && !参数[26]) {
                        while (true) {
                            if (异常捕获() == "掉线") {
                                log("掉线")
                                break
                            } else {
                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                if (jeig != null) {
                                    log("设定自动使用生命药剂为百分之八十左右")
                                    sleep(1000)
                                    随机点击2(921, 464)
                                    参数[48] = false
                                    ui.run(function () {
                                        ui.药水设定.setChecked(false)
                                    })
                                    storage.put("药水设定", false)
                                    break
                                } else {
                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                    if (手 != null) {
                                        log("点击药水")
                                        随机点击2(976, 656)
                                    } else {
                                    }
                                }
                            }
                        }
                    }
                    sleep(random(1000, 10000))
                    随机点击(34, 624, 10, 10)
                } else {
                    var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                    if (auto != null) {
                        log("点击auto");
                        随机点击(auto.x, auto.y, 10, 10)
                        已点auto = true
                    } else {
                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                        if (bfzl != null) {
                            随机点击(bfzl.x, bfzl.y, 10, 10)
                            log("刷金币时死亡")
                            return "死亡"
                        } else {
                            if (已点auto) {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("刷金币已回到主城判定死亡");
                                        return "死亡"
                                    } else {
                                        var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                        if (jdmsz != null) {
                                            log("已锁定怪物，点击节电模式")
                                            if (参数[48] && !参数[26]) {
                                                while (true) {
                                                    if (异常捕获() == "掉线") {
                                                        log("掉线")
                                                        break
                                                    } else {
                                                        var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                        if (jeig != null) {
                                                            log("设定自动使用生命药剂为百分之八十左右")
                                                            sleep(1000)
                                                            随机点击2(921, 464)
                                                            参数[48] = false
                                                            ui.run(function () {
                                                                ui.药水设定.setChecked(false)
                                                            })
                                                            storage.put("药水设定", false)
                                                            break
                                                        } else {
                                                            var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                            if (手 != null) {
                                                                log("点击药水")
                                                                随机点击2(976, 656)
                                                            } else {
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            sleep(random(1000, 10000))
                                            随机点击(34, 624, 10, 10)
                                        } else {
                                            log("未锁定怪物")
                                            已点auto = false
                                        }
                                    }
                                } else {

                                }
                            }
                        }
                    }
                    // }
                }
                // }
            }

        }
        sleep(200)
    }
}


function 野外挂机刷金币() {
    log("野外挂机刷金币")

    // storage.put("无铜钱时间", 当前时间)
    // threads.currentThread().interrupt()

    if (new Date().getTime() / (1000 * 60 * 60) - storage.get("刷金币计时") > 5) {
        log("重置刷金币时间")
        storage.put("刷金币计时", new Date().getTime() / (1000 * 60 * 60).toString())
    }

    var 结果 = 纯回主页()
    if (结果 == "掉线") {
        return "掉线"
    }

    var 结果 = 领取邮件内容()
    if (结果 == "掉线") {
        return "掉线"
    } else {
        var 结果 = 领取成就("提升")
        if (结果 == "掉线") {
            return "掉线"
        } else {
            var xuyqd = imgempt(true, 0.9, "需要签到", 219, 4, 164, 45)
            if (xuyqd != null) {
                var 结果 = 签到()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }
            var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
            if (bbym != null) {
                log("领取活动")
                var 结果 = 活动领取()
                if (结果 == "掉线") {
                    return "掉线"
                }
            }
            纯回主页()
        }
    }

    var 回城卷轴 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
            if (qrtz != null) {
                log("确认跳转");
                随机点击2(qrtz.x, qrtz.y, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,处理")
                    var json = {
                        "设备id": 设备id,
                        "type": "激战地锁",
                        "状态": "锁死"
                    }
                    发送数据至中控("fragmentaryState", json)
                    storage.put("激战地锁", false)//锁死
                    storage.put("区副本锁", false)//锁死
                    发送异常("铜钱不足,请手动处理")
                    alert("铜钱不足,请手动处理")
                    exit()
                }
                sleep(5000)
                for (let index = 0; index < 10; index++) {
                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                    if (mi != null) {
                        log("移动中")
                        未移动 = false
                        var 移动中 = 0
                        while (true) {
                            if (异常捕获() == "掉线") {
                                return "掉线"
                            } else {
                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                if (mi != null) {
                                    log("移动中")
                                    移动中 = 0
                                } else {
                                    移动中++
                                    if (移动中 >= 5) {
                                        log("到达目的地")
                                        sleep(10000)
                                        var 结果 = 开始挂机刷金币()
                                        if (结果 == "已完成刷金币任务") {
                                            return "掉线"
                                        } else {
                                            return "掉线"
                                        }
                                    }
                                }
                            }
                            sleep(550)
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                发送异常("铜钱不足,请手动处理")
                                alert("铜钱不足,请手动处理")
                                exit()
                            }
                        } else {
                            var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                            if (zzjiaz != null) {
                                log("正在加载");
                                未移动 = false
                                var 加载 = 0
                                while (true) {
                                    if (异常捕获() == "掉线") {
                                        return "掉线"
                                    } else {
                                        var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                                        if (zzjiaz != null) {
                                            log("正在加载")
                                            加载 = 0
                                        } else {
                                            加载++
                                            if (加载 >= 5) {
                                                log("加载完毕")
                                                break
                                            }
                                        }
                                    }
                                    sleep(550)
                                }
                            } else {

                            }
                        }
                    }
                    sleep(550)
                }
            } else {
                var tzwz = imgempt(true, 0.9, "跳转位置", 1188, 157, 91, 561)
                if (tzwz != null) {
                    log("跳转位置");
                    随机点击(tzwz.x, tzwz.y, 10, 10)
                } else {
                    var zhuchengzahuo = imgempt(true, 0.9, "最低等级大地图", 990, 43, 223, 107)
                    if (zhuchengzahuo != null) {
                        log("最低等级大地图,寻找25级地点");
                        var zhuchengzahuo = imgempt(true, 0.9, "25级地点", 993, 170, 132, 507)
                        if (zhuchengzahuo != null) {
                            log("点击25级地点");
                            随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                        } else {
                            log("未找到25级地点,下滑")
                            swipe(1087, 489, 1093, 397, 2000)
                        }
                    } else {
                        var zhuchengzahuo = imgempt(false, 0.9, "最低等级地图", 217, 81, 807, 550)
                        if (zhuchengzahuo != null) {
                            log("选择最低等级地图");
                            随机点击2(zhuchengzahuo.x + 31, zhuchengzahuo.y - 42)
                        } else {
                            var zhuchengzahuo = imgempt(true, 0.9, "前往世界地图标识", 530, 632, 110, 81)
                            if (zhuchengzahuo != null) {
                                log("前往世界地图");
                                随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                            } else {
                                var zhuchengzahuo = imgempt(true, 0.9, "左上角小地图频道", 178, 43, 155, 73)
                                if (zhuchengzahuo != null) {
                                    log("左上角小地图频道,点击进入地图");
                                    随机点击2(zhuchengzahuo.x - 100, zhuchengzahuo.y + 4)
                                } else {
                                    var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                    if (zhuchengzahuo != null) {
                                        log("点击展开地图");
                                        随机点击2(306, 71)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                        if (zhuchengzahuo != null) {
                                            log("主城主城技能商店图标");
                                            swipe(122, 138, 114, 274, 500)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城工会商店图标", 8, 52, 97, 350)
                                            if (zhuchengzahuo != null) {
                                                log("工会商店图标存在,上翻");
                                                swipe(135, 110, 140, 316, 1000)
                                                sleep(1000)
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "左上角关闭XX", 2, 43, 92, 136)
                                                if (zhuchengzahuo != null) {
                                                    log("关闭左上角关闭XX");
                                                    随机点击2(zhuchengzahuo.x, zhuchengzahuo.y)
                                                } else {
                                                    if (回城卷轴) {
                                                        var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                        if (zhuchengzahuo != null) {
                                                            log("主城委托图标");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(153, 87, 150, 282, 500)
                                                            }
                                                        } else {
                                                            var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                            if (huicheng != null) {
                                                                log("点击回城卷轴")
                                                                随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                                for (let index = 0; index < 5; index++) {
                                                                    var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                    if (guajizhon != null) {
                                                                        log("没有卷轴了")
                                                                        回城卷轴 = false
                                                                        break
                                                                    }
                                                                }
                                                                sleep(3000)
                                                            } else {
                                                                回城卷轴 = false
                                                            }
                                                        }
                                                    } else {
                                                        var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                        if (dtl != null) {
                                                            var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                            if (dthctb != null) {
                                                                log("点击回城图标");
                                                                随机点击(dthctb.x, dthctb.y, 10, 10)
                                                            } else {
                                                                log("地图里,寻找主城");
                                                                for (let index = 0; index < 3; index++) {
                                                                    swipe(1104, 216, 1118, 614, 500)
                                                                    sleep(random(1000, 3000))
                                                                }
                                                            }
                                                        } else {
                                                            var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                            if (dtgbzt != null) {
                                                                log("地图关闭状态,点击打开");
                                                                随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                            } else {
                                                                var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                                if (dtdkzt != null) {
                                                                    log("点击地图");
                                                                    随机点击(139, 150, 10, 10)
                                                                    sleep(random(1000, 3000))
                                                                } else {
                                                                    var bbym = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                    if (bbym != null) {
                                                                        log("野外刷金币,退出节电");
                                                                        swipe(566, 389, 968, 226, 500)
                                                                    } else {


                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(500)
    }
}


function 无铜钱处理() {
    var 当前时间 = Math.ceil(new Date().getTime() / (1000 * 60 * 60 * 24))
    if (当前时间 != storage.get("无铜钱时间")) {
        var 结果 = 纯回主页()
        if (结果 == "掉线") {
            return "掉线"
        } else {
            log("领取铜钱")
            var 结果 = 领取邮件内容()
            if (结果 == "掉线") {
                return "掉线"
            } else {
                var 结果 = 领取成就("提升")
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    var xuyqd = imgempt(true, 0.9, "需要签到", 219, 4, 164, 45)
                    if (xuyqd != null) {
                        var 结果 = 签到()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    }
                    var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
                    if (bbym != null) {
                        log("领取活动")
                        var 结果 = 活动领取()
                        if (结果 == "掉线") {
                            return "掉线"
                        }
                    }
                    纯回主页()
                    //这里结束线程
                    log("取消激战地和区本及结束当前执行任务")
                    var json = {
                        "设备id": 设备id,
                        "type": "激战地锁",
                        "状态": "锁死"
                    }
                    发送数据至中控("fragmentaryState", json)
                    storage.put("激战地锁", false)//锁死
                    storage.put("区副本锁", false)//锁死
                    storage.put("无铜钱时间", 当前时间)
                    threads.currentThread().interrupt()
                }
            }
        }
    } else {
        发送异常("无铜钱可用,无铜钱可用!!!")
        alert("无铜钱可用,无铜钱可用!!!")
        exit()
    }
}

function 死亡复活() {
    var 恢复 = false
    var 点击恢复 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var jdmssw = imgempt(true, 0.9, "节电死亡", 578, 514, 144, 85)
            if (jdmssw != null) {
                log("节电死亡");
                swipe(566, 389, 968, 226, 500)
            } else {
                var fuhuo = imgempt(true, 0.9, "复活", 1105, 635, 130, 74)
                if (fuhuo != null) {
                    log("点击复活");
                    随机点击(fuhuo.x, fuhuo.y, 10, 10)
                } else {
                    var hfjyan = imgempt(true, 0.9, "恢复经验", 65, 544, 285, 69)
                    if (hfjyan != null) {
                        log("点击恢复经验");
                        随机点击(hfjyan.x, hfjyan.y, 10, 10)
                        点击恢复++
                        if (点击恢复 >= 5) {
                            点击恢复 = 0
                            var hfhd = imgempt(true, 0.9, "恢复红点", 1, 101, 111, 242)
                            if (hfhd != null) {
                                log("恢复红点");
                                随机点击(hfhd.x, hfhd.y, 10, 10)
                            } else {
                                log("点击恢复装备")
                                随机点击(36, 228, 10, 10)
                            }
                        }
                        恢复 = true
                        if (恢复) {
                            var wxhf = imgempt(true, 0.9, "零(无需恢复)", 73, 60, 273, 56)
                            if (wxhf != null) {
                                var gbhf = imgempt(true, 0.9, "关闭恢复", 4, 49, 75, 84)
                                if (gbhf != null) {
                                    log("关闭恢复");
                                    随机点击(gbhf.x, gbhf.y, 10, 10)
                                }
                            }
                        }
                    } else {
                        var mubei = imgempt(true, 0.9, "墓碑", 781, 7, 252, 69)
                        if (mubei != null) {
                            log("点击墓碑");
                            随机点击(mubei.x, mubei.y, 10, 10)
                        } else {
                            var mubei = imgempt(true, 0.9, "墓碑2", 781, 7, 252, 69)
                            if (mubei != null) {
                                log("点击墓碑");
                                随机点击(mubei.x, mubei.y, 10, 10)
                            } else {
                                var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                                if (guajizhon != null) {
                                    log("死亡墓碑恢复经验，死亡复活");
                                    随机点击(guajizhon.x, guajizhon.y, 10, 10)
                                } else {
                                    var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                                    if (bbym != null) {
                                        log("死亡墓碑恢复经验，死亡复活颜色");
                                        随机点击(bbym.x, bbym.y, 10, 10)
                                    } else {
                                        if (恢复) {
                                            var gbhf = imgempt(true, 0.9, "关闭恢复", 4, 49, 75, 84)
                                            if (gbhf != null) {
                                                log("关闭恢复");
                                                随机点击(gbhf.x, gbhf.y, 10, 10)
                                            } else {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                                if (zhuchengzahuo != null) {
                                                    log("复活并已完成恢复");
                                                    return "死亡"
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}





function 死亡复活并检测药水() {
    var 恢复 = false
    var 点击恢复 = 0
    while (true) {
        var jdmssw = imgempt(true, 0.9, "节电死亡", 578, 514, 144, 85)
        if (jdmssw != null) {
            log("节电死亡");
            swipe(566, 389, 968, 226, 500)
        } else {
            var fuhuo = imgempt(true, 0.9, "复活", 1105, 635, 130, 74)
            if (fuhuo != null) {
                log("点击复活");
                随机点击(fuhuo.x, fuhuo.y, 10, 10)
            } else {
                var hfjyan = imgempt(true, 0.9, "恢复经验", 65, 544, 285, 69)
                if (hfjyan != null) {
                    log("点击恢复经验");
                    随机点击(hfjyan.x, hfjyan.y, 10, 10)
                    点击恢复++
                    if (点击恢复 >= 5) {
                        点击恢复 = 0
                        var hfhd = imgempt(true, 0.9, "恢复红点", 1, 101, 111, 242)
                        if (hfhd != null) {
                            log("恢复红点");
                            随机点击(hfhd.x, hfhd.y, 10, 10)
                        } else {
                            log("点击恢复装备")
                            随机点击(36, 228, 10, 10)
                        }
                    }
                    恢复 = true
                    if (恢复) {
                        var wxhf = imgempt(true, 0.9, "零(无需恢复)", 73, 60, 273, 56)
                        if (wxhf != null) {
                            var gbhf = imgempt(true, 0.9, "关闭恢复", 4, 49, 75, 84)
                            if (gbhf != null) {
                                log("关闭恢复");
                                随机点击(gbhf.x, gbhf.y, 10, 10)
                            }
                        }
                    }
                } else {
                    var mubei = imgempt(true, 0.9, "墓碑", 781, 7, 252, 69)
                    if (mubei != null) {
                        log("点击墓碑");
                        随机点击(mubei.x, mubei.y, 10, 10)
                    } else {
                        var mubei = imgempt(true, 0.9, "墓碑2", 781, 7, 252, 69)
                        if (mubei != null) {
                            log("点击墓碑");
                            随机点击(mubei.x, mubei.y, 10, 10)
                        } else {
                            var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
                            if (guajizhon != null) {
                                log("死亡墓碑恢复经验,死亡复活检测药水");
                                随机点击(guajizhon.x, guajizhon.y, 10, 10)
                            } else {
                                var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                                if (bbym != null) {
                                    log("死亡墓碑恢复经验，死亡复活检测药水颜色");
                                    随机点击(bbym.x, bbym.y, 10, 10)
                                } else {
                                    if (恢复) {
                                        var gbhf = imgempt(true, 0.9, "关闭恢复", 4, 49, 75, 84)
                                        if (gbhf != null) {
                                            log("关闭恢复");
                                            随机点击(gbhf.x, gbhf.y, 10, 10)
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                            if (zhuchengzahuo != null) {
                                                log("复活并已完成恢复");
                                                var guajizhon = imgempt(true, 0.9, "零小血药", 677, 657, 63, 49)
                                                if (guajizhon != null) {
                                                    toastLog("无药")
                                                    var 结果 = 回城买药()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else if (结果 == "购买完成") {
                                                        return "掉线"
                                                    }
                                                } else {

                                                }
                                                return "掉线"
                                            } else {

                                            }
                                        }
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                        if (zhuchengzahuo != null) {
                                            log("复活并已完成恢复");
                                            var guajizhon = imgempt(true, 0.9, "零小血药", 677, 657, 63, 49)
                                            if (guajizhon != null) {
                                                toastLog("无药")
                                                var 结果 = 回城买药()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else if (结果 == "购买完成") {
                                                    return "掉线"
                                                }
                                            } else {

                                            }
                                            return "掉线"
                                        } else {

                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 前往4个NPC购买活动物资() {
    var 回城卷轴 = true
    var 杂货商人 = true
    var 武器商人 = true
    var 技能商人 = true
    var 手工艺品商人 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
            if (mi != null) {
                log("移动中...");
                sleep(1000)
            } else {
                var srgmjm = imgempt(true, 0.9, "商人购买界面", 725, 246, 76, 76)
                if (srgmjm != null) {
                    log("商人购买界面，购买");
                    随机点击2(738, 641, 10, 10)
                } else {
                    var srgmjm = imgempt(true, 0.9, "杂货商人活动物资售罄|武器商人获得物资售罄|技能商人活动物资售罄|手工艺品商人获得物资售罄", 13, 63, 146, 635)
                    if (srgmjm != null) {
                        log("杂货商人活动物资售罄");
                        随机点击2(1242, 31)
                        if (杂货商人) {
                            杂货商人 = false
                        } else if (武器商人) {
                            武器商人 = false
                        } else if (技能商人) {
                            技能商人 = false
                        } else if (手工艺品商人) {
                            手工艺品商人 = false
                        }

                    } else {
                        var srgmjm = imgempt(true, 0.9, "杂货商人活动物资|武器商人获得物资|技能商人活动物资|手工艺品商人获得物资", 13, 63, 146, 635)
                        if (srgmjm != null) {
                            log("点击NPC商人可购买物资");
                            随机点击2(srgmjm.x + 100, srgmjm.y, 10, 10)
                        } else {
                            var srgmjm = imgempt(true, 0.9, "杂货商人页|技能商人页|手工艺品商人页", 7, 3, 310, 74)
                            if (srgmjm != null) {
                                log("NPC商人页未找到可购买物资,滑动寻找");
                                for (let index = 0; index < 3; index++) {
                                    swipe(125, 514, 139, 225, 500)
                                    sleep(500)
                                }
                            } else {
                                var qrtz = imgempt(true, 0.9, "确认跳转", 683, 437, 109, 62)
                                if (qrtz != null) {
                                    log("确认跳转");
                                    随机点击2(qrtz.x, qrtz.y, 10, 10)
                                } else {
                                    var dyzczhsrtb = imgempt(true, 0.9, "地图主城杂货商人图标", 12, 102, 180, 565)
                                    if (dyzczhsrtb != null) {
                                        log("点击地图主城杂货商人图标");
                                        随机点击(dyzczhsrtb.x, dyzczhsrtb.y, 10, 10)
                                    } else {
                                        var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
                                        if (zhuchengzahuo != null) {
                                            if (杂货商人) {
                                                log("点击主城杂货商人图标");
                                                随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                            } else if (武器商人) {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城武器商人图标", 12, 56, 89, 387)
                                                if (zhuchengzahuo != null) {
                                                    log("点击主城武器商人图标");
                                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                } else {
                                                    log("未找到武器商人图标")
                                                }
                                            } else if (技能商人) {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 6, 69, 253, 357)
                                                if (zhuchengzahuo != null) {
                                                    log("点击主城主城技能商店图标");
                                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                } else {
                                                    log("未找到技能商人图标")
                                                }
                                            } else if (手工艺品商人) {
                                                var zhuchengzahuo = imgempt(true, 0.9, "主城手工艺品图标", 15, 66, 115, 353)
                                                if (zhuchengzahuo != null) {
                                                    log("点击主城手工艺品图标");
                                                    随机点击(zhuchengzahuo.x, zhuchengzahuo.y, 10, 10)
                                                } else {
                                                    log("未找到手工艺品商人图标")
                                                }
                                            } else {
                                                log("完成")
                                                var 结果 = 纯回主页()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    var 结果 = 活动制造()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        var 结果 = 使用背包物品("练级")
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        }
                                                        return "完成"
                                                    }
                                                }
                                            }
                                        } else {
                                            var zhuchengzahuo = imgempt(true, 0.9, "主城技能商店图标|主城技能商店图标2", 7, 51, 289, 450)
                                            if (zhuchengzahuo != null) {
                                                log("主城主城技能商店图标");
                                                swipe(122, 138, 114, 274, 500)
                                            } else {
                                                if (回城卷轴) {
                                                    var zhuchengzahuo = imgempt(true, 0.9, "主城委托图标", 3, 53, 89, 348)
                                                    if (zhuchengzahuo != null) {
                                                        log("主城委托图标");
                                                        for (let index = 0; index < 3; index++) {
                                                            swipe(153, 87, 150, 282, 500)
                                                        }
                                                    } else {
                                                        var huicheng = imgempt(true, 0.9, "回城卷轴", 842, 609, 121, 100)
                                                        if (huicheng != null) {
                                                            log("点击回城卷轴")
                                                            随机点击2(huicheng.x, huicheng.y, 10, 10)
                                                            for (let index = 0; index < 5; index++) {
                                                                var guajizhon = imgempt(true, 0.9, "没有回城卷轴了|没有回城卷轴了2", 499, 52, 204, 73)
                                                                if (guajizhon != null) {
                                                                    log("没有卷轴了")
                                                                    回城卷轴 = false
                                                                    break
                                                                }
                                                            }
                                                            sleep(3000)
                                                        } else {
                                                            回城卷轴 = false
                                                        }
                                                    }
                                                } else {
                                                    var dtl = imgempt(true, 0.9, "地图里", 3, 4, 175, 429)
                                                    if (dtl != null) {
                                                        var dthctb = imgempt(true, 0.9, "地图回城图标", 946, 175, 117, 95)
                                                        if (dthctb != null) {
                                                            log("点击回城图标");
                                                            随机点击(dthctb.x, dthctb.y, 10, 10)
                                                        } else {
                                                            log("地图里,寻找主城");
                                                            for (let index = 0; index < 3; index++) {
                                                                swipe(1104, 216, 1118, 614, 500)
                                                                sleep(random(1000, 3000))
                                                            }
                                                        }
                                                    } else {
                                                        var dtgbzt = imgempt(true, 0.9, "地图关闭状态", 8, 4, 79, 65)
                                                        if (dtgbzt != null) {
                                                            log("地图关闭状态,点击打开");
                                                            随机点击(dtgbzt.x, dtgbzt.y, 10, 10)
                                                        } else {
                                                            var dtdkzt = imgempt(true, 0.9, "地图打开状态", 8, 4, 79, 65)
                                                            if (dtdkzt != null) {
                                                                log("点击地图");
                                                                随机点击(139, 150, 10, 10)
                                                                sleep(random(1000, 3000))
                                                            } else {

                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }

                    }
                }
            }
        }
        sleep(200)
    }
}


function 异常捕获(mode) {
    var 结果 = imgempt(true, 0.9, "维护|维护2", 516, 61, 260, 132)
    if (结果 != null) {
        log("检查状态");
        发送异常("检查状态，维护")
        alert("检查状态，维护")
        exit()
    } else {
        var 结果 = imgempt(true, 0.9, "维护3|维护4", 434, 590, 439, 90)
        if (结果 != null) {
            log("检查状态");
            发送异常("检查状态，维护")
            alert("检查状态，维护")
            exit()
        } else {
            var 结果 = imgempt(true, 0.9, "进服排队中", 536, 444, 252, 98)
            if (结果 != null) {
                log("进服排队中");
                登录点击计次 = 0
                节电模式判断掉线时间戳 = new Date().getTime()
                sleep(3000)
            } else {


                var tyxyan = imgempt(true, 0.9, "要移动吗", 427, 399, 209, 134)
                if (tyxyan != null) {
                    log("异常捕获，瞬移弹窗,确定瞬移");
                    随机点击(743, 464)
                } else {

                    var tyxyan = imgempt(true, 0.9, "复制认证密钥图标", 427, 399, 209, 134)
                    if (tyxyan != null) {
                        toastLog("复制认证密钥图标")
                        if (className("android.widget.FrameLayout").exists()) {
                            var target = className("android.widget.FrameLayout").findOne()
                            var 认证密钥 = traverseChildren(target);
                            if (认证密钥) {
                                var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                try {
                                    // 发送POST请求，将JSON数据放入请求体
                                    http.__okhttp__.setTimeout(10000);
                                    var result = http.post(url, { "param1": 认证密钥 });
                                    if (result.statusCode == 200) {
                                        var 认证码 = result.body.string()
                                        for (let index = 0; index < 认证码.length; index++) {
                                            setText(index, 认证码[index])
                                        }
                                        随机点击(806, 598)
                                    }
                                } catch (e) {
                                    toastLog("访问中控获取OTP超时...");
                                    log(e)
                                }
                            } else {
                                console.log("未找到符合条件的控件");
                            }
                        } else { log("未找到符合条件的控件") }
                    } else {
                        var tyxyan = imgempt(true, 0.9, "认证按钮", 699, 542, 217, 120)
                        if (tyxyan != null) {
                            toastLog("认证按钮，复制认证密钥图标")
                            if (className("android.widget.FrameLayout").exists()) {
                                var target = className("android.widget.FrameLayout").findOne()
                                var 认证密钥 = traverseChildren(target);
                                if (认证密钥) {
                                    var url = "http://14.22.112.230:8233/snhc/OTPAttestation";
                                    try {
                                        // 发送POST请求，将JSON数据放入请求体
                                        http.__okhttp__.setTimeout(10000);
                                        var result = http.post(url, { "param1": 认证密钥 });
                                        if (result.statusCode == 200) {
                                            var 认证码 = result.body.string()
                                            for (let index = 0; index < 认证码.length; index++) {
                                                setText(index, 认证码[index])
                                            }
                                            随机点击(806, 598)
                                        }
                                    } catch (e) {
                                        toastLog("访问中控获取OTP超时...");
                                        log(e)
                                    }
                                } else {
                                    console.log("未找到符合条件的控件");
                                }
                            } else { log("未找到符合条件的控件") }

                        } else {
                            var tyxyan = imgempt(true, 0.9, "游戏认证页|游戏认证页2", 176, 244, 309, 253)
                            if (tyxyan != null) {
                                toastLog("请认证")
                                随机点击2(638, 455)
                                // exit()
                            } else {
                                var 结果 = imgempt(true, 0.9, "制裁期限|制裁期限2", 426, 272, 275, 162)
                                if (结果 != null) {
                                    toastLog("封号")
                                    sleep(9999999999)
                                } else {
                                    var jiesou = imgempt(true, 0.9, "队伍副本匹配完成", 492, 230, 306, 127)
                                    if (jiesou != null && mode != "屏蔽检测队伍副本" && storage.get("队伍副本完成日期") != new Date().getDate()) {
                                        log("队伍副本匹配完成,点击进入")
                                        随机点击(722, 449)
                                        var 结果 = 队伍副本()
                                        if (结果 == "掉线" || 结果 == "重置") {
                                            return "掉线"
                                        }
                                    } else {
                                        var jiesou = imgempt(true, 0.9, "队伍副本匹配页", 18, 2, 212, 86)
                                        if (jiesou != null && mode != "屏蔽检测队伍副本" && storage.get("队伍副本完成日期") != new Date().getDate()) {
                                            log("异常捕获,队伍副本匹配页")
                                            var 结果 = 队伍副本()
                                            if (结果 == "掉线" || 结果 == "重置") {
                                                return "掉线"
                                            }
                                        } else {
                                            var 结果 = imgempt(true, 0.9, "移动到标题画面", 415, 238, 457, 171)
                                            if (结果 != null) {
                                                log("异常捕获移动到标题画面");
                                                    var 随机时间 = random(5, 10) * 60
                                                var 重启 = true
                                                while (随机时间 > 0) {
                                                    var 时间 = convertSecondsToHMS(随机时间)
                                                    sleep(1000)
                                                    ui.run(function () {
                                                        window.计时器.setText(时间)
                                                    })
                                                    随机时间--
                                                    var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                    if (ksyx != null) {
                                                        toastLog("检测到已进入角色页面,不再等待")
                                                        重启 = false
                                                        ui.run(function () {
                                                            window.计时器.setText("")
                                                        })
                                                        return "掉线"
                                                    }
                                                }
                                                ui.run(function () {
                                                    window.计时器.setText("")
                                                })
                                                // alert("移动到标题画面")
                                                // exit()
                                                if (重启) {
                                                    关闭应用("com.wemade.nightcrows");
                                                    log("拉起游戏")
                                                    app.launch("com.wemade.nightcrows")
                                                    sleep(5000)
                                                }
                                                return "掉线"
                                            } else {
                                                var 结果 = imgempt(true, 0.9, "长时间未操作", 462, 264, 135, 88)
                                                if (结果 != null) {
                                                    log("长时间未操作");
                                                    随机点击(639, 450, 10, 10)
                                                    return "掉线"
                                                } else {
                                                    var 结果 = imgempt(true, 0.9, "服务器连接失败", 420, 225, 446, 192)
                                                    if (结果 != null) {
                                                        log("服务器连接失败");
                                                            var 随机时间 = random(5, 10) * 60
                                                        while (随机时间 > 0) {
                                                            var 时间 = convertSecondsToHMS(随机时间)
                                                            sleep(1000)
                                                            ui.run(function () {
                                                                window.计时器.setText(时间)
                                                            })
                                                            随机时间--
                                                            var ksyx = imgempt(true, 0.9, "开始游戏", 1066, 642, 207, 73)
                                                            if (ksyx != null) {
                                                                toastLog("检测到已进入角色页面,不再等待")
                                                                break
                                                            }
                                                        }
                                                        ui.run(function () {
                                                            window.计时器.setText("")
                                                        })
                                                        // alert("无网络环境")
                                                        // exit()
                                                        随机点击(643, 450, 10, 10)
                                                        return "掉线"
                                                    } else {
                                                        var 结果 = imgempt(true, 0.9, "长时间未操作2", 420, 223, 449, 255)
                                                        if (结果 != null) {
                                                            log("长时间未操作2");
                                                            随机点击(639, 450, 10, 10)
                                                        } else {
                                                            var 结果 = imgempt(true, 0.9, "获取环境失败", 414, 220, 457, 285)
                                                            if (结果 != null) {
                                                                log("获取环境失败");
                                                                关闭应用("com.wemade.nightcrows");
                                                                sleep(10000)
                                                                log("拉起游戏")
                                                                app.launch("com.wemade.nightcrows")
                                                                sleep(5000)
                                                                return "掉线"
                                                            } else {
                                                                var dtyd = imgempt(true, 0.9, "副本使用时间已满", 418, 230, 445, 274)
                                                                if (dtyd != null) {
                                                                    log("副本区使用时间满")
                                                                    随机点击(631, 445, 10, 10)
                                                                } else {
                                                                    var xzfwq = imgempt(false, 0.9, "Google登录图标|Google登录图标2", 257, 281, 214, 125)
                                                                    if (xzfwq != null) {
                                                                        log("异常捕获,账号掉出");
                                                                        return "掉线"
                                                                    } else {
                                                                        var zhuxian = imgempt(true, 0.9, "登录页点击任意", 1150, 605, 126, 112)
                                                                        if (zhuxian != null && mode != "寻找角色") {
                                                                            // if (Google登录) {
                                                                            //     log("Google登录,不参与点击")
                                                                            // } else {

                                                                            var jinribts = imgempt(true, 0.9, "英文退出账号|英文退出账号2", 11, 632, 215, 77)
                                                                            if (jinribts != null) {
                                                                                log("英文退出账号,设置韩文");
                                                                                设置韩文()
                                                                            } else {
                                                                                log("登录页点击任意(异常捕获)");
                                                                                随机点击2(630, 514)
                                                                                登录点击计次++
                                                                                log("登录点击计次:" + 登录点击计次)
                                                                                if (登录点击计次 >= 6) {
                                                                                    登录点击计次 = 0
                                                                                    关闭应用("com.wemade.nightcrows");
                                                                                    sleep(10000)
                                                                                    log("拉起游戏")
                                                                                    app.launch("com.wemade.nightcrows")
                                                                                }
                                                                                sleep(10000)
                                                                                return "掉线"
                                                                            }
                                                                            // }
                                                                        } else {
                                                                            var zhuxian = imgempt(true, 0.9, "礼包推荐", 848, 535, 124, 81)
                                                                            if (zhuxian != null) {
                                                                                log("异常捕获,关闭推荐礼包");
                                                                                var 关闭XX = imgempt(true, 0.9, "关闭XX", 845, 54, 356, 228)
                                                                                if (关闭XX != null) {
                                                                                    log("关闭XX");
                                                                                    随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                                                                } else {
                                                                                    随机点击2(1047, 134)
                                                                                }
                                                                            } else {
                                                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                                                if (bfzl != null && mode != "屏蔽检测队伍副本") {
                                                                                    log("异常捕获,死亡复活")
                                                                                    sleep(2000)
                                                                                   
                                                                                        随机点击(bfzl.x, bfzl.y, 10, 10)
                                                                                        var 死亡等待随机时间 = random(20, 120) * 1000
                                                                                        log("死亡等待随机时间:" + 死亡等待随机时间)
                                                                                        sleep(死亡等待随机时间)
                                                                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                                                        if (bfzl != null) {
                                                                                            随机点击(bfzl.x, bfzl.y, 10, 10)
                                                                                        }
                                                                                        var 随机等待恢复时间 = random(10, 20) * 1000
                                                                                        sleep(随机等待恢复时间)

                                                                                    if (mode == "世界boss") {
                                                                                        log("世界boss中死亡")
                                                                                        return "死亡"
                                                                                    }

                                                                                    if (参数[26]) {
                                                                                        死亡次数++
                                                                                        if (storage.get("识别的等级") != null && parseInt(storage.get("识别的等级")) >= 35) {
                                                                                            if (死亡次数 >= 5) {
                                                                                                log("死亡次数超过5次转挂机去")
                                                                                                参数[26] = false
                                                                                                ui.run(function () {
                                                                                                    ui.主线任务.setChecked(false)
                                                                                                })
                                                                                                storage.put("主线任务", false);
                                                                                                任务状态 = "挂机"
                                                                                                return "掉线"
                                                                                            } else {
                                                                                                log("练级死亡已有等级但死亡次数未上五次")
                                                                                                var 结果 = 检测铜钱()
                                                                                                if (结果 != "掉线") {
                                                                                                    if (parseInt(结果) <= 200000) {
                                                                                                        log("死亡铜钱数量小于20w")
                                                                                                        var 结果 = 使用背包物品("钱箱子")
                                                                                                        if (结果 == "掉线") {
                                                                                                            return "掉线"
                                                                                                        }
                                                                                                        参数[26] = false
                                                                                                        ui.run(function () {
                                                                                                            ui.主线任务.setChecked(false)
                                                                                                        })
                                                                                                        storage.put("主线任务", false);
                                                                                                        任务状态 = "挂机"
                                                                                                        return "掉线"
                                                                                                    } else {

                                                                                                    }
                                                                                                } else {

                                                                                                }
                                                                                            }
                                                                                        } else {
                                                                                            log("练级死亡未识别等级")
                                                                                            log(storage.get("识别的等级"))
                                                                                        }
                                                                                        if (死亡次数 >= 50) {
                                                                                            alert("练级死亡次数上限")
                                                                                            exit()
                                                                                        }

                                                                                        var 随机提升 = random(1, 2)
                                                                                        if (!参数[39] && 随机提升 == 1) {
                                                                                            var 结果 = 所有红点处理()
                                                                                            if (结果 == "掉线") {
                                                                                                return "掉线"
                                                                                            } else {
                                                                                                var 结果 = 购买强化卷轴("一瓶属性药")
                                                                                                if (结果 == "购买完成") {
                                                                                                    var 结果 = 使用背包物品("练级")
                                                                                                    if (结果 == "使用完毕") {
                                                                                                        var 结果 = 开启药水自动()
                                                                                                        if (结果 == "掉线") {
                                                                                                            return "掉线"
                                                                                                        } else {
                                                                                                            var 结果 = 前往强化("普通斗篷")
                                                                                                            if (结果 == "掉线") {
                                                                                                                return "掉线"
                                                                                                            } else {
                                                                                                                var 结果 = 判断是否买药()
                                                                                                                if (结果 == "掉线") {
                                                                                                                    return "掉线"
                                                                                                                } else {
                                                                                                                    // if (购买决心技能) {
                                                                                                                    var 结果 = 购买技能书改版(true)
                                                                                                                    if (结果 == "掉线") {
                                                                                                                        return "掉线"
                                                                                                                    } else if (结果 != "完成购买") {
                                                                                                                        var 结果 = 技能二次配置()
                                                                                                                        if (结果 == "掉线") {
                                                                                                                            return "掉线"
                                                                                                                        }
                                                                                                                    } else {

                                                                                                                    }
                                                                                                                    // }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    } else if (结果 == "掉线") {
                                                                                                        return "掉线"
                                                                                                    }
                                                                                                } else if (结果 == "掉线") {
                                                                                                    return "掉线"
                                                                                                }
                                                                                            }

                                                                                        } else {
                                                                                            死亡复活并检测药水()
                                                                                        }
                                                                                        // 前往4个NPC购买活动物资()
                                                                                        死亡复活并检测药水()
                                                                                    }
                                                                                    return "掉线"
                                                                                } else {
                                                                                    if (参数[26]) {
                                                                                        var zhuxian = imgempt(true, 0.9, "跳过|跳过谈话|跳过谈话2|跳过谈话3|跳过谈话4", 1111, 18, 168, 63)
                                                                                        if (zhuxian != null) {
                                                                                            log("点击跳过");
                                                                                            随机点击2(zhuxian.x, zhuxian.y)
                                                                                        }
                                                                                    }
                                                                                    if (packageName("com.wemade.nightcrows").exists()) {
                                                                                        var djryhm = imgempt(true, 0.9, "封号", 540, 488, 92, 53)
                                                                                        if (djryhm != null) {
                                                                                            log("账号已被封禁")
                                                                                            var dialog = floaty.rawWindow(
                                                                                                <vertical bg="#FF0000" padding="10" w="*" h="*" gravity="center">
                                                                                                    <text text="封号" textSize="120" textColor="white" gravity="center" />
                                                                                                    <button text="确定" id="btn_ok" textSize="16" textColor="black" gravity="center" />
                                                                                                </vertical>
                                                                                            );
                                                                                            dialog.setPosition(100, 200);
                                                                                            dialog.btn_ok.click(() => {
                                                                                                dialog.close();
                                                                                                exit()
                                                                                            });
                                                                                            sleep(999999999)
                                                                                        } else {
                                                                                            if (参数[3] || 参数[26] || 参数[31] || 参数[32] || 参数[36] || 参数[37] || 参数[29] || 参数[39] || 参数[43] || 参数[42] || 清空药水) {
                                                                                                //不判定超一小时进节电算掉线
                                                                                            } else {
                                                                                                var 未进节电时间 = (new Date().getTime() - 节电模式判断掉线时间戳) / (1000 * 60)
                                                                                                if (未进节电时间 > 120) {
                                                                                                    节电模式判断掉线时间戳 = new Date().getTime()
                                                                                                   
                                                                                                    发送异常("可能网络掉线")
                                                                                                    alert("可能网络掉线")

                                                                                                } else if (操作钱包中 || mode == "屏蔽检测队伍副本" || 二十四小时币价) {
                                                                                                    节电模式判断掉线时间戳 = new Date().getTime()
                                                                                                }
                                                                                            }
                                                                                        }

                                                                                        if (重复点击坐标次数 >= 20) {
                                                                                            重复点击坐标次数 = 0
                                                                                            log("重复点击同一位置过多,判定为游戏网络掉线了")
                                                                                            var img = captureScreen();
                                images.save(img, "/sdcard/重复点击帧.png", "png", 100);
                                                                                            confirm("重复点击过多，请检查!!!")
                                                                                        }

                                                                                        
                                                                                        if (mode != "不退节电") {
                                                                                            var bfzl = imgempt(true, 0.9, "节电模式在主城|节电模式在主城2", 485, 462, 365, 113)
                                                                                            if (bfzl != null) {
                                                                                                log("异常捕获,退出节电")
                                                                                                swipe(566, 389, 968, 226, 500)
                                                                                            } else {

                                                                                            }
                                                                                        }

                                                                                        var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                                                                                        if (jdmsz != null) {
                                                                                            if (mode == "练级") {
                                                                                                log("练级中,退出节电")
                                                                                                swipe(566, 389, 968, 226, 500)
                                                                                            }
                                                                                            // log("节电模式中不判定卡死");
                                                                                            啥也没找到 = 0
                                                                                        } else {
                                                                                            var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                                                                                            if (退出 != null) {
                                                                                                // log("操作中不判定卡死");
                                                                                                啥也没找到 = 0
                                                                                            } else {
                                                                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                                                                if (手 != null) {
                                                                                                    啥也没找到 = 0
                                                                                                } else {
                                                                                                    var 手 = imgempt(true, 0.9, "对话图标", 2, 446, 81, 224)
                                                                                                    if (手 != null) {
                                                                                                        啥也没找到 = 0
                                                                                                    } else {
                                                                                                        啥也没找到++
                                                                                                        if (啥也没找到 >= 150) {
                                                                                                            啥也没找到 = 0
                                                                                                            log("卡死了,重进")
                                                                                                            log("游戏网络掉线了")
                                                                                                            关闭应用("com.wemade.nightcrows");
                                                                                                            sleep(10000)
                                                                                                            log("拉起游戏")
                                                                                                            app.launch("com.wemade.nightcrows")
                                                                                                            sleep(5000)
                                                                                                            return "掉线"
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    } else {
                                                                                        if (text("验证身份").exists()) {
                                                                                            发送异常("需谷歌验证身份")
                                                                                            alert("需谷歌验证身份")
                                                                                            exit()
                                                                                        }
                                                                                        // if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {
                                                                                        //     自动登录Google()
                                                                                        // }

                                                                                        if (packageName("com.google.android.gms").exists()) {
                                                                                            log("登录谷歌中")
                                                                                            sleep(1000)
                                                                                        } else {
                                                                                            if (开始铸币) {

                                                                                            } else {
                                                                                                log("没检测到游戏10秒后再次检测")
                                                                                                sleep(10000)
                                                                                                if (packageName("com.wemade.nightcrows").exists() || 操作钱包中) {
                                                                                                    log("钱包操作中")
                                                                                                } else {
                                                                                                    if (text("验证身份").exists()) {
                                                                                                        发送异常("需谷歌验证身份")
                                                                                                        alert("需谷歌验证身份")
                                                                                                        exit()
                                                                                                    }
                                                                                                    // if (id("headingText").text("登录").exists() || id("headingText").text("로그인").exists()) {
                                                                                                    //     自动登录Google()
                                                                                                    // }
                                                                                                    log("再次检测还是不在游戏")
                                                                                                    关闭应用("com.wemade.nightcrows");
                                                                                                    sleep(20000)
                                                                                                    log("拉起游戏")
                                                                                                    app.launch("com.wemade.nightcrows")
                                                                                                    sleep(5000)
                                                                                                    return "掉线"

                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}




function 获取夜鸦币价() {
    var 首次 = true
    var 记录时间 = new Date().getTime() / 1000
    var 随机退出交易 = random(12, 24)
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            if (new Date().getTime() / (60 * 60 * 1000) - 记录时间 / (60 * 60) >= 随机退出交易) {
                var 结果 = 纯回主页()
                if (结果 == "掉线") {
                    return "掉线"
                } else {
                    log("随机时间到了，先交易一波")
                    return "完成"
                }
            }
            var qiagnhua = imgempt(true, 0.9, "夜鸦铸币详细", 700, 201, 198, 157)
            if (qiagnhua != null) {
                var 币价 = findNumber("夜鸦拍卖行", [895, 521, 108, 35])
                var 转换后币价 = parseFloat(币价)
                if (转换后币价 >= 0.76 || 转换后币价 <= 0.7) {
                    log("识别错误咯")
                } else {
                    var 时差 = new Date().getTime() / 1000 - 记录时间
                    if (转换后币价 < 0.746) {
                        if (时差 >= 3600 || 首次) {//每小时发送一次
                            console.log("发送币价" + 币价);
                            var data = {
                                "type": "币价",
                                "CurrencyRate": 转换后币价.toString(),
                                "androidID": 设备id
                            };
                            var jsonData = JSON.stringify(data);
                            中控数据发送(jsonData)
                            首次 = false
                            记录时间 = new Date().getTime() / 1000
                        }
                        sleep(60000)
                    } else if (转换后币价 < 0.747) {
                        if (时差 >= 1800 || 首次) {//每半小时发送一次
                            console.log("发送币价" + 币价);
                            var data = {
                                "type": "币价",
                                "CurrencyRate": 转换后币价.toString(),
                                "androidID": 设备id
                            };
                            var jsonData = JSON.stringify(data);
                            中控数据发送(jsonData)
                            首次 = false
                            记录时间 = new Date().getTime() / 1000
                        }
                        sleep(60000)
                    } else if (转换后币价 < 0.748) {
                        if (时差 >= 600 || 首次) {//每10分钟发送一次
                            console.log("发送币价" + 币价);
                            var data = {
                                "type": "币价",
                                "CurrencyRate": 转换后币价.toString(),
                                "androidID": 设备id
                            };
                            var jsonData = JSON.stringify(data);
                            中控数据发送(jsonData)
                            首次 = false
                            记录时间 = new Date().getTime() / 1000
                        }
                        sleep(20000)
                    } else if (转换后币价 < 0.749) {
                        if (时差 >= 60 || 首次) {//每10分钟发送一次
                            console.log("发送币价" + 币价);
                            var data = {
                                "type": "币价",
                                "CurrencyRate": 转换后币价.toString(),
                                "androidID": 设备id
                            };
                            var jsonData = JSON.stringify(data);
                            中控数据发送(jsonData)
                            首次 = false
                            记录时间 = new Date().getTime() / 1000
                        }
                        sleep(5000)
                    } else {
                        log("可以铸币了")
                        console.log("发送币价" + 币价);
                        var data = {
                            "type": "币价",
                            "CurrencyRate": 转换后币价.toString(),
                            "androidID": 设备id
                        };
                        var jsonData = JSON.stringify(data);
                        中控数据发送(jsonData)
                        首次 = true
                        sleep(20000)
                    }
                }
                重复点击坐标次数 = 0
                随机点击(1174, 104)
            } else {
                var qiagnhua = imgempt(true, 0.9, "菜单_夜鸦币", 962, 522, 188, 115)
                if (qiagnhua != null) {
                    log("点击进入菜单_夜鸦币");
                    随机点击2(qiagnhua.x, qiagnhua.y, 10, 10)
                } else {
                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//可右加点
                    if (手 != null) {
                        log("主页点击菜单");
                        随机点击2(1238, 36, 10, 10)
                    } else {

                    }
                }
            }
        }
        sleep(200)
    }
}



function 野外挂机() {
    var 自动挂机 = false
    var 已点auto = false
    野外跳转时间 = new Date().getTime()
    var auto锁定怪物 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var guajizhon = imgempt(true, 0.8, "死亡墓碑|死亡墓碑2", 711, 1, 523, 86)
            if (guajizhon != null) {
                log("死亡墓碑恢复经验,野外挂机");
                var 结果 = 死亡恢复经验()
                if (结果 == "掉线") {
                    return "掉线"
                }
            } else {
                var bbym = cor(true, 20, 820, 2, 320, 74, "#ffb095", [[2, 0, "#ffad8c"], [11, 0, "#ffb594"], [10, 1, "#ffb899"], [133, -9, "#e5d5bc"], [125, -5, "#d4c6a9"]])
                if (bbym != null) {
                    log("死亡墓碑恢复经验,野外挂机色彩");
                    var 结果 = 死亡恢复经验()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                } else {
                    if (自动挂机) {
                        if (二十四小时币价) {
                            var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                            if (jdmsz != null) {
                                log("已锁定怪物,点击关闭锁定并点击auto")
                                随机点击(750, 21)
                                随机点击(1234, 459)
                            } else {
                                log("点击auto并点击节电")
                                随机点击(1234, 459)
                            }
                            log("开始获取币价")
                            while (true) {
                                var 结果 = 获取夜鸦币价()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }

                                var 结果 = 交易翻页版()//交易开始()
                                if (结果 == "完成交易") {
                                    交易时间 = new Date().getDate()
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }

                                var 结果 = 纯回主页()
                                if (结果 == "掉线") {
                                    return "掉线"
                                }
                            }
                        } else {
                            var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                            if (jdmsz != null) {
                                log("节电模式中");
                                var 结果 = 节电模式("野外")
                                if (结果 == "购买药水") {
                                    var 结果 = 回城买药()
                                    if (结果 == "购买成功") {
                                        自动挂机 = false
                                    } else if (结果 == "掉线") {
                                        return "掉线"
                                    }
                                } else if (结果 == "死亡") {
                                    // 自动挂机 = false
                                    return "死亡"
                                } else if (结果 == "重启") {
                                    return "重启"
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                                // else if (结果 == "看人数") {
                                //     var 结果 = 挂机去人少的地方()
                                //     if (结果 == "掉线") {
                                //         return "掉线"
                                //     } else if (结果 == "死亡") {
                                //         return "死亡"
                                //     }
                                // }
                            } else {
                                var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                if (jdmsz != null) {
                                    log("已锁定怪物，点击节电模式")
                                    if (参数[48] && !参数[26]) {
                                        while (true) {
                                            if (异常捕获() == "掉线") {
                                                log("掉线")
                                                break
                                            } else {
                                                var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                if (jeig != null) {
                                                    log("设定自动使用生命药剂为百分之八十左右")
                                                    sleep(1000)
                                                    随机点击2(921, 464)
                                                    参数[48] = false
                                                    ui.run(function () {
                                                        ui.药水设定.setChecked(false)
                                                    })
                                                    storage.put("药水设定", false)
                                                    break
                                                } else {
                                                    var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                    if (手 != null) {
                                                        log("点击药水")
                                                        随机点击2(976, 656)
                                                    } else {

                                                    }
                                                }
                                            }
                                        }
                                    }

                                    // if (storage.get("队伍副本完成日期") != new Date().getDate()&&new Date().getHours()>4) {
                                    //     var 结果 = 队伍副本()
                                    //     if (结果 != "申请中") {
                                    //         return "掉线"
                                    //     }
                                    // }
                                    sleep(random(1000, 10000))
                                    随机点击(34, 624, 10, 10)

                                } else {
                                    var auto = imgempt(true, 0.94, "auto|auto2|auto3|auto4|auto5|auto6", 1194, 425, 85, 81)
                                    if (auto != null) {
                                        log("点击auto");
                                        随机点击2(auto.x, auto.y, 10, 10)
                                        已点auto = true
                                        for (let index = 0; index < 8; index++) {
                                            var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                            if (jdmsz != null) {
                                                auto锁定怪物 = 0
                                            } else if (index == 4) {
                                                auto锁定怪物++
                                                if (auto锁定怪物 >= 3) {
                                                    log("未到达怪物点")
                                                    自动挂机 = false
                                                    已点auto = false
                                                }
                                            }
                                        }

                                    } else {
                                        var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                        if (bfzl != null) {
                                            log("死亡复活")
                                            
                                                var 死亡等待随机时间 = random(20, 120) * 1000
                                                log("死亡等待随机时间:" + 死亡等待随机时间)
                                                sleep(死亡等待随机时间)
                                                var bfzl = imgempt(true, 0.9, "死亡复活|死亡复活2", 1113, 637, 114, 70)
                                                if (bfzl != null) {
                                                    随机点击(bfzl.x, bfzl.y, 10, 10)
                                                }
                                                var 随机等待恢复时间 = random(10, 20) * 1000
                                                sleep(随机等待恢复时间)
                                            自动挂机 = false
                                        } else {
                                            if (已点auto) {
                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                if (手 != null) {
                                                    var jdmsz = imgempt(true, 0.9, "锁定怪物", 537, 2, 368, 51)
                                                    if (jdmsz != null) {
                                                        log("已锁定怪物，点击节电模式")
                                                        if (参数[48] && !参数[26]) {
                                                            while (true) {
                                                                if (异常捕获() == "掉线") {
                                                                    log("掉线")
                                                                    break
                                                                } else {
                                                                    var jeig = imgempt(true, 0.9, "设定自动使用生命药剂|设定自动使用生命药剂2", 721, 345, 272, 81)//齿轮图标
                                                                    if (jeig != null) {
                                                                        log("设定自动使用生命药剂为百分之八十左右")
                                                                        sleep(1000)
                                                                        随机点击2(921, 464)
                                                                        参数[48] = false
                                                                        ui.run(function () {
                                                                            ui.药水设定.setChecked(false)
                                                                        })
                                                                        storage.put("药水设定", false)
                                                                        break
                                                                    } else {
                                                                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)//齿轮图标
                                                                        if (手 != null) {
                                                                            log("点击药水")
                                                                            随机点击2(976, 656)
                                                                        } else {
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }


                                                        sleep(random(1000, 10000))
                                                        随机点击(34, 624, 10, 10)
                                                    } else {
                                                        log("未锁定怪物")
                                                        已点auto = false
                                                        自动挂机 = false
                                                    }
                                                } else {

                                                }
                                            }
                                        }
                                    }
                                    // }
                                }
                                // }
                            }
                        }

                    } else {
                        var 图鉴 = imgempt(true, 0.9, "图鉴", 962, 90, 317, 434)
                        if (图鉴 != null) {
                            log("点击图鉴");
                            随机点击(图鉴.x, 图鉴.y, 10, 10)
                        } else {
                            var 图鉴页 = imgempt(true, 0.9, "图鉴页", 4, 56, 218, 97)
                            if (图鉴页 != null) {
                                log("到达图鉴页,选择材料");
                               
                                var 结果 = 挂机材料选择()
                              
                                if (结果 == "到达位置") {
                                    // var 结果 = 挂机去人少的地方()
                                    // if (结果 == "掉线") {
                                    //     return "掉线"
                                    // } else if (结果 == "死亡") {
                                    //     return "死亡"
                                    // }
                                    // 野外跳转时间 = new Date().getTime()
                                    自动挂机 = true
                                } else if (结果 == "掉线") {
                                    return "掉线"
                                }
                            } else {
                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                if (手 != null) {
                                    log("主页点击菜单");
                                    随机点击(1238, 36, 10, 10)
                                } else {

                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}

function 节电前判定钻石数() {
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {//
            var zhuangbei = imgempt(true, 0.9, "背包物资栏钻石", 882, 91, 191, 112)
            if (zhuangbei != null) {
                log("背包物资栏钻石,识别钻石数");
                var 当前钻石数量 = 找数字("数字", "钻石铜钱数", 6, 0.9, 934, 507, 141, 38);
                if (当前钻石数量 != "false") {
                    var data = {
                        "type": "当前金币",
                        "androidID": 设备id,
                        "当前金币": parseInt(当前钻石数量)
                    };
                    var jsonData = JSON.stringify(data);
                    中控数据发送(jsonData)
                    var 结果 = 纯回主页()
                    if (结果 == "掉线") {
                        return "掉线"
                    }
                    return "识别完成"
                }
            } else {
                var zhuangbei = imgempt(true, 0.9, "装备E", 912, 112, 299, 438)
                if (zhuangbei != null) {
                    log("点击物资栏");
                    随机点击(1245, 465, 10, 10)
                } else {
                    var bbym = imgempt(true, 0.9, "背包图标", 1082, 1, 80, 74)
                    if (bbym != null) {
                        log("点击背包")
                        随机点击2(bbym.x, bbym.y)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("点击背包")
                            随机点击(1115, 34, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(300)
    }
}

function 挂机去人少的地方() {
    var 有人 = true
    var 瞬移次数 = 0
    var 限制瞬移次数 = random(1, 5)
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var zhuchengzahuo = imgempt(true, 0.9, "主城杂货", 7, 50, 83, 84)
            if (zhuchengzahuo != null) {
                log("杂货商店，已经死亡")
                return "死亡"
            } else {
                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                if (手 != null) {
                    log("在主界面");
                    var saomaiop = imgempt(true, 0.9, "扫描盘", 1005, 265, 99, 70)
                    if (saomaiop != null) {
                        log("点击扫描");
                        随机点击(saomaiop.x, saomaiop.y, 10, 10)
                        sleep(1000)
                        var 起始坐标x = 822
                        var 起始坐标y = 85
                        var 人数 = 0
                        for (let index = 1; index <= 4; index++) {
                            for (let index1 = 1; index1 <= 2; index1++) {
                                if (index1 == 1) {
                                    起始坐标x = 822
                                } else {
                                    起始坐标x = 1015
                                }
                                var result = imgempt(true, 0.9, "弓一转|弓二转|弓三转|双匕首一转|双匕首二转|双匕首三转|双剑一转|双剑二转|双剑三转|匕首一转|匕首二转|匕首三转|单剑二转|单剑三转|盾一转|盾三转|巫一转|巫二转|巫三转|奶三转|奶二转", 起始坐标x, 起始坐标y, 102, 48)
                                if (result != null) {
                                    人数++
                                    log(index + "行-" + index1 + "列有人")
                                }
                            }
                            起始坐标y = 起始坐标y + 46
                        }

                        log("人数:" + 人数)
                        if (人数 >= 1) {
                            if (瞬移次数 >= 限制瞬移次数) {
                                log("已瞬移三次")
                                野外跳转时间 = new Date().getTime()
                                return "无人"
                            }
                            log("有人,跳走")
                            随机点击(823, 660, 10, 10)
                            sleep(random(1000, 5000))
                            有人 = true
                            瞬移次数++
                        } else {
                            log("没人")
                            野外跳转时间 = new Date().getTime()
                            return "无人"
                        }

                    } else {
                        log("点出扫描")
                        随机点击(1239, 241, 10, 10)
                    }
                } else {
                    var jdmsz = imgempt(true, 0.9, "节电模式中6|节电模式中|节电模式中2|节电模式中3|节电模式中5", 428, 227, 409, 256)
                    if (jdmsz != null) {
                        log("看人数，退出节电")
                        swipe(566, 389, 968, 226, 500)
                    } else {
                        var 退出 = imgempt(true, 0.9, "退出", 1201, 3, 76, 72)
                        if (退出 != null) {
                            log("退出地图");
                            随机点击(退出.x, 退出.y, 10, 10)
                        } else {

                        }
                    }
                }
            }
        }
        sleep(300)
    }
}

function 活动领取() {
    var 翻页 = 0
    var 副本未完成 = true
    var 上下滑动 = 0
    var 活动位置X = 0
    var 活动位置Y = 0
    var 活动飞行领取 = true
    var 骰子活动领取 = true
    var 宝箱活动 = true
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var huodong = imgempt(true, 0.9, "获得道具", 539, 211, 226, 145)
            if (huodong != null) {
                log("获得道具")
                随机点击(475, 612)
            } else {
                var huodong = imgempt(true, 0.9, "活动", 586, 64, 411, 69)
                if (huodong != null) {
                    var yhdjy = imgempt(true, 0.9, "免费打开一次|免费打开一次2", 388, 531, 231, 126)
                    if (yhdjy != null) {
                        log("免费打开一次")
                        随机点击(685, 595)
                        随机点击2(yhdjy.x, yhdjy.y)
                    } else {
                        var yhdjy = imgempt(true, 0.9, "开宝箱红点2|开宝箱红点", 624, 548, 186, 89)
                        if (yhdjy != null) {
                            log("开宝箱红点")
                            随机点击2(yhdjy.x, yhdjy.y)
                        } else {
                            var yhdjy = imgempt(true, 0.9, "宝箱活动栏", 811, 255, 363, 386)
                            if (yhdjy != null && 宝箱活动) {
                                log("宝箱活动")
                                var bbym = cor(true, 25, 844, 255, 352, 390, "#de3e3e", [[-1, 2, "#da3836"], [-2, 0, "#e74f4e"], [2, -2, "#c92b2a"], [8, -3, "#e7c597"], [7, -8, "#c39e71"], [0, -9, "#d6af84"]])
                                if (bbym != null) {
                                    log("宝箱活动红加闪烁黄")
                                    随机点击2(bbym.x - 20, bbym.y + 5, 10, 10)
                                    for (let index = 0; index < 3; index++) {
                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                        if (bbkjbztc != null) {
                                            log("背包空间不足弹窗")
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            } else {
                                                var 结果 = 成就图鉴()
                                                if (结果 == "掉线") {
                                                    return "掉线"
                                                } else {
                                                    var 结果 = 清理背包()
                                                    if (结果 == "掉线") {
                                                        return "掉线"
                                                    } else {
                                                        break
                                                    }
                                                }
                                            }
                                        } else {

                                        }
                                        sleep(200)
                                    }
                                } else {
                                    swipe(1019, 554, 1019, 375, 500)
                                    宝箱活动滑动++
                                    if (宝箱活动滑动 >= 3) {
                                        随机点击(228, 289)
                                    }
                                }
                            } else {
                                var yhdjy = imgempt(true, 0.9, "黄金骰子|黄金骰子2", 377, 170, 179, 128)
                                if (yhdjy != null && 骰子活动领取) {
                                    log("新活动领取")
                                    var yhdjy = imgempt(true, 0.9, "勾选连续骰子", 989, 563, 101, 81)
                                    if (yhdjy != null) {
                                        log("勾选连续骰子")
                                        随机点击2(yhdjy.x, yhdjy.y)
                                    } else {
                                        var yhdjy = imgempt(true, 0.9, "免费骰子", 679, 552, 252, 84)
                                        if (yhdjy != null) {
                                            log("免费骰子")
                                            随机点击(756, 591)
                                        } else {
                                            var bbym = cor(true, 25, 959, 138, 220, 159, "#de3e3e", [[-1, 2, "#da3836"], [-2, 0, "#e74f4e"], [2, -2, "#c92b2a"], [8, -3, "#e7c597"], [7, -8, "#c39e71"], [0, -9, "#d6af84"]])
                                            if (bbym != null) {
                                                log("红加闪烁黄")
                                                随机点击2(bbym.x - 20, bbym.y + 5, 10, 10)
                                            } else {
                                                var yhdjy = imgempt(true, 0.9, "骰子数量为零", 364, 158, 202, 134)
                                                if (yhdjy != null) {
                                                    log("骰子数量为零")
                                                    骰子活动领取 = false
                                                } else {
                                                    log("可能还有骰子,尝试点击")
                                                    随机点击(767, 591)
                                                }
                                            }
                                        }
                                    }
                                } else {
                                    骰子活动领取 = true
                                    var yhdjy = imgempt(true, 0.9, "获得活动飞行器1022", 939, 369, 261, 255)
                                    if (yhdjy != null) {
                                        if (活动飞行领取) {
                                            log("获得活动飞行器1022")//10月22
                                            随机点击2(1071, 578)
                                            活动飞行领取 = false
                                            var 结果 = 纯回主页()
                                            if (结果 == "掉线") {
                                                return "掉线"
                                            }
                                        } else {
                                            log("领不了飞行器，走了")
                                            随机点击(205, 312)
                                        }
                                    } else {
                                        var yhdjy = imgempt(true, 0.9, "红点4", 654, 359, 492, 259)
                                        if (yhdjy != null) {
                                            log("点击红点4");
                                            if (yhdjy.y >= 537) {
                                                log("红点位置不正确")
                                                swipe(622, 541, 618, 492, 1500)
                                                sleep(1000)
                                            } else {
                                                随机点击2(yhdjy.x - 20, yhdjy.y + 20, 10, 10)
                                                for (let index = 0; index < 3; index++) {
                                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                    if (bbkjbztc != null) {
                                                        log("背包空间不足弹窗")
                                                        var 结果 = 纯回主页()
                                                        if (结果 == "掉线") {
                                                            return "掉线"
                                                        } else {
                                                            // var 结果 = 成就图鉴()
                                                            // if (结果 == "掉线") {
                                                            //     return "掉线"
                                                            // } else {
                                                            var 结果 = 清理背包()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                break
                                                            }
                                                            // }
                                                        }
                                                    } else {

                                                    }
                                                    sleep(200)
                                                }
                                            }
                                        } else {
                                            var bbym = cor(true, 25, 363, 297, 811, 344, "#de3e3e", [[-1, 2, "#da3836"], [-2, 0, "#e74f4e"], [2, -2, "#c92b2a"], [8, -3, "#e7c597"], [7, -8, "#c39e71"], [0, -9, "#d6af84"]])
                                            if (bbym != null) {
                                                log("红加闪烁黄")
                                                log(bbym)
                                                if (bbym.y >= 560) {
                                                    log("红点位置不正确2")
                                                    swipe(622, 541, 618, 492, 1500)
                                                    sleep(1000)
                                                } else {
                                                    随机点击2(bbym.x - 20, bbym.y + 5, 10, 10)
                                                    for (let index = 0; index < 3; index++) {
                                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                        if (bbkjbztc != null) {
                                                            log("背包空间不足弹窗")
                                                            var 结果 = 纯回主页()
                                                            if (结果 == "掉线") {
                                                                return "掉线"
                                                            } else {
                                                                // var 结果 = 成就图鉴()
                                                                // if (结果 == "掉线") {
                                                                //     return "掉线"
                                                                // } else {
                                                                var 结果 = 清理背包()
                                                                if (结果 == "掉线") {
                                                                    return "掉线"
                                                                } else {
                                                                    break
                                                                }
                                                                // }
                                                            }
                                                        } else {

                                                        }
                                                        sleep(200)
                                                    }
                                                }
                                            } else {
                                                var bbym = cor(true, 25, 959, 138, 220, 159, "#de3e3e", [[-1, 2, "#da3836"], [-2, 0, "#e74f4e"], [2, -2, "#c92b2a"], [8, -3, "#e7c597"], [7, -8, "#c39e71"], [0, -9, "#d6af84"]])
                                                if (bbym != null) {
                                                    log("红加闪烁黄")
                                                    随机点击2(bbym.x - 20, bbym.y + 5, 10, 10)
                                                } else {
                                                    var yhdjy = imgempt(true, 0.8, "红点|红点2|红点3", 654, 359, 492, 259)
                                                    if (yhdjy != null) {
                                                        log("点击红点111");
                                                        if (yhdjy.y >= 506) {
                                                            swipe(622, 541, 618, 492, 1500)
                                                            sleep(1000)
                                                        } else {
                                                            随机点击2(yhdjy.x - 20, yhdjy.y + 20, 10, 10)
                                                            for (let index = 0; index < 3; index++) {
                                                                var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                if (bbkjbztc != null) {
                                                                    log("背包空间不足弹窗")
                                                                    var 结果 = 纯回主页()
                                                                    if (结果 == "掉线") {
                                                                        return "掉线"
                                                                    } else {
                                                                        // var 结果 = 成就图鉴()
                                                                        // if (结果 == "掉线") {
                                                                        //     return "掉线"
                                                                        // } else {
                                                                        var 结果 = 清理背包()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            break
                                                                        }
                                                                        // }
                                                                    }
                                                                } else {

                                                                }
                                                                sleep(200)
                                                            }
                                                        }
                                                    } else {
                                                        var yhdjy = imgempt(true, 0.8, "红点|红点2|红点3", 1101, 177, 52, 46)
                                                        if (yhdjy != null) {
                                                            log("点击红点22");
                                                            if (yhdjy.y >= 506) {
                                                                swipe(622, 541, 618, 492, 1500)
                                                                sleep(1000)
                                                            } else {
                                                                随机点击2(yhdjy.x - 30, yhdjy.y + 30, 10, 10)
                                                                for (let index = 0; index < 3; index++) {

                                                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                    if (bbkjbztc != null) {
                                                                        log("背包空间不足弹窗")
                                                                        var 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            // var 结果 = 成就图鉴()
                                                                            // if (结果 == "掉线") {
                                                                            //     return "掉线"
                                                                            // } else {
                                                                            var 结果 = 清理背包()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else {
                                                                                break
                                                                            }
                                                                            // }
                                                                        }
                                                                    } else {

                                                                    }
                                                                    sleep(200)
                                                                }
                                                            }
                                                        } else {
                                                            var bbym = cor(true, 15, 1124, 182, 61, 50, "#e34947", [[2, -2, "#df4746"], [2, 1, "#d3312e"], [-2, -1, "#e95958"], [0, -3, "#e95b59"]])
                                                            if (bbym != null) {
                                                                log("活动已满")
                                                                随机点击2(1095, 258, 10, 10)
                                                                for (let index = 0; index < 3; index++) {
                                                                    var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                    if (bbkjbztc != null) {
                                                                        log("背包空间不足弹窗")
                                                                        var 结果 = 纯回主页()
                                                                        if (结果 == "掉线") {
                                                                            return "掉线"
                                                                        } else {
                                                                            // var 结果 = 成就图鉴()
                                                                            // if (结果 == "掉线") {
                                                                            //     return "掉线"
                                                                            // } else {
                                                                            var 结果 = 清理背包()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else {
                                                                                break
                                                                            }
                                                                            // }
                                                                        }
                                                                    } else {

                                                                    }
                                                                    sleep(200)
                                                                }
                                                            } else {
                                                                var bbym = cor(true, 15, 1114, 191, 17, 18, "#e65252", [[0, 1, "#e24a49"], [0, 2, "#df4140"], [1, 2, "#d93534"], [1, 1, "#d93b3a"]])
                                                                if (bbym != null) {
                                                                    log("活动已满")
                                                                    随机点击2(bbym.x - 30, bbym.y + 40, 10, 10)
                                                                    for (let index = 0; index < 3; index++) {
                                                                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                        if (bbkjbztc != null) {
                                                                            log("背包空间不足弹窗")
                                                                            var 结果 = 纯回主页()
                                                                            if (结果 == "掉线") {
                                                                                return "掉线"
                                                                            } else {
                                                                                // var 结果 = 成就图鉴()
                                                                                // if (结果 == "掉线") {
                                                                                //     return "掉线"
                                                                                // } else {
                                                                                var 结果 = 清理背包()
                                                                                if (结果 == "掉线") {
                                                                                    return "掉线"
                                                                                } else {
                                                                                    break
                                                                                }
                                                                                // }
                                                                            }
                                                                        } else {

                                                                        }
                                                                        sleep(200)
                                                                    }
                                                                } else {

                                                                    var bbym = cor(true, 15, 960, 156, 205, 143, "#e65252", [[0, 1, "#e24a49"], [0, 2, "#df4140"], [1, 2, "#d93534"], [1, 1, "#d93b3a"]])
                                                                    if (bbym != null) {
                                                                        log("活动已满")
                                                                        随机点击2(bbym.x - 30, bbym.y + 40, 10, 10)
                                                                        for (let index = 0; index < 3; index++) {
                                                                            var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                                                                            if (bbkjbztc != null) {
                                                                                log("背包空间不足弹窗")
                                                                                var 结果 = 纯回主页()
                                                                                if (结果 == "掉线") {
                                                                                    return "掉线"
                                                                                } else {
                                                                                    // var 结果 = 成就图鉴()
                                                                                    // if (结果 == "掉线") {
                                                                                    //     return "掉线"
                                                                                    // } else {
                                                                                    var 结果 = 清理背包()
                                                                                    if (结果 == "掉线") {
                                                                                        return "掉线"
                                                                                    } else {
                                                                                        break
                                                                                    }
                                                                                    // }
                                                                                }
                                                                            } else {

                                                                            }
                                                                            sleep(200)
                                                                        }
                                                                    } else {


                                                                        var bbym = cor(true, 15, 74, 99, 300, 486, "#d02e2c", [[0, 2, "#d42c2b"]])
                                                                        if (bbym != null) {
                                                                            log("点击活动栏");
                                                                            随机点击(bbym.x - 20, bbym.y + 20, 10, 10)
                                                                            if (活动位置X == bbym.x && 活动位置Y == bbym.y) {
                                                                                log("重复点活动栏,可能还有,滑动一下")
                                                                                上下滑动++
                                                                                if (上下滑动 <= 2) {
                                                                                    swipe(716, 531, 713, 419, 2000)
                                                                                } else if (上下滑动 <= 4) {
                                                                                    swipe(713, 419, 716, 531, 2000)
                                                                                } else {
                                                                                    log("下滑活动栏")
                                                                                    swipe(234, 476, 227, 241, 2000)
                                                                                    上下滑动 = 0
                                                                                }
                                                                            }
                                                                            活动位置X = bbym.x
                                                                            活动位置Y = bbym.y
                                                                        } else {
                                                                            if (翻页 >= 5) {
                                                                                log("未找到活动")
                                                                                随机点击(1156, 91, 10, 10)
                                                                                var 结果 = 纯回主页()
                                                                                if (结果 == "掉线") {
                                                                                    return "掉线"
                                                                                }
                                                                                return
                                                                            } else {
                                                                                log("下滑活动栏")
                                                                                swipe(234, 476, 227, 241, 2000)
                                                                            }
                                                                            翻页++
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }


                } else {
                    var bbym = cor(true, 15, 1024, 2, 79, 74, "#d02e2c", [[0, 2, "#d42c2b"]])
                    if (bbym != null) {
                        log("点击活动");
                        随机点击(1057, 33, 10, 10)
                    } else {
                        var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                        if (手 != null) {
                            log("未找到活动")
                            return
                        } else {
                            log("毛都没识别到")
                        }
                    }
                }
            }
        }
        sleep(300)
    }
}



function 签到() {
    log("签到")
    var 签到成功 = false
    var 滑动 = 0
    var 未找到任何签到内容 = 0
    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var huodong = imgempt(true, 0.9, "获得道具", 539, 211, 226, 145)
            if (huodong != null) {
                log("获得道具")
                随机点击(501, 611)
            } else {
                var xuyqd = imgempt(true, 0.8, "全部领取", 1013, 504, 218, 140)
                if (xuyqd != null) {
                    log("点击全部领取")
                    随机点击2(xuyqd.x, xuyqd.y, 10, 10)
                    for (let index = 0; index < 3; index++) {
                        var bbkjbztc = imgempt(true, 0.9, "背包空间不足弹窗|背包空间不足弹窗2|背包空间不足弹窗3", 452, 42, 357, 202)
                        if (bbkjbztc != null) {
                            log("背包空间不足弹窗")
                            var 结果 = 纯回主页()
                            if (结果 == "掉线") {
                                return "掉线"
                            } else {
                                // var 结果 = 成就图鉴()
                                // if (结果 == "掉线") {
                                //     return "掉线"
                                // } else {
                                var 结果 = 清理背包()
                                if (结果 == "掉线") {
                                    return "掉线"
                                } else {
                                    break
                                }
                                // }
                            }
                        } else {
                            if (index == 2) {
                                签到成功 = true
                            }
                        }
                        sleep(200)
                    }
                } else {
                    var xuyqd = imgempt(true, 0.8, "点击签到活动", 295, 205, 93, 423)
                    if (xuyqd != null) {
                        log("点击签到活动栏")
                        随机点击(xuyqd.x, xuyqd.y, 10, 10)
                    } else {
                        var xuyqd = imgempt(true, 0.9, "需要签到", 219, 4, 164, 45)
                        if (xuyqd != null) {
                            if (签到成功) {
                                滑动++
                                if (滑动 >= 3) {
                                    log("关闭签到活动")
                                    随机点击(1155,128)
                                    var 结果 = 纯回主页()
                                    if (结果 == "掉线") {
                                        return "掉线"
                                    } else {
                                        return "签到成功"
                                    }
                                } else {
                                    log("滑动")
                                    swipe(213, 525, 227, 339, 1000)
                                    sleep(200)
                                }
                            } else {
                                log("点击签到")
                                随机点击2(xuyqd.x, xuyqd.y, 10, 10)
                            }
                        } else {
                            if (签到成功) {
                                滑动++
                                if (滑动 >= 5) {
                                    var 关闭XX = imgempt(false, 0.9, "关闭XX|签到XX", 0, 0, 0, 0)
                                    if (关闭XX != null) {
                                        log("关闭XX");
                                        随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                    } else {
                                        var 关闭背包 = imgempt(true, 0.9, "关闭背包", 1209, 42, 70, 87)
                                        if (关闭背包 != null) {
                                            log("关闭背包");
                                            随机点击(关闭背包.x, 关闭背包.y, 10, 10)
                                        } else {
                                            return "签到成功"
                                        }
                                    }
                                }
                            }else{
                                未找到任何签到内容++
                                if (未找到任何签到内容 >= 10) {
                                    var 关闭XX = imgempt(false, 0.9, "关闭XX|签到XX", 0, 0, 0, 0)
                                    if (关闭XX != null) {
                                        log("关闭XX");
                                        随机点击(关闭XX.x, 关闭XX.y, 10, 10)
                                    } else {
                                        var 关闭背包 = imgempt(true, 0.9, "关闭背包", 1209, 42, 70, 87)
                                        if (关闭背包 != null) {
                                            log("关闭背包");
                                            随机点击(关闭背包.x, 关闭背包.y, 10, 10)
                                        } else {
                                            return "签到成功"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        sleep(200)
    }
}


function 随机获取材料(data) {
    let keysToExtract = ["raspberry", "rabbitMeat", "fiveColorWing", "prayingMantis", "hardShell", "elderlyGnollB"]

    var 防御 = 0
    if (storage.get("自动挂机点测试") != null) {
        防御 = parseInt(storage.get("自动挂机点测试"))
    }
    // if (防御 <= 120) {
    // keysToExtract.push("raspberry")
    // keysToExtract.push("rabbitMeat")
    // keysToExtract.push("fiveColorWing")
    // keysToExtract.push("prayingMantis")
    // keysToExtract.push("hardShell")
    // keysToExtract.push("elderlyGnollB")
    // }

    if (防御 >= 120) {
        keysToExtract.push("powder")
        keysToExtract.push("fruits")
        keysToExtract.push("heavyMeat")
        keysToExtract.push("unknownFragmen")
        keysToExtract.push("blueFlower")
    }


    if (防御 >= 150) {
        keysToExtract.push("spiderLiquid")
        keysToExtract.push("wastePaper")
        keysToExtract.push("freshFish")
        keysToExtract.push("ominousSkull")
    }


    if (防御 >= 160) {
        keysToExtract.push("skull")
        keysToExtract.push("keyMaterials")
    }

    if (防御 >= 190) {
        keysToExtract.push("turtleShell")
        keysToExtract.push("edibleMushroom")
        keysToExtract.push("animalBlood")
        keysToExtract.push("animalEpaulets")
    }


    if (防御 >= 210) {
        keysToExtract.push("hammerThrow")
        keysToExtract.push("hiddenBeer")
        keysToExtract.push("hardBeastHorn")
    }
    if (防御 >= 220) {
        keysToExtract.push("crudeBoneNeck")
        keysToExtract.push("evilSkullSton")
        keysToExtract.push("orcSpecialS")
    }
    if (防御 >= 240) {
        keysToExtract.push("sharpClaw")
        keysToExtract.push("gnollclub")
        keysToExtract.push("fruitWine")
        keysToExtract.push("magicWand")
    }
    if (防御 >= 250) {
        keysToExtract.push("thicketRopeTr")
        keysToExtract.push("brieCheese")
        keysToExtract.push("bugFluid")
        keysToExtract.push("portableWater")
    }

    if (防御 >= 270) {
        keysToExtract.push("knightHorn")
        keysToExtract.push("creedOfTheCr")
        keysToExtract.push("woodenCrossbow")
        keysToExtract.push("flagOfTheCru")
    }

    log("首次筛选出可去的材料")
    log(keysToExtract)
    let numericValues = {};
    data.forEach(dataObj => {
        keysToExtract.forEach(key => {
            if (key in dataObj) {
                if (dataObj[key] != "无价") {
                    numericValues[key] = parseFloat(dataObj[key], 10);
                } else {
                    console.log("材料:" + key + ", 价格: 无价格数据");
                }
            }
        });
    });

    console.log("二次筛选出有价格的挂机材料");
    console.log(numericValues);

    // 找出最大值  
    let maxValue = -Infinity;
    for (let key in numericValues) {
        if (numericValues.hasOwnProperty(key) && numericValues[key] > maxValue) {
            maxValue = numericValues[key];
        }
    }
    // 计算最大值向下浮动百分之二十的界限值  
    let thresholdValue = maxValue * 0.7;
    log("取出可去的最大价格为:" + maxValue + ",向下浮动后的价格为:" + thresholdValue)

    // 挑出所有值大于或等于界限值的对象  
    let filteredValues = {};
    Object.keys(numericValues).forEach(key => {
        if (numericValues[key] >= thresholdValue) {
            filteredValues[key] = numericValues[key]; // 保留原始字符串值，如果需要的话  
        }
    });

    // 输出筛选后的对象  
    console.log("三次筛选最高价格浮动的材料");
    console.log(filteredValues);

    let keys = Object.keys(filteredValues);

    // 从键数组中随机选择一个键  
    let randomKey = keys[Math.floor(Math.random() * keys.length)];

    // 输出随机选择的键名称  
    console.log("随机选择的材料:" + randomKey);
    return randomKey
}

function 自动获取挂机材料() {
    var 选定材料 = ""
    if (storage.get("记录选定时间5") == null || new Date().getTime() / (1000 * 60 * 60 * 24) - storage.get("记录选定时间5") >= 3) {
        var url = "http://14.22.112.230:8233/snhc/getYeyaInternationalCommodityPrice";
        var params = {
            param1: storage.get("游戏区服") // 替换为您要发送的数据
        };
        try {
            // 发送POST请求，将JSON数据放入请求体
            http.__okhttp__.setTimeout(10000);
            var result = http.post(url, params, {
                headers: {
                    'Content-Type': 'text/html; charset=UTF-8',
                    'Transfer-Encoding': 'chunked',
                    'Cookie': 'lang=en',
                }
            });

            var r = result.body.json()
            if (r.msg == "NoData" && storage.get("记录挂机材料") != null) {
                log("获取的数据为：NoData，使用记录挂机材料")
                选定材料 = storage.get("记录挂机材料")
            } else if (r.msg == "NoData" && storage.get("记录挂机材料") == null) {
                log("获取的数据为：NoData，且记录挂机材料等于空")
                选定材料 = "prayingMantis"//螳螂腿
            } else {
                选定材料 = 随机获取材料(r.data)
                log(选定材料)
                storage.put("记录挂机材料", 选定材料)
                storage.put("记录选定时间5", new Date().getTime() / (1000 * 60 * 60 * 24))
            }
        } catch (e) {
            toastLog("获取材料价格超时。。。");
            log(e)
            if (storage.get("记录挂机材料") != null) {
                选定材料 = storage.get("记录挂机材料")
            } else {
                选定材料 = "prayingMantis" //螳螂腿
            }
        }
    } else {
        选定材料 = storage.get("记录挂机材料")
    }

    var 未找到 = true
    var 跳转成功 = false
    var 未移动 = true
    var 定位 = false
    var 定位后未找到 = 0
    var 滑动次数 = 0
    var 激活 = false
    var 反复寻找次数 = 0

    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
            if (qrtz != null) {
                log("确认跳转");
                随机点击2(qrtz.x, qrtz.y, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,处理")
                    // 无铜钱处理()
                    野外挂机刷金币()
                    return "掉线"
                }
                跳转成功 = true
                sleep(5000)
                for (let index = 0; index < 10; index++) {
                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                    if (mi != null) {
                        log("移动中")
                        未移动 = false
                        var 移动中 = 0
                        while (true) {
                            if (异常捕获() == "掉线") {
                                return "掉线"
                            } else {
                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                if (mi != null) {
                                    log("移动中")
                                    移动中 = 0
                                } else {
                                    移动中++
                                    if (移动中 >= 5) {
                                        log("到达目的地")
                                        break
                                    }
                                }
                            }
                            sleep(550)
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                            if (zzjiaz != null) {
                                log("正在加载");
                                未移动 = false
                                var 加载 = 0
                                while (true) {
                                    if (异常捕获() == "掉线") {
                                        return "掉线"
                                    } else {
                                        var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                                        if (zzjiaz != null) {
                                            log("正在加载")
                                            加载 = 0
                                        } else {
                                            加载++
                                            if (加载 >= 5) {
                                                log("加载完毕")
                                                break
                                            }
                                        }
                                    }
                                    sleep(550)
                                }
                            } else {

                            }
                        }
                    }
                    sleep(550)
                }
            } else {
                var tzwz = imgempt(true, 0.9, "跳转位置", 1188, 157, 91, 561)
                if (tzwz != null) {
                    log("跳转位置");
                    if (参数[49] && storage.get("自动挂机点测试") == "260") {
                        if (tzwz.y + 94 <= 720) {
                            while (true) {
                                for (let index = 0; index < 2; index++) {
                                    随机点击(tzwz.x, tzwz.y + 94, 10, 10)
                                }
                                var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                                if (qrtz != null) {
                                    log("点击完毕")
                                    break
                                }
                            }
                        } else {
                            log("超范围")
                            swipe(1135, 603, 1135, 400, 2000)
                        }
                    } else {
                        if (参数[1] == 10 || 参数[1] == 9) {
                            if (tzwz.y + 94 <= 720) {
                                while (true) {
                                    for (let index = 0; index < 2; index++) {
                                        随机点击(tzwz.x, tzwz.y + 94, 10, 10)
                                    }
                                    var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                                    if (qrtz != null) {
                                        log("点击完毕")
                                        break
                                    }
                                }
                            } else {
                                log("超范围")
                                swipe(1135, 603, 1135, 400, 2000)
                            }
                        } else {
                            随机点击(tzwz.x, tzwz.y, 10, 10)
                        }
                    }

                    未找到 = false
                    定位 = false
                    激活 = false
                } else {
                    var dinwei = imgempt(true, 0.9, "定位", 834, 133, 431, 516)
                    if (dinwei != null) {
                        log("点击定位");
                        随机点击2(dinwei.x, dinwei.y, 10, 10)
                        var dinwei = imgempt(true, 0.9, "无法打开地图", 446, 44, 412, 104)
                        if (dinwei != null) {
                            log("无法打开地图")
                            sleep(5000)
                        }
                        未找到 = false
                        定位 = true
                        激活 = false
                        重复点击坐标次数 = 0
                    } else {
                        var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 866, 224, 115, 260)
                        if (dinwei != null) {
                            if (激活) {
                                log("物品信息(获取方式),点击关闭");
                                随机点击(832, 127, 10, 10)
                            } else {
                                log("图鉴制作页,点击地图跳转页");
                                随机点击(dinwei.x + 39, dinwei.y + 7, 10, 10)
                            }
                        } else {//
                            var dinwei = imgempt(true, 0.9, "选择代替项", 523, 84, 250, 103)
                            if (dinwei != null) {
                                if (激活) {
                                    log("物品信息(获取方式),点击关闭");
                                    随机点击(832, 127, 10, 10)
                                } else {
                                    log("选择代替项,点击物资");
                                    随机点击(473, 212, 10, 10)
                                }

                            } else {//
                                var dinwei = imgempt(true, 0.9, "野外战斗跳转图标", 276, 165, 558, 196)
                                if (dinwei != null) {
                                    log("野外战斗跳转图标,点击关闭");
                                    随机点击(968, 135, 10, 10)
                                    激活 = true
                                } else {//
                                    var dinwei = imgempt(true, 0.9, "图鉴地图跳转页没有地图", 889, 339, 317, 126)
                                    if (dinwei != null) {
                                        log("图鉴地图跳转页没有地图");
                                        随机点击(1193, 542, 10, 10)
                                    } else {
                                        var dinwei = imgempt(true, 0.9, "图鉴制作页", 889, 339, 317, 126)
                                        if (dinwei != null) {
                                            log("图鉴制作页,点击地图跳转页");
                                            随机点击(913, 256, 10, 10)
                                        } else {//
                                            if (定位) {
                                                定位后未找到++
                                                if (定位后未找到 > 3) {
                                                    log("未找到跳转图标，下滑")
                                                    swipe(1135, 603, 1135, 300, 2000)
                                                    定位后未找到 = 0
                                                    定位 = false
                                                }
                                            }

                                            if (未移动) {
                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                if (手 != null) {
                                                    log("未传送成功")
                                                    return "未传送成功"
                                                } else {

                                                }
                                            }
                                            var tanlanzhuazi = imgempt(true, 0.9, 选定材料, 427, 119, 400, 503)
                                            if (tanlanzhuazi != null) {
                                                log("选择:" + 选定材料);
                                                随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                                未找到 = false
                                            } else {

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        if (未找到) {
            if (滑动次数 <= 20) {
                swipe(373, 548, 388, 248, 1000)
            } else {
                反复寻找次数++
                if (反复寻找次数 > 3) {
                    发送异常("找不到材料,请检查")
                    alert("找不到材料,请检查")
                }
                log("重新来")
                随机点击2(245, 98)
                随机点击2(85, 96)
                滑动次数 = 0

            }
        } else if (跳转成功) {
            log("到达位置")
            return "到达位置"
        }
        sleep(500)
    }
}


function 挂机材料选择() {
    var 未找到 = true
    var 跳转成功 = false
    var 未移动 = true
    var 定位 = false
    var 定位后未找到 = 0
    var 滑动次数 = 0
    var 激活 = false
    var 反复寻找次数 = 0
    var 选择的材料 = []

    if (参数[49]) {
        if (storage.get("自动挂机点测试") == "120") {//螳螂爪子
            选择的材料.push("选择螳螂爪子|选择螳螂爪子")
            选择的材料.push("硬壳")
        } else if (storage.get("自动挂机点测试") == "140") {//水果
            选择的材料.push("水果|水果2")
            选择的材料.push("空酒瓶")
        } else if (storage.get("自动挂机点测试") == "150") {//大牌肉
            选择的材料.push("大牌肉")
            选择的材料.push("破烂斗篷")
        } else if (storage.get("自动挂机点测试") == "160") {//毒蜘蛛
            选择的材料.push("毒蜘蛛|毒蜘蛛2")
            选择的材料.push("新鲜的鱼")
        } else if (storage.get("自动挂机点测试") == "180") {//骷髅头
            选择的材料.push("骷髅头|骷髅头2")
            选择的材料.push("虫珀")
        } else if (storage.get("自动挂机点测试") == "200") {//动物的血
            选择的材料.push("动物的血|动物的血2")
            选择的材料.push("龟壳")
        } else if (storage.get("自动挂机点测试") == "230") {//异教徒补给物资
            选择的材料.push("异教徒补给物资|异教徒补给物资2")
            选择的材料.push("被藏起来的啤酒")
        }
    } else {


        // if (参数[1] == 0) {//螳螂爪子
        //     选择的材料.push("选择螳螂爪子|选择螳螂爪子")
        //     选择的材料.push("硬壳")
        // } else if (参数[1] == 1) {//水果
        //     选择的材料.push("水果|水果2")
        //     选择的材料.push("空酒瓶")
        // } else if (参数[1] == 2) {//大牌肉
        //     选择的材料.push("大牌肉")
        //     选择的材料.push("破烂斗篷")
        // } else if (参数[1] == 3) {//毒蜘蛛
        //     选择的材料.push("毒蜘蛛|毒蜘蛛2")
        //     选择的材料.push("新鲜的鱼")
        // } else if (参数[1] == 4) {//骷髅头
        //     选择的材料.push("骷髅头|骷髅头2")
        //     选择的材料.push("虫珀")
        // } else if (参数[1] == 5) {//动物的血
        //     选择的材料.push("动物的血|动物的血2")
        //     选择的材料.push("龟壳")
        // } else if (参数[1] == 6) {//异教徒补给物资
        //     选择的材料.push("异教徒补给物资|异教徒补给物资2")
        //     选择的材料.push("被藏起来的啤酒")
        // } else if (参数[1] == 7 || 参数[1] == 9) {//狼头巾
        //     选择的材料.push("狼头巾")
        // } else if (参数[1] == 8 || 参数[1] == 10) {//巫术仗   
        //     选择的材料.push("巫术仗|巫术仗2")
        //     选择的材料.push("鬣狗的棍棒")
        // } else if (参数[1] == 11) {//矿灯
        //     选择的材料.push("矿灯")
        // } else if (参数[1] == 12) {//红十字书
        //     选择的材料.push("红十字书|红十字书2")
        //     选择的材料.push("十字军旗帜")
        // } else if (参数[1] == 13) {//腐烂的爪子
        //     选择的材料.push("腐烂的爪子")
        // }


        if (参数[1] == 0) {//螳螂爪子
            选择的材料.push("选择螳螂爪子|选择螳螂爪子")
            选择的材料.push("硬壳")
        } else if (参数[1] == 1) {//水果
            选择的材料.push("水果|水果2")
            选择的材料.push("空酒瓶")
        } else if (参数[1] == 2) {//大牌肉
            选择的材料.push("大牌肉")
            选择的材料.push("破烂斗篷")
        } else if (参数[1] == 3) {//毒蜘蛛
            选择的材料.push("毒蜘蛛|毒蜘蛛2")
            选择的材料.push("新鲜的鱼")
        } else if (参数[1] == 4) {//骷髅头
            选择的材料.push("骷髅头|骷髅头2")
            选择的材料.push("虫珀")
        } else if (参数[1] == 5) {//动物的血
            选择的材料.push("动物的血|动物的血2")
            选择的材料.push("龟壳")
        } else if (参数[1] == 6) {//异教徒补给物资   改220
            选择的材料.push("异教徒补给物资|异教徒补给物资2")
            选择的材料.push("被藏起来的啤酒")
        } else if (参数[1] == 7) {//狼头巾
            // 选择的材料.push("狼头巾")
            选择的材料.push("sharpClaw")
            选择的材料.push("gnollclub")
            选择的材料.push("fruitWine")
            选择的材料.push("magicWand")
        } else if (参数[1] == 8) {//巫术仗
            选择的材料.push("thicketRopeTr")
            选择的材料.push("brieCheese")
            选择的材料.push("bugFluid")
            选择的材料.push("portableWater")
        } else if (参数[1] == 9) {
            keysToExtract.push("knightHorn")
            keysToExtract.push("creedOfTheCr")
            keysToExtract.push("woodenCrossbow")
            keysToExtract.push("flagOfTheCru")
        } else if (参数[1] == 10) {//矿灯
            选择的材料.push("矿灯")
        } else if (参数[1] == 11) {//红十字书
            选择的材料.push("红十字书|红十字书2")
            选择的材料.push("十字军旗帜")
        } else if (参数[1] == 12) {//腐烂的爪子
            选择的材料.push("腐烂的爪子")
        }
    }

    if (选择的材料.length == 0) {
        log("参数49为:" + 参数[49] + ",参数1:" + 参数[1] + ",选择的材料:" + 选择的材料)
        log("防御和对应不符，直接去螳螂腿")
        选择的材料.push("选择螳螂爪子|选择螳螂爪子")
    }
    var 随机值 = random(0, 选择的材料.length - 1)
    var 随机后材料 = 选择的材料[随机值]
    log("随机前:" + 选择的材料 + ",后:" + 随机后材料)

    while (true) {
        if (异常捕获() == "掉线") {
            return "掉线"
        } else {
            var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
            if (qrtz != null) {
                log("确认跳转");
                随机点击2(qrtz.x, qrtz.y, 10, 10)
                var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                if (guajizhon != null) {
                    log("铜钱不足,处理")
                    // 无铜钱处理()
                    野外挂机刷金币()
                    return "掉线"
                }
                跳转成功 = true
                sleep(5000)
                for (let index = 0; index < 10; index++) {
                    var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                    if (mi != null) {
                        log("移动中")
                        未移动 = false
                        var 移动中 = 0
                        while (true) {
                            if (异常捕获() == "掉线") {
                                return "掉线"
                            } else {
                                var mi = imgempt(true, 0.9, "移动(米)", 622, 513, 60, 32)
                                if (mi != null) {
                                    log("移动中")
                                    移动中 = 0
                                } else {
                                    移动中++
                                    if (移动中 >= 5) {
                                        log("到达目的地")
                                        break
                                    }
                                }
                            }
                            sleep(550)
                        }
                    } else {
                        var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                        if (qrtz != null) {
                            log("确认跳转");
                            随机点击2(qrtz.x, qrtz.y, 10, 10)
                            var guajizhon = imgempt(true, 0.9, "铜钱不足8|铜钱不足7|铜钱不足|铜钱不足2|铜钱不足3|铜钱不足4|铜钱不足5|铜钱不足6", 552, 55, 191, 66)
                            if (guajizhon != null) {
                                log("铜钱不足,处理")
                                // 无铜钱处理()
                                野外挂机刷金币()
                                return "掉线"
                            }
                        } else {
                            var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                            if (zzjiaz != null) {
                                log("正在加载");
                                未移动 = false
                                var 加载 = 0
                                while (true) {
                                    if (异常捕获() == "掉线") {
                                        return "掉线"
                                    } else {
                                        var zzjiaz = imgempt(true, 0.9, "正在加载", 569, 646, 149, 67)
                                        if (zzjiaz != null) {
                                            log("正在加载")
                                            加载 = 0
                                        } else {
                                            加载++
                                            if (加载 >= 5) {
                                                log("加载完毕")
                                                break
                                            }
                                        }
                                    }
                                    sleep(550)
                                }
                            } else {

                            }
                        }
                    }
                    sleep(550)
                }
            } else {
                var tzwz = imgempt(true, 0.9, "跳转位置", 1188, 157, 91, 561)
                if (tzwz != null) {
                    log("跳转位置");
                    if (参数[49] && storage.get("自动挂机点测试") == "260") {
                        if (tzwz.y + 94 <= 720) {
                            while (true) {
                                for (let index = 0; index < 2; index++) {
                                    随机点击(tzwz.x, tzwz.y + 94, 10, 10)
                                }
                                var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                                if (qrtz != null) {
                                    log("点击完毕")
                                    break
                                }
                            }
                        } else {
                            log("超范围")
                            swipe(1135, 603, 1135, 400, 2000)
                        }
                    } else {
                        if (参数[1] == 10 || 参数[1] == 9) {
                            if (tzwz.y + 94 <= 720) {
                                while (true) {
                                    for (let index = 0; index < 2; index++) {
                                        随机点击(tzwz.x, tzwz.y + 94, 10, 10)
                                    }
                                    var qrtz = imgempt(true, 0.9, "确认跳转", 670, 438, 125, 61)
                                    if (qrtz != null) {
                                        log("点击完毕")
                                        break
                                    }
                                }
                            } else {
                                log("超范围")
                                swipe(1135, 603, 1135, 400, 2000)
                            }
                        } else {
                            随机点击(tzwz.x, tzwz.y, 10, 10)
                        }
                    }

                    未找到 = false
                    定位 = false
                    激活 = false
                } else {
                    var dinwei = imgempt(true, 0.9, "定位", 834, 133, 431, 516)
                    if (dinwei != null) {
                        log("点击定位");
                        随机点击(dinwei.x, dinwei.y, 10, 10)
                        未找到 = false
                        定位 = true
                        激活 = false
                    } else {
                        var dinwei = imgempt(true, 0.9, "物品信息(获取方式)", 866, 224, 115, 260)
                        if (dinwei != null) {
                            if (激活) {
                                log("物品信息(获取方式),点击关闭");
                                随机点击(832, 127, 10, 10)
                            } else {
                                log("图鉴制作页,点击地图跳转页");
                                随机点击(dinwei.x + 39, dinwei.y + 7, 10, 10)
                            }
                        } else {//
                            var dinwei = imgempt(true, 0.9, "选择代替项", 523, 84, 250, 103)
                            if (dinwei != null) {
                                if (激活) {
                                    log("物品信息(获取方式),点击关闭");
                                    随机点击(832, 127, 10, 10)
                                } else {
                                    log("选择代替项,点击物资");
                                    随机点击(473, 212, 10, 10)
                                }

                            } else {//
                                var dinwei = imgempt(true, 0.9, "野外战斗跳转图标", 276, 165, 558, 196)
                                if (dinwei != null) {
                                    log("野外战斗跳转图标,点击关闭");
                                    随机点击(968, 135, 10, 10)
                                    激活 = true
                                } else {//
                                    var dinwei = imgempt(true, 0.9, "图鉴地图跳转页没有地图", 889, 339, 317, 126)
                                    if (dinwei != null) {
                                        log("图鉴地图跳转页没有地图");
                                        随机点击(1193, 542, 10, 10)
                                    } else {
                                        var dinwei = imgempt(true, 0.9, "图鉴制作页", 889, 339, 317, 126)
                                        if (dinwei != null) {
                                            log("图鉴制作页,点击地图跳转页");
                                            随机点击(913, 256, 10, 10)
                                        } else {//
                                            if (定位) {
                                                定位后未找到++
                                                if (定位后未找到 > 3) {
                                                    log("未找到跳转图标，下滑")
                                                    swipe(1135, 603, 1135, 300, 2000)
                                                    定位后未找到 = 0
                                                    定位 = false
                                                }
                                            }

                                            if (未移动) {
                                                var 手 = imgempt(true, 0.9, "手|手2|齿轮图标", 1121, 421, 84, 82)
                                                if (手 != null) {
                                                    log("未传送成功")
                                                    return "未传送成功"
                                                } else {

                                                }
                                            }
                                            var tanlanzhuazi = imgempt(true, 0.9, 随机后材料, 427, 119, 400, 503)
                                            if (tanlanzhuazi != null) {
                                                log("选择:" + 随机后材料);
                                                随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                                未找到 = false
                                            } else {

                                            }

                                            // if (参数[49]) {
                                            //     if (storage.get("自动挂机点测试") == "120") {//螳螂爪子
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "选择螳螂爪子|选择螳螂爪子2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("选择螳螂爪子");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (storage.get("自动挂机点测试") == "140") {//水果
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "水果|水果2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("水果");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (storage.get("自动挂机点测试") == "150") {//大牌肉
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "大牌肉", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("大牌肉");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (storage.get("自动挂机点测试") == "160") {//毒蜘蛛
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "毒蜘蛛|毒蜘蛛2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("毒蜘蛛");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (storage.get("自动挂机点测试") == "180") {//骷髅头
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "骷髅头|骷髅头2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("骷髅头");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     }else if (storage.get("自动挂机点测试") == "200") {//动物的血
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "动物的血|动物的血2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("动物的血");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (storage.get("自动挂机点测试") == "230") {//异教徒补给物资
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "异教徒补给物资|异教徒补给物资2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("异教徒补给物资");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     }
                                            // } else {
                                            //     if (参数[1] == 0) {//螳螂爪子
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "选择螳螂爪子|选择螳螂爪子2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("选择螳螂爪子");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 1) {//水果
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "水果|水果2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("水果");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 2) {//大牌肉
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "大牌肉", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("大牌肉");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 3) {//毒蜘蛛
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "毒蜘蛛|毒蜘蛛2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("毒蜘蛛");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 4) {//骷髅头
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "骷髅头|骷髅头2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("骷髅头");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 5) {//动物的血
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "动物的血|动物的血2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("动物的血");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 6) {//异教徒补给物资
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "异教徒补给物资|异教徒补给物资2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("异教徒补给物资");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 7 || 参数[1] == 9) {//狼头巾
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "狼头巾", 427, 119, 400, 503)//暂无
                                            //         if (tanlanzhuazi != null) {
                                            //             log("狼头巾");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 8 || 参数[1] == 10) {//巫术仗
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "巫术仗|巫术仗2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("巫术仗");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 11) {//矿灯
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "矿灯", 427, 119, 400, 503)//暂无
                                            //         if (tanlanzhuazi != null) {
                                            //             log("矿灯");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 12) {//红十字书
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "红十字书|红十字书2", 427, 119, 400, 503)
                                            //         if (tanlanzhuazi != null) {
                                            //             log("红十字书");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     } else if (参数[1] == 13) {//腐烂的爪子
                                            //         var tanlanzhuazi = imgempt(true, 0.9, "腐烂的爪子", 427, 119, 400, 503)//暂无
                                            //         if (tanlanzhuazi != null) {
                                            //             log("腐烂的爪子");
                                            //             随机点击(tanlanzhuazi.x, tanlanzhuazi.y, 10, 10)
                                            //             未找到 = false
                                            //         } else {

                                            //         }
                                            //     }
                                            // }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        if (未找到) {
            if (滑动次数 <= 20) {
                swipe(373, 548, 388, 248, 1000)
            } else {
                反复寻找次数++
                if (反复寻找次数 > 3) {
                    发送异常("找不到材料,请检查")
                    alert("找不到材料,请检查")
                }
                log("重新来")
                随机点击2(245, 98)
                随机点击2(85, 96)
                滑动次数 = 0

            }
        } else if (跳转成功) {
            log("到达位置")
            return "到达位置"
        }
        sleep(500)
    }
}

function 配置读取() {
    if (storage.get("userName1") != null)
        ui.userName.setText(storage.get("userName1"));
    if (storage.get("password1") != null)
        ui.password.setText(storage.get("password1"));
    if (storage.get("email1") != null)
        ui.email.setText(storage.get("email1"));
    if (storage.get("野外挂机选项") != null)
        ui.野外挂机选项.setChecked(storage.get("野外挂机选项"));//
    if (storage.get("螳螂爪子") != null) {
        if (storage.get("螳螂爪子") == true) {
            storage.put("spinner", 0)
        }
        // storage.remove("螳螂爪子")
    }

    if (storage.get("水果") != null) {
        if (storage.get("水果") == true) {
            storage.put("spinner", 1)
        }
        // storage.remove("水果")
    }


    if (storage.get("毒蜘蛛") != null) {
        if (storage.get("毒蜘蛛") == true) {
            storage.put("spinner", 2)
        }
        // storage.remove("毒蜘蛛")
    }

    if (storage.get("骷髅头") != null) {
        if (storage.get("骷髅头") == true) {
            storage.put("spinner", 3)
        }
        // storage.remove("骷髅头")
    }

    if (storage.get("动物的血") != null) {
        if (storage.get("动物的血") == true) {
            storage.put("spinner", 4)
        }
        // storage.remove("动物的血")
    }

    if (storage.get("异教补给") != null) {
        if (storage.get("异教补给") == true) {
            storage.put("spinner", 5)
        }
        // storage.remove("异教补给")
    }
    if (storage.get("spinner") != null)
        ui.spinner.setSelection(storage.get("spinner"));
    // ui.螳螂爪子.setChecked(storage.get("螳螂爪子"));

    // if (storage.get("水果") != null)
    //     ui.水果.setChecked(storage.get("水果"));
    // if (storage.get("毒蜘蛛") != null)
    //     ui.毒蜘蛛.setChecked(storage.get("毒蜘蛛"));
    // if (storage.get("骷髅头") != null)
    //     ui.骷髅头.setChecked(storage.get("骷髅头"));
    // if (storage.get("动物的血") != null)
    //     ui.动物的血.setChecked(storage.get("动物的血"));
    // if (storage.get("异教补给") != null)
    //     ui.异教补给.setChecked(storage.get("异教补给"));


    // if (storage.get("兔子肉") != null)
    //     ui.兔子肉.setChecked(storage.get("兔子肉"));
    // if (storage.get("翅膀碎片") != null)
    //     ui.翅膀碎片.setChecked(storage.get("翅膀碎片"));
    // if (storage.get("山草") != null)
    //     ui.山草.setChecked(storage.get("山草"));

    if (storage.get("日副本") != null)
        ui.日副本.setChecked(storage.get("日副本"));
    // if (storage.get("日副本时间") != null)
    //     ui.日副本时间.setText(storage.get("日副本时间"));
    if (storage.get("委托") != null)
        ui.委托.setChecked(storage.get("委托"));
    if (storage.get("周副本") != null)
        ui.周副本.setChecked(storage.get("周副本"));
    if (storage.get("查看物价") != null)
        ui.查看物价.setChecked(storage.get("查看物价"));
    // if (storage.get("单强化") != null)
    //     ui.单强化.setChecked(storage.get("单强化"));
    // if (storage.get("单灌注") != null)
    //     ui.单灌注.setChecked(storage.get("单灌注"));
    // if (storage.get("单洗练") != null)
    // ui.单洗练.setChecked(storage.get("单洗练"));
    if (storage.get("白嫖属性") != null)
        ui.白嫖属性.setChecked(storage.get("白嫖属性"));
    if (storage.get("自动提升") != null)
        ui.自动提升.setChecked(storage.get("自动提升"));
    if (storage.get("自动提升属性时间") != null)
        ui.自动提升属性时间.setText(storage.get("自动提升属性时间"));
    // if (storage.get("二转") != null)
    //     ui.二转.setChecked(storage.get("二转"));

    if (storage.get("周本时间") != null)
        ui.周本时间.setText(storage.get("周本时间"));
    if (storage.get("区本") != null)
        ui.区本.setChecked(storage.get("区本"));
    if (storage.get("区本时间") != null)
        ui.区本时间.setText(storage.get("区本时间"));
    if (storage.get("三十五级") != null)
        ui.三十五.setChecked(storage.get("三十五级"));
    if (storage.get("四十级") != null)
        ui.四十.setChecked(storage.get("四十级"));
    if (storage.get("交易") != null)
        ui.交易.setChecked(storage.get("交易"));
    // if (storage.get("交易时间") != null)
    //     ui.交易时间.setText(storage.get("交易时间"));
    if (storage.get("四十五级") != null)
        ui.四十五.setChecked(storage.get("四十五级"));
    if (storage.get("五十级") != null)
        ui.五十.setChecked(storage.get("五十级"));

    if (storage.get("小药水") != null)
        ui.小药水.setChecked(storage.get("小药水"));
    if (storage.get("中药水") != null)
        ui.中药水.setChecked(storage.get("中药水"));
    if (storage.get("激战地选项") != null)
        ui.激战地选项.setChecked(storage.get("激战地选项"));
    // if (storage.get("自动使用药水") != null)
    //     ui.自动使用药水.setChecked(storage.get("自动使用药水"));
    if (storage.get("每日制造") != null)
        ui.每日制造.setChecked(storage.get("每日制造"));
    if (storage.get("识别游戏大区") != null)
        ui.识别游戏大区.setChecked(storage.get("识别游戏大区"));
    if (storage.get("工会任务") != null)
        ui.工会任务.setChecked(storage.get("工会任务"));
    if (storage.get("商城活动物质") != null)
        ui.商城活动物质.setChecked(storage.get("商城活动物质"));
    if (storage.get("自动选择挂机点") != null)
        ui.自动选择挂机点.setChecked(storage.get("自动选择挂机点"));
    if (storage.get("二十四小时币价") != null)
        ui.二十四小时币价.setChecked(storage.get("二十四小时币价"));

    // if (storage.get("Google登录") != null)
    //     ui.Google登录.setChecked(storage.get("Google登录"));
    // if (storage.get("图鉴材料分解") != null)
    //     ui.图鉴材料分解.setChecked(storage.get("图鉴材料分解"));
    // if (storage.get("野外图鉴材料分解") != null)
    //     ui.野外图鉴材料分解.setChecked(storage.get("野外图鉴材料分解"));

    // if (storage.get("三倍经验") != null)
    //     ui.三倍经验.setChecked(storage.get("三倍经验"));
    if (storage.get("经验本") != null)
        ui.经验本.setChecked(storage.get("经验本"));
    if (storage.get("自动分解") != null)
        ui.自动分解.setChecked(storage.get("自动分解"));
    if (storage.get("四十激战地") != null) {
        if (storage.get("四十激战地") == true) {
            storage.put("激战地选择项", 0)
        }
        // storage.remove("四十激战地")
    }

    if (storage.get("四十五激战地") != null) {
        if (storage.get("四十五激战地") == true) {
            storage.put("激战地选择项", 1)
        }
        // storage.remove("四十五激战地")
    }

    if (storage.get("五十激战地") != null) {
        if (storage.get("五十激战地") == true) {
            storage.put("激战地选择项", 2)
        }
        // storage.remove("五十激战地")
    }
    if (storage.get("激战地选择项") != null)
        ui.激战地选择项.setSelection(storage.get("激战地选择项"));
    // if (storage.get("四十五激战地") != null)
    //     ui.四十五激战地.setChecked(storage.get("四十五激战地"));
    // if (storage.get("五十激战地") != null)
    //     ui.五十激战地.setChecked(storage.get("五十激战地"));

    if (storage.get("主线任务") != null)
        ui.主线任务.setChecked(storage.get("主线任务"));
    if (storage.get("三五后主线") != null)
        ui.三五后主线.setChecked(storage.get("三五后主线"));

    // if (storage.get("每日换购铜钱箱") != null)
    //     ui.每日换购铜钱箱.setChecked(storage.get("每日换购铜钱箱"));
    // if (storage.get("每日换购经验药") != null)
    //     ui.每日换购经验药.setChecked(storage.get("每日换购经验药"));

    if (storage.get("每日换购材料箱") != null)
        ui.每日换购材料箱.setChecked(storage.get("每日换购材料箱"));

    if (storage.get("启动延时") != null)
        ui.启动延时.setChecked(storage.get("启动延时"));
    if (storage.get("自动铸币") != null)
        ui.自动铸币.setChecked(storage.get("自动铸币"));
    if (storage.get("药水设定") != null)
        ui.药水设定.setChecked(storage.get("药水设定"));
    if (storage.get("自动购买技能书") != null)
        ui.自动购买技能书.setChecked(storage.get("自动购买技能书"));
    // if (storage.get("每日购买绿级材料箱") != null)
    //     ui.每日购买绿级材料箱.setChecked(storage.get("每日购买绿级材料箱"));
    if (storage.get("最低价") != null)
        ui.最低价.setChecked(storage.get("最低价"));
    if (storage.get("平均价") != null)
        ui.平均价.setChecked(storage.get("平均价"));
    if (storage.get("上浮价") != null)
        ui.上浮价.setChecked(storage.get("上浮价"));
    // if (storage.get("巴斯锂野外") != null)
    //     ui.巴斯锂野外.setChecked(storage.get("巴斯锂野外"));
}

function 随机点击2(X, Y, X1, Y1) {
    if (点击位置判定X == X && 点击位置判定Y == Y) {
        重复点击坐标次数++
    } else {
        重复点击坐标次数 = 0
        点击位置判定X = X
        点击位置判定Y = Y
    }
    let 随机1 = 0
    if (X1 == 0) {
        随机1 = 0
    } else {
        随机1 = random(2, 5)
    }
    let 随机2 = 0
    if (Y1 == 0) {
        随机2 = 0
    } else {
        随机2 = random(2, 5)
    }
    let 滑动随机 = 0
    let 滑动随机2 = 0
    while (滑动随机 === 0 || 滑动随机2 === 0) {
        滑动随机 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
        滑动随机2 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
    }
    let 随机位移X = X + 随机1 + 滑动随机2
    let 随机位移Y = Y + 随机2 + 滑动随机
    swipe(X + 随机1, Y + 随机2, 随机位移X, 随机位移Y, random(100, 200));
    sleep(random(300, 500))
}

function 控制点击(X, Y, X1, Y1) {
    if (点击位置判定X == X && 点击位置判定Y == Y) {
        重复点击坐标次数++
    } else {
        重复点击坐标次数 = 0
        点击位置判定X = X
        点击位置判定Y = Y
    }
    var 随机1 = random(2, X1)
    var 随机2 = random(2, Y1)

    var 滑动随机 = 0
    var 滑动随机2 = 0
    while (滑动随机 === 0 || 滑动随机2 === 0) {
        滑动随机 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
        滑动随机2 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
    }

    var 随机位移X = X + 随机1 + 滑动随机2
    var 随机位移Y = Y + 随机2 + 滑动随机


    swipe(X + 随机1, Y + 随机2, 随机位移X, 随机位移Y, random(100, 200));
    sleep(random(300, 500))
}


function 随机点击(X, Y, X1, Y1) {
    if (点击位置判定X == X && 点击位置判定Y == Y) {
        重复点击坐标次数++
    } else {
        重复点击坐标次数 = 0
        点击位置判定X = X
        点击位置判定Y = Y
    }
    啥也没找到 = 0
    let 随机1 = 0
    if (X1 == 0) {
        随机1 = 0
    } else {
        随机1 = random(2, 5)
    }
    let 随机2 = 0
    if (Y1 == 0) {
        随机2 = 0
    } else {
        随机2 = random(2, 5)
    }

    let 滑动随机 = 0
    let 滑动随机2 = 0
    while (滑动随机 === 0 || 滑动随机2 === 0) {
        滑动随机 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
        滑动随机2 = Math.floor(Math.random() * 9) - 4; // 生成-4到4之间的随机整数
    }
    let 随机位移X = X + 随机1 + 滑动随机2
    let 随机位移Y = Y + 随机2 + 滑动随机
    swipe(X + 随机1, Y + 随机2, 随机位移X, 随机位移Y, random(100, 200));
    sleep(random(1000, 1500))
}

function 关闭应用(packageName) {
    log("强制停止:" + packageName)
    let name = getPackageName(packageName);
    if (!name) {
        if (getAppName(packageName)) {
            name = packageName;
        } else {
            return false;
        }
    }
    app.openAppSetting(name);
    // text(app.getAppName(name)).waitFor();
    let is_sure = textMatches(/(.*강.*|.*종.*|.*료.*|.*FORCE.*|.*STOP.*|.*强.*|.*止.*|.*结.*|.*行.*)/).findOne(10000);
    if (is_sure != null && is_sure.enabled()) {
        textMatches(/(.*강.*|.*종.*|.*료.*|.*FORCE.*|.*STOP.*|.*强.*|.*止.*|.*结.*|.*行.*)/).findOne().click();
        let 确定停止 = textMatches(/(.*확.*|.*인.*|.*OK.*|.*确.*|.*定.*)/).findOne(3000)
        if (确定停止 != null && 确定停止.enabled()) {
            textMatches(/(.*확.*|.*인.*|.*OK.*|.*确.*|.*定.*)/).findOne().click();
            log(app.getAppName(name) + "应用已被关闭");
            sleep(1000);
            back();
        } else {
            log(app.getAppName(name) + "应用不能被正常关闭或不在后台运行");
            back();
        }
    } else {
        log(app.getAppName(name) + "应用不能被正常关闭或不在后台运行");
        back();
    }
    home()
    sleep(10000)
    // app.launch(packageName)
}


// //关闭应用
// function 关闭应用(packageName) {
//     log("强制停止:" + packageName)
//     let name = getPackageName(packageName);
//     if (!name) {
//         if (getAppName(packageName)) {
//             name = packageName;
//         } else {
//             return false;
//         }
//     }
//     app.openAppSetting(name);
//     text(app.getAppName(name)).waitFor();
//     let is_sure = textMatches(/(.*강.*|.*종.*|.*료.*|.*FORCE.*|.*STOP.*|.*强.*|.*止.*|.*结.*|.*行.*)/).findOne();
//     if (is_sure.enabled()) {
//         textMatches(/(.*강.*|.*종.*|.*료.*|.*FORCE.*|.*STOP.*|.*强.*|.*止.*|.*结.*|.*行.*)/).findOne().click();
//         textMatches(/(.*확.*|.*인.*|.*OK.*|.*确.*|.*定.*)/).findOne().click();
//         log(app.getAppName(name) + "应用已被关闭");
//         sleep(1000);
//         back();
//     } else {
//         log(app.getAppName(name) + "应用不能被正常关闭或不在后台运行");
//         back();
//     }
//     home()
//     sleep(10000)
//     app.launch(packageName)
// }

//颜色识别（总）
function cor(mode, similarity, x, y, w, h, colors1, colors2) {
    let img = captureScreen();
    let colorxy = null
    if (mode) {
        colorxy = AreaColor(img, similarity, x, y, w, h, colors1, colors2)
    } else {
        colorxy = FullColor(img, similarity, colors1, colors2)
    }
    return colorxy;
}

//颜色识别（总）
function colorRecognitionSelect(area, similarity, direction, x, y, w, h, ColorArray) {
    let img = captureScreen();
    let resoult = []
    let colorxy = null
    for (let index = 0; index < ColorArray.length; index++) {
        if (area) {
            colorxy = AreaColor(img, similarity, x, y, w, h, ColorArray[index][0], ColorArray[index][1])
        } else {
            colorxy = FullColor(img, similarity, ColorArray[index][0], ColorArray[index][1])
        }
        if (colorxy != null) {
            resoult.push(colorxy)
        }
    }

    if (resoult.length >= 1) {
        let minXObject = {}
        if (direction == "最上方") {
            minXObject = resoult.reduce(function (prev, curr) {
                return prev.y < curr.y ? prev : curr;
            });
        } else if (direction == "最下方") {
            minXObject = resoult.reduce(function (prev, curr) {
                return prev.y > curr.y ? prev : curr;
            });
        } else if (direction == "最左方") {
            minXObject = resoult.reduce(function (prev, curr) {
                return prev.x < curr.x ? prev : curr;
            });
        } else if (direction == "最右方") {
            minXObject = resoult.reduce(function (prev, curr) {
                return prev.x > curr.x ? prev : curr;
            });
        } else {
            return resoult
        }
        return minXObject
    } else {
        return null;
    }
}



//图片识别（总）
function imgRecognize(mode, par, imgname, x, y, w, h) {
    var img = captureScreen();
    var temp = images.read("./picture/" + imgname + ".png");
    if (temp != null) {
        try {
            var imgxy = null
            if (mode) {
                imgxy = AreaSeekImg(par, img, temp, x, y, w, h);
            } else {
                imgxy = FullSeekImg(par, img, temp);
            }
        } catch (error) {
            if (error.toString().includes("CvException")) {
                log("imgempt openCv报错,退出脚本")
                images.save(img, "/sdcard/错误大图.png", "png", 100);
                images.save(temp, "/sdcard/错误小图.png", "png", 100);
                //log("可用内存" + device.getAvailMem())
                // alert("OPCV异常")
              
                exit()
            } else {
                log("为捕获到指定错误，请检查")
                images.save(img, "/sdcard/错误大图.png", "png", 100);
                images.save(temp, "/sdcard/错误小图.png", "png", 100);
                //log("可用内存" + device.getAvailMem())

            }
            // log("图片识别（总）报错,是否范围识图:" + mode + ",图名:" + imgname + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
        } finally {
            if (temp != null) {
                temp.recycle();
            }
            img.recycle();
        }
        // temp.recycle();
        return imgxy;
    } else {
        log("没有:" + imgname + "这张图")
        return null;
    }
}



function matchImg(mode, pattern, similarity, imgname, x, y, width, height) {
    try {
        var img1 = captureScreen();
    } catch (error) {
        log("matchImg截图报错")
    }

    var 分割 = imgname.split("|")
    var 返回值 = {
        "picture": "",
        "resultSet": null,
        "sum": 0
    }
    for (let index = 0; index < 分割.length; index++) {
        var temp = images.read("./picture/" + 分割[index] + ".png");
        if (temp != null) {
            try {
                if (mode) {
                    var result = images.matchTemplate(img1, temp, { region: [x, y, width, height], threshold: similarity, max: 999 })
                } else {
                    var result = images.matchTemplate(img1, temp, { threshold: similarity, max: 999 })
                }
                if (result.matches.length != 0) {
                    返回值.picture = 分割[index]
                    返回值.sum = result.matches.length
                    break
                } else {
                    // log("未识别到")
                }
            } catch (error) {
                log("matchImg图片识别（总）报错,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + width + "," + height + "错误详细:" + error)
                if (error.toString().includes("CvException")) {
                    log("openCv报错,退出脚本")
                    images.save(img1, "/sdcard/错误大图.png", "png", 100);
                    images.save(temp, "/sdcard/错误小图.png", "png", 100);
                    // alert("OPCV异常")
                   
                    //log("可用内存" + device.getAvailMem())
                    exit()
                } else {
                    log("非指定报错,请检查")
                    images.save(img1, "/sdcard/错误大图.png", "png", 100);
                    images.save(temp, "/sdcard/错误小图.png", "png", 100);
                    //log("可用内存" + device.getAvailMem())
                }
            } finally {
                temp.recycle();
            }
        } else {
            log("没有:" + 分割[index] + "这张图---")
        }
    }

    if (result.matches.length != 0) {
        if (pattern == "最下边") {
            返回值.resultSet = result.bottommost().point
        } else if (pattern == "最上边") {
            返回值.resultSet = result.topmost().point
        } else if (pattern == "最左边") {
            返回值.resultSet = result.leftmost().point
        } else if (pattern == "最右边") {
            返回值.resultSet = result.rightmost().point
        } else if (pattern == "最后一个") {
            返回值.resultSet = result.last().point
        } else if (pattern == "相似度") {
            返回值.resultSet = result.best().point
        } else if (pattern == "全部") {
            返回值.resultSet = result.points
        } else if (pattern == "左上") {
            return result.sortBy("top-left").matches[0].point
        } else {
            返回值.resultSet = result.first().point
        }
    }

    if (返回值.sum != 0) {
        return 返回值
    } else {
        return null
    }
}

//多图片识别（总）（或）（全）
function imgempt(mode, par, imgname, x, y, w, h) {
    if (线程控制 == false) {
        log("中断当前任务,准备下一个任务")
        threads.currentThread().interrupt()
    }
    var img = captureScreen();
    try {
        var 分割 = imgname.split("|")
    } catch (error) {
        log("分割报错")
    }
    var imgxy = null
    for (let index = 0; index < 分割.length; index++) {
        var temp = images.read("./picture/" + 分割[index] + ".png");
        if (temp != null) {
            try {
                if (temp == null || temp.getWidth() == 0 || temp.getHeight() == 0) {
                    log("无法加载图像或图像尺寸为0: ");
                    alert("无法加载图像或图像尺寸为0: ")
                }

                if (mode) {
                    if (x >= 0 && y >= 0 && w > 0 && h > 0 && x + w <= img.getWidth() && y + h <= img.getHeight()) {
                        imgxy = images.findImage(img, temp, { region: [x, y, w, h], threshold: par })
                        // imgxy = AreaSeekImg(par, img, temp, x, y, w, h)
                    } else {
                        log("无效的区域参数: x=" + x + ", y=" + y + ", w=" + w + ", h=" + h);
                        alert("无效的区域参数: 图===" + 分割[index])
                    }
                } else {
                    imgxy = images.findImage(img, temp, { threshold: par })
                    // imgxy = FullSeekImg(par, img, temp);
                }

            } catch (error) {
                log("图片识别（总）报错,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
                if (error.toString().includes("CvException")) {
                    log("openCv报错,退出脚本")
                    images.save(img, "/sdcard/错误大图.png", "png", 100);
                    images.save(temp, "/sdcard/错误小图.png", "png", 100);
                    // alert("OPCV异常")
                   
                    //log("可用内存" + device.getAvailMem())
                    exit()
                }
            } finally {
                temp.recycle();
            }
            if (imgxy != null) {
                break;
            } else {

            }
        } else {
            log("没有:" + 分割[index] + "这张图")
        }

    }
    return imgxy;
}

//多图片识别（返回坐标及图名）
function CoordinatesAndPictureName(mode, par, imgname, x, y, w, h) {
    try {
        var img = captureScreen();
    } catch (error) {
        log("CoordinatesAndPictureName截图报错")
    }
    var 分割 = imgname.split("|")
    var 返回值 = {}
    var imgxy = null
    for (let index = 0; index < 分割.length; index++) {
        var temp = images.read("./picture/" + 分割[index] + ".png");
        if (temp != null) {
            try {
                if (mode) {
                    imgxy = images.findImage(img, temp, { region: [x, y, w, h], threshold: par }) // AreaSeekImg(par, img, temp, x, y, w, h)
                } else {
                    imgxy = images.findImage(img, temp, { threshold: par }) // FullSeekImg(par, img, temp);
                }
            } catch (error) {
                log("图片识别（总）报错,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
                if (error.toString().includes("CvException")) {
                    log("openCv报错,退出脚本")
                    images.save(img, "/sdcard/错误大图.png", "png", 100);
                    images.save(temp, "/sdcard/错误小图.png", "png", 100);
                    // alert("OPCV异常")
                    
                    //log("可用内存" + device.getAvailMem())
                    exit()
                }
            } finally {
                temp.recycle();
            }

            if (imgxy != null) {
                返回值.x = imgxy.x
                返回值.y = imgxy.y
                返回值.图名 = 分割[index]
                break;
            } else {

            }
        } else {
            log("没有:" + 分割[index] + "这张图")
        }
    }
    if (imgxy != null) {
        return 返回值
    } else {
        return null
    }
}



function NoScreenshotsImgempt(imgMAX, mode, par, imgname, x, y, w, h) {
    var 分割 = imgname.split("|")
    var imgxy = null
    for (let index = 0; index < 分割.length; index++) {
        var temp = images.read("./picture/" + 分割[index] + ".png");
        if (temp != null) {
            try {
                if (mode) {
                    imgxy = images.findImage(imgMAX, temp, { region: [x, y, w, h], threshold: par }) // AreaSeekImg(par, imgMAX, temp, x, y, w, h)
                } else {
                    imgxy = images.findImage(imgMAX, temp, { threshold: par })// FullSeekImg(par, imgMAX, temp);
                }
            } catch (error) {
                log("图片识别（总）报错,是否范围识图:" + mode + ",图名:" + 分割[index] + ",小图大小:" + temp.getWidth() + "*" + temp.getHeight() + ",范围:" + x + "," + y + "," + w + "," + h + "错误详细:" + error)
                if (error.toString().includes("CvException")) {
                    log("openCv报错,退出脚本")
                    images.save(imgMAX, "/sdcard/错误大图.png", "png", 100);
                    images.save(temp, "/sdcard/错误小图.png", "png", 100);
                    // alert("OPCV异常")
                    
                    exit()
                }
            } finally {
                temp.recycle();
            }
            if (imgxy != null) {
                break;
            } else {

            }
        } else {
            log("没有:" + 分割[index] + "这张图")
        }
    }
    return imgxy;
}

//区域找色
function AreaColor(img, similarity, x, y, w, h, colors1, colors2) {
    try {
        var coloryx = images.findMultiColors(img, colors1, colors2, { region: [x, y, w, h], threshold: similarity })
    } catch (error) {
        log("区域找色报错" + error)
    }
    return coloryx;
}
//全屏找色
function FullColor(img, similarity, colors1, colors2) {
    try {
        var coloryx = images.findMultiColors(img, colors1, colors2, { threshold: similarity })
    } catch (error) {
        log("全屏找色报错" + error)
    }
    return coloryx;
}
//区域找图
function AreaSeekImg(par, img, temp, x, y, w, h) {
    // try {
    if (线程控制 == false) {
        temp.recycle()
        log("中断当前任务并释放内存,准备下一个任务")
        threads.currentThread().interrupt()
    }

    if (temp == null || temp.getWidth() == 0 || temp.getHeight() == 0) {
        log("无法加载图像或图像尺寸为0: ");
        alert("无法加载图像或图像尺寸为0: ")
    }

    if (x >= 0 && y >= 0 && w > 0 && h > 0 && x + w <= img.getWidth() && y + h <= img.getHeight()) {
        var result = images.findImage(img, temp, { region: [x, y, w, h], threshold: par })
    } else {
        log("无效的区域参数: x=" + x + ", y=" + y + ", w=" + w + ", h=" + h);
        alert("无效的区域参数: ")
    }

    // } catch (error) {
    //     log("区域找图报错" + error)
    // }
    return result;
}

//全屏找图
function FullSeekImg(par, img, temp) {
    // try {
    if (线程控制 == false) {
        temp.recycle()
        log("中断当前任务并释放内存,准备下一个任务")
        threads.currentThread().interrupt()
    }
    if (temp == null || temp.getWidth() == 0 || temp.getHeight() == 0) {
        log("全屏无法加载图像或图像尺寸为0: ");
        alert("无法加载图像或图像尺寸为0: ")
    }
    var result = images.findImage(img, temp, { threshold: par })
    // } catch (error) {
    //     log("全屏找图报错，图:"+error)
    // }
    return result;
}


function 画布() {
    // 获取设备宽度和高度
    let dw = device.width;
    let dh = device.height;

    // 玩家对象构造函数
    function Player(x, y, width, height, color) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
        this.color = color;
    }

    // 玩家数量和玩家数组
    let playerCount = 10;
    let players = [];

    // 创建一个悬浮窗口
    let w = floaty.rawWindow(
        <vertical id="root" bg="#ff0000" gravity="center">
            <canvas id="board"></canvas>
        </vertical>
    );

    // 设置悬浮窗口大小
    w.setSize(-1, -1);
    // 每秒执行一次空操作，保持悬浮窗口运行
    setInterval(() => { }, 1000);
    // 在画板上绘制玩家和线条
    w.board.on("draw", (canvas) => {
        // 清空画板
        canvas.drawColor(android.graphics.Color.TRANSPARENT, android.graphics.PorterDuff.Mode.CLEAR);
        var len = players.length;
        for (var i = 0; i < len; i++) {
            let player = players[i];
            player.draw(canvas);
        }
        sleep(50)
    });

    // 玩家对象的绘制方法
    Player.prototype.draw = function (canvas) {
        let paintStroke = new android.graphics.Paint();
        paintStroke.setColor(colors.parseColor(this.color));
        paintStroke.setStyle(android.graphics.Paint.Style.STROKE);
        // 绘制矩形
        canvas.drawRect(
            this.x,
            this.y,
            this.x + this.width,
            this.y + this.height,
            paintStroke
        );
        // 绘制线条
        canvas.drawLine(dw / 2, 0, this.x + this.width / 2, this.y, paintStroke);
    };
    // 循环创建玩家对象并更新玩家数组
    for (var j = 0; j < 100; j++) {
        sleep(100);
        let newPlayers = [];
        for (var i = 0; i < playerCount; i++) {
            let playerWidth = random(30, 100);
            let playerHeight = 2 * playerWidth;
            let color = random(0, 1) ? "#ff0000" : "#00ff00";
            let player = new Player(
                random(0, dw),
                random(0, dh),
                playerWidth,
                playerHeight,
                color
            );
            newPlayers.push(player);
        }
        players = newPlayers;
    }
}

// 获取自Unix纪元（1970年1月1日）以来的天数  
function getDaysSinceEpoch() {
    var now = new Date();
    var epoch = new Date(Date.UTC(1970, 0, 1));
    var millisecondsPerDay = 24 * 60 * 60 * 1000;
    return Math.floor((now - epoch) / millisecondsPerDay);
}

// 获取当前是Unix纪元以来的第几周  
function getTimestampWeekNumber() {
    var days = getDaysSinceEpoch();
    // 1970年1月1日是周四，所以我们需要根据周四来调整周数的计算  
    var adjustedDays = days + 3; // 加上3天使得1970年1月1日成为一周的第一天（周一）  
    var weekNumber = Math.ceil(adjustedDays / 7); // 每周7天，向上取整得到周数  
    return weekNumber;
}  